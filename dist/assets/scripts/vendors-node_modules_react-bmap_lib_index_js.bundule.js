/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is not neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkyd_react_generator"] = self["webpackChunkyd_react_generator"] || []).push([["vendors-node_modules_react-bmap_lib_index_js"],{

/***/ "./node_modules/kits-js/lib/bmap/createPoint.js":
/*!******************************************************!*\
  !*** ./node_modules/kits-js/lib/bmap/createPoint.js ***!
  \******************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__ */
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n/**\n * \n * @param {*} pt \n * pt demo1: '114.54,40.33'\n * pt demo2: [114.54,40.33]\n * pt demo3: {lng:114.54,lat:40.33}\n */\nvar createBmapPoint = function createBmapPoint(pt) {\n    var onlyData = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n    var lng = void 0;\n    var lat = void 0;\n    try {\n        if (typeof pt === 'string') {\n            var lnglatstrArr = pt.split(',');\n            lng = JSON.parse(lnglatstrArr[0].match(/[0-9]+\\.?[0-9]{0,}/)[0]);\n            lat = JSON.parse(lnglatstrArr[1].match(/[0-9]+\\.?[0-9]{0,}/)[0]);\n        } else if (pt instanceof Array) {\n            lng = JSON.parse(pt[0]);\n            lat = JSON.parse(pt[1]);\n        } else if (pt instanceof Object) {\n            lng = pt.lng;\n            lat = pt.lat;\n        }\n        if (onlyData) {\n            return {\n                lng: lng,\n                lat: lat\n            };\n        } else {\n            var mpoint = new BMap.Point(lng, lat);\n            return mpoint;\n        }\n    } catch (error) {\n        console.log('create BmapPoint error', 'Please input data like this:  1. \"114.54,40.33\",  2.[114.54,40.33],  3.{lng:114.54,lat:40.33}');\n    }\n};\nexports.default = createBmapPoint;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/kits-js/lib/bmap/createPoint.js?");

/***/ }),

/***/ "./node_modules/kits-js/lib/bmap/getPoints.js":
/*!****************************************************!*\
  !*** ./node_modules/kits-js/lib/bmap/getPoints.js ***!
  \****************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar _createPoint = __webpack_require__(/*! ./createPoint.js */ \"./node_modules/kits-js/lib/bmap/createPoint.js\");\n\nvar _createPoint2 = _interopRequireDefault(_createPoint);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar getPoints = function getPoints(border) {\n    var originalData = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n    var polygons = [];\n    var borders = border.split('|');\n\n    borders.forEach(function (border) {\n        var arr = border ? border.split(',') : [];\n        var objArr = [];\n        var i = 0;\n        while (i < arr.length - 1) {\n            var obj = {\n                lng: parseFloat(arr[i]),\n                lat: parseFloat(arr[i + 1])\n            };\n            if (originalData) {\n                objArr.push(obj);\n            } else {\n                var bPoint = (0, _createPoint2.default)(obj);\n                objArr.push(bPoint);\n            }\n            i += 2;\n        }\n        polygons.push(objArr);\n    });\n    if (polygons.length == 1) {\n        polygons = polygons[0];\n    }\n    return polygons;\n}; /**\n    * src support multi data types\n    * 1. multi points array seperated by |\n    *  \"114.33,40.22,114.33,40.22,114.33,40.22|114.33,40.22,114.33,40.22,114.33,40.22\"\n    * 2. just like: 'lng,lat,lnt,lat,lnt,lat,lnt,lat'\n    *  \"114.33,40.22,114.33,40.22,114.33,40.22\"\n    */\nexports.default = getPoints;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/kits-js/lib/bmap/getPoints.js?");

/***/ }),

/***/ "./node_modules/kits-js/lib/bmap/index.js":
/*!************************************************!*\
  !*** ./node_modules/kits-js/lib/bmap/index.js ***!
  \************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar _createPoint = __webpack_require__(/*! ./createPoint */ \"./node_modules/kits-js/lib/bmap/createPoint.js\");\n\nvar _createPoint2 = _interopRequireDefault(_createPoint);\n\nvar _getPoints = __webpack_require__(/*! ./getPoints.js */ \"./node_modules/kits-js/lib/bmap/getPoints.js\");\n\nvar _getPoints2 = _interopRequireDefault(_getPoints);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar bmap = {\n    createPoint: _createPoint2.default,\n    getPoints: _getPoints2.default\n};\nexports.default = bmap;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/kits-js/lib/bmap/index.js?");

/***/ }),

/***/ "./node_modules/kits-js/lib/http/download.js":
/*!***************************************************!*\
  !*** ./node_modules/kits-js/lib/http/download.js ***!
  \***************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__ */
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n/* eslint-disable */\n/**\n * @file http\n */\n/* globals XMLHttpRequest window location document*/\n/**\n * get the data from url\n * auto use jsonp or ajax\n * @params 传入的参数\n * @params.url\n */\nfunction fetch(params) {\n    var fetchObj = null;\n    if (/^http(s{0,1}):\\/\\//.test(params.url)) {\n        var pageLoc = location.href.match(/^https{0,1}:\\/\\/(.+?)(?=\\/|$)/);\n        var ajaxLoc = params.url.match(/^https{0,1}:\\/\\/(.+?)(?=\\/|$)/);\n        if (pageLoc.length === 2 && ajaxLoc.length === 2 && ajaxLoc[1] === pageLoc[1]) {\n            fetchObj = this.ajax(params);\n        } else {\n            fetchObj = this.jsonp(params);\n        }\n    } else {\n        fetchObj = this.ajax(params);\n    }\n    return fetchObj;\n}\n\n/**\n * @params.method\n * @params.data\n * @params.url\n * @params.fail\n * @params.success\n */\nfunction download(url, fileName) {\n    var a = document.createElement('a');\n    a.style.display = 'none';\n    // 字符内容转变成blob地址\n    var blob = new Blob([url]);\n    a.href = URL.createObjectURL(blob);\n    a.href = url;\n    if (fileName) {\n        a.download = fileName;\n    }\n    document.body.appendChild(a);\n    // 触发点击\n    a.click();\n    // 然后移除\n    document.body.removeChild(a);\n    // var iframe  = document.createElement(\"iframe\");\n    // document.body.appendChild(iframe); \t\t\n    // iframe.src = url;\n    // iframe.style.display = \"none\";\n}\n\nexports.default = download;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/kits-js/lib/http/download.js?");

/***/ }),

/***/ "./node_modules/kits-js/lib/http/http.js":
/*!***********************************************!*\
  !*** ./node_modules/kits-js/lib/http/http.js ***!
  \***********************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__ */
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n/**\n * @file http\n */\n\n/* globals XMLHttpRequest window location document*/\n/* eslint-disable */\n\n/**\n * get the data from url\n * auto use jsonp or ajax\n * @params 传入的参数\n * @params.method\n * @params.data\n * @params.url\n * @params.fail\n * @params.success\n */\nfunction fetch(params) {\n    var fetchObj = null;\n    if (/^http(s{0,1}):\\/\\//.test(params.url)) {\n        var pageLoc = location.href.match(/^https{0,1}:\\/\\/(.+?)(?=\\/|$)/);\n        var ajaxLoc = params.url.match(/^https{0,1}:\\/\\/(.+?)(?=\\/|$)/);\n        if (pageLoc.length === 2 && ajaxLoc.length === 2 && ajaxLoc[1] === pageLoc[1]) {\n            fetchObj = this.ajax(params);\n        } else {\n            fetchObj = this.jsonp(params);\n        }\n    } else {\n        fetchObj = this.ajax(params);\n    }\n    return fetchObj;\n}\n\n/**\n * @params.method\n * @params.data\n * @params.url\n * @params.fail\n * @params.success\n */\nfunction ajax(params) {\n    var _this = this;\n\n    var client = new XMLHttpRequest();\n    var method = params.method || 'GET';\n    var isAbort = false;\n    client.open(method, params.url);\n    // client.setRequestHeader('Content-Type', 'application/json');\n    client.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n    client.withCredentials = true;\n    if (method === 'GET') {\n        client.send();\n    } else {\n        client.withCredentials = true;\n        client.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n        var dataStr = Object.keys(params.data).map(function (key) {\n            return key + '=' + params.data[key];\n        });\n        client.send(dataStr.join('&'));\n    }\n    // timeout\n    var timeout = setTimeout(function () {\n        client.abort();\n        params.fail && params.fail('timeout');\n    }, 10000);\n    //\n    client.onload = function onload() {\n        if (this.status >= 200 && this.status < 300) {\n            params.success && params.success(JSON.parse(this.response));\n        } else {\n            params.fail && params.fail(this.statusText);\n        }\n        params.complete && params.complete(JSON.parse(this.response));\n        clearTimeout(timeout);\n    };\n    client.onerror = function () {\n        params.fail && params.fail(_this.statusText);\n        clearTimeout(timeout);\n    };\n\n    return {\n        abort: function abort() {\n            if (!isAbort) {\n                isAbort = true;\n                client.abort();\n            }\n        },\n        params: params\n    };\n}\n\n/**\n * @params 参数\n * @params.url\n * @params.fail\n * @params.success\n */\nfunction jsonp(params) {\n    var callbackID = 'jsonp_' + +new Date() + '_' + parseInt(Math.random() * 10e6, 10);\n    var script = document.createElement('script');\n    var isAbort = false;\n\n    params.url += params.url.indexOf('?') === '-1' ? '?' : '&';\n    params.url += 'callback=' + callbackID;\n    script.src = params.url;\n    document.head.appendChild(script);\n    var timeout = setTimeout(function () {\n        if (window[callbackID] !== null) {\n            window[callbackID] = null;\n            script.parentElement.removeChild(script);\n            // console.log('abortStatus:' + isAbort + params.requestId);\n            params.fail && params.fail({\n                error: null,\n                msg: 'timeout'\n            });\n            params.complete && params.complete(JSON.parse());\n        }\n    }, 10000);\n\n    script.addEventListener('error', function (e) {\n        window[callbackID] = null;\n        script.parentElement.removeChild(script);\n        clearTimeout(timeout);\n        // console.log('abortStatus:' + isAbort + params.requestId);\n        if (!isAbort) {\n            params.fail && params.fail({\n                error: e,\n                msg: 'loaderror'\n            });\n            params.complete && params.complete();\n        }\n    });\n\n    window[callbackID] = function (data) {\n        // console.log('abortStatus:' + isAbort + params.requestId);\n        clearTimeout(timeout);\n        if (!isAbort) {\n            params.success(data);\n            params.complete && params.complete();\n        }\n        window[callbackID] = null;\n        script.parentElement.removeChild(script);\n    };\n\n    return {\n        abort: function abort() {\n            // console.log('abort' + params.requestId);\n            clearTimeout(timeout);\n            isAbort = true;\n        },\n        params: params\n    };\n}\n\nvar http = {\n    fetch: fetch,\n    ajax: ajax,\n    jsonp: jsonp\n};\n\nexports.default = http;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/kits-js/lib/http/http.js?");

/***/ }),

/***/ "./node_modules/kits-js/lib/http/index.js":
/*!************************************************!*\
  !*** ./node_modules/kits-js/lib/http/index.js ***!
  \************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\n\nvar _http = __webpack_require__(/*! ./http.js */ \"./node_modules/kits-js/lib/http/http.js\");\n\nvar _http2 = _interopRequireDefault(_http);\n\nvar _download = __webpack_require__(/*! ./download.js */ \"./node_modules/kits-js/lib/http/download.js\");\n\nvar _download2 = _interopRequireDefault(_download);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_http2.default.download = _download2.default;\n\nexports.default = _http2.default;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/kits-js/lib/http/index.js?");

/***/ }),

/***/ "./node_modules/kits-js/lib/index.js":
/*!*******************************************!*\
  !*** ./node_modules/kits-js/lib/index.js ***!
  \*******************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export bmap [provided] [no usage info] [missing usage info prevents renaming] */
/*! export http [provided] [no usage info] [missing usage info prevents renaming] */
/*! export obj [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\n\nvar _index = __webpack_require__(/*! ./object/index.js */ \"./node_modules/kits-js/lib/object/index.js\");\n\nObject.defineProperty(exports, \"obj\", ({\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_index).default;\n  }\n}));\n\nvar _index2 = __webpack_require__(/*! ./bmap/index.js */ \"./node_modules/kits-js/lib/bmap/index.js\");\n\nObject.defineProperty(exports, \"bmap\", ({\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_index2).default;\n  }\n}));\n\nvar _index3 = __webpack_require__(/*! ./http/index.js */ \"./node_modules/kits-js/lib/http/index.js\");\n\nObject.defineProperty(exports, \"http\", ({\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_index3).default;\n  }\n}));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/kits-js/lib/index.js?");

/***/ }),

/***/ "./node_modules/kits-js/lib/object/deepClone.js":
/*!******************************************************!*\
  !*** ./node_modules/kits-js/lib/object/deepClone.js ***!
  \******************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__ */
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction isObj(obj) {\n    return ((typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) === 'object' || typeof obj === 'function') && obj !== null;\n}\n\n// 深度克隆\nfunction deepClone(obj) {\n    var hash = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new WeakMap();\n\n    var cloneObj = void 0;\n    var Constructor = obj.constructor;\n    switch (Constructor) {\n        case RegExp:\n            cloneObj = new Constructor(obj);\n            break;\n        case Date:\n            cloneObj = new Constructor(obj.getTime());\n            break;\n        default:\n            if (hash.has(obj)) return hash.get(obj);\n            cloneObj = new Constructor();\n            hash.set(obj, cloneObj);\n    }\n    for (var key in obj) {\n        cloneObj[key] = isObj(obj[key]) ? deepClone(obj[key], hash) : obj[key];\n    }\n    return cloneObj;\n}\n\n// const deepClone = (obj) => {\n//     var proto = Object.getPrototypeOf(obj);\n//     return Object.assign({}, Object.create(proto), obj);\n\n// }\nexports.default = deepClone;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/kits-js/lib/object/deepClone.js?");

/***/ }),

/***/ "./node_modules/kits-js/lib/object/diff.js":
/*!*************************************************!*\
  !*** ./node_modules/kits-js/lib/object/diff.js ***!
  \*************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__ */
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\n/**\n *方法说明\n * @method 找出src2与src1不同的部分      \n * @param {Object} src1 比较的基本对象\n * @param {Object} src2 被比较的对象\n * @return {Object} diffObj 返回一个新的Object对象diffObj\n *         src1有，src2没有的部分 diffObj[k]=undefined;\n *         src1没有，src2有的部分 diffObj[k]=src2[k];\n */\nvar diff = function diff(src1, src2) {\n    var diffObj = {};\n    var _diff = function _diff(base, src, df) {\n        var ko = {};\n        base && Object.keys(base).map(function (k) {\n            ko[k] = true;\n        });\n        src && Object.keys(src).map(function (k) {\n            ko[k] = true;\n        });\n\n        for (var k in ko) {\n            if (base[k] && Object.prototype.toString.call(base[k]) == '[object Object]' && src[k] && Object.prototype.toString.call(src[k]) == '[object Object]') {\n                if (JSON.stringify(base[k]) !== JSON.stringify(src[k])) {\n                    if (!df[k]) {\n                        df[k] = {};\n                    }\n                    var _df = df[k];\n                    _diff(base[k], src[k], _df);\n                } else {\n                    df[k] = src[k];\n                }\n            } else {\n                df[k] = src[k];\n            }\n        }\n    };\n    _diff(src1, src2, diffObj);\n    if (Object.keys(diffObj).length == 0) {\n        diffObj = null;\n    }\n    return diffObj;\n};\n\nexports.default = diff;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/kits-js/lib/object/diff.js?");

/***/ }),

/***/ "./node_modules/kits-js/lib/object/index.js":
/*!**************************************************!*\
  !*** ./node_modules/kits-js/lib/object/index.js ***!
  \**************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar _deepClone = __webpack_require__(/*! ./deepClone.js */ \"./node_modules/kits-js/lib/object/deepClone.js\");\n\nvar _deepClone2 = _interopRequireDefault(_deepClone);\n\nvar _merge = __webpack_require__(/*! ./merge.js */ \"./node_modules/kits-js/lib/object/merge.js\");\n\nvar _merge2 = _interopRequireDefault(_merge);\n\nvar _diff = __webpack_require__(/*! ./diff.js */ \"./node_modules/kits-js/lib/object/diff.js\");\n\nvar _diff2 = _interopRequireDefault(_diff);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar extend = {\n    deepClone: _deepClone2.default,\n    merge: _merge2.default,\n    diff: _diff2.default\n};\nexports.default = extend;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/kits-js/lib/object/index.js?");

/***/ }),

/***/ "./node_modules/kits-js/lib/object/merge.js":
/*!**************************************************!*\
  !*** ./node_modules/kits-js/lib/object/merge.js ***!
  \**************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__ */
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar merge = function merge(tar, source) {\n    var merge = function merge(origin, modifys) {\n        for (var k in modifys) {\n            if (Object.prototype.toString.call(modifys[k]) == '[object Object]') {\n                if (_typeof(origin[k]) !== 'object') {\n                    origin[k] = {};\n                }\n                merge(origin[k], modifys[k]);\n            } else {\n                origin[k] = modifys[k];\n            }\n        }\n    };\n    var cp = JSON.parse(JSON.stringify(tar));\n    merge(cp, source);\n    return cp;\n};\nexports.default = merge;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/kits-js/lib/object/merge.js?");

/***/ }),

/***/ "./node_modules/mapv/build/mapv.js":
/*!*****************************************!*\
  !*** ./node_modules/mapv/build/mapv.js ***!
  \*****************************************/
/*! unknown exports (runtime-defined) */
/*! runtime requirements: __webpack_exports__, top-level-this-exports */
/*! CommonJS bailout: this is used directly at 5:2-6 */
/*! CommonJS bailout: exports is used directly at 2:72-79 */
/***/ (function(__unused_webpack_module, exports) {

eval("(function (global, factory) {\n\t true ? factory(exports) :\n\t0;\n}(this, (function (exports) { 'use strict';\n\nvar version = \"2.0.56\";\n\n/**\n * @author kyle / http://nikai.us/\n */\n\nvar clear = function (context) {\n    context && context.clearRect && context.clearRect(0, 0, context.canvas.width, context.canvas.height);\n    //context.canvas.width = context.canvas.width;\n    //context.canvas.height = context.canvas.height;\n};\n\n/**\n * @author kyle / http://nikai.us/\n */\n\nvar resolutionScale$1 = function (context) {\n    var devicePixelRatio = window.devicePixelRatio || 1;\n    context.canvas.width = context.canvas.width * devicePixelRatio;\n    context.canvas.height = context.canvas.height * devicePixelRatio;\n    context.canvas.style.width = context.canvas.width / devicePixelRatio + 'px';\n    context.canvas.style.height = context.canvas.height / devicePixelRatio + 'px';\n    context.scale(devicePixelRatio, devicePixelRatio);\n};\n\nfunction Event() {\n  this._subscribers = {}; // event subscribers\n}\n\n/**\n * Subscribe to an event, add an event listener\n * @param {String} event        Event name. Available events: 'put', 'update',\n *                              'remove'\n * @param {function} callback   Callback method. Called with three parameters:\n *                                  {String} event\n *                                  {Object | null} params\n *                                  {String | Number} senderId\n */\nEvent.prototype.on = function (event, callback) {\n  var subscribers = this._subscribers[event];\n  if (!subscribers) {\n    subscribers = [];\n    this._subscribers[event] = subscribers;\n  }\n\n  subscribers.push({\n    callback: callback\n  });\n};\n\n/**\n * Unsubscribe from an event, remove an event listener\n * @param {String} event\n * @param {function} callback\n */\nEvent.prototype.off = function (event, callback) {\n  var subscribers = this._subscribers[event];\n  if (subscribers) {\n    //this._subscribers[event] = subscribers.filter(listener => listener.callback != callback);\n    for (var i = 0; i < subscribers.length; i++) {\n      if (subscribers[i].callback == callback) {\n        subscribers.splice(i, 1);\n        i--;\n      }\n    }\n  }\n};\n\n/**\n * Trigger an event\n * @param {String} event\n * @param {Object | null} params\n * @param {String} [senderId]       Optional id of the sender.\n * @private\n */\nEvent.prototype._trigger = function (event, params, senderId) {\n  if (event == '*') {\n    throw new Error('Cannot trigger event *');\n  }\n\n  var subscribers = [];\n  if (event in this._subscribers) {\n    subscribers = subscribers.concat(this._subscribers[event]);\n  }\n  if ('*' in this._subscribers) {\n    subscribers = subscribers.concat(this._subscribers['*']);\n  }\n\n  for (var i = 0, len = subscribers.length; i < len; i++) {\n    var subscriber = subscribers[i];\n    if (subscriber.callback) {\n      subscriber.callback(event, params, senderId || null);\n    }\n  }\n};\n\n/**\n * get the center by the city name\n * @author kyle / http://nikai.us/\n */\n\nvar citycenter = { municipalities: [{ n: \"北京\", g: \"116.395645,39.929986|12\" }, { n: \"上海\", g: \"121.487899,31.249162|12\" }, { n: \"天津\", g: \"117.210813,39.14393|12\" }, { n: \"重庆\", g: \"106.530635,29.544606|12\" }], provinces: [{ n: \"安徽\", g: \"117.216005,31.859252|8\", cities: [{ n: \"合肥\", g: \"117.282699,31.866942|12\" }, { n: \"安庆\", g: \"117.058739,30.537898|13\" }, { n: \"蚌埠\", g: \"117.35708,32.929499|13\" }, { n: \"亳州\", g: \"115.787928,33.871211|13\" }, { n: \"巢湖\", g: \"117.88049,31.608733|13\" }, { n: \"池州\", g: \"117.494477,30.660019|14\" }, { n: \"滁州\", g: \"118.32457,32.317351|13\" }, { n: \"阜阳\", g: \"115.820932,32.901211|13\" }, { n: \"淮北\", g: \"116.791447,33.960023|13\" }, { n: \"淮南\", g: \"117.018639,32.642812|13\" }, { n: \"黄山\", g: \"118.29357,29.734435|13\" }, { n: \"六安\", g: \"116.505253,31.755558|13\" }, { n: \"马鞍山\", g: \"118.515882,31.688528|13\" }, { n: \"宿州\", g: \"116.988692,33.636772|13\" }, { n: \"铜陵\", g: \"117.819429,30.94093|14\" }, { n: \"芜湖\", g: \"118.384108,31.36602|12\" }, { n: \"宣城\", g: \"118.752096,30.951642|13\" }] }, { n: \"福建\", g: \"117.984943,26.050118|8\", cities: [{ n: \"福州\", g: \"119.330221,26.047125|12\" }, { n: \"龙岩\", g: \"117.017997,25.078685|13\" }, { n: \"南平\", g: \"118.181883,26.643626|13\" }, { n: \"宁德\", g: \"119.542082,26.656527|14\" }, { n: \"莆田\", g: \"119.077731,25.44845|13\" }, { n: \"泉州\", g: \"118.600362,24.901652|12\" }, { n: \"三明\", g: \"117.642194,26.270835|14\" }, { n: \"厦门\", g: \"118.103886,24.489231|12\" }, { n: \"漳州\", g: \"117.676205,24.517065|12\" }] }, { n: \"甘肃\", g: \"102.457625,38.103267|6\", cities: [{ n: \"兰州\", g: \"103.823305,36.064226|12\" }, { n: \"白银\", g: \"104.171241,36.546682|13\" }, { n: \"定西\", g: \"104.626638,35.586056|13\" }, { n: \"甘南州\", g: \"102.917442,34.992211|14\" }, { n: \"嘉峪关\", g: \"98.281635,39.802397|13\" }, { n: \"金昌\", g: \"102.208126,38.516072|13\" }, { n: \"酒泉\", g: \"98.508415,39.741474|13\" }, { n: \"临夏州\", g: \"103.215249,35.598514|13\" }, { n: \"陇南\", g: \"104.934573,33.39448|14\" }, { n: \"平凉\", g: \"106.688911,35.55011|13\" }, { n: \"庆阳\", g: \"107.644227,35.726801|13\" }, { n: \"天水\", g: \"105.736932,34.584319|13\" }, { n: \"武威\", g: \"102.640147,37.933172|13\" }, { n: \"张掖\", g: \"100.459892,38.93932|13\" }] }, { n: \"广东\", g: \"113.394818,23.408004|8\", cities: [{ n: \"广州\", g: \"113.30765,23.120049|12\" }, { n: \"潮州\", g: \"116.630076,23.661812|13\" }, { n: \"东莞\", g: \"113.763434,23.043024|12\" }, { n: \"佛山\", g: \"113.134026,23.035095|13\" }, { n: \"河源\", g: \"114.713721,23.757251|12\" }, { n: \"惠州\", g: \"114.410658,23.11354|12\" }, { n: \"江门\", g: \"113.078125,22.575117|13\" }, { n: \"揭阳\", g: \"116.379501,23.547999|13\" }, { n: \"茂名\", g: \"110.931245,21.668226|13\" }, { n: \"梅州\", g: \"116.126403,24.304571|13\" }, { n: \"清远\", g: \"113.040773,23.698469|13\" }, { n: \"汕头\", g: \"116.72865,23.383908|13\" }, { n: \"汕尾\", g: \"115.372924,22.778731|14\" }, { n: \"韶关\", g: \"113.594461,24.80296|13\" }, { n: \"深圳\", g: \"114.025974,22.546054|12\" }, { n: \"阳江\", g: \"111.97701,21.871517|14\" }, { n: \"云浮\", g: \"112.050946,22.937976|13\" }, { n: \"湛江\", g: \"110.365067,21.257463|13\" }, { n: \"肇庆\", g: \"112.479653,23.078663|13\" }, { n: \"中山\", g: \"113.42206,22.545178|12\" }, { n: \"珠海\", g: \"113.562447,22.256915|13\" }] }, { n: \"广西\", g: \"108.924274,23.552255|7\", cities: [{ n: \"南宁\", g: \"108.297234,22.806493|12\" }, { n: \"百色\", g: \"106.631821,23.901512|13\" }, { n: \"北海\", g: \"109.122628,21.472718|13\" }, { n: \"崇左\", g: \"107.357322,22.415455|14\" }, { n: \"防城港\", g: \"108.351791,21.617398|15\" }, { n: \"桂林\", g: \"110.26092,25.262901|12\" }, { n: \"贵港\", g: \"109.613708,23.103373|13\" }, { n: \"河池\", g: \"108.069948,24.699521|14\" }, { n: \"贺州\", g: \"111.552594,24.411054|14\" }, { n: \"来宾\", g: \"109.231817,23.741166|14\" }, { n: \"柳州\", g: \"109.422402,24.329053|12\" }, { n: \"钦州\", g: \"108.638798,21.97335|13\" }, { n: \"梧州\", g: \"111.305472,23.485395|13\" }, { n: \"玉林\", g: \"110.151676,22.643974|14\" }] }, { n: \"贵州\", g: \"106.734996,26.902826|8\", cities: [{ n: \"贵阳\", g: \"106.709177,26.629907|12\" }, { n: \"安顺\", g: \"105.92827,26.228595|13\" }, { n: \"毕节地区\", g: \"105.300492,27.302612|14\" }, { n: \"六盘水\", g: \"104.852087,26.591866|13\" }, { n: \"铜仁地区\", g: \"109.196161,27.726271|14\" }, { n: \"遵义\", g: \"106.93126,27.699961|13\" }, { n: \"黔西南州\", g: \"104.900558,25.095148|11\" }, { n: \"黔东南州\", g: \"107.985353,26.583992|11\" }, { n: \"黔南州\", g: \"107.523205,26.264536|11\" }] }, { n: \"海南\", g: \"109.733755,19.180501|9\", cities: [{ n: \"海口\", g: \"110.330802,20.022071|13\" }, { n: \"白沙\", g: \"109.358586,19.216056|12\" }, { n: \"保亭\", g: \"109.656113,18.597592|12\" }, { n: \"昌江\", g: \"109.0113,19.222483|12\" }, { n: \"儋州\", g: \"109.413973,19.571153|13\" }, { n: \"澄迈\", g: \"109.996736,19.693135|13\" }, { n: \"东方\", g: \"108.85101,18.998161|13\" }, { n: \"定安\", g: \"110.32009,19.490991|13\" }, { n: \"琼海\", g: \"110.414359,19.21483|13\" }, { n: \"琼中\", g: \"109.861849,19.039771|12\" }, { n: \"乐东\", g: \"109.062698,18.658614|12\" }, { n: \"临高\", g: \"109.724101,19.805922|13\" }, { n: \"陵水\", g: \"109.948661,18.575985|12\" }, { n: \"三亚\", g: \"109.522771,18.257776|12\" }, { n: \"屯昌\", g: \"110.063364,19.347749|13\" }, { n: \"万宁\", g: \"110.292505,18.839886|13\" }, { n: \"文昌\", g: \"110.780909,19.750947|13\" }, { n: \"五指山\", g: \"109.51775,18.831306|13\" }] }, { n: \"河北\", g: \"115.661434,38.61384|7\", cities: [{ n: \"石家庄\", g: \"114.522082,38.048958|12\" }, { n: \"保定\", g: \"115.49481,38.886565|13\" }, { n: \"沧州\", g: \"116.863806,38.297615|13\" }, { n: \"承德\", g: \"117.933822,40.992521|14\" }, { n: \"邯郸\", g: \"114.482694,36.609308|13\" }, { n: \"衡水\", g: \"115.686229,37.746929|13\" }, { n: \"廊坊\", g: \"116.703602,39.518611|13\" }, { n: \"秦皇岛\", g: \"119.604368,39.945462|12\" }, { n: \"唐山\", g: \"118.183451,39.650531|13\" }, { n: \"邢台\", g: \"114.520487,37.069531|13\" }, { n: \"张家口\", g: \"114.893782,40.811188|13\" }] }, { n: \"河南\", g: \"113.486804,34.157184|7\", cities: [{ n: \"郑州\", g: \"113.649644,34.75661|12\" }, { n: \"安阳\", g: \"114.351807,36.110267|12\" }, { n: \"鹤壁\", g: \"114.29777,35.755426|13\" }, { n: \"焦作\", g: \"113.211836,35.234608|13\" }, { n: \"开封\", g: \"114.351642,34.801854|13\" }, { n: \"洛阳\", g: \"112.447525,34.657368|12\" }, { n: \"漯河\", g: \"114.046061,33.576279|13\" }, { n: \"南阳\", g: \"112.542842,33.01142|13\" }, { n: \"平顶山\", g: \"113.300849,33.745301|13\" }, { n: \"濮阳\", g: \"115.026627,35.753298|12\" }, { n: \"三门峡\", g: \"111.181262,34.78332|13\" }, { n: \"商丘\", g: \"115.641886,34.438589|13\" }, { n: \"新乡\", g: \"113.91269,35.307258|13\" }, { n: \"信阳\", g: \"114.085491,32.128582|13\" }, { n: \"许昌\", g: \"113.835312,34.02674|13\" }, { n: \"周口\", g: \"114.654102,33.623741|13\" }, { n: \"驻马店\", g: \"114.049154,32.983158|13\" }] }, { n: \"黑龙江\", g: \"128.047414,47.356592|6\", cities: [{ n: \"哈尔滨\", g: \"126.657717,45.773225|12\" }, { n: \"大庆\", g: \"125.02184,46.596709|12\" }, { n: \"大兴安岭地区\", g: \"124.196104,51.991789|10\" }, { n: \"鹤岗\", g: \"130.292472,47.338666|13\" }, { n: \"黑河\", g: \"127.50083,50.25069|14\" }, { n: \"鸡西\", g: \"130.941767,45.32154|13\" }, { n: \"佳木斯\", g: \"130.284735,46.81378|12\" }, { n: \"牡丹江\", g: \"129.608035,44.588521|13\" }, { n: \"七台河\", g: \"131.019048,45.775005|14\" }, { n: \"齐齐哈尔\", g: \"123.987289,47.3477|13\" }, { n: \"双鸭山\", g: \"131.171402,46.655102|13\" }, { n: \"绥化\", g: \"126.989095,46.646064|13\" }, { n: \"伊春\", g: \"128.910766,47.734685|14\" }] }, { n: \"湖北\", g: \"112.410562,31.209316|8\", cities: [{ n: \"武汉\", g: \"114.3162,30.581084|12\" }, { n: \"鄂州\", g: \"114.895594,30.384439|14\" }, { n: \"恩施\", g: \"109.517433,30.308978|14\" }, { n: \"黄冈\", g: \"114.906618,30.446109|14\" }, { n: \"黄石\", g: \"115.050683,30.216127|13\" }, { n: \"荆门\", g: \"112.21733,31.042611|13\" }, { n: \"荆州\", g: \"112.241866,30.332591|12\" }, { n: \"潜江\", g: \"112.768768,30.343116|13\" }, { n: \"神农架林区\", g: \"110.487231,31.595768|13\" }, { n: \"十堰\", g: \"110.801229,32.636994|13\" }, { n: \"随州\", g: \"113.379358,31.717858|13\" }, { n: \"天门\", g: \"113.12623,30.649047|13\" }, { n: \"仙桃\", g: \"113.387448,30.293966|13\" }, { n: \"咸宁\", g: \"114.300061,29.880657|13\" }, { n: \"襄阳\", g: \"112.176326,32.094934|12\" }, { n: \"孝感\", g: \"113.935734,30.927955|13\" }, { n: \"宜昌\", g: \"111.310981,30.732758|13\" }] }, { n: \"湖南\", g: \"111.720664,27.695864|7\", cities: [{ n: \"长沙\", g: \"112.979353,28.213478|12\" }, { n: \"常德\", g: \"111.653718,29.012149|12\" }, { n: \"郴州\", g: \"113.037704,25.782264|13\" }, { n: \"衡阳\", g: \"112.583819,26.898164|13\" }, { n: \"怀化\", g: \"109.986959,27.557483|13\" }, { n: \"娄底\", g: \"111.996396,27.741073|13\" }, { n: \"邵阳\", g: \"111.461525,27.236811|13\" }, { n: \"湘潭\", g: \"112.935556,27.835095|13\" }, { n: \"湘西州\", g: \"109.745746,28.317951|14\" }, { n: \"益阳\", g: \"112.366547,28.588088|13\" }, { n: \"永州\", g: \"111.614648,26.435972|13\" }, { n: \"岳阳\", g: \"113.146196,29.378007|13\" }, { n: \"张家界\", g: \"110.48162,29.124889|13\" }, { n: \"株洲\", g: \"113.131695,27.827433|13\" }] }, { n: \"江苏\", g: \"119.368489,33.013797|8\", cities: [{ n: \"南京\", g: \"118.778074,32.057236|12\" }, { n: \"常州\", g: \"119.981861,31.771397|12\" }, { n: \"淮安\", g: \"119.030186,33.606513|12\" }, { n: \"连云港\", g: \"119.173872,34.601549|12\" }, { n: \"南通\", g: \"120.873801,32.014665|12\" }, { n: \"苏州\", g: \"120.619907,31.317987|12\" }, { n: \"宿迁\", g: \"118.296893,33.95205|13\" }, { n: \"泰州\", g: \"119.919606,32.476053|13\" }, { n: \"无锡\", g: \"120.305456,31.570037|12\" }, { n: \"徐州\", g: \"117.188107,34.271553|12\" }, { n: \"盐城\", g: \"120.148872,33.379862|12\" }, { n: \"扬州\", g: \"119.427778,32.408505|13\" }, { n: \"镇江\", g: \"119.455835,32.204409|13\" }] }, { n: \"江西\", g: \"115.676082,27.757258|7\", cities: [{ n: \"南昌\", g: \"115.893528,28.689578|12\" }, { n: \"抚州\", g: \"116.360919,27.954545|13\" }, { n: \"赣州\", g: \"114.935909,25.845296|13\" }, { n: \"吉安\", g: \"114.992039,27.113848|13\" }, { n: \"景德镇\", g: \"117.186523,29.303563|12\" }, { n: \"九江\", g: \"115.999848,29.71964|13\" }, { n: \"萍乡\", g: \"113.859917,27.639544|13\" }, { n: \"上饶\", g: \"117.955464,28.457623|13\" }, { n: \"新余\", g: \"114.947117,27.822322|13\" }, { n: \"宜春\", g: \"114.400039,27.81113|13\" }, { n: \"鹰潭\", g: \"117.03545,28.24131|13\" }] }, { n: \"吉林\", g: \"126.262876,43.678846|7\", cities: [{ n: \"长春\", g: \"125.313642,43.898338|12\" }, { n: \"白城\", g: \"122.840777,45.621086|13\" }, { n: \"白山\", g: \"126.435798,41.945859|13\" }, { n: \"吉林\", g: \"126.564544,43.871988|12\" }, { n: \"辽源\", g: \"125.133686,42.923303|13\" }, { n: \"四平\", g: \"124.391382,43.175525|12\" }, { n: \"松原\", g: \"124.832995,45.136049|13\" }, { n: \"通化\", g: \"125.94265,41.736397|13\" }, { n: \"延边\", g: \"129.485902,42.896414|13\" }] }, { n: \"辽宁\", g: \"122.753592,41.6216|8\", cities: [{ n: \"沈阳\", g: \"123.432791,41.808645|12\" }, { n: \"鞍山\", g: \"123.007763,41.118744|13\" }, { n: \"本溪\", g: \"123.778062,41.325838|12\" }, { n: \"朝阳\", g: \"120.446163,41.571828|13\" }, { n: \"大连\", g: \"121.593478,38.94871|12\" }, { n: \"丹东\", g: \"124.338543,40.129023|12\" }, { n: \"抚顺\", g: \"123.92982,41.877304|12\" }, { n: \"阜新\", g: \"121.660822,42.01925|14\" }, { n: \"葫芦岛\", g: \"120.860758,40.74303|13\" }, { n: \"锦州\", g: \"121.147749,41.130879|13\" }, { n: \"辽阳\", g: \"123.172451,41.273339|14\" }, { n: \"盘锦\", g: \"122.073228,41.141248|13\" }, { n: \"铁岭\", g: \"123.85485,42.299757|13\" }, { n: \"营口\", g: \"122.233391,40.668651|13\" }] }, { n: \"内蒙古\", g: \"114.415868,43.468238|5\", cities: [{ n: \"呼和浩特\", g: \"111.660351,40.828319|12\" }, { n: \"阿拉善盟\", g: \"105.695683,38.843075|14\" }, { n: \"包头\", g: \"109.846239,40.647119|12\" }, { n: \"巴彦淖尔\", g: \"107.423807,40.76918|12\" }, { n: \"赤峰\", g: \"118.930761,42.297112|12\" }, { n: \"鄂尔多斯\", g: \"109.993706,39.81649|12\" }, { n: \"呼伦贝尔\", g: \"119.760822,49.201636|12\" }, { n: \"通辽\", g: \"122.260363,43.633756|12\" }, { n: \"乌海\", g: \"106.831999,39.683177|13\" }, { n: \"乌兰察布\", g: \"113.112846,41.022363|12\" }, { n: \"锡林郭勒盟\", g: \"116.02734,43.939705|11\" }, { n: \"兴安盟\", g: \"122.048167,46.083757|11\" }] }, { n: \"宁夏\", g: \"106.155481,37.321323|8\", cities: [{ n: \"银川\", g: \"106.206479,38.502621|12\" }, { n: \"固原\", g: \"106.285268,36.021523|13\" }, { n: \"石嘴山\", g: \"106.379337,39.020223|13\" }, { n: \"吴忠\", g: \"106.208254,37.993561|14\" }, { n: \"中卫\", g: \"105.196754,37.521124|14\" }] }, { n: \"青海\", g: \"96.202544,35.499761|7\", cities: [{ n: \"西宁\", g: \"101.767921,36.640739|12\" }, { n: \"果洛州\", g: \"100.223723,34.480485|11\" }, { n: \"海东地区\", g: \"102.085207,36.51761|11\" }, { n: \"海北州\", g: \"100.879802,36.960654|11\" }, { n: \"海南州\", g: \"100.624066,36.284364|11\" }, { n: \"海西州\", g: \"97.342625,37.373799|11\" }, { n: \"黄南州\", g: \"102.0076,35.522852|11\" }, { n: \"玉树州\", g: \"97.013316,33.00624|14\" }] }, { n: \"山东\", g: \"118.527663,36.09929|8\", cities: [{ n: \"济南\", g: \"117.024967,36.682785|12\" }, { n: \"滨州\", g: \"117.968292,37.405314|12\" }, { n: \"东营\", g: \"118.583926,37.487121|12\" }, { n: \"德州\", g: \"116.328161,37.460826|12\" }, { n: \"菏泽\", g: \"115.46336,35.26244|13\" }, { n: \"济宁\", g: \"116.600798,35.402122|13\" }, { n: \"莱芜\", g: \"117.684667,36.233654|13\" }, { n: \"聊城\", g: \"115.986869,36.455829|12\" }, { n: \"临沂\", g: \"118.340768,35.072409|12\" }, { n: \"青岛\", g: \"120.384428,36.105215|12\" }, { n: \"日照\", g: \"119.50718,35.420225|12\" }, { n: \"泰安\", g: \"117.089415,36.188078|13\" }, { n: \"威海\", g: \"122.093958,37.528787|13\" }, { n: \"潍坊\", g: \"119.142634,36.716115|12\" }, { n: \"烟台\", g: \"121.309555,37.536562|12\" }, { n: \"枣庄\", g: \"117.279305,34.807883|13\" }, { n: \"淄博\", g: \"118.059134,36.804685|12\" }] }, { n: \"山西\", g: \"112.515496,37.866566|7\", cities: [{ n: \"太原\", g: \"112.550864,37.890277|12\" }, { n: \"长治\", g: \"113.120292,36.201664|12\" }, { n: \"大同\", g: \"113.290509,40.113744|12\" }, { n: \"晋城\", g: \"112.867333,35.499834|13\" }, { n: \"晋中\", g: \"112.738514,37.693362|13\" }, { n: \"临汾\", g: \"111.538788,36.099745|13\" }, { n: \"吕梁\", g: \"111.143157,37.527316|14\" }, { n: \"朔州\", g: \"112.479928,39.337672|13\" }, { n: \"忻州\", g: \"112.727939,38.461031|12\" }, { n: \"阳泉\", g: \"113.569238,37.869529|13\" }, { n: \"运城\", g: \"111.006854,35.038859|13\" }] }, { n: \"陕西\", g: \"109.503789,35.860026|7\", cities: [{ n: \"西安\", g: \"108.953098,34.2778|12\" }, { n: \"安康\", g: \"109.038045,32.70437|13\" }, { n: \"宝鸡\", g: \"107.170645,34.364081|12\" }, { n: \"汉中\", g: \"107.045478,33.081569|13\" }, { n: \"商洛\", g: \"109.934208,33.873907|13\" }, { n: \"铜川\", g: \"108.968067,34.908368|13\" }, { n: \"渭南\", g: \"109.483933,34.502358|13\" }, { n: \"咸阳\", g: \"108.707509,34.345373|13\" }, { n: \"延安\", g: \"109.50051,36.60332|13\" }, { n: \"榆林\", g: \"109.745926,38.279439|12\" }] }, { n: \"四川\", g: \"102.89916,30.367481|7\", cities: [{ n: \"成都\", g: \"104.067923,30.679943|12\" }, { n: \"阿坝州\", g: \"102.228565,31.905763|15\" }, { n: \"巴中\", g: \"106.757916,31.869189|14\" }, { n: \"达州\", g: \"107.494973,31.214199|14\" }, { n: \"德阳\", g: \"104.402398,31.13114|13\" }, { n: \"甘孜州\", g: \"101.969232,30.055144|15\" }, { n: \"广安\", g: \"106.63572,30.463984|13\" }, { n: \"广元\", g: \"105.819687,32.44104|13\" }, { n: \"乐山\", g: \"103.760824,29.600958|13\" }, { n: \"凉山州\", g: \"102.259591,27.892393|14\" }, { n: \"泸州\", g: \"105.44397,28.89593|14\" }, { n: \"南充\", g: \"106.105554,30.800965|13\" }, { n: \"眉山\", g: \"103.84143,30.061115|13\" }, { n: \"绵阳\", g: \"104.705519,31.504701|12\" }, { n: \"内江\", g: \"105.073056,29.599462|13\" }, { n: \"攀枝花\", g: \"101.722423,26.587571|14\" }, { n: \"遂宁\", g: \"105.564888,30.557491|12\" }, { n: \"雅安\", g: \"103.009356,29.999716|13\" }, { n: \"宜宾\", g: \"104.633019,28.769675|13\" }, { n: \"资阳\", g: \"104.63593,30.132191|13\" }, { n: \"自贡\", g: \"104.776071,29.359157|13\" }] }, { n: \"西藏\", g: \"89.137982,31.367315|6\", cities: [{ n: \"拉萨\", g: \"91.111891,29.662557|13\" }, { n: \"阿里地区\", g: \"81.107669,30.404557|11\" }, { n: \"昌都地区\", g: \"97.185582,31.140576|15\" }, { n: \"林芝地区\", g: \"94.349985,29.666941|11\" }, { n: \"那曲地区\", g: \"92.067018,31.48068|14\" }, { n: \"日喀则地区\", g: \"88.891486,29.269023|14\" }, { n: \"山南地区\", g: \"91.750644,29.229027|11\" }] }, { n: \"新疆\", g: \"85.614899,42.127001|6\", cities: [{ n: \"乌鲁木齐\", g: \"87.564988,43.84038|12\" }, { n: \"阿拉尔\", g: \"81.291737,40.61568|13\" }, { n: \"阿克苏地区\", g: \"80.269846,41.171731|12\" }, { n: \"阿勒泰地区\", g: \"88.137915,47.839744|13\" }, { n: \"巴音郭楞\", g: \"86.121688,41.771362|12\" }, { n: \"博尔塔拉州\", g: \"82.052436,44.913651|11\" }, { n: \"昌吉州\", g: \"87.296038,44.007058|13\" }, { n: \"哈密地区\", g: \"93.528355,42.858596|13\" }, { n: \"和田地区\", g: \"79.930239,37.116774|13\" }, { n: \"喀什地区\", g: \"75.992973,39.470627|12\" }, { n: \"克拉玛依\", g: \"84.88118,45.594331|13\" }, { n: \"克孜勒苏州\", g: \"76.137564,39.750346|11\" }, { n: \"石河子\", g: \"86.041865,44.308259|13\" }, { n: \"塔城地区\", g: \"82.974881,46.758684|12\" }, { n: \"图木舒克\", g: \"79.198155,39.889223|13\" }, { n: \"吐鲁番地区\", g: \"89.181595,42.96047|13\" }, { n: \"五家渠\", g: \"87.565449,44.368899|13\" }, { n: \"伊犁州\", g: \"81.297854,43.922248|11\" }] }, { n: \"云南\", g: \"101.592952,24.864213|7\", cities: [{ n: \"昆明\", g: \"102.714601,25.049153|12\" }, { n: \"保山\", g: \"99.177996,25.120489|13\" }, { n: \"楚雄州\", g: \"101.529382,25.066356|13\" }, { n: \"大理州\", g: \"100.223675,25.5969|14\" }, { n: \"德宏州\", g: \"98.589434,24.44124|14\" }, { n: \"迪庆州\", g: \"99.713682,27.831029|14\" }, { n: \"红河州\", g: \"103.384065,23.367718|11\" }, { n: \"丽江\", g: \"100.229628,26.875351|13\" }, { n: \"临沧\", g: \"100.092613,23.887806|14\" }, { n: \"怒江州\", g: \"98.859932,25.860677|14\" }, { n: \"普洱\", g: \"100.980058,22.788778|14\" }, { n: \"曲靖\", g: \"103.782539,25.520758|12\" }, { n: \"昭通\", g: \"103.725021,27.340633|13\" }, { n: \"文山\", g: \"104.089112,23.401781|14\" }, { n: \"西双版纳\", g: \"100.803038,22.009433|13\" }, { n: \"玉溪\", g: \"102.545068,24.370447|13\" }] }, { n: \"浙江\", g: \"119.957202,29.159494|8\", cities: [{ n: \"杭州\", g: \"120.219375,30.259244|12\" }, { n: \"湖州\", g: \"120.137243,30.877925|12\" }, { n: \"嘉兴\", g: \"120.760428,30.773992|13\" }, { n: \"金华\", g: \"119.652576,29.102899|12\" }, { n: \"丽水\", g: \"119.929576,28.4563|13\" }, { n: \"宁波\", g: \"121.579006,29.885259|12\" }, { n: \"衢州\", g: \"118.875842,28.95691|12\" }, { n: \"绍兴\", g: \"120.592467,30.002365|13\" }, { n: \"台州\", g: \"121.440613,28.668283|13\" }, { n: \"温州\", g: \"120.690635,28.002838|12\" }, { n: \"舟山\", g: \"122.169872,30.03601|13\" }] }], other: [{ n: \"香港\", g: \"114.186124,22.293586|11\" }, { n: \"澳门\", g: \"113.557519,22.204118|13\" }, { n: \"台湾\", g: \"120.961454,23.80406|8\" }] };\n\nfunction getCenter(g) {\n    var item = g.split(\"|\");\n    item[0] = item[0].split(\",\");\n    return {\n        lng: parseFloat(item[0][0]),\n        lat: parseFloat(item[0][1])\n    };\n}\n\nvar cityCenter = {\n    getProvinceNameByCityName: function getProvinceNameByCityName(name) {\n        var provinces = citycenter.provinces;\n        for (var i = 0; i < provinces.length; i++) {\n            var provinceName = provinces[i].n;\n            var cities = provinces[i].cities;\n            for (var j = 0; j < cities.length; j++) {\n                if (cities[j].n == name) {\n                    return provinceName;\n                }\n            }\n        }\n        return null;\n    },\n    getCenterByCityName: function getCenterByCityName(name) {\n        name = name.replace('市', '');\n        for (var i = 0; i < citycenter.municipalities.length; i++) {\n            if (citycenter.municipalities[i].n == name) {\n                return getCenter(citycenter.municipalities[i].g);\n            }\n        }\n\n        for (var i = 0; i < citycenter.other.length; i++) {\n            if (citycenter.other[i].n == name) {\n                return getCenter(citycenter.other[i].g);\n            }\n        }\n\n        var provinces = citycenter.provinces;\n        for (var i = 0; i < provinces.length; i++) {\n            if (provinces[i].n == name) {\n                return getCenter(provinces[i].g);\n            }\n            var cities = provinces[i].cities;\n            for (var j = 0; j < cities.length; j++) {\n                if (cities[j].n == name) {\n                    return getCenter(cities[j].g);\n                }\n            }\n        }\n        return null;\n    }\n};\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n\n\n\n\n\nvar get = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n/**\n * @author kyle / http://nikai.us/\n */\n\n/**\n * DataSet\n *\n * A data set can:\n * - add/remove/update data\n * - gives triggers upon changes in the data\n * - can  import/export data in various data formats\n * @param {Array} [data]    Optional array with initial data\n * the field geometry is like geojson, it can be:\n * {\n *     \"type\": \"Point\",\n *     \"coordinates\": [125.6, 10.1]\n * }\n * {\n *     \"type\": \"LineString\",\n *     \"coordinates\": [\n *         [102.0, 0.0], [103.0, 1.0], [104.0, 0.0], [105.0, 1.0]\n *     ]\n * }\n * {\n *     \"type\": \"Polygon\",\n *     \"coordinates\": [\n *         [ [100.0, 0.0], [101.0, 0.0], [101.0, 1.0],\n *           [100.0, 1.0], [100.0, 0.0] ]\n *     ]\n * }\n * @param {Object} [options]   Available options:\n * \n */\nfunction DataSet(data, options) {\n    Event.bind(this)();\n\n    this._options = options || {};\n    this._data = []; // map with data indexed by id\n\n    // add initial data when provided\n    if (data) {\n        this.add(data);\n    }\n}\n\nDataSet.prototype = Event.prototype;\n\n/**\n * Add data.\n */\nDataSet.prototype.add = function (data, senderId) {\n    if (Array.isArray(data)) {\n        // Array\n        for (var i = 0, len = data.length; i < len; i++) {\n            if (data[i]) {\n                if (data[i].time && data[i].time.length == 14 && data[i].time.substr(0, 2) == '20') {\n                    var time = data[i].time;\n                    data[i].time = new Date(time.substr(0, 4) + '-' + time.substr(4, 2) + '-' + time.substr(6, 2) + ' ' + time.substr(8, 2) + ':' + time.substr(10, 2) + ':' + time.substr(12, 2)).getTime();\n                }\n                this._data.push(data[i]);\n            }\n        }\n    } else if (data instanceof Object) {\n        // Single item\n        this._data.push(data);\n    } else {\n        throw new Error('Unknown dataType');\n    }\n\n    this._dataCache = JSON.parse(JSON.stringify(this._data));\n};\n\nDataSet.prototype.reset = function () {\n    this._data = JSON.parse(JSON.stringify(this._dataCache));\n};\n\n/**\n * get data.\n */\nDataSet.prototype.get = function (args) {\n    args = args || {};\n\n    //console.time('copy data time')\n    var start = new Date();\n    // TODO: 不修改原始数据，在数据上挂载新的名称，每次修改数据直接修改新名称下的数据，可以省去deepCopy\n    // var data = deepCopy(this._data);\n    var data = this._data;\n\n    var start = new Date();\n\n    if (args.filter) {\n        var newData = [];\n        for (var i = 0; i < data.length; i++) {\n            if (args.filter(data[i])) {\n                newData.push(data[i]);\n            }\n        }\n        data = newData;\n    }\n\n    if (args.transferCoordinate) {\n        data = this.transferCoordinate(data, args.transferCoordinate, args.fromColumn, args.toColumn);\n    }\n\n    // console.timeEnd('transferCoordinate time')\n\n    return data;\n};\n\n/**\n * set data.\n */\nDataSet.prototype.set = function (data) {\n    this._set(data);\n    this._trigger('change');\n};\n\n/**\n * set data.\n */\nDataSet.prototype._set = function (data) {\n    this.clear();\n    this.add(data);\n};\n\n/**\n * clear data.\n */\nDataSet.prototype.clear = function (args) {\n    this._data = []; // map with data indexed by id\n};\n\n/**\n * remove data.\n */\nDataSet.prototype.remove = function (args) {};\n\n/**\n * update data.\n */\nDataSet.prototype.update = function (cbk, condition) {\n\n    var data = this._data;\n\n    var item = null;\n    for (var i = 0; i < data.length; i++) {\n        if (condition) {\n            var flag = true;\n            for (var key in condition) {\n                if (data[i][key] != condition[key]) {\n                    flag = false;\n                }\n            }\n            if (flag) {\n                cbk && cbk(data[i]);\n            }\n        } else {\n            cbk && cbk(data[i]);\n        }\n    }\n\n    this._dataCache = JSON.parse(JSON.stringify(this._data));\n\n    this._trigger('change');\n};\n\n/**\n * transfer coordinate.\n */\nDataSet.prototype.transferCoordinate = function (data, transferFn, fromColumn, toColumnName) {\n\n    toColumnName = toColumnName || '_coordinates';\n    fromColumn = fromColumn || 'coordinates';\n\n    for (var i = 0; i < data.length; i++) {\n\n        var geometry = data[i].geometry;\n        var coordinates = geometry[fromColumn];\n        switch (geometry.type) {\n            case 'Point':\n                geometry[toColumnName] = transferFn(coordinates);\n                break;\n            case 'LineString':\n                var newCoordinates = [];\n                for (var j = 0; j < coordinates.length; j++) {\n                    newCoordinates.push(transferFn(coordinates[j]));\n                }\n                geometry[toColumnName] = newCoordinates;\n                break;\n            case 'MultiLineString':\n            case 'Polygon':\n                var newCoordinates = getPolygon(coordinates);\n                geometry[toColumnName] = newCoordinates;\n                break;\n            case 'MultiPolygon':\n                var newCoordinates = [];\n                for (var c = 0; c < coordinates.length; c++) {\n                    var polygon = coordinates[c];\n                    var polygon = getPolygon(polygon);\n                    newCoordinates.push(polygon);\n                }\n\n                geometry[toColumnName] = newCoordinates;\n                break;\n        }\n    }\n\n    function getPolygon(coordinates) {\n        var newCoordinates = [];\n        for (var c = 0; c < coordinates.length; c++) {\n            var coordinate = coordinates[c];\n            var newcoordinate = [];\n            for (var j = 0; j < coordinate.length; j++) {\n                newcoordinate.push(transferFn(coordinate[j]));\n            }\n            newCoordinates.push(newcoordinate);\n        }\n        return newCoordinates;\n    }\n\n    return data;\n};\n\nDataSet.prototype.initGeometry = function (transferFn) {\n\n    if (transferFn) {\n\n        this._data.forEach(function (item) {\n            item.geometry = transferFn(item);\n        });\n    } else {\n\n        this._data.forEach(function (item) {\n            if (!item.geometry) {\n                if (item.lng && item.lat) {\n                    item.geometry = {\n                        type: 'Point',\n                        coordinates: [item.lng, item.lat]\n                    };\n                } else if (item.city) {\n                    var center = cityCenter.getCenterByCityName(item.city);\n                    if (center) {\n                        item.geometry = {\n                            type: 'Point',\n                            coordinates: [center.lng, center.lat]\n                        };\n                    }\n                }\n            }\n        });\n    }\n};\n\n/**\n * 获取当前列的最大值\n */\nDataSet.prototype.getMax = function (columnName) {\n    var data = this._data;\n\n    if (!data || data.length <= 0) {\n        return;\n    }\n\n    var max = parseFloat(data[0][columnName]);\n\n    for (var i = 1; i < data.length; i++) {\n        var value = parseFloat(data[i][columnName]);\n        if (value > max) {\n            max = value;\n        }\n    }\n\n    return max;\n};\n\n/**\n * 获取当前列的总和\n */\nDataSet.prototype.getSum = function (columnName) {\n    var data = this._data;\n\n    if (!data || data.length <= 0) {\n        return;\n    }\n\n    var sum = 0;\n\n    for (var i = 0; i < data.length; i++) {\n        if (data[i][columnName]) {\n            sum += parseFloat(data[i][columnName]);\n        }\n    }\n\n    return sum;\n};\n\n/**\n * 获取当前列的最小值\n */\nDataSet.prototype.getMin = function (columnName) {\n    var data = this._data;\n\n    if (!data || data.length <= 0) {\n        return;\n    }\n\n    var min = parseFloat(data[0][columnName]);\n\n    for (var i = 1; i < data.length; i++) {\n        var value = parseFloat(data[i][columnName]);\n        if (value < min) {\n            min = value;\n        }\n    }\n\n    return min;\n};\n\n/**\n * 获取去重的数据\n */\nDataSet.prototype.getUnique = function (columnName) {\n    var data = this._data;\n\n    if (!data || data.length <= 0) {\n        return;\n    }\n\n    var maps = {};\n\n    for (var i = 1; i < data.length; i++) {\n        maps[data[i][columnName]] = true;\n    }\n\n    var data = [];\n    for (var key in maps) {\n        data.push(key);\n    }\n\n    return data;\n};\n\nfunction hex_corner(center, size, i) {\n    var angle_deg = 60 * i + 30;\n    var angle_rad = Math.PI / 180 * angle_deg;\n    return [center.x + size * Math.cos(angle_rad), center.y + size * Math.sin(angle_rad)];\n}\n\nfunction draw(context, x, y, size) {\n\n    for (var j = 0; j < 6; j++) {\n\n        var result = hex_corner({\n            x: x,\n            y: y\n        }, size, j);\n\n        context.lineTo(result[0], result[1]);\n    }\n}\n\n/**\n * @author kyle / http://nikai.us/\n */\n\nvar pathSimple = {\n    drawDataSet: function drawDataSet(context, dataSet, options) {\n\n        var data = dataSet instanceof DataSet ? dataSet.get() : dataSet;\n\n        for (var i = 0, len = data.length; i < len; i++) {\n            var item = data[i];\n            this.draw(context, item, options);\n        }\n    },\n    draw: function draw$$1(context, data, options) {\n        var type = data.geometry.type;\n        var coordinates = data.geometry._coordinates || data.geometry.coordinates;\n        var symbol = data.symbol || options.symbol || 'circle';\n        switch (type) {\n            case 'Point':\n                var size = data._size || data.size || options._size || options.size || 5;\n                if (symbol === 'circle') {\n                    if (options.bigData === 'Point') {\n                        context.moveTo(coordinates[0], coordinates[1]);\n                    }\n                    context.arc(coordinates[0], coordinates[1], size, 0, Math.PI * 2);\n                } else if (symbol === 'rect') {\n                    context.rect(coordinates[0] - size / 2, coordinates[1] - size / 2, size, size);\n                } else if (symbol === 'honeycomb') {\n                    draw(context, coordinates[0], coordinates[1], size);\n                }\n                break;\n            case 'LineString':\n                this.drawLineString(context, coordinates);\n                break;\n            case 'MultiLineString':\n                for (var i = 0; i < coordinates.length; i++) {\n                    var lineString = coordinates[i];\n                    this.drawLineString(context, lineString);\n                }\n                break;\n            case 'Polygon':\n                this.drawPolygon(context, coordinates);\n                break;\n            case 'MultiPolygon':\n                for (var i = 0; i < coordinates.length; i++) {\n                    var polygon = coordinates[i];\n                    this.drawPolygon(context, polygon);\n                    if (options.multiPolygonDraw) {\n                        var flag = options.multiPolygonDraw();\n                        if (flag) {\n                            return flag;\n                        }\n                    }\n                }\n                break;\n            default:\n                console.error('type' + type + 'is not support now!');\n                break;\n        }\n    },\n\n    drawLineString: function drawLineString(context, coordinates) {\n        for (var j = 0; j < coordinates.length; j++) {\n            var x = coordinates[j][0];\n            var y = coordinates[j][1];\n            if (j == 0) {\n                context.moveTo(x, y);\n            } else {\n                context.lineTo(x, y);\n            }\n        }\n    },\n\n    drawPolygon: function drawPolygon(context, coordinates) {\n        context.beginPath();\n\n        for (var i = 0; i < coordinates.length; i++) {\n            var coordinate = coordinates[i];\n\n            context.moveTo(coordinate[0][0], coordinate[0][1]);\n            for (var j = 1; j < coordinate.length; j++) {\n                context.lineTo(coordinate[j][0], coordinate[j][1]);\n            }\n            context.lineTo(coordinate[0][0], coordinate[0][1]);\n            context.closePath();\n        }\n    }\n\n};\n\n/**\n * @author kyle / http://nikai.us/\n */\n\nvar drawSimple = {\n    draw: function draw(context, dataSet, options) {\n\n        var data = dataSet instanceof DataSet ? dataSet.get() : dataSet;\n\n        // console.log('xxxx',options)\n        context.save();\n\n        for (var key in options) {\n            context[key] = options[key];\n        }\n\n        // console.log(data);\n        if (options.bigData) {\n            context.save();\n            context.beginPath();\n\n            for (var i = 0, len = data.length; i < len; i++) {\n\n                var item = data[i];\n\n                pathSimple.draw(context, item, options);\n            }\n\n            var type = options.bigData;\n\n            if (type == 'Point' || type == 'Polygon' || type == 'MultiPolygon') {\n\n                context.fill();\n\n                if (context.lineDash) {\n                    context.setLineDash(context.lineDash);\n                }\n\n                if (item.lineDash) {\n                    context.setLineDash(item.lineDash);\n                }\n\n                if ((item.strokeStyle || options.strokeStyle) && options.lineWidth) {\n                    context.stroke();\n                }\n            } else if (type == 'LineString' || type == 'MultiLineString') {\n                context.stroke();\n            }\n\n            context.restore();\n        } else {\n\n            for (var i = 0, len = data.length; i < len; i++) {\n\n                var item = data[i];\n\n                context.save();\n\n                if (item.fillStyle || item._fillStyle) {\n                    context.fillStyle = item.fillStyle || item._fillStyle;\n                }\n\n                if (item.strokeStyle || item._strokeStyle) {\n                    context.strokeStyle = item.strokeStyle || item._strokeStyle;\n                }\n\n                if (context.lineDash) {\n                    context.setLineDash(context.lineDash);\n                }\n\n                if (item.lineDash) {\n                    context.setLineDash(item.lineDash);\n                }\n\n                var type = item.geometry.type;\n\n                context.beginPath();\n\n                options.multiPolygonDraw = function () {\n                    context.fill();\n\n                    if ((item.strokeStyle || options.strokeStyle) && options.lineWidth) {\n                        context.stroke();\n                    }\n                };\n                pathSimple.draw(context, item, options);\n\n                if (type == 'Point' || type == 'Polygon' || type == 'MultiPolygon') {\n\n                    context.fill();\n\n                    if ((item.strokeStyle || options.strokeStyle) && options.lineWidth) {\n                        context.stroke();\n                    }\n                } else if (type == 'LineString' || type == 'MultiLineString') {\n                    if (item.lineWidth || item._lineWidth) {\n                        context.lineWidth = item.lineWidth || item._lineWidth;\n                    }\n                    context.stroke();\n                }\n\n                context.restore();\n            }\n        }\n\n        context.restore();\n    }\n};\n\nfunction Canvas(width, height) {\n\n    var canvas;\n\n    if (typeof document === 'undefined') {\n\n        // var Canvas = require('canvas');\n        // canvas = new Canvas(width, height);\n\n    } else {\n\n        var canvas = document.createElement('canvas');\n\n        if (width) {\n            canvas.width = width;\n        }\n\n        if (height) {\n            canvas.height = height;\n        }\n    }\n\n    return canvas;\n}\n\n/**\n * @author kyle / http://nikai.us/\n */\n\n/**\n * Category\n * @param {Object} [options]   Available options:\n *                             {Object} gradient: { 0.25: \"rgb(0,0,255)\", 0.55: \"rgb(0,255,0)\", 0.85: \"yellow\", 1.0: \"rgb(255,0,0)\"}\n */\nfunction Intensity(options) {\n\n    options = options || {};\n    this.gradient = options.gradient || {\n        0.25: \"rgba(0, 0, 255, 1)\",\n        0.55: \"rgba(0, 255, 0, 1)\",\n        0.85: \"rgba(255, 255, 0, 1)\",\n        1.0: \"rgba(255, 0, 0, 1)\"\n    };\n    this.maxSize = options.maxSize || 35;\n    this.minSize = options.minSize || 0;\n    this.max = options.max || 100;\n    this.min = options.min || 0;\n    this.initPalette();\n}\n\nIntensity.prototype.setMax = function (value) {\n    this.max = value || 100;\n};\n\nIntensity.prototype.setMin = function (value) {\n    this.min = value || 0;\n};\n\nIntensity.prototype.setMaxSize = function (maxSize) {\n    this.maxSize = maxSize || 35;\n};\n\nIntensity.prototype.setMinSize = function (minSize) {\n    this.minSize = minSize || 0;\n};\n\nIntensity.prototype.initPalette = function () {\n\n    var gradient = this.gradient;\n\n    var canvas = new Canvas(256, 1);\n\n    var paletteCtx = this.paletteCtx = canvas.getContext('2d');\n\n    var lineGradient = paletteCtx.createLinearGradient(0, 0, 256, 1);\n\n    for (var key in gradient) {\n        lineGradient.addColorStop(parseFloat(key), gradient[key]);\n    }\n\n    paletteCtx.fillStyle = lineGradient;\n    paletteCtx.fillRect(0, 0, 256, 1);\n};\n\nIntensity.prototype.getColor = function (value) {\n\n    var imageData = this.getImageData(value);\n\n    return \"rgba(\" + imageData[0] + \", \" + imageData[1] + \", \" + imageData[2] + \", \" + imageData[3] / 256 + \")\";\n};\n\nIntensity.prototype.getImageData = function (value) {\n\n    var imageData = this.paletteCtx.getImageData(0, 0, 256, 1).data;\n\n    if (value === undefined) {\n        return imageData;\n    }\n\n    var max = this.max;\n    var min = this.min;\n\n    if (value > max) {\n        value = max;\n    }\n\n    if (value < min) {\n        value = min;\n    }\n\n    var index = Math.floor((value - min) / (max - min) * (256 - 1)) * 4;\n\n    return [imageData[index], imageData[index + 1], imageData[index + 2], imageData[index + 3]];\n};\n\n/**\n * @param Number value \n * @param Number max of value\n * @param Number max of size\n * @param Object other options\n */\nIntensity.prototype.getSize = function (value) {\n\n    var size = 0;\n    var max = this.max;\n    var min = this.min;\n    var maxSize = this.maxSize;\n    var minSize = this.minSize;\n\n    if (value > max) {\n        value = max;\n    }\n\n    if (value < min) {\n        value = min;\n    }\n\n    if (max > min) {\n        size = minSize + (value - min) / (max - min) * (maxSize - minSize);\n    } else {\n        return maxSize;\n    }\n\n    return size;\n};\n\nIntensity.prototype.getLegend = function (options) {\n    var gradient = this.gradient;\n\n    var width = options.width || 20;\n    var height = options.height || 180;\n\n    var canvas = new Canvas(width, height);\n\n    var paletteCtx = canvas.getContext('2d');\n\n    var lineGradient = paletteCtx.createLinearGradient(0, height, 0, 0);\n\n    for (var key in gradient) {\n        lineGradient.addColorStop(parseFloat(key), gradient[key]);\n    }\n\n    paletteCtx.fillStyle = lineGradient;\n    paletteCtx.fillRect(0, 0, width, height);\n\n    return canvas;\n};\n\nvar global$1 = typeof window === 'undefined' ? {} : window;\n\nvar devicePixelRatio = global$1.devicePixelRatio || 1;\n\n/**\n * @author kyle / http://nikai.us/\n */\n\nfunction createCircle(size) {\n\n    var shadowBlur = size / 2;\n    var r2 = size + shadowBlur;\n    var offsetDistance = 10000;\n\n    var circle = new Canvas(r2 * 2, r2 * 2);\n    var context = circle.getContext('2d');\n\n    context.shadowBlur = shadowBlur;\n    context.shadowColor = 'black';\n    context.shadowOffsetX = context.shadowOffsetY = offsetDistance;\n\n    context.beginPath();\n    context.arc(r2 - offsetDistance, r2 - offsetDistance, size, 0, Math.PI * 2, true);\n    context.closePath();\n    context.fill();\n    return circle;\n}\n\nfunction colorize(pixels, gradient, options) {\n    var max = getMax(options);\n    var min = getMin(options);\n    var diff = max - min;\n    var range = options.range || null;\n\n    var jMin = 0;\n    var jMax = 1024;\n    if (range && range.length === 2) {\n        jMin = (range[0] - min) / diff * 1024;\n    }\n\n    if (range && range.length === 2) {\n        jMax = (range[1] - min) / diff * 1024;\n    }\n\n    var maxOpacity = options.maxOpacity || 0.8;\n    var minOpacity = options.minOpacity || 0;\n    var range = options.range;\n\n    for (var i = 3, len = pixels.length, j; i < len; i += 4) {\n        j = pixels[i] * 4; // get gradient color from opacity value\n\n        if (pixels[i] / 256 > maxOpacity) {\n            pixels[i] = 256 * maxOpacity;\n        }\n        if (pixels[i] / 256 < minOpacity) {\n            pixels[i] = 256 * minOpacity;\n        }\n\n        if (j && j >= jMin && j <= jMax) {\n            pixels[i - 3] = gradient[j];\n            pixels[i - 2] = gradient[j + 1];\n            pixels[i - 1] = gradient[j + 2];\n        } else {\n            pixels[i] = 0;\n        }\n    }\n}\n\nfunction getMax(options) {\n    var max = options.max || 100;\n    return max;\n}\n\nfunction getMin(options) {\n    var min = options.min || 0;\n    return min;\n}\n\nfunction drawGray(context, dataSet, options) {\n\n    var max = getMax(options);\n    var min = getMin(options);\n    // console.log(max)\n    var size = options._size;\n    if (size == undefined) {\n        size = options.size;\n        if (size == undefined) {\n            size = 13;\n        }\n    }\n\n    var intensity = new Intensity({\n        gradient: options.gradient,\n        max: max,\n        min: min\n    });\n\n    var circle = createCircle(size);\n    var circleHalfWidth = circle.width / 2;\n    var circleHalfHeight = circle.height / 2;\n\n    var data = dataSet;\n\n    var dataOrderByAlpha = {};\n\n    data.forEach(function (item, index) {\n        var count = item.count === undefined ? 1 : item.count;\n        var alpha = Math.min(1, count / max).toFixed(2);\n        dataOrderByAlpha[alpha] = dataOrderByAlpha[alpha] || [];\n        dataOrderByAlpha[alpha].push(item);\n    });\n\n    for (var i in dataOrderByAlpha) {\n        if (isNaN(i)) continue;\n        var _data = dataOrderByAlpha[i];\n        context.beginPath();\n        if (!options.withoutAlpha) {\n            context.globalAlpha = i;\n        }\n        context.strokeStyle = intensity.getColor(i * max);\n        _data.forEach(function (item, index) {\n            if (!item.geometry) {\n                return;\n            }\n\n            var coordinates = item.geometry._coordinates || item.geometry.coordinates;\n            var type = item.geometry.type;\n            if (type === 'Point') {\n                var count = item.count === undefined ? 1 : item.count;\n                context.globalAlpha = count / max;\n                context.drawImage(circle, coordinates[0] - circleHalfWidth, coordinates[1] - circleHalfHeight);\n            } else if (type === 'LineString') {\n                var count = item.count === undefined ? 1 : item.count;\n                context.globalAlpha = count / max;\n                context.beginPath();\n                pathSimple.draw(context, item, options);\n                context.stroke();\n            } else if (type === 'Polygon') {}\n        });\n    }\n}\n\nfunction draw$1(context, dataSet, options) {\n    if (context.canvas.width <= 0 || context.canvas.height <= 0) {\n        return;\n    }\n\n    var strength = options.strength || 0.3;\n    context.strokeStyle = 'rgba(0,0,0,' + strength + ')';\n\n    var shadowCanvas = new Canvas(context.canvas.width, context.canvas.height);\n    var shadowContext = shadowCanvas.getContext('2d');\n    shadowContext.scale(devicePixelRatio, devicePixelRatio);\n\n    options = options || {};\n\n    var data = dataSet instanceof DataSet ? dataSet.get() : dataSet;\n\n    context.save();\n\n    var intensity = new Intensity({\n        gradient: options.gradient\n    });\n\n    //console.time('drawGray')\n    drawGray(shadowContext, data, options);\n\n    //console.timeEnd('drawGray');\n    // return false;\n    if (!options.absolute) {\n        //console.time('changeColor');\n        var colored = shadowContext.getImageData(0, 0, context.canvas.width, context.canvas.height);\n        colorize(colored.data, intensity.getImageData(), options);\n        //console.timeEnd('changeColor');\n        context.putImageData(colored, 0, 0);\n\n        context.restore();\n    }\n\n    intensity = null;\n    shadowCanvas = null;\n}\n\nvar drawHeatmap = {\n    draw: draw$1\n};\n\n/**\n * @author kyle / http://nikai.us/\n */\n\nvar drawGrid = {\n    draw: function draw(context, dataSet, options) {\n\n        context.save();\n\n        var data = dataSet instanceof DataSet ? dataSet.get() : dataSet;\n\n        var grids = {};\n\n        var size = options._size || options.size || 50;\n\n        // 后端传入数据为网格数据时，传入enableCluster为false，前端不进行删格化操作，直接画方格\t\n        var enableCluster = 'enableCluster' in options ? options.enableCluster : true;\n\n        var offset = options.offset || {\n            x: 0,\n            y: 0\n        };\n\n        var intensity = new Intensity({\n            min: options.min || 0,\n            max: options.max || 100,\n            gradient: options.gradient\n        });\n\n        if (!enableCluster) {\n            for (var i = 0; i < data.length; i++) {\n                var coordinates = data[i].geometry._coordinates || data[i].geometry.coordinates;\n                var gridKey = coordinates.join(',');\n                grids[gridKey] = data[i].count || 1;\n            }\n            for (var _gridKey in grids) {\n                _gridKey = _gridKey.split(',');\n\n                context.beginPath();\n                context.rect(+_gridKey[0] - size / 2, +_gridKey[1] - size / 2, size, size);\n                context.fillStyle = intensity.getColor(grids[_gridKey]);\n                context.fill();\n                if (options.strokeStyle && options.lineWidth) {\n                    context.stroke();\n                }\n            }\n        } else {\n            for (var _i = 0; _i < data.length; _i++) {\n                var coordinates = data[_i].geometry._coordinates || data[_i].geometry.coordinates;\n                var gridKey = Math.floor((coordinates[0] - offset.x) / size) + ',' + Math.floor((coordinates[1] - offset.y) / size);\n                if (!grids[gridKey]) {\n                    grids[gridKey] = 0;\n                }\n\n                grids[gridKey] += ~~(data[_i].count || 1);\n            }\n\n            for (var _gridKey2 in grids) {\n                _gridKey2 = _gridKey2.split(',');\n\n                context.beginPath();\n                context.rect(_gridKey2[0] * size + .5 + offset.x, _gridKey2[1] * size + .5 + offset.y, size, size);\n                context.fillStyle = intensity.getColor(grids[_gridKey2]);\n                context.fill();\n                if (options.strokeStyle && options.lineWidth) {\n                    context.stroke();\n                }\n            }\n        }\n\n        if (options.label && options.label.show !== false) {\n\n            context.fillStyle = options.label.fillStyle || 'white';\n\n            if (options.label.font) {\n                context.font = options.label.font;\n            }\n\n            if (options.label.shadowColor) {\n                context.shadowColor = options.label.shadowColor;\n            }\n\n            if (options.label.shadowBlur) {\n                context.shadowBlur = options.label.shadowBlur;\n            }\n\n            for (var gridKey in grids) {\n                gridKey = gridKey.split(',');\n                var text = grids[gridKey];\n                var textWidth = context.measureText(text).width;\n                if (!enableCluster) {\n                    context.fillText(text, +gridKey[0] - textWidth / 2, +gridKey[1] + 5);\n                } else {\n                    context.fillText(text, gridKey[0] * size + .5 + offset.x + size / 2 - textWidth / 2, gridKey[1] * size + .5 + offset.y + size / 2 + 5);\n                }\n            }\n        }\n\n        context.restore();\n    }\n};\n\n/**\n * @author kyle / http://nikai.us/\n */\n\nfunction hex_corner$1(center, size, i) {\n    var angle_deg = 60 * i + 30;\n    var angle_rad = Math.PI / 180 * angle_deg;\n    return [center.x + size * Math.cos(angle_rad), center.y + size * Math.sin(angle_rad)];\n}\n\nvar drawHoneycomb = {\n    draw: function draw(context, dataSet, options) {\n\n        context.save();\n\n        var data = dataSet instanceof DataSet ? dataSet.get() : dataSet;\n\n        for (var key in options) {\n            context[key] = options[key];\n        }\n\n        var grids = {};\n\n        var offset = options.offset || {\n            x: 10,\n            y: 10\n        };\n\n        var r = options._size || options.size || 40;\n        r = r / 2 / Math.sin(Math.PI / 3);\n        var dx = r * 2 * Math.sin(Math.PI / 3);\n        var dy = r * 1.5;\n\n        var binsById = {};\n\n        for (var i = 0; i < data.length; i++) {\n            var coordinates = data[i].geometry._coordinates || data[i].geometry.coordinates;\n            var py = (coordinates[1] - offset.y) / dy,\n                pj = Math.round(py),\n                px = (coordinates[0] - offset.x) / dx - (pj & 1 ? .5 : 0),\n                pi = Math.round(px),\n                py1 = py - pj;\n\n            if (Math.abs(py1) * 3 > 1) {\n                var px1 = px - pi,\n                    pi2 = pi + (px < pi ? -1 : 1) / 2,\n                    pj2 = pj + (py < pj ? -1 : 1),\n                    px2 = px - pi2,\n                    py2 = py - pj2;\n                if (px1 * px1 + py1 * py1 > px2 * px2 + py2 * py2) pi = pi2 + (pj & 1 ? 1 : -1) / 2, pj = pj2;\n            }\n\n            var id = pi + \"-\" + pj,\n                bin = binsById[id];\n            if (bin) {\n                bin.push(data[i]);\n            } else {\n                bin = binsById[id] = [data[i]];\n                bin.i = pi;\n                bin.j = pj;\n                bin.x = (pi + (pj & 1 ? 1 / 2 : 0)) * dx;\n                bin.y = pj * dy;\n            }\n        }\n\n        var intensity = new Intensity({\n            max: options.max || 100,\n            maxSize: r,\n            gradient: options.gradient\n        });\n\n        for (var key in binsById) {\n\n            var item = binsById[key];\n\n            context.beginPath();\n\n            for (var j = 0; j < 6; j++) {\n\n                var result = hex_corner$1({\n                    x: item.x + offset.x,\n                    y: item.y + offset.y\n                }, r, j);\n\n                context.lineTo(result[0], result[1]);\n            }\n\n            context.closePath();\n\n            var count = 0;\n            for (var i = 0; i < item.length; i++) {\n                count += item[i].count || 1;\n            }\n            item.count = count;\n\n            context.fillStyle = intensity.getColor(count);\n            context.fill();\n            if (options.strokeStyle && options.lineWidth) {\n                context.stroke();\n            }\n        }\n\n        if (options.label && options.label.show !== false) {\n\n            context.fillStyle = options.label.fillStyle || 'white';\n\n            if (options.label.font) {\n                context.font = options.label.font;\n            }\n\n            if (options.label.shadowColor) {\n                context.shadowColor = options.label.shadowColor;\n            }\n\n            if (options.label.shadowBlur) {\n                context.shadowBlur = options.label.shadowBlur;\n            }\n\n            for (var key in binsById) {\n                var item = binsById[key];\n                var text = item.count;\n                if (text < 0) {\n                    text = text.toFixed(2);\n                } else {\n                    text = ~~text;\n                }\n                var textWidth = context.measureText(text).width;\n                context.fillText(text, item.x + offset.x - textWidth / 2, item.y + offset.y + 5);\n            }\n        }\n\n        context.restore();\n    }\n};\n\nfunction createShader(gl, src, type) {\n    var shader = gl.createShader(type);\n    gl.shaderSource(shader, src);\n    gl.compileShader(shader);\n    return shader;\n}\n\nfunction initShaders(gl, vs_source, fs_source) {\n\n    var vertexShader = createShader(gl, vs_source, gl.VERTEX_SHADER);\n    var fragmentShader = createShader(gl, fs_source, gl.FRAGMENT_SHADER);\n\n    var glProgram = gl.createProgram();\n\n    gl.attachShader(glProgram, vertexShader);\n    gl.attachShader(glProgram, fragmentShader);\n    gl.linkProgram(glProgram);\n\n    gl.useProgram(glProgram);\n\n    return glProgram;\n}\n\nfunction getColorData(color) {\n    var tmpCanvas = document.createElement('canvas');\n    var tmpCtx = tmpCanvas.getContext('2d');\n    tmpCanvas.width = 1;\n    tmpCanvas.height = 1;\n    tmpCtx.fillStyle = color;\n    tmpCtx.fillRect(0, 0, 1, 1);\n    return tmpCtx.getImageData(0, 0, 1, 1).data;\n}\n\nvar vs_s = ['attribute vec4 a_Position;', 'void main() {', 'gl_Position = a_Position;', 'gl_PointSize = 30.0;', '}'].join('');\n\nvar fs_s = ['precision mediump float;', 'uniform vec4 u_FragColor;', 'void main() {', 'gl_FragColor = u_FragColor;', '}'].join('');\n\nfunction draw$2(gl, data, options) {\n\n    if (!data) {\n        return;\n    }\n\n    var program = initShaders(gl, vs_s, fs_s);\n\n    gl.enable(gl.BLEND);\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE);\n\n    //gl.clearColor(0.0, 0.0, 1.0, 1.0);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n\n    var halfCanvasWidth = gl.canvas.width / 2;\n    var halfCanvasHeight = gl.canvas.height / 2;\n\n    // Create a buffer object\n    var vertexBuffer = gl.createBuffer();\n    // Bind the buffer object to target\n    gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n\n    var a_Position = gl.getAttribLocation(program, 'a_Position');\n    // Assign the buffer object to a_Position variable\n    gl.vertexAttribPointer(a_Position, 2, gl.FLOAT, false, 0, 0);\n\n    // Enable the assignment to a_Position variable\n    gl.enableVertexAttribArray(a_Position);\n\n    var uFragColor = gl.getUniformLocation(program, 'u_FragColor');\n\n    var colored = getColorData(options.strokeStyle || 'red');\n\n    gl.uniform4f(uFragColor, colored[0] / 255, colored[1] / 255, colored[2] / 255, colored[3] / 255);\n\n    gl.lineWidth(options.lineWidth || 1);\n\n    for (var i = 0, len = data.length; i < len; i++) {\n        var _geometry = data[i].geometry._coordinates;\n\n        var verticesData = [];\n\n        for (var j = 0; j < _geometry.length; j++) {\n            var item = _geometry[j];\n\n            var x = (item[0] - halfCanvasWidth) / halfCanvasWidth;\n            var y = (halfCanvasHeight - item[1]) / halfCanvasHeight;\n            verticesData.push(x, y);\n        }\n\n        var vertices = new Float32Array(verticesData);\n        // Write date into the buffer object\n        gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);\n        gl.drawArrays(gl.LINE_STRIP, 0, _geometry.length);\n    }\n}\n\nvar line = {\n    draw: draw$2\n};\n\nvar vs_s$1 = ['attribute vec4 a_Position;', 'attribute float a_PointSize;', 'void main() {', 'gl_Position = a_Position;', 'gl_PointSize = a_PointSize;', '}'].join('');\n\nvar fs_s$1 = ['precision mediump float;', 'uniform vec4 u_FragColor;', 'void main() {', 'gl_FragColor = u_FragColor;', '}'].join('');\n\nfunction draw$3(gl, data, options) {\n\n    if (!data) {\n        return;\n    }\n\n    var program = initShaders(gl, vs_s$1, fs_s$1);\n\n    var a_Position = gl.getAttribLocation(program, 'a_Position');\n\n    var a_PointSize = gl.getAttribLocation(program, 'a_PointSize');\n\n    var uFragColor = gl.getUniformLocation(program, 'u_FragColor');\n\n    //gl.clearColor(0.0, 0.0, 1.0, 1.0);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n\n    var halfCanvasWidth = gl.canvas.width / 2;\n    var halfCanvasHeight = gl.canvas.height / 2;\n\n    var verticesData = [];\n    var count = 0;\n    for (var i = 0; i < data.length; i++) {\n        var item = data[i].geometry._coordinates;\n\n        var x = (item[0] - halfCanvasWidth) / halfCanvasWidth;\n        var y = (halfCanvasHeight - item[1]) / halfCanvasHeight;\n\n        if (x < -1 || x > 1 || y < -1 || y > 1) {\n            continue;\n        }\n        verticesData.push(x, y);\n        count++;\n    }\n\n    var vertices = new Float32Array(verticesData);\n    var n = count; // The number of vertices\n\n    // Create a buffer object\n    var vertexBuffer = gl.createBuffer();\n\n    // Bind the buffer object to target\n    gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n    // Write date into the buffer object\n    gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);\n\n    // Assign the buffer object to a_Position variable\n    gl.vertexAttribPointer(a_Position, 2, gl.FLOAT, false, 0, 0);\n\n    // Enable the assignment to a_Position variable\n    gl.enableVertexAttribArray(a_Position);\n\n    gl.vertexAttrib1f(a_PointSize, options._size);\n\n    var colored = getColorData(options.fillStyle || 'red');\n\n    gl.uniform4f(uFragColor, colored[0] / 255, colored[1] / 255, colored[2] / 255, colored[3] / 255);\n    gl.drawArrays(gl.POINTS, 0, n);\n}\n\nvar point = {\n    draw: draw$3\n};\n\nfunction earcut(data, holeIndices, dim) {\n\n    dim = dim || 2;\n\n    var hasHoles = holeIndices && holeIndices.length,\n        outerLen = hasHoles ? holeIndices[0] * dim : data.length,\n        outerNode = linkedList(data, 0, outerLen, dim, true),\n        triangles = [];\n\n    if (!outerNode) return triangles;\n\n    var minX, minY, maxX, maxY, x, y, size;\n\n    if (hasHoles) outerNode = eliminateHoles(data, holeIndices, outerNode, dim);\n\n    // if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n    if (data.length > 80 * dim) {\n        minX = maxX = data[0];\n        minY = maxY = data[1];\n\n        for (var i = dim; i < outerLen; i += dim) {\n            x = data[i];\n            y = data[i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n        }\n\n        // minX, minY and size are later used to transform coords into integers for z-order calculation\n        size = Math.max(maxX - minX, maxY - minY);\n    }\n\n    earcutLinked(outerNode, triangles, dim, minX, minY, size);\n\n    return triangles;\n}\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList(data, start, end, dim, clockwise) {\n    var i, last;\n\n    if (clockwise === signedArea(data, start, end, dim) > 0) {\n        for (i = start; i < end; i += dim) {\n            last = insertNode(i, data[i], data[i + 1], last);\n        }\n    } else {\n        for (i = end - dim; i >= start; i -= dim) {\n            last = insertNode(i, data[i], data[i + 1], last);\n        }\n    }\n\n    if (last && equals(last, last.next)) {\n        removeNode(last);\n        last = last.next;\n    }\n\n    return last;\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints(start, end) {\n    if (!start) return start;\n    if (!end) end = start;\n\n    var p = start,\n        again;\n    do {\n        again = false;\n\n        if (!p.steiner && (equals(p, p.next) || area(p.prev, p, p.next) === 0)) {\n            removeNode(p);\n            p = end = p.prev;\n            if (p === p.next) return null;\n            again = true;\n        } else {\n            p = p.next;\n        }\n    } while (again || p !== end);\n\n    return end;\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked(ear, triangles, dim, minX, minY, size, pass) {\n    if (!ear) return;\n\n    // interlink polygon nodes in z-order\n    if (!pass && size) indexCurve(ear, minX, minY, size);\n\n    var stop = ear,\n        prev,\n        next;\n\n    // iterate through ears, slicing them one by one\n    while (ear.prev !== ear.next) {\n        prev = ear.prev;\n        next = ear.next;\n\n        if (size ? isEarHashed(ear, minX, minY, size) : isEar(ear)) {\n            // cut off the triangle\n            triangles.push(prev.i / dim);\n            triangles.push(ear.i / dim);\n            triangles.push(next.i / dim);\n\n            removeNode(ear);\n\n            // skipping the next vertice leads to less sliver triangles\n            ear = next.next;\n            stop = next.next;\n\n            continue;\n        }\n\n        ear = next;\n\n        // if we looped through the whole remaining polygon and can't find any more ears\n        if (ear === stop) {\n            // try filtering points and slicing again\n            if (!pass) {\n                earcutLinked(filterPoints(ear), triangles, dim, minX, minY, size, 1);\n\n                // if this didn't work, try curing all small self-intersections locally\n            } else if (pass === 1) {\n                ear = cureLocalIntersections(ear, triangles, dim);\n                earcutLinked(ear, triangles, dim, minX, minY, size, 2);\n\n                // as a last resort, try splitting the remaining polygon into two\n            } else if (pass === 2) {\n                splitEarcut(ear, triangles, dim, minX, minY, size);\n            }\n\n            break;\n        }\n    }\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar(ear) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // now make sure we don't have other points inside the potential ear\n    var p = ear.next.next;\n\n    while (p !== ear.prev) {\n        if (pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n        p = p.next;\n    }\n\n    return true;\n}\n\nfunction isEarHashed(ear, minX, minY, size) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // triangle bbox; min & max are calculated like this for speed\n    var minTX = a.x < b.x ? a.x < c.x ? a.x : c.x : b.x < c.x ? b.x : c.x,\n        minTY = a.y < b.y ? a.y < c.y ? a.y : c.y : b.y < c.y ? b.y : c.y,\n        maxTX = a.x > b.x ? a.x > c.x ? a.x : c.x : b.x > c.x ? b.x : c.x,\n        maxTY = a.y > b.y ? a.y > c.y ? a.y : c.y : b.y > c.y ? b.y : c.y;\n\n    // z-order range for the current triangle bbox;\n    var minZ = zOrder(minTX, minTY, minX, minY, size),\n        maxZ = zOrder(maxTX, maxTY, minX, minY, size);\n\n    // first look for points inside the triangle in increasing z-order\n    var p = ear.nextZ;\n\n    while (p && p.z <= maxZ) {\n        if (p !== ear.prev && p !== ear.next && pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n        p = p.nextZ;\n    }\n\n    // then look for points in decreasing z-order\n    p = ear.prevZ;\n\n    while (p && p.z >= minZ) {\n        if (p !== ear.prev && p !== ear.next && pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n    }\n\n    return true;\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections(start, triangles, dim) {\n    var p = start;\n    do {\n        var a = p.prev,\n            b = p.next.next;\n\n        if (!equals(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {\n\n            triangles.push(a.i / dim);\n            triangles.push(p.i / dim);\n            triangles.push(b.i / dim);\n\n            // remove two nodes involved\n            removeNode(p);\n            removeNode(p.next);\n\n            p = start = b;\n        }\n        p = p.next;\n    } while (p !== start);\n\n    return p;\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut(start, triangles, dim, minX, minY, size) {\n    // look for a valid diagonal that divides the polygon into two\n    var a = start;\n    do {\n        var b = a.next.next;\n        while (b !== a.prev) {\n            if (a.i !== b.i && isValidDiagonal(a, b)) {\n                // split the polygon in two by the diagonal\n                var c = splitPolygon(a, b);\n\n                // filter colinear points around the cuts\n                a = filterPoints(a, a.next);\n                c = filterPoints(c, c.next);\n\n                // run earcut on each half\n                earcutLinked(a, triangles, dim, minX, minY, size);\n                earcutLinked(c, triangles, dim, minX, minY, size);\n                return;\n            }\n            b = b.next;\n        }\n        a = a.next;\n    } while (a !== start);\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles(data, holeIndices, outerNode, dim) {\n    var queue = [],\n        i,\n        len,\n        start,\n        end,\n        list;\n\n    for (i = 0, len = holeIndices.length; i < len; i++) {\n        start = holeIndices[i] * dim;\n        end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n        list = linkedList(data, start, end, dim, false);\n        if (list === list.next) list.steiner = true;\n        queue.push(getLeftmost(list));\n    }\n\n    queue.sort(compareX);\n\n    // process holes from left to right\n    for (i = 0; i < queue.length; i++) {\n        eliminateHole(queue[i], outerNode);\n        outerNode = filterPoints(outerNode, outerNode.next);\n    }\n\n    return outerNode;\n}\n\nfunction compareX(a, b) {\n    return a.x - b.x;\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\nfunction eliminateHole(hole, outerNode) {\n    outerNode = findHoleBridge(hole, outerNode);\n    if (outerNode) {\n        var b = splitPolygon(outerNode, hole);\n        filterPoints(b, b.next);\n    }\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge(hole, outerNode) {\n    var p = outerNode,\n        hx = hole.x,\n        hy = hole.y,\n        qx = -Infinity,\n        m;\n\n    // find a segment intersected by a ray from the hole's leftmost point to the left;\n    // segment's endpoint with lesser x will be potential connection point\n    do {\n        if (hy <= p.y && hy >= p.next.y) {\n            var x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);\n            if (x <= hx && x > qx) {\n                qx = x;\n                if (x === hx) {\n                    if (hy === p.y) return p;\n                    if (hy === p.next.y) return p.next;\n                }\n                m = p.x < p.next.x ? p : p.next;\n            }\n        }\n        p = p.next;\n    } while (p !== outerNode);\n\n    if (!m) return null;\n\n    if (hx === qx) return m.prev; // hole touches outer segment; pick lower endpoint\n\n    // look for points inside the triangle of hole point, segment intersection and endpoint;\n    // if there are no points found, we have a valid connection;\n    // otherwise choose the point of the minimum angle with the ray as connection point\n\n    var stop = m,\n        mx = m.x,\n        my = m.y,\n        tanMin = Infinity,\n        tan;\n\n    p = m.next;\n\n    while (p !== stop) {\n        if (hx >= p.x && p.x >= mx && pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {\n\n            tan = Math.abs(hy - p.y) / (hx - p.x); // tangential\n\n            if ((tan < tanMin || tan === tanMin && p.x > m.x) && locallyInside(p, hole)) {\n                m = p;\n                tanMin = tan;\n            }\n        }\n\n        p = p.next;\n    }\n\n    return m;\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve(start, minX, minY, size) {\n    var p = start;\n    do {\n        if (p.z === null) p.z = zOrder(p.x, p.y, minX, minY, size);\n        p.prevZ = p.prev;\n        p.nextZ = p.next;\n        p = p.next;\n    } while (p !== start);\n\n    p.prevZ.nextZ = null;\n    p.prevZ = null;\n\n    sortLinked(p);\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked(list) {\n    var i,\n        p,\n        q,\n        e,\n        tail,\n        numMerges,\n        pSize,\n        qSize,\n        inSize = 1;\n\n    do {\n        p = list;\n        list = null;\n        tail = null;\n        numMerges = 0;\n\n        while (p) {\n            numMerges++;\n            q = p;\n            pSize = 0;\n            for (i = 0; i < inSize; i++) {\n                pSize++;\n                q = q.nextZ;\n                if (!q) break;\n            }\n\n            qSize = inSize;\n\n            while (pSize > 0 || qSize > 0 && q) {\n\n                if (pSize === 0) {\n                    e = q;\n                    q = q.nextZ;\n                    qSize--;\n                } else if (qSize === 0 || !q) {\n                    e = p;\n                    p = p.nextZ;\n                    pSize--;\n                } else if (p.z <= q.z) {\n                    e = p;\n                    p = p.nextZ;\n                    pSize--;\n                } else {\n                    e = q;\n                    q = q.nextZ;\n                    qSize--;\n                }\n\n                if (tail) tail.nextZ = e;else list = e;\n\n                e.prevZ = tail;\n                tail = e;\n            }\n\n            p = q;\n        }\n\n        tail.nextZ = null;\n        inSize *= 2;\n    } while (numMerges > 1);\n\n    return list;\n}\n\n// z-order of a point given coords and size of the data bounding box\nfunction zOrder(x, y, minX, minY, size) {\n    // coords are transformed into non-negative 15-bit integer range\n    x = 32767 * (x - minX) / size;\n    y = 32767 * (y - minY) / size;\n\n    x = (x | x << 8) & 0x00FF00FF;\n    x = (x | x << 4) & 0x0F0F0F0F;\n    x = (x | x << 2) & 0x33333333;\n    x = (x | x << 1) & 0x55555555;\n\n    y = (y | y << 8) & 0x00FF00FF;\n    y = (y | y << 4) & 0x0F0F0F0F;\n    y = (y | y << 2) & 0x33333333;\n    y = (y | y << 1) & 0x55555555;\n\n    return x | y << 1;\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost(start) {\n    var p = start,\n        leftmost = start;\n    do {\n        if (p.x < leftmost.x) leftmost = p;\n        p = p.next;\n    } while (p !== start);\n\n    return leftmost;\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {\n    return (cx - px) * (ay - py) - (ax - px) * (cy - py) >= 0 && (ax - px) * (by - py) - (bx - px) * (ay - py) >= 0 && (bx - px) * (cy - py) - (cx - px) * (by - py) >= 0;\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal(a, b) {\n    return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) && locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b);\n}\n\n// signed area of a triangle\nfunction area(p, q, r) {\n    return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);\n}\n\n// check if two points are equal\nfunction equals(p1, p2) {\n    return p1.x === p2.x && p1.y === p2.y;\n}\n\n// check if two segments intersect\nfunction intersects(p1, q1, p2, q2) {\n    if (equals(p1, q1) && equals(p2, q2) || equals(p1, q2) && equals(p2, q1)) return true;\n    return area(p1, q1, p2) > 0 !== area(p1, q1, q2) > 0 && area(p2, q2, p1) > 0 !== area(p2, q2, q1) > 0;\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon(a, b) {\n    var p = a;\n    do {\n        if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i && intersects(p, p.next, a, b)) return true;\n        p = p.next;\n    } while (p !== a);\n\n    return false;\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside(a, b) {\n    return area(a.prev, a, a.next) < 0 ? area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 : area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside(a, b) {\n    var p = a,\n        inside = false,\n        px = (a.x + b.x) / 2,\n        py = (a.y + b.y) / 2;\n    do {\n        if (p.y > py !== p.next.y > py && px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x) inside = !inside;\n        p = p.next;\n    } while (p !== a);\n\n    return inside;\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon(a, b) {\n    var a2 = new Node(a.i, a.x, a.y),\n        b2 = new Node(b.i, b.x, b.y),\n        an = a.next,\n        bp = b.prev;\n\n    a.next = b;\n    b.prev = a;\n\n    a2.next = an;\n    an.prev = a2;\n\n    b2.next = a2;\n    a2.prev = b2;\n\n    bp.next = b2;\n    b2.prev = bp;\n\n    return b2;\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode(i, x, y, last) {\n    var p = new Node(i, x, y);\n\n    if (!last) {\n        p.prev = p;\n        p.next = p;\n    } else {\n        p.next = last.next;\n        p.prev = last;\n        last.next.prev = p;\n        last.next = p;\n    }\n    return p;\n}\n\nfunction removeNode(p) {\n    p.next.prev = p.prev;\n    p.prev.next = p.next;\n\n    if (p.prevZ) p.prevZ.nextZ = p.nextZ;\n    if (p.nextZ) p.nextZ.prevZ = p.prevZ;\n}\n\nfunction Node(i, x, y) {\n    // vertice index in coordinates array\n    this.i = i;\n\n    // vertex coordinates\n    this.x = x;\n    this.y = y;\n\n    // previous and next vertice nodes in a polygon ring\n    this.prev = null;\n    this.next = null;\n\n    // z-order curve value\n    this.z = null;\n\n    // previous and next nodes in z-order\n    this.prevZ = null;\n    this.nextZ = null;\n\n    // indicates whether this is a steiner point\n    this.steiner = false;\n}\n\n// return a percentage difference between the polygon area and its triangulation area;\n// used to verify correctness of triangulation\nearcut.deviation = function (data, holeIndices, dim, triangles) {\n    var hasHoles = holeIndices && holeIndices.length;\n    var outerLen = hasHoles ? holeIndices[0] * dim : data.length;\n\n    var polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));\n    if (hasHoles) {\n        for (var i = 0, len = holeIndices.length; i < len; i++) {\n            var start = holeIndices[i] * dim;\n            var end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n            polygonArea -= Math.abs(signedArea(data, start, end, dim));\n        }\n    }\n\n    var trianglesArea = 0;\n    for (i = 0; i < triangles.length; i += 3) {\n        var a = triangles[i] * dim;\n        var b = triangles[i + 1] * dim;\n        var c = triangles[i + 2] * dim;\n        trianglesArea += Math.abs((data[a] - data[c]) * (data[b + 1] - data[a + 1]) - (data[a] - data[b]) * (data[c + 1] - data[a + 1]));\n    }\n\n    return polygonArea === 0 && trianglesArea === 0 ? 0 : Math.abs((trianglesArea - polygonArea) / polygonArea);\n};\n\nfunction signedArea(data, start, end, dim) {\n    var sum = 0;\n    for (var i = start, j = end - dim; i < end; i += dim) {\n        sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);\n        j = i;\n    }\n    return sum;\n}\n\n// turn a polygon in a multi-dimensional array form (e.g. as in GeoJSON) into a form Earcut accepts\nearcut.flatten = function (data) {\n    var dim = data[0][0].length,\n        result = { vertices: [], holes: [], dimensions: dim },\n        holeIndex = 0;\n\n    for (var i = 0; i < data.length; i++) {\n        for (var j = 0; j < data[i].length; j++) {\n            for (var d = 0; d < dim; d++) {\n                result.vertices.push(data[i][j][d]);\n            }\n        }\n        if (i > 0) {\n            holeIndex += data[i - 1].length;\n            result.holes.push(holeIndex);\n        }\n    }\n    return result;\n};\n\nvar vs_s$2 = ['attribute vec4 a_Position;', 'void main() {', 'gl_Position = a_Position;', 'gl_PointSize = 30.0;', '}'].join('');\n\nvar fs_s$2 = ['precision mediump float;', 'uniform vec4 u_FragColor;', 'void main() {', 'gl_FragColor = u_FragColor;', '}'].join('');\n\nfunction draw$4(gl, data, options) {\n\n    if (!data) {\n        return;\n    }\n\n    // gl.clearColor(0.0, 0.0, 0.0, 1.0);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n    gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\n\n    var program = initShaders(gl, vs_s$2, fs_s$2);\n\n    gl.enable(gl.BLEND);\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE);\n\n    var halfCanvasWidth = gl.canvas.width / 2;\n    var halfCanvasHeight = gl.canvas.height / 2;\n\n    // Bind the buffer object to target\n    gl.bindBuffer(gl.ARRAY_BUFFER, gl.createBuffer());\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, gl.createBuffer());\n\n    var a_Position = gl.getAttribLocation(program, 'a_Position');\n    // Assign the buffer object to a_Position variable\n    gl.vertexAttribPointer(a_Position, 2, gl.FLOAT, false, 0, 0);\n\n    // Enable the assignment to a_Position variable\n    gl.enableVertexAttribArray(a_Position);\n\n    var uFragColor = gl.getUniformLocation(program, 'u_FragColor');\n\n    var colored = getColorData(options.fillStyle || 'red');\n\n    gl.uniform4f(uFragColor, colored[0] / 255, colored[1] / 255, colored[2] / 255, colored[3] / 255);\n\n    gl.lineWidth(options.lineWidth || 1);\n\n    var verticesArr = [];\n    var trianglesArr = [];\n\n    var maxSize = 65536;\n    var indexOffset = 0;\n\n    for (var i = 0, len = data.length; i < len; i++) {\n\n        var flatten = earcut.flatten(data[i].geometry._coordinates || data[i].geometry.coordinates);\n        var vertices = flatten.vertices;\n        indexOffset = verticesArr.length / 2;\n        for (var j = 0; j < vertices.length; j += 2) {\n            vertices[j] = (vertices[j] - halfCanvasWidth) / halfCanvasWidth;\n            vertices[j + 1] = (halfCanvasHeight - vertices[j + 1]) / halfCanvasHeight;\n        }\n\n        if ((verticesArr.length + vertices.length) / 2 > maxSize) {\n            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(verticesArr), gl.STATIC_DRAW);\n            gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(trianglesArr), gl.STATIC_DRAW);\n            gl.drawElements(gl.TRIANGLES, trianglesArr.length, gl.UNSIGNED_SHORT, 0);\n            verticesArr.length = 0;\n            trianglesArr.length = 0;\n            indexOffset = 0;\n        }\n\n        for (var j = 0; j < vertices.length; j++) {\n            verticesArr.push(vertices[j]);\n        }\n\n        var triangles = earcut(vertices, flatten.holes, flatten.dimensions);\n        for (var j = 0; j < triangles.length; j++) {\n            trianglesArr.push(triangles[j] + indexOffset);\n        }\n    }\n\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(verticesArr), gl.STATIC_DRAW);\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(trianglesArr), gl.STATIC_DRAW);\n    gl.drawElements(gl.TRIANGLES, trianglesArr.length, gl.UNSIGNED_SHORT, 0);\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n}\n\nvar polygon = {\n    draw: draw$4\n};\n\n/**\n * @author kyle / http://nikai.us/\n */\nvar webglDrawSimple = {\n    draw: function draw(gl, dataSet, options) {\n        var data = dataSet instanceof DataSet ? dataSet.get() : dataSet;\n        if (data.length > 0) {\n            if (data[0].geometry.type == \"LineString\") {\n                line.draw(gl, data, options);\n            } else if (data[0].geometry.type == \"Polygon\" || data[0].geometry.type == \"MultiPolygon\") {\n                polygon.draw(gl, data, options);\n            } else {\n                point.draw(gl, data, options);\n            }\n        }\n    }\n};\n\n/**\n  * 根据弧线的坐标节点数组\n  */\nfunction getCurvePoints(points, options) {\n  options = options || {};\n  var curvePoints = [];\n  for (var i = 0; i < points.length - 1; i++) {\n    var p = getCurveByTwoPoints(points[i], points[i + 1], options.count);\n    if (p && p.length > 0) {\n      curvePoints = curvePoints.concat(p);\n    }\n  }\n  return curvePoints;\n}\n\n/**\n * 根据两点获取曲线坐标点数组\n * @param Point 起点\n * @param Point 终点\n */\nfunction getCurveByTwoPoints(obj1, obj2, count) {\n  if (!obj1 || !obj2) {\n    return null;\n  }\n\n  var B1 = function B1(x) {\n    return 1 - 2 * x + x * x;\n  };\n  var B2 = function B2(x) {\n    return 2 * x - 2 * x * x;\n  };\n  var B3 = function B3(x) {\n    return x * x;\n  };\n\n  var curveCoordinates = [];\n\n  var count = count || 40; // 曲线是由一些小的线段组成的，这个表示这个曲线所有到的折线的个数\n  var isFuture = false;\n  var t, h, h2, lat3, lng3, j, t2;\n  var LnArray = [];\n  var i = 0;\n  var inc = 0;\n\n  if (typeof obj2 == \"undefined\") {\n    if (typeof curveCoordinates != \"undefined\") {\n      curveCoordinates = [];\n    }\n    return;\n  }\n\n  var lat1 = parseFloat(obj1.lat);\n  var lat2 = parseFloat(obj2.lat);\n  var lng1 = parseFloat(obj1.lng);\n  var lng2 = parseFloat(obj2.lng);\n\n  // 计算曲线角度的方法\n  if (lng2 > lng1) {\n    if (parseFloat(lng2 - lng1) > 180) {\n      if (lng1 < 0) {\n        lng1 = parseFloat(180 + 180 + lng1);\n        lng2 = parseFloat(180 + 180 + lng2);\n      }\n    }\n  }\n  // 此时纠正了 lng1 lng2\n  j = 0;\n  t2 = 0;\n  // 纬度相同\n  if (lat2 == lat1) {\n    t = 0;\n    h = lng1 - lng2;\n    // 经度相同\n  } else if (lng2 == lng1) {\n    t = Math.PI / 2;\n    h = lat1 - lat2;\n  } else {\n    t = Math.atan((lat2 - lat1) / (lng2 - lng1));\n    h = (lat2 - lat1) / Math.sin(t);\n  }\n  if (t2 == 0) {\n    t2 = t + Math.PI / 5;\n  }\n  h2 = h / 2;\n  lng3 = h2 * Math.cos(t2) + lng1;\n  lat3 = h2 * Math.sin(t2) + lat1;\n\n  for (i = 0; i < count + 1; i++) {\n    var x = lng1 * B1(inc) + lng3 * B2(inc) + lng2 * B3(inc);\n    var y = lat1 * B1(inc) + lat3 * B2(inc) + lat2 * B3(inc);\n    var lng1_src = obj1.lng;\n    var lng2_src = obj2.lng;\n\n    curveCoordinates.push([lng1_src < 0 && lng2_src > 0 ? x - 360 : x, y]);\n    inc = inc + 1 / count;\n  }\n  return curveCoordinates;\n}\n\nvar curve = {\n  getPoints: getCurvePoints\n};\n\n/* \nFDEB algorithm implementation [www.win.tue.nl/~dholten/papers/forcebundles_eurovis.pdf].\n\nAuthor:  (github.com/upphiminn)\n2013\n\n*/\n\nvar ForceEdgeBundling = function ForceEdgeBundling() {\n    var data_nodes = {},\n        // {'nodeid':{'x':,'y':},..}\n    data_edges = [],\n        // [{'source':'nodeid1', 'target':'nodeid2'},..]\n    compatibility_list_for_edge = [],\n        subdivision_points_for_edge = [],\n        K = 0.1,\n        // global bundling constant controling edge stiffness\n    S_initial = 0.1,\n        // init. distance to move points\n    P_initial = 1,\n        // init. subdivision number\n    P_rate = 2,\n        // subdivision rate increase\n    C = 6,\n        // number of cycles to perform\n    I_initial = 70,\n        // init. number of iterations for cycle\n    I_rate = 0.6666667,\n        // rate at which iteration number decreases i.e. 2/3\n    compatibility_threshold = 0.6,\n        invers_quadratic_mode = false,\n        eps = 1e-8;\n\n    /*** Geometry Helper Methods ***/\n    function vector_dot_product(p, q) {\n        return p.x * q.x + p.y * q.y;\n    }\n\n    function edge_as_vector(P) {\n        return { 'x': data_nodes[P.target].x - data_nodes[P.source].x,\n            'y': data_nodes[P.target].y - data_nodes[P.source].y };\n    }\n\n    function edge_length(e) {\n        return Math.sqrt(Math.pow(data_nodes[e.source].x - data_nodes[e.target].x, 2) + Math.pow(data_nodes[e.source].y - data_nodes[e.target].y, 2));\n    }\n\n    function custom_edge_length(e) {\n        return Math.sqrt(Math.pow(e.source.x - e.target.x, 2) + Math.pow(e.source.y - e.target.y, 2));\n    }\n\n    function edge_midpoint(e) {\n        var middle_x = (data_nodes[e.source].x + data_nodes[e.target].x) / 2.0;\n        var middle_y = (data_nodes[e.source].y + data_nodes[e.target].y) / 2.0;\n        return { 'x': middle_x, 'y': middle_y };\n    }\n\n    function compute_divided_edge_length(e_idx) {\n        var length = 0;\n        for (var i = 1; i < subdivision_points_for_edge[e_idx].length; i++) {\n            var segment_length = euclidean_distance(subdivision_points_for_edge[e_idx][i], subdivision_points_for_edge[e_idx][i - 1]);\n            length += segment_length;\n        }\n        return length;\n    }\n\n    function euclidean_distance(p, q) {\n        return Math.sqrt(Math.pow(p.x - q.x, 2) + Math.pow(p.y - q.y, 2));\n    }\n\n    function project_point_on_line(p, Q) {\n        var L = Math.sqrt((Q.target.x - Q.source.x) * (Q.target.x - Q.source.x) + (Q.target.y - Q.source.y) * (Q.target.y - Q.source.y));\n        var r = ((Q.source.y - p.y) * (Q.source.y - Q.target.y) - (Q.source.x - p.x) * (Q.target.x - Q.source.x)) / (L * L);\n\n        return { 'x': Q.source.x + r * (Q.target.x - Q.source.x), 'y': Q.source.y + r * (Q.target.y - Q.source.y) };\n    }\n\n    /*** ********************** ***/\n\n    /*** Initialization Methods ***/\n    function initialize_edge_subdivisions() {\n        for (var i = 0; i < data_edges.length; i++) {\n            if (P_initial == 1) subdivision_points_for_edge[i] = []; //0 subdivisions\n            else {\n                    subdivision_points_for_edge[i] = [];\n                    subdivision_points_for_edge[i].push(data_nodes[data_edges[i].source]);\n                    subdivision_points_for_edge[i].push(data_nodes[data_edges[i].target]);\n                }\n        }\n    }\n\n    function initialize_compatibility_lists() {\n        for (var i = 0; i < data_edges.length; i++) {\n            compatibility_list_for_edge[i] = [];\n        } //0 compatible edges.\n    }\n\n    function filter_self_loops(edgelist) {\n        var filtered_edge_list = [];\n        for (var e = 0; e < edgelist.length; e++) {\n            if (data_nodes[edgelist[e].source].x != data_nodes[edgelist[e].target].x && data_nodes[edgelist[e].source].y != data_nodes[edgelist[e].target].y) {\n                //or smaller than eps\n                filtered_edge_list.push(edgelist[e]);\n            }\n        }\n\n        return filtered_edge_list;\n    }\n    /*** ********************** ***/\n\n    /*** Force Calculation Methods ***/\n    function apply_spring_force(e_idx, i, kP) {\n\n        var prev = subdivision_points_for_edge[e_idx][i - 1];\n        var next = subdivision_points_for_edge[e_idx][i + 1];\n        var crnt = subdivision_points_for_edge[e_idx][i];\n\n        var x = prev.x - crnt.x + next.x - crnt.x;\n        var y = prev.y - crnt.y + next.y - crnt.y;\n\n        x *= kP;\n        y *= kP;\n\n        return { 'x': x, 'y': y };\n    }\n\n    function apply_electrostatic_force(e_idx, i, S) {\n        var sum_of_forces = { 'x': 0, 'y': 0 };\n        var compatible_edges_list = compatibility_list_for_edge[e_idx];\n\n        for (var oe = 0; oe < compatible_edges_list.length; oe++) {\n            var force = { 'x': subdivision_points_for_edge[compatible_edges_list[oe]][i].x - subdivision_points_for_edge[e_idx][i].x,\n                'y': subdivision_points_for_edge[compatible_edges_list[oe]][i].y - subdivision_points_for_edge[e_idx][i].y };\n\n            if (Math.abs(force.x) > eps || Math.abs(force.y) > eps) {\n\n                var diff = 1 / Math.pow(custom_edge_length({ 'source': subdivision_points_for_edge[compatible_edges_list[oe]][i],\n                    'target': subdivision_points_for_edge[e_idx][i] }), 1);\n\n                sum_of_forces.x += force.x * diff;\n                sum_of_forces.y += force.y * diff;\n            }\n        }\n        return sum_of_forces;\n    }\n\n    function apply_resulting_forces_on_subdivision_points(e_idx, P, S) {\n        var kP = K / (edge_length(data_edges[e_idx]) * (P + 1)); // kP=K/|P|(number of segments), where |P| is the initial length of edge P.\n        // (length * (num of sub division pts - 1))\n        var resulting_forces_for_subdivision_points = [{ 'x': 0, 'y': 0 }];\n        for (var i = 1; i < P + 1; i++) {\n            // exclude initial end points of the edge 0 and P+1\n            var resulting_force = { 'x': 0, 'y': 0 };\n\n            var spring_force = apply_spring_force(e_idx, i, kP);\n            var electrostatic_force = apply_electrostatic_force(e_idx, i, S);\n\n            resulting_force.x = S * (spring_force.x + electrostatic_force.x);\n            resulting_force.y = S * (spring_force.y + electrostatic_force.y);\n\n            resulting_forces_for_subdivision_points.push(resulting_force);\n        }\n        resulting_forces_for_subdivision_points.push({ 'x': 0, 'y': 0 });\n        return resulting_forces_for_subdivision_points;\n    }\n    /*** ********************** ***/\n\n    /*** Edge Division Calculation Methods ***/\n    function update_edge_divisions(P) {\n        for (var e_idx = 0; e_idx < data_edges.length; e_idx++) {\n\n            if (P == 1) {\n                subdivision_points_for_edge[e_idx].push(data_nodes[data_edges[e_idx].source]); // source\n                subdivision_points_for_edge[e_idx].push(edge_midpoint(data_edges[e_idx])); // mid point\n                subdivision_points_for_edge[e_idx].push(data_nodes[data_edges[e_idx].target]); // target\n            } else {\n\n                var divided_edge_length = compute_divided_edge_length(e_idx);\n                var segment_length = divided_edge_length / (P + 1);\n                var current_segment_length = segment_length;\n                var new_subdivision_points = [];\n                new_subdivision_points.push(data_nodes[data_edges[e_idx].source]); //source\n\n                for (var i = 1; i < subdivision_points_for_edge[e_idx].length; i++) {\n                    var old_segment_length = euclidean_distance(subdivision_points_for_edge[e_idx][i], subdivision_points_for_edge[e_idx][i - 1]);\n\n                    while (old_segment_length > current_segment_length) {\n                        var percent_position = current_segment_length / old_segment_length;\n                        var new_subdivision_point_x = subdivision_points_for_edge[e_idx][i - 1].x;\n                        var new_subdivision_point_y = subdivision_points_for_edge[e_idx][i - 1].y;\n\n                        new_subdivision_point_x += percent_position * (subdivision_points_for_edge[e_idx][i].x - subdivision_points_for_edge[e_idx][i - 1].x);\n                        new_subdivision_point_y += percent_position * (subdivision_points_for_edge[e_idx][i].y - subdivision_points_for_edge[e_idx][i - 1].y);\n                        new_subdivision_points.push({ 'x': new_subdivision_point_x,\n                            'y': new_subdivision_point_y });\n\n                        old_segment_length -= current_segment_length;\n                        current_segment_length = segment_length;\n                    }\n                    current_segment_length -= old_segment_length;\n                }\n                new_subdivision_points.push(data_nodes[data_edges[e_idx].target]); //target\n                subdivision_points_for_edge[e_idx] = new_subdivision_points;\n            }\n        }\n    }\n    /*** ********************** ***/\n\n    /*** Edge compatibility measures ***/\n    function angle_compatibility(P, Q) {\n        var result = Math.abs(vector_dot_product(edge_as_vector(P), edge_as_vector(Q)) / (edge_length(P) * edge_length(Q)));\n        return result;\n    }\n\n    function scale_compatibility(P, Q) {\n        var lavg = (edge_length(P) + edge_length(Q)) / 2.0;\n        var result = 2.0 / (lavg / Math.min(edge_length(P), edge_length(Q)) + Math.max(edge_length(P), edge_length(Q)) / lavg);\n        return result;\n    }\n\n    function position_compatibility(P, Q) {\n        var lavg = (edge_length(P) + edge_length(Q)) / 2.0;\n        var midP = { 'x': (data_nodes[P.source].x + data_nodes[P.target].x) / 2.0,\n            'y': (data_nodes[P.source].y + data_nodes[P.target].y) / 2.0 };\n        var midQ = { 'x': (data_nodes[Q.source].x + data_nodes[Q.target].x) / 2.0,\n            'y': (data_nodes[Q.source].y + data_nodes[Q.target].y) / 2.0 };\n        var result = lavg / (lavg + euclidean_distance(midP, midQ));\n        return result;\n    }\n\n    function edge_visibility(P, Q) {\n        var I0 = project_point_on_line(data_nodes[Q.source], { 'source': data_nodes[P.source],\n            'target': data_nodes[P.target] });\n        var I1 = project_point_on_line(data_nodes[Q.target], { 'source': data_nodes[P.source],\n            'target': data_nodes[P.target] }); //send acutal edge points positions\n        var midI = { 'x': (I0.x + I1.x) / 2.0,\n            'y': (I0.y + I1.y) / 2.0 };\n        var midP = { 'x': (data_nodes[P.source].x + data_nodes[P.target].x) / 2.0,\n            'y': (data_nodes[P.source].y + data_nodes[P.target].y) / 2.0 };\n        var result = Math.max(0, 1 - 2 * euclidean_distance(midP, midI) / euclidean_distance(I0, I1));\n        return result;\n    }\n\n    function visibility_compatibility(P, Q) {\n        return Math.min(edge_visibility(P, Q), edge_visibility(Q, P));\n    }\n\n    function compatibility_score(P, Q) {\n        var result = angle_compatibility(P, Q) * scale_compatibility(P, Q) * position_compatibility(P, Q) * visibility_compatibility(P, Q);\n\n        return result;\n    }\n\n    function are_compatible(P, Q) {\n        // console.log('compatibility ' + P.source +' - '+ P.target + ' and ' + Q.source +' '+ Q.target);\n        return compatibility_score(P, Q) >= compatibility_threshold;\n    }\n\n    function compute_compatibility_lists() {\n        for (var e = 0; e < data_edges.length - 1; e++) {\n            for (var oe = e + 1; oe < data_edges.length; oe++) {\n                // don't want any duplicates\n                if (e == oe) continue;else {\n                    if (are_compatible(data_edges[e], data_edges[oe])) {\n                        compatibility_list_for_edge[e].push(oe);\n                        compatibility_list_for_edge[oe].push(e);\n                    }\n                }\n            }\n        }\n    }\n\n    /*** ************************ ***/\n\n    /*** Main Bundling Loop Methods ***/\n    var forcebundle = function forcebundle() {\n        var S = S_initial;\n        var I = I_initial;\n        var P = P_initial;\n\n        initialize_edge_subdivisions();\n        initialize_compatibility_lists();\n        update_edge_divisions(P);\n        compute_compatibility_lists();\n        for (var cycle = 0; cycle < C; cycle++) {\n            for (var iteration = 0; iteration < I; iteration++) {\n                var forces = [];\n                for (var edge = 0; edge < data_edges.length; edge++) {\n                    forces[edge] = apply_resulting_forces_on_subdivision_points(edge, P, S);\n                }\n                for (var e = 0; e < data_edges.length; e++) {\n                    for (var i = 0; i < P + 1; i++) {\n                        subdivision_points_for_edge[e][i].x += forces[e][i].x;\n                        subdivision_points_for_edge[e][i].y += forces[e][i].y;\n                    }\n                }\n            }\n            //prepare for next cycle\n            S = S / 2;\n            P = P * 2;\n            I = I_rate * I;\n\n            update_edge_divisions(P);\n            // console.log('C' + cycle);\n            // console.log('P' + P);\n            // console.log('S' + S);\n        }\n        return subdivision_points_for_edge;\n    };\n    /*** ************************ ***/\n\n    /*** Getters/Setters Methods ***/\n    forcebundle.nodes = function (nl) {\n        if (arguments.length == 0) {\n            return data_nodes;\n        } else {\n            data_nodes = nl;\n        }\n        return forcebundle;\n    };\n\n    forcebundle.edges = function (ll) {\n        if (arguments.length == 0) {\n            return data_edges;\n        } else {\n            data_edges = filter_self_loops(ll); //remove edges to from to the same point\n        }\n        return forcebundle;\n    };\n\n    forcebundle.bundling_stiffness = function (k) {\n        if (arguments.length == 0) {\n            return K;\n        } else {\n            K = k;\n        }\n        return forcebundle;\n    };\n\n    forcebundle.step_size = function (step) {\n        if (arguments.length == 0) {\n            return S_initial;\n        } else {\n            S_initial = step;\n        }\n        return forcebundle;\n    };\n\n    forcebundle.cycles = function (c) {\n        if (arguments.length == 0) {\n            return C;\n        } else {\n            C = c;\n        }\n        return forcebundle;\n    };\n\n    forcebundle.iterations = function (i) {\n        if (arguments.length == 0) {\n            return I_initial;\n        } else {\n            I_initial = i;\n        }\n        return forcebundle;\n    };\n\n    forcebundle.iterations_rate = function (i) {\n        if (arguments.length == 0) {\n            return I_rate;\n        } else {\n            I_rate = i;\n        }\n        return forcebundle;\n    };\n\n    forcebundle.subdivision_points_seed = function (p) {\n        if (arguments.length == 0) {\n            return P;\n        } else {\n            P = p;\n        }\n        return forcebundle;\n    };\n\n    forcebundle.subdivision_rate = function (r) {\n        if (arguments.length == 0) {\n            return P_rate;\n        } else {\n            P_rate = r;\n        }\n        return forcebundle;\n    };\n\n    forcebundle.compatbility_threshold = function (t) {\n        if (arguments.length == 0) {\n            return compatbility_threshold;\n        } else {\n            compatibility_threshold = t;\n        }\n        return forcebundle;\n    };\n\n    /*** ************************ ***/\n\n    return forcebundle;\n};\n\n/**\n * @author kyle / http://nikai.us/\n */\n\n/**\n * Category\n * @param {Object} splitList:\n *   { \n *       other: 1,\n *       1: 2,\n *       2: 3,\n *       3: 4,\n *       4: 5,\n *       5: 6,\n *       6: 7\n *   }\n */\nfunction Category(splitList) {\n    this.splitList = splitList || {\n        other: 1\n    };\n}\n\nCategory.prototype.get = function (count) {\n\n    var splitList = this.splitList;\n\n    var value = splitList['other'];\n\n    for (var i in splitList) {\n        if (count == i) {\n            value = splitList[i];\n            break;\n        }\n    }\n\n    return value;\n};\n\n/**\n * 根据DataSet自动生成对应的splitList\n */\nCategory.prototype.generateByDataSet = function (dataSet, color) {\n    var colors = color || ['rgba(255, 255, 0, 0.8)', 'rgba(253, 98, 104, 0.8)', 'rgba(255, 146, 149, 0.8)', 'rgba(255, 241, 193, 0.8)', 'rgba(110, 176, 253, 0.8)', 'rgba(52, 139, 251, 0.8)', 'rgba(17, 102, 252, 0.8)'];\n    var data = dataSet.get();\n    this.splitList = {};\n    var count = 0;\n    for (var i = 0; i < data.length; i++) {\n        if (this.splitList[data[i].count] === undefined) {\n            this.splitList[data[i].count] = colors[count];\n            count++;\n        }\n        if (count >= colors.length - 1) {\n            break;\n        }\n    }\n\n    this.splitList['other'] = colors[colors.length - 1];\n};\n\nCategory.prototype.getLegend = function (options) {\n    var splitList = this.splitList;\n    var container = document.createElement('div');\n    container.style.cssText = \"background:#fff; padding: 5px; border: 1px solid #ccc;\";\n    var html = '';\n    for (var key in splitList) {\n        html += '<div style=\"line-height: 19px;\" value=\"' + key + '\"><span style=\"vertical-align: -2px; display: inline-block; width: 30px;height: 19px;background:' + splitList[key] + ';\"></span><span style=\"margin-left: 3px;\">' + key + '<span></div>';\n    }\n    container.innerHTML = html;\n    return container;\n};\n\n/**\n * @author kyle / http://nikai.us/\n */\n\n/**\n * Choropleth\n * @param {Object} splitList:\n *       [\n *           {\n *               start: 0,\n *               end: 2,\n *               value: randomColor()\n *           },{\n *               start: 2,\n *               end: 4,\n *               value: randomColor()\n *           },{\n *               start: 4,\n *               value: randomColor()\n *           }\n *       ];\n *\n */\nfunction Choropleth(splitList) {\n    this.splitList = splitList || [{\n        start: 0,\n        value: 'red'\n    }];\n}\n\nChoropleth.prototype.get = function (count) {\n    var splitList = this.splitList;\n\n    var value = false;\n\n    for (var i = 0; i < splitList.length; i++) {\n        if ((splitList[i].start === undefined || splitList[i].start !== undefined && count >= splitList[i].start) && (splitList[i].end === undefined || splitList[i].end !== undefined && count < splitList[i].end)) {\n            value = splitList[i].value;\n            break;\n        }\n    }\n\n    return value;\n};\n\n/**\n * 根据DataSet自动生成对应的splitList\n */\nChoropleth.prototype.generateByDataSet = function (dataSet) {\n\n    var min = dataSet.getMin('count');\n    var max = dataSet.getMax('count');\n\n    this.generateByMinMax(min, max);\n};\n\n/**\n * 根据DataSet自动生成对应的splitList\n */\nChoropleth.prototype.generateByMinMax = function (min, max) {\n    var colors = ['rgba(255, 255, 0, 0.8)', 'rgba(253, 98, 104, 0.8)', 'rgba(255, 146, 149, 0.8)', 'rgba(255, 241, 193, 0.8)', 'rgba(110, 176, 253, 0.8)', 'rgba(52, 139, 251, 0.8)', 'rgba(17, 102, 252, 0.8)'];\n    var splitNum = Number((max - min) / 7);\n    // console.log(splitNum)\n    max = Number(max);\n    var index = Number(min);\n    this.splitList = [];\n    var count = 0;\n\n    while (index < max) {\n        this.splitList.push({\n            start: index,\n            end: index + splitNum,\n            value: colors[count]\n        });\n        count++;\n        index += splitNum;\n        // console.log(index, max)\n    }\n    // console.log('splitNum')\n};\n\nChoropleth.prototype.getLegend = function (options) {\n    var splitList = this.splitList;\n};\n\n/**\n * @author Mofei<http://www.zhuwenlong.com>\n */\n\nvar MapHelper = function () {\n    function MapHelper(id, type, opt) {\n        classCallCheck(this, MapHelper);\n\n        if (!id || !type) {\n            console.warn('id 和 type 为必填项');\n            return false;\n        }\n\n        if (type == 'baidu') {\n            if (!BMap) {\n                console.warn('请先引入百度地图JS API');\n                return false;\n            }\n        } else {\n            console.warn('暂不支持你的地图类型');\n        }\n        this.type = type;\n        var center = opt && opt.center ? opt.center : [106.962497, 38.208726];\n        var zoom = opt && opt.zoom ? opt.zoom : 5;\n        var map = this.map = new BMap.Map(id, {\n            enableMapClick: false\n        });\n        map.centerAndZoom(new BMap.Point(center[0], center[1]), zoom);\n        map.enableScrollWheelZoom(true);\n\n        map.setMapStyle({\n            style: 'light'\n        });\n    }\n\n    createClass(MapHelper, [{\n        key: 'addLayer',\n        value: function addLayer(datas, options) {\n            if (this.type == 'baidu') {\n                return new mapv.baiduMapLayer(this.map, dataSet, options);\n            }\n        }\n    }, {\n        key: 'getMap',\n        value: function getMap() {\n            return this.map;\n        }\n    }]);\n    return MapHelper;\n}();\n\n/**\n * 一直覆盖在当前地图视野的Canvas对象\n *\n * @author nikai (@胖嘟嘟的骨头, nikai@baidu.com)\n *\n * @param \n * {\n *     map 地图实例对象\n * }\n */\n\nfunction CanvasLayer(options) {\n    this.options = options || {};\n    this.paneName = this.options.paneName || 'mapPane';\n    this.context = this.options.context || '2d';\n    this.zIndex = this.options.zIndex || 0;\n    this.mixBlendMode = this.options.mixBlendMode || null;\n    this.enableMassClear = this.options.enableMassClear;\n    this._map = options.map;\n    this._lastDrawTime = null;\n    this.show();\n}\n\nvar global$3 = typeof window === 'undefined' ? {} : window;\nvar BMap$1 = global$3.BMap || global$3.BMapGL;\nif (BMap$1) {\n\n    CanvasLayer.prototype = new BMap$1.Overlay();\n\n    CanvasLayer.prototype.initialize = function (map) {\n        this._map = map;\n        var canvas = this.canvas = document.createElement(\"canvas\");\n        canvas.style.cssText = \"position:absolute;\" + \"left:0;\" + \"top:0;\" + \"z-index:\" + this.zIndex + \";user-select:none;\";\n        canvas.style.mixBlendMode = this.mixBlendMode;\n        this.adjustSize();\n        var pane = map.getPanes()[this.paneName];\n        if (!pane) {\n            pane = map.getPanes().floatShadow;\n        }\n        pane.appendChild(canvas);\n        var that = this;\n        map.addEventListener('resize', function () {\n            that.adjustSize();\n            that._draw();\n        });\n        map.addEventListener('update', function () {\n            that._draw();\n        });\n        /*\n        map.addEventListener('moving', function() {\n            that._draw();\n        });\n        */\n        if (this.options.updateImmediate) {\n            setTimeout(function () {\n                that._draw();\n            }, 100);\n        }\n        return this.canvas;\n    };\n\n    CanvasLayer.prototype.adjustSize = function () {\n        var size = this._map.getSize();\n        var canvas = this.canvas;\n\n        var devicePixelRatio = this.devicePixelRatio = global$3.devicePixelRatio || 1;\n\n        canvas.width = size.width * devicePixelRatio;\n        canvas.height = size.height * devicePixelRatio;\n        if (this.context == '2d') {\n            canvas.getContext(this.context).scale(devicePixelRatio, devicePixelRatio);\n        }\n\n        canvas.style.width = size.width + \"px\";\n        canvas.style.height = size.height + \"px\";\n    };\n\n    CanvasLayer.prototype.draw = function () {\n        var self = this;\n        if (this.options.updateImmediate) {\n            self._draw();\n        } else {\n            clearTimeout(self.timeoutID);\n            self.timeoutID = setTimeout(function () {\n                self._draw();\n            }, 15);\n        }\n    };\n\n    CanvasLayer.prototype._draw = function () {\n        var map = this._map;\n        var size = map.getSize();\n        var center = map.getCenter();\n        if (center) {\n            var pixel = map.pointToOverlayPixel(center);\n            this.canvas.style.left = pixel.x - size.width / 2 + 'px';\n            this.canvas.style.top = pixel.y - size.height / 2 + 'px';\n            this.dispatchEvent('draw');\n            this.options.update && this.options.update.call(this);\n        }\n    };\n\n    CanvasLayer.prototype.getContainer = function () {\n        return this.canvas;\n    };\n\n    CanvasLayer.prototype.show = function () {\n        if (!this.canvas) {\n            this._map.addOverlay(this);\n        }\n        this.canvas.style.display = \"block\";\n    };\n\n    CanvasLayer.prototype.hide = function () {\n        this.canvas.style.display = \"none\";\n        //this._map.removeOverlay(this);\n    };\n\n    CanvasLayer.prototype.setZIndex = function (zIndex) {\n        this.zIndex = zIndex;\n        this.canvas.style.zIndex = this.zIndex;\n    };\n\n    CanvasLayer.prototype.getZIndex = function () {\n        return this.zIndex;\n    };\n}\n\n/**\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n * ----------------------------------------------\n *\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n * Thank you all, you're awesome!\n */\n\nvar TWEEN = TWEEN || function () {\n\n    var _tweens = [];\n\n    return {\n\n        getAll: function getAll() {\n\n            return _tweens;\n        },\n\n        removeAll: function removeAll() {\n\n            _tweens = [];\n        },\n\n        add: function add(tween) {\n\n            _tweens.push(tween);\n        },\n\n        remove: function remove(tween) {\n\n            var i = _tweens.indexOf(tween);\n\n            if (i !== -1) {\n                _tweens.splice(i, 1);\n            }\n        },\n\n        update: function update(time, preserve) {\n\n            if (_tweens.length === 0) {\n                return false;\n            }\n\n            var i = 0;\n\n            time = time !== undefined ? time : TWEEN.now();\n\n            while (i < _tweens.length) {\n\n                if (_tweens[i].update(time) || preserve) {\n                    i++;\n                } else {\n                    _tweens.splice(i, 1);\n                }\n            }\n\n            return true;\n        }\n    };\n}();\n\n// Include a performance.now polyfill.\n// In node.js, use process.hrtime.\nif (typeof window === 'undefined' && typeof process !== 'undefined') {\n    TWEEN.now = function () {\n        var time = process.hrtime();\n\n        // Convert [seconds, nanoseconds] to milliseconds.\n        return time[0] * 1000 + time[1] / 1000000;\n    };\n}\n// In a browser, use window.performance.now if it is available.\nelse if (typeof window !== 'undefined' && window.performance !== undefined && window.performance.now !== undefined) {\n        // This must be bound, because directly assigning this function\n        // leads to an invocation exception in Chrome.\n        TWEEN.now = window.performance.now.bind(window.performance);\n    }\n    // Use Date.now if it is available.\n    else if (Date.now !== undefined) {\n            TWEEN.now = Date.now;\n        }\n        // Otherwise, use 'new Date().getTime()'.\n        else {\n                TWEEN.now = function () {\n                    return new Date().getTime();\n                };\n            }\n\nTWEEN.Tween = function (object) {\n\n    var _object = object;\n    var _valuesStart = {};\n    var _valuesEnd = {};\n    var _valuesStartRepeat = {};\n    var _duration = 1000;\n    var _repeat = 0;\n    var _repeatDelayTime;\n    var _yoyo = false;\n    var _isPlaying = false;\n    var _reversed = false;\n    var _delayTime = 0;\n    var _startTime = null;\n    var _easingFunction = TWEEN.Easing.Linear.None;\n    var _interpolationFunction = TWEEN.Interpolation.Linear;\n    var _chainedTweens = [];\n    var _onStartCallback = null;\n    var _onStartCallbackFired = false;\n    var _onUpdateCallback = null;\n    var _onCompleteCallback = null;\n    var _onStopCallback = null;\n\n    this.to = function (properties, duration) {\n\n        _valuesEnd = properties;\n\n        if (duration !== undefined) {\n            _duration = duration;\n        }\n\n        return this;\n    };\n\n    this.start = function (time) {\n\n        TWEEN.add(this);\n\n        _isPlaying = true;\n\n        _onStartCallbackFired = false;\n\n        _startTime = time !== undefined ? time : TWEEN.now();\n        _startTime += _delayTime;\n\n        for (var property in _valuesEnd) {\n\n            // Check if an Array was provided as property value\n            if (_valuesEnd[property] instanceof Array) {\n\n                if (_valuesEnd[property].length === 0) {\n                    continue;\n                }\n\n                // Create a local copy of the Array with the start value at the front\n                _valuesEnd[property] = [_object[property]].concat(_valuesEnd[property]);\n            }\n\n            // If `to()` specifies a property that doesn't exist in the source object,\n            // we should not set that property in the object\n            if (_object[property] === undefined) {\n                continue;\n            }\n\n            // Save the starting value.\n            _valuesStart[property] = _object[property];\n\n            if (_valuesStart[property] instanceof Array === false) {\n                _valuesStart[property] *= 1.0; // Ensures we're using numbers, not strings\n            }\n\n            _valuesStartRepeat[property] = _valuesStart[property] || 0;\n        }\n\n        return this;\n    };\n\n    this.stop = function () {\n\n        if (!_isPlaying) {\n            return this;\n        }\n\n        TWEEN.remove(this);\n        _isPlaying = false;\n\n        if (_onStopCallback !== null) {\n            _onStopCallback.call(_object, _object);\n        }\n\n        this.stopChainedTweens();\n        return this;\n    };\n\n    this.end = function () {\n\n        this.update(_startTime + _duration);\n        return this;\n    };\n\n    this.stopChainedTweens = function () {\n\n        for (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {\n            _chainedTweens[i].stop();\n        }\n    };\n\n    this.delay = function (amount) {\n\n        _delayTime = amount;\n        return this;\n    };\n\n    this.repeat = function (times) {\n\n        _repeat = times;\n        return this;\n    };\n\n    this.repeatDelay = function (amount) {\n\n        _repeatDelayTime = amount;\n        return this;\n    };\n\n    this.yoyo = function (yoyo) {\n\n        _yoyo = yoyo;\n        return this;\n    };\n\n    this.easing = function (easing) {\n\n        _easingFunction = easing;\n        return this;\n    };\n\n    this.interpolation = function (interpolation) {\n\n        _interpolationFunction = interpolation;\n        return this;\n    };\n\n    this.chain = function () {\n\n        _chainedTweens = arguments;\n        return this;\n    };\n\n    this.onStart = function (callback) {\n\n        _onStartCallback = callback;\n        return this;\n    };\n\n    this.onUpdate = function (callback) {\n\n        _onUpdateCallback = callback;\n        return this;\n    };\n\n    this.onComplete = function (callback) {\n\n        _onCompleteCallback = callback;\n        return this;\n    };\n\n    this.onStop = function (callback) {\n\n        _onStopCallback = callback;\n        return this;\n    };\n\n    this.update = function (time) {\n\n        var property;\n        var elapsed;\n        var value;\n\n        if (time < _startTime) {\n            return true;\n        }\n\n        if (_onStartCallbackFired === false) {\n\n            if (_onStartCallback !== null) {\n                _onStartCallback.call(_object, _object);\n            }\n\n            _onStartCallbackFired = true;\n        }\n\n        elapsed = (time - _startTime) / _duration;\n        elapsed = elapsed > 1 ? 1 : elapsed;\n\n        value = _easingFunction(elapsed);\n\n        for (property in _valuesEnd) {\n\n            // Don't update properties that do not exist in the source object\n            if (_valuesStart[property] === undefined) {\n                continue;\n            }\n\n            var start = _valuesStart[property] || 0;\n            var end = _valuesEnd[property];\n\n            if (end instanceof Array) {\n\n                _object[property] = _interpolationFunction(end, value);\n            } else {\n\n                // Parses relative end values with start as base (e.g.: +10, -3)\n                if (typeof end === 'string') {\n\n                    if (end.charAt(0) === '+' || end.charAt(0) === '-') {\n                        end = start + parseFloat(end);\n                    } else {\n                        end = parseFloat(end);\n                    }\n                }\n\n                // Protect against non numeric properties.\n                if (typeof end === 'number') {\n                    _object[property] = start + (end - start) * value;\n                }\n            }\n        }\n\n        if (_onUpdateCallback !== null) {\n            _onUpdateCallback.call(_object, value);\n        }\n\n        if (elapsed === 1) {\n\n            if (_repeat > 0) {\n\n                if (isFinite(_repeat)) {\n                    _repeat--;\n                }\n\n                // Reassign starting values, restart by making startTime = now\n                for (property in _valuesStartRepeat) {\n\n                    if (typeof _valuesEnd[property] === 'string') {\n                        _valuesStartRepeat[property] = _valuesStartRepeat[property] + parseFloat(_valuesEnd[property]);\n                    }\n\n                    if (_yoyo) {\n                        var tmp = _valuesStartRepeat[property];\n\n                        _valuesStartRepeat[property] = _valuesEnd[property];\n                        _valuesEnd[property] = tmp;\n                    }\n\n                    _valuesStart[property] = _valuesStartRepeat[property];\n                }\n\n                if (_yoyo) {\n                    _reversed = !_reversed;\n                }\n\n                if (_repeatDelayTime !== undefined) {\n                    _startTime = time + _repeatDelayTime;\n                } else {\n                    _startTime = time + _delayTime;\n                }\n\n                return true;\n            } else {\n\n                if (_onCompleteCallback !== null) {\n\n                    _onCompleteCallback.call(_object, _object);\n                }\n\n                for (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {\n                    // Make the chained tweens start exactly at the time they should,\n                    // even if the `update()` method was called way past the duration of the tween\n                    _chainedTweens[i].start(_startTime + _duration);\n                }\n\n                return false;\n            }\n        }\n\n        return true;\n    };\n};\n\nTWEEN.Easing = {\n\n    Linear: {\n\n        None: function None(k) {\n\n            return k;\n        }\n\n    },\n\n    Quadratic: {\n\n        In: function In(k) {\n\n            return k * k;\n        },\n\n        Out: function Out(k) {\n\n            return k * (2 - k);\n        },\n\n        InOut: function InOut(k) {\n\n            if ((k *= 2) < 1) {\n                return 0.5 * k * k;\n            }\n\n            return -0.5 * (--k * (k - 2) - 1);\n        }\n\n    },\n\n    Cubic: {\n\n        In: function In(k) {\n\n            return k * k * k;\n        },\n\n        Out: function Out(k) {\n\n            return --k * k * k + 1;\n        },\n\n        InOut: function InOut(k) {\n\n            if ((k *= 2) < 1) {\n                return 0.5 * k * k * k;\n            }\n\n            return 0.5 * ((k -= 2) * k * k + 2);\n        }\n\n    },\n\n    Quartic: {\n\n        In: function In(k) {\n\n            return k * k * k * k;\n        },\n\n        Out: function Out(k) {\n\n            return 1 - --k * k * k * k;\n        },\n\n        InOut: function InOut(k) {\n\n            if ((k *= 2) < 1) {\n                return 0.5 * k * k * k * k;\n            }\n\n            return -0.5 * ((k -= 2) * k * k * k - 2);\n        }\n\n    },\n\n    Quintic: {\n\n        In: function In(k) {\n\n            return k * k * k * k * k;\n        },\n\n        Out: function Out(k) {\n\n            return --k * k * k * k * k + 1;\n        },\n\n        InOut: function InOut(k) {\n\n            if ((k *= 2) < 1) {\n                return 0.5 * k * k * k * k * k;\n            }\n\n            return 0.5 * ((k -= 2) * k * k * k * k + 2);\n        }\n\n    },\n\n    Sinusoidal: {\n\n        In: function In(k) {\n\n            return 1 - Math.cos(k * Math.PI / 2);\n        },\n\n        Out: function Out(k) {\n\n            return Math.sin(k * Math.PI / 2);\n        },\n\n        InOut: function InOut(k) {\n\n            return 0.5 * (1 - Math.cos(Math.PI * k));\n        }\n\n    },\n\n    Exponential: {\n\n        In: function In(k) {\n\n            return k === 0 ? 0 : Math.pow(1024, k - 1);\n        },\n\n        Out: function Out(k) {\n\n            return k === 1 ? 1 : 1 - Math.pow(2, -10 * k);\n        },\n\n        InOut: function InOut(k) {\n\n            if (k === 0) {\n                return 0;\n            }\n\n            if (k === 1) {\n                return 1;\n            }\n\n            if ((k *= 2) < 1) {\n                return 0.5 * Math.pow(1024, k - 1);\n            }\n\n            return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2);\n        }\n\n    },\n\n    Circular: {\n\n        In: function In(k) {\n\n            return 1 - Math.sqrt(1 - k * k);\n        },\n\n        Out: function Out(k) {\n\n            return Math.sqrt(1 - --k * k);\n        },\n\n        InOut: function InOut(k) {\n\n            if ((k *= 2) < 1) {\n                return -0.5 * (Math.sqrt(1 - k * k) - 1);\n            }\n\n            return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n        }\n\n    },\n\n    Elastic: {\n\n        In: function In(k) {\n\n            if (k === 0) {\n                return 0;\n            }\n\n            if (k === 1) {\n                return 1;\n            }\n\n            return -Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n        },\n\n        Out: function Out(k) {\n\n            if (k === 0) {\n                return 0;\n            }\n\n            if (k === 1) {\n                return 1;\n            }\n\n            return Math.pow(2, -10 * k) * Math.sin((k - 0.1) * 5 * Math.PI) + 1;\n        },\n\n        InOut: function InOut(k) {\n\n            if (k === 0) {\n                return 0;\n            }\n\n            if (k === 1) {\n                return 1;\n            }\n\n            k *= 2;\n\n            if (k < 1) {\n                return -0.5 * Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\n            }\n\n            return 0.5 * Math.pow(2, -10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI) + 1;\n        }\n\n    },\n\n    Back: {\n\n        In: function In(k) {\n\n            var s = 1.70158;\n\n            return k * k * ((s + 1) * k - s);\n        },\n\n        Out: function Out(k) {\n\n            var s = 1.70158;\n\n            return --k * k * ((s + 1) * k + s) + 1;\n        },\n\n        InOut: function InOut(k) {\n\n            var s = 1.70158 * 1.525;\n\n            if ((k *= 2) < 1) {\n                return 0.5 * (k * k * ((s + 1) * k - s));\n            }\n\n            return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n        }\n\n    },\n\n    Bounce: {\n\n        In: function In(k) {\n\n            return 1 - TWEEN.Easing.Bounce.Out(1 - k);\n        },\n\n        Out: function Out(k) {\n\n            if (k < 1 / 2.75) {\n                return 7.5625 * k * k;\n            } else if (k < 2 / 2.75) {\n                return 7.5625 * (k -= 1.5 / 2.75) * k + 0.75;\n            } else if (k < 2.5 / 2.75) {\n                return 7.5625 * (k -= 2.25 / 2.75) * k + 0.9375;\n            } else {\n                return 7.5625 * (k -= 2.625 / 2.75) * k + 0.984375;\n            }\n        },\n\n        InOut: function InOut(k) {\n\n            if (k < 0.5) {\n                return TWEEN.Easing.Bounce.In(k * 2) * 0.5;\n            }\n\n            return TWEEN.Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5;\n        }\n\n    }\n\n};\n\nTWEEN.Interpolation = {\n\n    Linear: function Linear(v, k) {\n\n        var m = v.length - 1;\n        var f = m * k;\n        var i = Math.floor(f);\n        var fn = TWEEN.Interpolation.Utils.Linear;\n\n        if (k < 0) {\n            return fn(v[0], v[1], f);\n        }\n\n        if (k > 1) {\n            return fn(v[m], v[m - 1], m - f);\n        }\n\n        return fn(v[i], v[i + 1 > m ? m : i + 1], f - i);\n    },\n\n    Bezier: function Bezier(v, k) {\n\n        var b = 0;\n        var n = v.length - 1;\n        var pw = Math.pow;\n        var bn = TWEEN.Interpolation.Utils.Bernstein;\n\n        for (var i = 0; i <= n; i++) {\n            b += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);\n        }\n\n        return b;\n    },\n\n    CatmullRom: function CatmullRom(v, k) {\n\n        var m = v.length - 1;\n        var f = m * k;\n        var i = Math.floor(f);\n        var fn = TWEEN.Interpolation.Utils.CatmullRom;\n\n        if (v[0] === v[m]) {\n\n            if (k < 0) {\n                i = Math.floor(f = m * (1 + k));\n            }\n\n            return fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);\n        } else {\n\n            if (k < 0) {\n                return v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);\n            }\n\n            if (k > 1) {\n                return v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);\n            }\n\n            return fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);\n        }\n    },\n\n    Utils: {\n\n        Linear: function Linear(p0, p1, t) {\n\n            return (p1 - p0) * t + p0;\n        },\n\n        Bernstein: function Bernstein(n, i) {\n\n            var fc = TWEEN.Interpolation.Utils.Factorial;\n\n            return fc(n) / fc(i) / fc(n - i);\n        },\n\n        Factorial: function () {\n\n            var a = [1];\n\n            return function (n) {\n\n                var s = 1;\n\n                if (a[n]) {\n                    return a[n];\n                }\n\n                for (var i = n; i > 1; i--) {\n                    s *= i;\n                }\n\n                a[n] = s;\n                return s;\n            };\n        }(),\n\n        CatmullRom: function CatmullRom(p0, p1, p2, p3, t) {\n\n            var v0 = (p2 - p0) * 0.5;\n            var v1 = (p3 - p1) * 0.5;\n            var t2 = t * t;\n            var t3 = t * t2;\n\n            return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\n        }\n\n    }\n\n};\n\n/**\n * 根据2点获取角度\n * @param Array [123, 23] 点1\n * @param Array [123, 23] 点2\n * @return angle 角度,不是弧度\n */\nfunction getAngle(start, end) {\n    var diff_x = end[0] - start[0];\n    var diff_y = end[1] - start[1];\n    var deg = 360 * Math.atan(diff_y / diff_x) / (2 * Math.PI);\n    if (end[0] < start[0]) {\n        deg = deg + 180;\n    }\n    return deg;\n}\n\n/**\n * 绘制沿线箭头\n * @author kyle / http://nikai.us/\n */\n\nvar imageCache = {};\n\nvar object = {\n    draw: function draw(context, dataSet, options) {\n        var imageCacheKey = 'http://huiyan.baidu.com/github/tools/gis-drawing/static/images/direction.png';\n        if (options.arrow && options.arrow.url) {\n            imageCacheKey = options.arrow.url;\n        }\n\n        if (!imageCache[imageCacheKey]) {\n            imageCache[imageCacheKey] = null;\n        }\n\n        var directionImage = imageCache[imageCacheKey];\n\n        if (!directionImage) {\n            var args = Array.prototype.slice.call(arguments);\n            var image = new Image();\n            image.onload = function () {\n                imageCache[imageCacheKey] = image;\n                object.draw.apply(null, args);\n            };\n            image.src = imageCacheKey;\n            return;\n        }\n\n        var data = dataSet instanceof DataSet ? dataSet.get() : dataSet;\n\n        // console.log('xxxx',options)\n        context.save();\n\n        for (var key in options) {\n            context[key] = options[key];\n        }\n\n        var points = [];\n        var preCoordinate = null;\n        for (var i = 0, len = data.length; i < len; i++) {\n\n            var item = data[i];\n\n            context.save();\n\n            if (item.fillStyle || item._fillStyle) {\n                context.fillStyle = item.fillStyle || item._fillStyle;\n            }\n\n            if (item.strokeStyle || item._strokeStyle) {\n                context.strokeStyle = item.strokeStyle || item._strokeStyle;\n            }\n\n            var type = item.geometry.type;\n\n            context.beginPath();\n            if (type === 'LineString') {\n                var coordinates = item.geometry._coordinates || item.geometry.coordinates;\n                var interval = options.arrow.interval !== undefined ? options.arrow.interval : 1;\n                for (var j = 0; j < coordinates.length; j += interval) {\n                    if (coordinates[j] && coordinates[j + 1]) {\n                        var coordinate = coordinates[j];\n\n                        if (preCoordinate && getDistance(coordinate, preCoordinate) < 30) {\n                            continue;\n                        }\n\n                        context.save();\n                        var angle = getAngle(coordinates[j], coordinates[j + 1]);\n                        context.translate(coordinate[0], coordinate[1]);\n                        context.rotate(angle * Math.PI / 180);\n                        context.drawImage(directionImage, -directionImage.width / 2 / 2, -directionImage.height / 2 / 2, directionImage.width / 2, directionImage.height / 2);\n                        context.restore();\n\n                        points.push(coordinate);\n                        preCoordinate = coordinate;\n                    }\n                }\n            }\n\n            context.restore();\n        }\n\n        context.restore();\n    }\n};\n\nfunction getDistance(coordinateA, coordinateB) {\n    return Math.sqrt(Math.pow(coordinateA[0] - coordinateB[0], 2) + Math.pow(coordinateA[1] - coordinateB[1], 2));\n}\n\n/**\n * @author Mofei Zhu<mapv@zhuwenlong.com>\n * This file is to draw text\n */\n\nvar drawClip = {\n    draw: function draw(context, dataSet, options) {\n        var data = dataSet instanceof DataSet ? dataSet.get() : dataSet;\n        context.save();\n\n        context.fillStyle = options.fillStyle || 'rgba(0, 0, 0, 0.5)';\n        context.fillRect(0, 0, context.canvas.width, context.canvas.height);\n\n        options.multiPolygonDraw = function () {\n            context.save();\n            context.clip();\n            clear(context);\n            context.restore();\n        };\n\n        for (var i = 0, len = data.length; i < len; i++) {\n\n            context.beginPath();\n\n            pathSimple.drawDataSet(context, [data[i]], options);\n            context.save();\n            context.clip();\n            clear(context);\n            context.restore();\n        }\n\n        context.restore();\n    }\n};\n\n/**\n * @author kyle / http://nikai.us/\n */\n\nvar drawCluster = {\n    draw: function draw(context, dataSet, options) {\n        context.save();\n        var data = dataSet instanceof DataSet ? dataSet.get() : dataSet;\n\n        var pointCountMax;\n        var pointCountMin;\n        for (var i = 0; i < data.length; i++) {\n            var item = data[i];\n            if (item.properties && item.properties.cluster) {\n                if (pointCountMax === undefined) {\n                    pointCountMax = item.properties.point_count;\n                }\n                if (pointCountMin === undefined) {\n                    pointCountMin = item.properties.point_count;\n                }\n                pointCountMax = Math.max(pointCountMax, item.properties.point_count);\n                pointCountMin = Math.min(pointCountMin, item.properties.point_count);\n            }\n        }\n\n        var intensity = new Intensity({\n            min: pointCountMin,\n            max: pointCountMax,\n            minSize: options.minSize || 8,\n            maxSize: options.maxSize || 30,\n            gradient: options.gradient\n        });\n\n        for (var i = 0; i < data.length; i++) {\n            var item = data[i];\n            var coordinates = data[i].geometry._coordinates || data[i].geometry.coordinates;\n            context.beginPath();\n            if (item.properties && item.properties.cluster) {\n                context.arc(coordinates[0], coordinates[1], intensity.getSize(item.properties.point_count), 0, Math.PI * 2);\n                context.fillStyle = intensity.getColor(item.properties.point_count);\n                context.fill();\n\n                if (options.label && options.label.show !== false) {\n\n                    context.fillStyle = options.label.fillStyle || 'white';\n\n                    if (options.label.font) {\n                        context.font = options.label.font;\n                    }\n\n                    if (options.label.shadowColor) {\n                        context.shadowColor = options.label.shadowColor;\n                    }\n\n                    if (options.label.shadowBlur) {\n                        context.shadowBlur = options.label.shadowBlur;\n                    }\n\n                    var text = item.properties.point_count;\n                    var textWidth = context.measureText(text).width;\n                    context.fillText(text, coordinates[0] + .5 - textWidth / 2, coordinates[1] + .5 + 3);\n                }\n            } else {\n                context.arc(coordinates[0], coordinates[1], options.size || 5, 0, Math.PI * 2);\n                context.fillStyle = options.fillStyle || 'red';\n                context.fill();\n            }\n        }\n        context.restore();\n    }\n};\n\n/**\n * @author Mofei Zhu<mapv@zhuwenlong.com>\n * This file is to draw text\n */\n\nvar drawText = {\n    draw: function draw(context, dataSet, options) {\n\n        var data = dataSet instanceof DataSet ? dataSet.get() : dataSet;\n        context.save();\n\n        // set from options\n        for (var key in options) {\n            context[key] = options[key];\n        }\n\n        var rects = [];\n\n        var size = options._size || options.size;\n        if (size) {\n            context.font = \"bold \" + size + \"px Arial\";\n        } else {\n            size = 12;\n        }\n\n        var textKey = options.textKey || 'text';\n\n        if (!options.textAlign) {\n            context.textAlign = 'center';\n        }\n\n        if (!options.textBaseline) {\n            context.textBaseline = 'middle';\n        }\n\n        if (options.avoid) {\n            // 标注避让\n            for (var i = 0, len = data.length; i < len; i++) {\n\n                var offset = data[i].offset || options.offset || {\n                    x: 0,\n                    y: 0\n                };\n\n                var coordinates = data[i].geometry._coordinates || data[i].geometry.coordinates;\n                var x = coordinates[0] + offset.x;\n                var y = coordinates[1] + offset.y;\n                var text = data[i][textKey];\n                var textWidth = context.measureText(text).width;\n\n                // 根据文本宽度和高度调整x，y位置，使得绘制文本时候坐标点在文本中心点，这个计算出的是左上角坐标\n                var px = x - textWidth / 2;\n                var py = y - size / 2;\n\n                var rect = {\n                    sw: {\n                        x: px,\n                        y: py + size\n                    },\n                    ne: {\n                        x: px + textWidth,\n                        y: py\n                    }\n                };\n\n                if (!hasOverlay(rects, rect)) {\n                    rects.push(rect);\n                    px = px + textWidth / 2;\n                    py = py + size / 2;\n                    context.fillText(text, px, py);\n                }\n            }\n        } else {\n            for (var i = 0, len = data.length; i < len; i++) {\n                var offset = data[i].offset || options.offset || {\n                    x: 0,\n                    y: 0\n                };\n                var coordinates = data[i].geometry._coordinates || data[i].geometry.coordinates;\n                var x = coordinates[0] + offset.x;\n                var y = coordinates[1] + offset.y;\n                var text = data[i][textKey];\n                context.fillText(text, x, y);\n            }\n        }\n\n        context.restore();\n    }\n\n    /*\n     *  当前文字区域和已有的文字区域是否有重叠部分\n     */\n};function hasOverlay(rects, overlay) {\n    for (var i = 0; i < rects.length; i++) {\n        if (isRectOverlay(rects[i], overlay)) {\n            return true;\n        }\n    }\n    return false;\n}\n\n//判断2个矩形是否有重叠部分\nfunction isRectOverlay(rect1, rect2) {\n    //minx、miny 2个矩形右下角最小的x和y\n    //maxx、maxy 2个矩形左上角最大的x和y\n    var minx = Math.min(rect1.ne.x, rect2.ne.x);\n    var miny = Math.min(rect1.sw.y, rect2.sw.y);\n    var maxx = Math.max(rect1.sw.x, rect2.sw.x);\n    var maxy = Math.max(rect1.ne.y, rect2.ne.y);\n    if (minx > maxx && miny > maxy) {\n        return true;\n    }\n    return false;\n}\n\n/**\n * @author Mofei Zhu<mapv@zhuwenlong.com>\n * This file is to draw text\n */\n\nvar drawIcon = {\n    draw: function draw(context, dataSet, options) {\n        var data = dataSet instanceof DataSet ? dataSet.get() : dataSet;\n\n        context.fillStyle = 'white';\n        context.textAlign = 'center';\n        context.textBaseline = 'middle';\n\n        var offset = options.offset || {\n            x: 0,\n            y: 0\n        };\n\n        // set from options\n        // for (var key in options) {\n        //     context[key] = options[key];\n        // }\n        // console.log(data)\n        for (var i = 0, len = data.length; i < len; i++) {\n\n            if (data[i].geometry) {\n                var deg = data[i].deg || options.deg;\n                var icon = data[i].icon || options.icon;\n                var coordinates = data[i].geometry._coordinates || data[i].geometry.coordinates;\n                var x = coordinates[0];\n                var y = coordinates[1];\n                if (deg) {\n                    context.save();\n                    context.translate(x, y);\n                    context.rotate(deg * Math.PI / 180);\n                    context.translate(-x, -y);\n                }\n                var width = options._width || options.width || icon.width;\n                var height = options._height || options.height || icon.height;\n                x = x - width / 2 + offset.x;\n                y = y - height / 2 + offset.y;\n                if (options.sx && options.sy && options.swidth && options.sheight && options.width && options.height) {\n                    context.drawImage(icon, options.sx, options.sy, options.swidth, options.sheight, x, y, width, height);\n                } else if (options.width && options.height) {\n                    context.drawImage(icon, x, y, width, height);\n                } else {\n                    context.drawImage(icon, x, y);\n                }\n\n                if (deg) {\n                    context.restore();\n                }\n            }\n        }\n    }\n};\n\n/**\n * from https://github.com/mapbox/supercluster\n */\n\nfunction sortKD(ids, coords, nodeSize, left, right, depth) {\n    if (right - left <= nodeSize) {\n        return;\n    }\n\n    var m = left + right >> 1;\n\n    select(ids, coords, m, left, right, depth % 2);\n\n    sortKD(ids, coords, nodeSize, left, m - 1, depth + 1);\n    sortKD(ids, coords, nodeSize, m + 1, right, depth + 1);\n}\n\nfunction select(ids, coords, k, left, right, inc) {\n\n    while (right > left) {\n        if (right - left > 600) {\n            var n = right - left + 1;\n            var m = k - left + 1;\n            var z = Math.log(n);\n            var s = 0.5 * Math.exp(2 * z / 3);\n            var sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n            var newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n            var newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n            select(ids, coords, k, newLeft, newRight, inc);\n        }\n\n        var t = coords[2 * k + inc];\n        var i = left;\n        var j = right;\n\n        swapItem(ids, coords, left, k);\n        if (coords[2 * right + inc] > t) {\n            swapItem(ids, coords, left, right);\n        }\n\n        while (i < j) {\n            swapItem(ids, coords, i, j);\n            i++;\n            j--;\n            while (coords[2 * i + inc] < t) {\n                i++;\n            }\n            while (coords[2 * j + inc] > t) {\n                j--;\n            }\n        }\n\n        if (coords[2 * left + inc] === t) {\n            swapItem(ids, coords, left, j);\n        } else {\n            j++;\n            swapItem(ids, coords, j, right);\n        }\n\n        if (j <= k) {\n            left = j + 1;\n        }\n        if (k <= j) {\n            right = j - 1;\n        }\n    }\n}\n\nfunction swapItem(ids, coords, i, j) {\n    swap(ids, i, j);\n    swap(coords, 2 * i, 2 * j);\n    swap(coords, 2 * i + 1, 2 * j + 1);\n}\n\nfunction swap(arr, i, j) {\n    var tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n\nfunction range(ids, coords, minX, minY, maxX, maxY, nodeSize) {\n    var stack = [0, ids.length - 1, 0];\n    var result = [];\n    var x, y;\n\n    while (stack.length) {\n        var axis = stack.pop();\n        var right = stack.pop();\n        var left = stack.pop();\n\n        if (right - left <= nodeSize) {\n            for (var i = left; i <= right; i++) {\n                x = coords[2 * i];\n                y = coords[2 * i + 1];\n                if (x >= minX && x <= maxX && y >= minY && y <= maxY) {\n                    result.push(ids[i]);\n                }\n            }\n            continue;\n        }\n\n        var m = Math.floor((left + right) / 2);\n\n        x = coords[2 * m];\n        y = coords[2 * m + 1];\n\n        if (x >= minX && x <= maxX && y >= minY && y <= maxY) {\n            result.push(ids[m]);\n        }\n\n        var nextAxis = (axis + 1) % 2;\n\n        if (axis === 0 ? minX <= x : minY <= y) {\n            stack.push(left);\n            stack.push(m - 1);\n            stack.push(nextAxis);\n        }\n        if (axis === 0 ? maxX >= x : maxY >= y) {\n            stack.push(m + 1);\n            stack.push(right);\n            stack.push(nextAxis);\n        }\n    }\n\n    return result;\n}\n\nfunction within(ids, coords, qx, qy, r, nodeSize) {\n    var stack = [0, ids.length - 1, 0];\n    var result = [];\n    var r2 = r * r;\n\n    while (stack.length) {\n        var axis = stack.pop();\n        var right = stack.pop();\n        var left = stack.pop();\n\n        if (right - left <= nodeSize) {\n            for (var i = left; i <= right; i++) {\n                if (sqDist(coords[2 * i], coords[2 * i + 1], qx, qy) <= r2) {\n                    result.push(ids[i]);\n                }\n            }\n            continue;\n        }\n\n        var m = Math.floor((left + right) / 2);\n\n        var x = coords[2 * m];\n        var y = coords[2 * m + 1];\n\n        if (sqDist(x, y, qx, qy) <= r2) {\n            result.push(ids[m]);\n        }\n\n        var nextAxis = (axis + 1) % 2;\n\n        if (axis === 0 ? qx - r <= x : qy - r <= y) {\n            stack.push(left);\n            stack.push(m - 1);\n            stack.push(nextAxis);\n        }\n        if (axis === 0 ? qx + r >= x : qy + r >= y) {\n            stack.push(m + 1);\n            stack.push(right);\n            stack.push(nextAxis);\n        }\n    }\n\n    return result;\n}\n\nfunction sqDist(ax, ay, bx, by) {\n    var dx = ax - bx;\n    var dy = ay - by;\n    return dx * dx + dy * dy;\n}\n\nvar defaultGetX = function defaultGetX(p) {\n    return p[0];\n};\nvar defaultGetY = function defaultGetY(p) {\n    return p[1];\n};\n\nvar KDBush = function KDBush(points, getX, getY, nodeSize, ArrayType) {\n    if (getX === void 0) getX = defaultGetX;\n    if (getY === void 0) getY = defaultGetY;\n    if (nodeSize === void 0) nodeSize = 64;\n    if (ArrayType === void 0) ArrayType = Float64Array;\n\n    this.nodeSize = nodeSize;\n    this.points = points;\n\n    var IndexArrayType = points.length < 65536 ? Uint16Array : Uint32Array;\n\n    var ids = this.ids = new IndexArrayType(points.length);\n    var coords = this.coords = new ArrayType(points.length * 2);\n\n    for (var i = 0; i < points.length; i++) {\n        ids[i] = i;\n        coords[2 * i] = getX(points[i]);\n        coords[2 * i + 1] = getY(points[i]);\n    }\n\n    sortKD(ids, coords, nodeSize, 0, ids.length - 1, 0);\n};\n\nKDBush.prototype.range = function range$1(minX, minY, maxX, maxY) {\n    return range(this.ids, this.coords, minX, minY, maxX, maxY, this.nodeSize);\n};\n\nKDBush.prototype.within = function within$1(x, y, r) {\n    return within(this.ids, this.coords, x, y, r, this.nodeSize);\n};\n\nvar defaultOptions = {\n    minZoom: 0, // min zoom to generate clusters on\n    maxZoom: 16, // max zoom level to cluster the points on\n    radius: 40, // cluster radius in pixels\n    extent: 512, // tile extent (radius is calculated relative to it)\n    nodeSize: 64, // size of the KD-tree leaf node, affects performance\n    log: false, // whether to log timing info\n\n    // a reduce function for calculating custom cluster properties\n    reduce: null, // (accumulated, props) => { accumulated.sum += props.sum; }\n\n    // properties to use for individual points when running the reducer\n    map: function map(props) {\n        return props;\n    } // props => ({sum: props.my_value})\n};\n\nvar Supercluster = function Supercluster(options) {\n    this.options = extend(Object.create(defaultOptions), options);\n    this.trees = new Array(this.options.maxZoom + 1);\n};\n\nSupercluster.prototype.load = function load(points) {\n    var ref = this.options;\n    var log = ref.log;\n    var minZoom = ref.minZoom;\n    var maxZoom = ref.maxZoom;\n    var nodeSize = ref.nodeSize;\n\n    if (log) {}\n\n    var timerId = \"prepare \" + points.length + \" points\";\n    if (log) {}\n\n    this.points = points;\n\n    // generate a cluster object for each point and index input points into a KD-tree\n    var clusters = [];\n    for (var i = 0; i < points.length; i++) {\n        if (!points[i].geometry) {\n            continue;\n        }\n        clusters.push(createPointCluster(points[i], i));\n    }\n    this.trees[maxZoom + 1] = new KDBush(clusters, getX, getY, nodeSize, Float32Array);\n\n    if (log) {}\n\n    // cluster points on max zoom, then cluster the results on previous zoom, etc.;\n    // results in a cluster hierarchy across zoom levels\n    for (var z = maxZoom; z >= minZoom; z--) {\n        var now = +Date.now();\n\n        // create a new set of clusters for the zoom and index them with a KD-tree\n        clusters = this._cluster(clusters, z);\n        this.trees[z] = new KDBush(clusters, getX, getY, nodeSize, Float32Array);\n\n        if (log) {}\n    }\n\n    if (log) {}\n\n    return this;\n};\n\nSupercluster.prototype.getClusters = function getClusters(bbox, zoom) {\n    var minLng = ((bbox[0] + 180) % 360 + 360) % 360 - 180;\n    var minLat = Math.max(-90, Math.min(90, bbox[1]));\n    var maxLng = bbox[2] === 180 ? 180 : ((bbox[2] + 180) % 360 + 360) % 360 - 180;\n    var maxLat = Math.max(-90, Math.min(90, bbox[3]));\n\n    if (bbox[2] - bbox[0] >= 360) {\n        minLng = -180;\n        maxLng = 180;\n    } else if (minLng > maxLng) {\n        var easternHem = this.getClusters([minLng, minLat, 180, maxLat], zoom);\n        var westernHem = this.getClusters([-180, minLat, maxLng, maxLat], zoom);\n        return easternHem.concat(westernHem);\n    }\n\n    var tree = this.trees[this._limitZoom(zoom)];\n    var ids = tree.range(lngX(minLng), latY(maxLat), lngX(maxLng), latY(minLat));\n    var clusters = [];\n    for (var i = 0, list = ids; i < list.length; i += 1) {\n        var id = list[i];\n\n        var c = tree.points[id];\n        clusters.push(c.numPoints ? getClusterJSON(c) : this.points[c.index]);\n    }\n    return clusters;\n};\n\nSupercluster.prototype.getChildren = function getChildren(clusterId) {\n    var originId = clusterId >> 5;\n    var originZoom = clusterId % 32;\n    var errorMsg = 'No cluster with the specified id.';\n\n    var index = this.trees[originZoom];\n    if (!index) {\n        throw new Error(errorMsg);\n    }\n\n    var origin = index.points[originId];\n    if (!origin) {\n        throw new Error(errorMsg);\n    }\n\n    var r = this.options.radius / (this.options.extent * Math.pow(2, originZoom - 1));\n    var ids = index.within(origin.x, origin.y, r);\n    var children = [];\n    for (var i = 0, list = ids; i < list.length; i += 1) {\n        var id = list[i];\n\n        var c = index.points[id];\n        if (c.parentId === clusterId) {\n            children.push(c.numPoints ? getClusterJSON(c) : this.points[c.index]);\n        }\n    }\n\n    if (children.length === 0) {\n        throw new Error(errorMsg);\n    }\n\n    return children;\n};\n\nSupercluster.prototype.getLeaves = function getLeaves(clusterId, limit, offset) {\n    limit = limit || 10;\n    offset = offset || 0;\n\n    var leaves = [];\n    this._appendLeaves(leaves, clusterId, limit, offset, 0);\n\n    return leaves;\n};\n\nSupercluster.prototype.getTile = function getTile(z, x, y) {\n    var tree = this.trees[this._limitZoom(z)];\n    var z2 = Math.pow(2, z);\n    var ref = this.options;\n    var extent = ref.extent;\n    var radius = ref.radius;\n    var p = radius / extent;\n    var top = (y - p) / z2;\n    var bottom = (y + 1 + p) / z2;\n\n    var tile = {\n        features: []\n    };\n\n    this._addTileFeatures(tree.range((x - p) / z2, top, (x + 1 + p) / z2, bottom), tree.points, x, y, z2, tile);\n\n    if (x === 0) {\n        this._addTileFeatures(tree.range(1 - p / z2, top, 1, bottom), tree.points, z2, y, z2, tile);\n    }\n    if (x === z2 - 1) {\n        this._addTileFeatures(tree.range(0, top, p / z2, bottom), tree.points, -1, y, z2, tile);\n    }\n\n    return tile.features.length ? tile : null;\n};\n\nSupercluster.prototype.getClusterExpansionZoom = function getClusterExpansionZoom(clusterId) {\n    var clusterZoom = clusterId % 32 - 1;\n    while (clusterZoom <= this.options.maxZoom) {\n        var children = this.getChildren(clusterId);\n        clusterZoom++;\n        if (children.length !== 1) {\n            break;\n        }\n        clusterId = children[0].properties.cluster_id;\n    }\n    return clusterZoom;\n};\n\nSupercluster.prototype._appendLeaves = function _appendLeaves(result, clusterId, limit, offset, skipped) {\n    var children = this.getChildren(clusterId);\n\n    for (var i = 0, list = children; i < list.length; i += 1) {\n        var child = list[i];\n\n        var props = child.properties;\n\n        if (props && props.cluster) {\n            if (skipped + props.point_count <= offset) {\n                // skip the whole cluster\n                skipped += props.point_count;\n            } else {\n                // enter the cluster\n                skipped = this._appendLeaves(result, props.cluster_id, limit, offset, skipped);\n                // exit the cluster\n            }\n        } else if (skipped < offset) {\n            // skip a single point\n            skipped++;\n        } else {\n            // add a single point\n            result.push(child);\n        }\n        if (result.length === limit) {\n            break;\n        }\n    }\n\n    return skipped;\n};\n\nSupercluster.prototype._addTileFeatures = function _addTileFeatures(ids, points, x, y, z2, tile) {\n    for (var i$1 = 0, list = ids; i$1 < list.length; i$1 += 1) {\n        var i = list[i$1];\n\n        var c = points[i];\n        var f = {\n            type: 1,\n            geometry: [[Math.round(this.options.extent * (c.x * z2 - x)), Math.round(this.options.extent * (c.y * z2 - y))]],\n            tags: c.numPoints ? getClusterProperties(c) : this.points[c.index].properties\n        };\n        var id = c.numPoints ? c.id : this.points[c.index].id;\n        if (id !== undefined) {\n            f.id = id;\n        }\n        tile.features.push(f);\n    }\n};\n\nSupercluster.prototype._limitZoom = function _limitZoom(z) {\n    return Math.max(this.options.minZoom, Math.min(z, this.options.maxZoom + 1));\n};\n\nSupercluster.prototype._cluster = function _cluster(points, zoom) {\n    var clusters = [];\n    var ref = this.options;\n    var radius = ref.radius;\n    var extent = ref.extent;\n    var reduce = ref.reduce;\n    var r = radius / (extent * Math.pow(2, zoom));\n\n    // loop through each point\n    for (var i = 0; i < points.length; i++) {\n        var p = points[i];\n        // if we've already visited the point at this zoom level, skip it\n        if (p.zoom <= zoom) {\n            continue;\n        }\n        p.zoom = zoom;\n\n        // find all nearby points\n        var tree = this.trees[zoom + 1];\n        var neighborIds = tree.within(p.x, p.y, r);\n\n        var numPoints = p.numPoints || 1;\n        var wx = p.x * numPoints;\n        var wy = p.y * numPoints;\n\n        var clusterProperties = reduce && numPoints > 1 ? this._map(p, true) : null;\n\n        // encode both zoom and point index on which the cluster originated\n        var id = (i << 5) + (zoom + 1);\n\n        for (var i$1 = 0, list = neighborIds; i$1 < list.length; i$1 += 1) {\n            var neighborId = list[i$1];\n\n            var b = tree.points[neighborId];\n            // filter out neighbors that are already processed\n            if (b.zoom <= zoom) {\n                continue;\n            }\n            b.zoom = zoom; // save the zoom (so it doesn't get processed twice)\n\n            var numPoints2 = b.numPoints || 1;\n            wx += b.x * numPoints2; // accumulate coordinates for calculating weighted center\n            wy += b.y * numPoints2;\n\n            numPoints += numPoints2;\n            b.parentId = id;\n\n            if (reduce) {\n                if (!clusterProperties) {\n                    clusterProperties = this._map(p, true);\n                }\n                reduce(clusterProperties, this._map(b));\n            }\n        }\n\n        if (numPoints === 1) {\n            clusters.push(p);\n        } else {\n            p.parentId = id;\n            clusters.push(createCluster(wx / numPoints, wy / numPoints, id, numPoints, clusterProperties));\n        }\n    }\n\n    return clusters;\n};\n\nSupercluster.prototype._map = function _map(point, clone) {\n    if (point.numPoints) {\n        return clone ? extend({}, point.properties) : point.properties;\n    }\n    var original = this.points[point.index].properties;\n    var result = this.options.map(original);\n    return clone && result === original ? extend({}, result) : result;\n};\n\nfunction createCluster(x, y, id, numPoints, properties) {\n    return {\n        x: x, // weighted cluster center\n        y: y,\n        zoom: Infinity, // the last zoom the cluster was processed at\n        id: id, // encodes index of the first child of the cluster and its zoom level\n        parentId: -1, // parent cluster id\n        numPoints: numPoints,\n        properties: properties\n    };\n}\n\nfunction createPointCluster(p, id) {\n    var ref = p.geometry.coordinates;\n    var x = ref[0];\n    var y = ref[1];\n    return {\n        x: lngX(x), // projected point coordinates\n        y: latY(y),\n        zoom: Infinity, // the last zoom the point was processed at\n        index: id, // index of the source feature in the original input array,\n        parentId: -1 // parent cluster id\n    };\n}\n\nfunction getClusterJSON(cluster) {\n    return {\n        type: 'Feature',\n        id: cluster.id,\n        properties: getClusterProperties(cluster),\n        geometry: {\n            type: 'Point',\n            coordinates: [xLng(cluster.x), yLat(cluster.y)]\n        }\n    };\n}\n\nfunction getClusterProperties(cluster) {\n    var count = cluster.numPoints;\n    var abbrev = count >= 10000 ? Math.round(count / 1000) + \"k\" : count >= 1000 ? Math.round(count / 100) / 10 + \"k\" : count;\n    return extend(extend({}, cluster.properties), {\n        cluster: true,\n        cluster_id: cluster.id,\n        point_count: count,\n        point_count_abbreviated: abbrev\n    });\n}\n\n// longitude/latitude to spherical mercator in [0..1] range\nfunction lngX(lng) {\n    return lng / 360 + 0.5;\n}\nfunction latY(lat) {\n    var sin = Math.sin(lat * Math.PI / 180);\n    var y = 0.5 - 0.25 * Math.log((1 + sin) / (1 - sin)) / Math.PI;\n    return y < 0 ? 0 : y > 1 ? 1 : y;\n}\n\n// spherical mercator to longitude/latitude\nfunction xLng(x) {\n    return (x - 0.5) * 360;\n}\nfunction yLat(y) {\n    var y2 = (180 - y * 360) * Math.PI / 180;\n    return 360 * Math.atan(Math.exp(y2)) / Math.PI - 90;\n}\n\nfunction extend(dest, src) {\n    for (var id in src) {\n        dest[id] = src[id];\n    }\n    return dest;\n}\n\nfunction getX(p) {\n    return p.x;\n}\nfunction getY(p) {\n    return p.y;\n}\n\n/**\n * @author kyle / http://nikai.us/\n */\n\nif (typeof window !== 'undefined') {\n    requestAnimationFrame(animate);\n}\n\nfunction animate(time) {\n    requestAnimationFrame(animate);\n    TWEEN.update(time);\n}\n\nvar BaseLayer = function () {\n    function BaseLayer(map, dataSet, options) {\n        classCallCheck(this, BaseLayer);\n\n        if (!(dataSet instanceof DataSet)) {\n            dataSet = new DataSet(dataSet);\n        }\n\n        this.dataSet = dataSet;\n        this.map = map;\n\n        if (options.draw === 'cluster' && !this.supercluster) {\n            this.supercluster = new Supercluster({ maxZoom: options.maxZoom || 19, radius: options.clusterRadius || 100 });\n            this.supercluster.load(dataSet.get());\n            this.clusterDataSet = new DataSet();\n        }\n    }\n\n    createClass(BaseLayer, [{\n        key: \"getDefaultContextConfig\",\n        value: function getDefaultContextConfig() {\n            return {\n                globalAlpha: 1,\n                globalCompositeOperation: 'source-over',\n                imageSmoothingEnabled: true,\n                strokeStyle: '#000000',\n                fillStyle: '#000000',\n                shadowOffsetX: 0,\n                shadowOffsetY: 0,\n                shadowBlur: 0,\n                shadowColor: 'rgba(0, 0, 0, 0)',\n                lineWidth: 1,\n                lineCap: 'butt',\n                lineJoin: 'miter',\n                miterLimit: 10,\n                lineDashOffset: 0,\n                font: '10px sans-serif',\n                textAlign: 'start',\n                textBaseline: 'alphabetic'\n            };\n        }\n    }, {\n        key: \"initDataRange\",\n        value: function initDataRange(options) {\n            var self = this;\n            self.intensity = new Intensity({\n                maxSize: self.options.maxSize,\n                minSize: self.options.minSize,\n                gradient: self.options.gradient,\n                max: self.options.max || this.dataSet.getMax('count')\n            });\n            self.category = new Category(self.options.splitList);\n            self.choropleth = new Choropleth(self.options.splitList);\n            if (self.options.splitList === undefined) {\n                self.category.generateByDataSet(this.dataSet, self.options.color);\n            }\n            if (self.options.splitList === undefined) {\n                var min = self.options.min || this.dataSet.getMin('count');\n                var max = self.options.max || this.dataSet.getMax('count');\n                self.choropleth.generateByMinMax(min, max);\n            }\n        }\n    }, {\n        key: \"getLegend\",\n        value: function getLegend(options) {\n            var draw = this.options.draw;\n            var legend = null;\n            var self = this;\n            if (self.options.draw == 'intensity' || self.options.draw == 'heatmap') {\n                return this.intensity.getLegend(options);\n            } else if (self.options.draw == 'category') {\n                return this.category.getLegend(options);\n            }\n        }\n    }, {\n        key: \"processData\",\n        value: function processData(data) {\n            var self = this;\n            var draw = self.options.draw;\n            if (draw == 'bubble' || draw == 'intensity' || draw == 'category' || draw == 'choropleth' || draw == 'simple') {\n\n                for (var i = 0; i < data.length; i++) {\n                    var item = data[i];\n\n                    if (self.options.draw == 'bubble') {\n                        data[i]._size = self.intensity.getSize(item.count);\n                    } else {\n                        data[i]._size = undefined;\n                    }\n\n                    var styleType = '_fillStyle';\n\n                    if (data[i].geometry.type === 'LineString' || self.options.styleType === 'stroke') {\n                        styleType = '_strokeStyle';\n                    }\n\n                    if (self.options.draw == 'intensity') {\n                        data[i][styleType] = self.intensity.getColor(item.count);\n                    } else if (self.options.draw == 'category') {\n                        data[i][styleType] = self.category.get(item.count);\n                    } else if (self.options.draw == 'choropleth') {\n                        data[i][styleType] = self.choropleth.get(item.count);\n                    }\n                }\n            }\n        }\n    }, {\n        key: \"isEnabledTime\",\n        value: function isEnabledTime() {\n\n            var animationOptions = this.options.animation;\n\n            var flag = animationOptions && !(animationOptions.enabled === false);\n\n            return flag;\n        }\n    }, {\n        key: \"argCheck\",\n        value: function argCheck(options) {\n            if (options.draw == 'heatmap') {\n                if (options.strokeStyle) {\n                    console.warn('[heatmap] options.strokeStyle is discard, pleause use options.strength [eg: options.strength = 0.1]');\n                }\n            }\n        }\n    }, {\n        key: \"drawContext\",\n        value: function drawContext(context, dataSet, options, nwPixel) {\n            var self = this;\n            switch (self.options.draw) {\n                case 'heatmap':\n                    drawHeatmap.draw(context, dataSet, self.options);\n                    break;\n                case 'grid':\n                case 'cluster':\n                case 'honeycomb':\n                    self.options.offset = {\n                        x: nwPixel.x,\n                        y: nwPixel.y\n                    };\n                    if (self.options.draw === 'grid') {\n                        drawGrid.draw(context, dataSet, self.options);\n                    } else if (self.options.draw === 'cluster') {\n                        drawCluster.draw(context, dataSet, self.options);\n                    } else {\n                        drawHoneycomb.draw(context, dataSet, self.options);\n                    }\n                    break;\n                case 'text':\n                    drawText.draw(context, dataSet, self.options);\n                    break;\n                case 'icon':\n                    drawIcon.draw(context, dataSet, self.options);\n                    break;\n                case 'clip':\n                    drawClip.draw(context, dataSet, self.options);\n                    break;\n                default:\n                    if (self.options.context == \"webgl\") {\n                        webglDrawSimple.draw(self.canvasLayer.canvas.getContext('webgl'), dataSet, self.options);\n                    } else {\n                        drawSimple.draw(context, dataSet, self.options);\n                    }\n            }\n\n            if (self.options.arrow && self.options.arrow.show !== false) {\n                object.draw(context, dataSet, self.options);\n            }\n        }\n    }, {\n        key: \"isPointInPath\",\n        value: function isPointInPath(context, pixel) {\n            var context = this.canvasLayer.canvas.getContext(this.context);\n            var data;\n            if (this.options.draw === 'cluster') {\n                data = this.clusterDataSet.get();\n            } else {\n                data = this.dataSet.get();\n            }\n            for (var i = 0; i < data.length; i++) {\n                context.beginPath();\n                var options = this.options;\n                var x = pixel.x * this.canvasLayer.devicePixelRatio;\n                var y = pixel.y * this.canvasLayer.devicePixelRatio;\n\n                options.multiPolygonDraw = function () {\n                    if (context.isPointInPath(x, y)) {\n                        return data[i];\n                    }\n                };\n\n                pathSimple.draw(context, data[i], options);\n\n                var geoType = data[i].geometry && data[i].geometry.type;\n                if (geoType.indexOf('LineString') > -1) {\n                    if (context.isPointInStroke && context.isPointInStroke(x, y)) {\n                        return data[i];\n                    }\n                } else {\n\n                    if (context.isPointInPath(x, y)) {\n                        return data[i];\n                    }\n                }\n            }\n        }\n    }, {\n        key: \"clickEvent\",\n        value: function clickEvent(pixel, e) {\n            if (!this.options.methods) {\n                return;\n            }\n            var dataItem = this.isPointInPath(this.getContext(), pixel);\n\n            if (dataItem) {\n                this.options.methods.click(dataItem, e);\n            } else {\n                this.options.methods.click(null, e);\n            }\n        }\n    }, {\n        key: \"mousemoveEvent\",\n        value: function mousemoveEvent(pixel, e) {\n            if (!this.options.methods) {\n                return;\n            }\n            var dataItem = this.isPointInPath(this.getContext(), pixel);\n            if (dataItem) {\n                this.options.methods.mousemove(dataItem, e);\n            } else {\n                this.options.methods.mousemove(null, e);\n            }\n        }\n    }, {\n        key: \"tapEvent\",\n        value: function tapEvent(pixel, e) {\n            if (!this.options.methods) {\n                return;\n            }\n            var dataItem = this.isPointInPath(this.getContext(), pixel);\n            if (dataItem) {\n                this.options.methods.tap(dataItem, e);\n            } else {\n                this.options.methods.tap(null, e);\n            }\n        }\n\n        /**\n         * obj.options\n         */\n\n    }, {\n        key: \"update\",\n        value: function update(obj, isDraw) {\n            var self = this;\n            var _options = obj.options;\n            var options = self.options;\n            for (var i in _options) {\n                options[i] = _options[i];\n            }\n            self.init(options);\n            if (isDraw !== false) {\n                self.draw();\n            }\n        }\n    }, {\n        key: \"setOptions\",\n        value: function setOptions(options) {\n            var self = this;\n            self.dataSet.reset();\n            // console.log('xxx1')\n            self.init(options);\n            // console.log('xxx')\n            self.draw();\n        }\n    }, {\n        key: \"set\",\n        value: function set$$1(obj) {\n            var self = this;\n            var ctx = this.getContext();\n            var conf = this.getDefaultContextConfig();\n            for (var i in conf) {\n                ctx[i] = conf[i];\n            }\n            self.init(obj.options);\n            self.draw();\n        }\n    }, {\n        key: \"destroy\",\n        value: function destroy() {\n            this.unbindEvent();\n            this.hide();\n        }\n    }, {\n        key: \"initAnimator\",\n        value: function initAnimator() {\n            var self = this;\n            var animationOptions = self.options.animation;\n\n            if (self.options.draw == 'time' || self.isEnabledTime()) {\n\n                if (!animationOptions.stepsRange) {\n                    animationOptions.stepsRange = {\n                        start: this.dataSet.getMin('time') || 0,\n                        end: this.dataSet.getMax('time') || 0\n                    };\n                }\n\n                this.steps = { step: animationOptions.stepsRange.start };\n                self.animator = new TWEEN.Tween(this.steps).onUpdate(function () {\n                    self._canvasUpdate(this.step);\n                }).repeat(Infinity);\n\n                this.addAnimatorEvent();\n\n                var duration = animationOptions.duration * 1000 || 5000;\n\n                self.animator.to({ step: animationOptions.stepsRange.end }, duration);\n                self.animator.start();\n            } else {\n                self.animator && self.animator.stop();\n            }\n        }\n    }, {\n        key: \"addAnimatorEvent\",\n        value: function addAnimatorEvent() {}\n    }, {\n        key: \"animatorMovestartEvent\",\n        value: function animatorMovestartEvent() {\n            var animationOptions = this.options.animation;\n            if (this.isEnabledTime() && this.animator) {\n                this.steps.step = animationOptions.stepsRange.start;\n                this.animator.stop();\n            }\n        }\n    }, {\n        key: \"animatorMoveendEvent\",\n        value: function animatorMoveendEvent() {\n            if (this.isEnabledTime() && this.animator) {\n                this.animator.start();\n            }\n        }\n    }]);\n    return BaseLayer;\n}();\n\nvar global$4 = typeof window === 'undefined' ? {} : window;\nvar BMap$2 = global$4.BMap || global$4.BMapGL;\n\nvar AnimationLayer = function (_BaseLayer) {\n    inherits(AnimationLayer, _BaseLayer);\n\n    function AnimationLayer(map, dataSet, options) {\n        classCallCheck(this, AnimationLayer);\n\n        var _this = possibleConstructorReturn(this, (AnimationLayer.__proto__ || Object.getPrototypeOf(AnimationLayer)).call(this, map, dataSet, options));\n\n        _this.map = map;\n        _this.options = options || {};\n        _this.dataSet = dataSet;\n\n        var canvasLayer = new CanvasLayer({\n            map: map,\n            zIndex: _this.options.zIndex,\n            update: _this._canvasUpdate.bind(_this)\n        });\n\n        _this.init(_this.options);\n\n        _this.canvasLayer = canvasLayer;\n        _this.transferToMercator();\n        var self = _this;\n        dataSet.on('change', function () {\n            self.transferToMercator();\n            canvasLayer.draw();\n        });\n        _this.ctx = canvasLayer.canvas.getContext('2d');\n\n        _this.start();\n        return _this;\n    }\n\n    createClass(AnimationLayer, [{\n        key: \"draw\",\n        value: function draw() {\n            this.canvasLayer.draw();\n        }\n    }, {\n        key: \"init\",\n        value: function init(options) {\n\n            var self = this;\n            self.options = options;\n            this.initDataRange(options);\n            this.context = self.options.context || '2d';\n\n            if (self.options.zIndex) {\n                this.canvasLayer && this.canvasLayer.setZIndex(self.options.zIndex);\n            }\n\n            if (self.options.max) {\n                this.intensity.setMax(self.options.max);\n            }\n\n            if (self.options.min) {\n                this.intensity.setMin(self.options.min);\n            }\n\n            this.initAnimator();\n        }\n\n        // 经纬度左边转换为墨卡托坐标\n\n    }, {\n        key: \"transferToMercator\",\n        value: function transferToMercator() {\n            var map = this.map;\n            var mapType = map.getMapType();\n            var projection;\n            if (mapType.getProjection) {\n                projection = mapType.getProjection();\n            } else {\n                projection = {\n                    lngLatToPoint: function lngLatToPoint(point) {\n                        var mc = map.lnglatToMercator(point.lng, point.lat);\n                        return {\n                            x: mc[0],\n                            y: mc[1]\n                        };\n                    }\n                };\n            }\n\n            if (this.options.coordType !== 'bd09mc') {\n                var data = this.dataSet.get();\n                data = this.dataSet.transferCoordinate(data, function (coordinates) {\n                    var pixel = projection.lngLatToPoint({\n                        lng: coordinates[0],\n                        lat: coordinates[1]\n                    });\n                    return [pixel.x, pixel.y];\n                }, 'coordinates', 'coordinates_mercator');\n                this.dataSet._set(data);\n            }\n        }\n    }, {\n        key: \"_canvasUpdate\",\n        value: function _canvasUpdate() {\n            var ctx = this.ctx;\n            if (!ctx) {\n                return;\n            }\n            //clear(ctx);\n            var map = this.map;\n            var projection;\n            var mcCenter;\n            if (map.getMapType().getProjection) {\n                projection = map.getMapType().getProjection();\n                mcCenter = projection.lngLatToPoint(map.getCenter());\n            } else {\n                mcCenter = {\n                    x: map.getCenter().lng,\n                    y: map.getCenter().lat\n                };\n                if (mcCenter.x > -180 && mcCenter.x < 180) {\n                    mcCenter = map.lnglatToMercator(mcCenter.x, mcCenter.y);\n                    mcCenter = { x: mcCenter[0], y: mcCenter[1] };\n                }\n                projection = {\n                    lngLatToPoint: function lngLatToPoint(point) {\n                        var mc = map.lnglatToMercator(point.lng, point.lat);\n                        return {\n                            x: mc[0],\n                            y: mc[1]\n                        };\n                    }\n                };\n            }\n            var zoomUnit;\n            if (projection.getZoomUnits) {\n                zoomUnit = projection.getZoomUnits(map.getZoom());\n            } else {\n                zoomUnit = Math.pow(2, 18 - map.getZoom());\n            }\n            var nwMc = new BMap$2.Pixel(mcCenter.x - map.getSize().width / 2 * zoomUnit, mcCenter.y + map.getSize().height / 2 * zoomUnit); //左上角墨卡托坐标\n\n            clear(ctx);\n\n            var dataGetOptions = {\n                fromColumn: this.options.coordType == 'bd09mc' ? 'coordinates' : 'coordinates_mercator',\n                transferCoordinate: function transferCoordinate(coordinate) {\n                    if (!coordinate) {\n                        return;\n                    }\n                    var x = (coordinate[0] - nwMc.x) / zoomUnit;\n                    var y = (nwMc.y - coordinate[1]) / zoomUnit;\n                    return [x, y];\n                }\n            };\n\n            this.data = this.dataSet.get(dataGetOptions);\n\n            this.processData(this.data);\n\n            this.drawAnimation();\n        }\n    }, {\n        key: \"drawAnimation\",\n        value: function drawAnimation() {\n            var ctx = this.ctx;\n            var data = this.data;\n            if (!data) {\n                return;\n            }\n\n            ctx.save();\n            ctx.globalCompositeOperation = 'destination-out';\n            ctx.fillStyle = 'rgba(0, 0, 0, .1)';\n            ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n            ctx.restore();\n\n            ctx.save();\n            if (this.options.shadowColor) {\n                ctx.shadowColor = this.options.shadowColor;\n            }\n\n            if (this.options.shadowBlur) {\n                ctx.shadowBlur = this.options.shadowBlur;\n            }\n\n            if (this.options.globalAlpha) {\n                ctx.globalAlpha = this.options.globalAlpha;\n            }\n\n            if (this.options.globalCompositeOperation) {\n                ctx.globalCompositeOperation = this.options.globalCompositeOperation;\n            }\n\n            var options = this.options;\n            for (var i = 0; i < data.length; i++) {\n                if (data[i].geometry.type === 'Point') {\n                    ctx.beginPath();\n                    var maxSize = data[i].size || this.options.size;\n                    var minSize = data[i].minSize || this.options.minSize || 0;\n                    if (data[i]._size === undefined) {\n                        data[i]._size = minSize;\n                    }\n                    ctx.arc(data[i].geometry._coordinates[0], data[i].geometry._coordinates[1], data[i]._size, 0, Math.PI * 2, true);\n                    ctx.closePath();\n\n                    data[i]._size++;\n\n                    if (data[i]._size > maxSize) {\n                        data[i]._size = minSize;\n                    }\n                    ctx.lineWidth = 1;\n                    ctx.strokeStyle = data[i].strokeStyle || data[i]._strokeStyle || options.strokeStyle || 'yellow';\n                    ctx.stroke();\n                    var fillStyle = data[i].fillStyle || data[i]._fillStyle || options.fillStyle;\n                    if (fillStyle) {\n                        ctx.fillStyle = fillStyle;\n                        ctx.fill();\n                    }\n                } else if (data[i].geometry.type === 'LineString') {\n                    ctx.beginPath();\n                    var size = data[i].size || this.options.size || 5;\n                    var minSize = data[i].minSize || this.options.minSize || 0;\n                    if (data[i]._index === undefined) {\n                        data[i]._index = 0;\n                    }\n                    var index = data[i]._index;\n                    ctx.arc(data[i].geometry._coordinates[index][0], data[i].geometry._coordinates[index][1], size, 0, Math.PI * 2, true);\n                    ctx.closePath();\n\n                    data[i]._index++;\n\n                    if (data[i]._index >= data[i].geometry._coordinates.length) {\n                        data[i]._index = 0;\n                    }\n\n                    var strokeStyle = data[i].strokeStyle || options.strokeStyle;\n                    var fillStyle = data[i].fillStyle || options.fillStyle || 'yellow';\n                    ctx.fillStyle = fillStyle;\n                    ctx.fill();\n                    if (strokeStyle && options.lineWidth) {\n                        ctx.lineWidth = options.lineWidth || 1;\n                        ctx.strokeStyle = strokeStyle;\n                        ctx.stroke();\n                    }\n                }\n            }\n            ctx.restore();\n        }\n    }, {\n        key: \"animate\",\n        value: function animate() {\n            this.drawAnimation();\n            var animateTime = this.options.animateTime || 100;\n            this.timeout = setTimeout(this.animate.bind(this), animateTime);\n        }\n    }, {\n        key: \"start\",\n        value: function start() {\n            this.stop();\n            this.animate();\n        }\n    }, {\n        key: \"stop\",\n        value: function stop() {\n            clearTimeout(this.timeout);\n        }\n    }, {\n        key: \"unbindEvent\",\n        value: function unbindEvent() {}\n    }, {\n        key: \"hide\",\n        value: function hide() {\n            this.canvasLayer.hide();\n            this.stop();\n        }\n    }, {\n        key: \"show\",\n        value: function show() {\n            this.start();\n        }\n    }, {\n        key: \"clearData\",\n        value: function clearData() {\n            this.dataSet && this.dataSet.clear();\n            this.update({\n                options: null\n            });\n        }\n    }, {\n        key: \"destroy\",\n        value: function destroy() {\n            this.stop();\n            this.unbindEvent();\n            this.clearData();\n            this.map.removeOverlay(this.canvasLayer);\n            this.canvasLayer = null;\n        }\n    }]);\n    return AnimationLayer;\n}(BaseLayer);\n\n/**\n * @author kyle / http://nikai.us/\n */\n\nvar global$5 = typeof window === 'undefined' ? {} : window;\nvar BMap$3 = global$5.BMap || global$5.BMapGL;\n\nvar Layer = function (_BaseLayer) {\n    inherits(Layer, _BaseLayer);\n\n    function Layer(map, dataSet, options) {\n        classCallCheck(this, Layer);\n\n        var _this = possibleConstructorReturn(this, (Layer.__proto__ || Object.getPrototypeOf(Layer)).call(this, map, dataSet, options));\n\n        var self = _this;\n        var data = null;\n        options = options || {};\n\n        _this.clickEvent = _this.clickEvent.bind(_this);\n        _this.mousemoveEvent = _this.mousemoveEvent.bind(_this);\n        _this.tapEvent = _this.tapEvent.bind(_this);\n\n        self.init(options);\n        self.argCheck(options);\n        self.transferToMercator();\n\n        var canvasLayer = _this.canvasLayer = new CanvasLayer({\n            map: map,\n            context: _this.context,\n            updateImmediate: options.updateImmediate,\n            paneName: options.paneName,\n            mixBlendMode: options.mixBlendMode,\n            enableMassClear: options.enableMassClear,\n            zIndex: options.zIndex,\n            update: function update() {\n                self._canvasUpdate();\n            }\n        });\n\n        dataSet.on('change', function () {\n            self.transferToMercator();\n            canvasLayer.draw();\n        });\n\n        return _this;\n    }\n\n    createClass(Layer, [{\n        key: \"clickEvent\",\n        value: function clickEvent(e) {\n            var pixel = e.pixel;\n            get(Layer.prototype.__proto__ || Object.getPrototypeOf(Layer.prototype), \"clickEvent\", this).call(this, pixel, e);\n        }\n    }, {\n        key: \"mousemoveEvent\",\n        value: function mousemoveEvent(e) {\n            var pixel = e.pixel;\n            get(Layer.prototype.__proto__ || Object.getPrototypeOf(Layer.prototype), \"mousemoveEvent\", this).call(this, pixel, e);\n        }\n    }, {\n        key: \"tapEvent\",\n        value: function tapEvent(e) {\n            var pixel = e.pixel;\n            get(Layer.prototype.__proto__ || Object.getPrototypeOf(Layer.prototype), \"tapEvent\", this).call(this, pixel, e);\n        }\n    }, {\n        key: \"bindEvent\",\n        value: function bindEvent(e) {\n            this.unbindEvent();\n            var map = this.map;\n            var timer = 0;\n            var that = this;\n\n            if (this.options.methods) {\n                if (this.options.methods.click) {\n                    map.setDefaultCursor(\"default\");\n                    map.addEventListener('click', this.clickEvent);\n                }\n                if (this.options.methods.mousemove) {\n                    map.addEventListener('mousemove', this.mousemoveEvent);\n                }\n\n                if (\"ontouchend\" in window.document && this.options.methods.tap) {\n                    map.addEventListener('touchstart', function (e) {\n                        timer = new Date();\n                    });\n                    map.addEventListener('touchend', function (e) {\n                        if (new Date() - timer < 300) {\n                            that.tapEvent(e);\n                        }\n                    });\n                }\n            }\n        }\n    }, {\n        key: \"unbindEvent\",\n        value: function unbindEvent(e) {\n            var map = this.map;\n\n            if (this.options.methods) {\n                if (this.options.methods.click) {\n                    map.removeEventListener('click', this.clickEvent);\n                }\n                if (this.options.methods.mousemove) {\n                    map.removeEventListener('mousemove', this.mousemoveEvent);\n                }\n            }\n        }\n\n        // 经纬度左边转换为墨卡托坐标\n\n    }, {\n        key: \"transferToMercator\",\n        value: function transferToMercator(dataSet) {\n            if (!dataSet) {\n                dataSet = this.dataSet;\n            }\n\n            var map = this.map;\n\n            var mapType = map.getMapType();\n            var projection;\n            if (mapType.getProjection) {\n                projection = mapType.getProjection();\n            } else {\n                projection = {\n                    lngLatToPoint: function lngLatToPoint(point) {\n                        var mc = map.lnglatToMercator(point.lng, point.lat);\n                        return {\n                            x: mc[0],\n                            y: mc[1]\n                        };\n                    }\n                };\n            }\n\n            if (this.options.coordType !== 'bd09mc') {\n                var data = dataSet.get();\n                data = dataSet.transferCoordinate(data, function (coordinates) {\n                    if (coordinates[0] < -180 || coordinates[0] > 180 || coordinates[1] < -90 || coordinates[1] > 90) {\n                        return coordinates;\n                    } else {\n                        var pixel = projection.lngLatToPoint({\n                            lng: coordinates[0],\n                            lat: coordinates[1]\n                        });\n                        return [pixel.x, pixel.y];\n                    }\n                }, 'coordinates', 'coordinates_mercator');\n                dataSet._set(data);\n            }\n        }\n    }, {\n        key: \"getContext\",\n        value: function getContext() {\n            return this.canvasLayer.canvas.getContext(this.context);\n        }\n    }, {\n        key: \"_canvasUpdate\",\n        value: function _canvasUpdate(time) {\n            if (!this.canvasLayer) {\n                return;\n            }\n\n            var self = this;\n\n            var animationOptions = self.options.animation;\n\n            var map = this.canvasLayer._map;\n\n            var projection;\n            var mcCenter;\n            if (map.getMapType().getProjection) {\n                projection = map.getMapType().getProjection();\n                mcCenter = projection.lngLatToPoint(map.getCenter());\n            } else {\n                mcCenter = {\n                    x: map.getCenter().lng,\n                    y: map.getCenter().lat\n                };\n                if (mcCenter.x > -180 && mcCenter.x < 180) {\n                    mcCenter = map.lnglatToMercator(mcCenter.x, mcCenter.y);\n                    mcCenter = { x: mcCenter[0], y: mcCenter[1] };\n                }\n                projection = {\n                    lngLatToPoint: function lngLatToPoint(point) {\n                        var mc = map.lnglatToMercator(point.lng, point.lat);\n                        return {\n                            x: mc[0],\n                            y: mc[1]\n                        };\n                    }\n                };\n            }\n            var zoomUnit;\n            if (projection.getZoomUnits) {\n                zoomUnit = projection.getZoomUnits(map.getZoom());\n            } else {\n                zoomUnit = Math.pow(2, 18 - map.getZoom());\n            }\n\n            var nwMc = new BMap$3.Pixel(mcCenter.x - map.getSize().width / 2 * zoomUnit, mcCenter.y + map.getSize().height / 2 * zoomUnit); //左上角墨卡托坐标\n\n            var context = this.getContext();\n\n            if (self.isEnabledTime()) {\n                if (time === undefined) {\n                    clear(context);\n                    return;\n                }\n                if (this.context == '2d') {\n                    context.save();\n                    context.globalCompositeOperation = 'destination-out';\n                    context.fillStyle = 'rgba(0, 0, 0, .1)';\n                    context.fillRect(0, 0, context.canvas.width, context.canvas.height);\n                    context.restore();\n                }\n            } else {\n                clear(context);\n            }\n\n            if (this.context == '2d') {\n                for (var key in self.options) {\n                    context[key] = self.options[key];\n                }\n            } else {\n                context.clear(context.COLOR_BUFFER_BIT);\n            }\n\n            if (self.options.minZoom && map.getZoom() < self.options.minZoom || self.options.maxZoom && map.getZoom() > self.options.maxZoom) {\n                return;\n            }\n\n            var scale = 1;\n            if (this.context != '2d') {\n                scale = this.canvasLayer.devicePixelRatio;\n            }\n\n            var dataGetOptions = {\n                fromColumn: self.options.coordType == 'bd09mc' ? 'coordinates' : 'coordinates_mercator',\n                transferCoordinate: function transferCoordinate(coordinate) {\n                    var x = (coordinate[0] - nwMc.x) / zoomUnit * scale;\n                    var y = (nwMc.y - coordinate[1]) / zoomUnit * scale;\n                    return [x, y];\n                }\n            };\n\n            if (time !== undefined) {\n                dataGetOptions.filter = function (item) {\n                    var trails = animationOptions.trails || 10;\n                    if (time && item.time > time - trails && item.time < time) {\n                        return true;\n                    } else {\n                        return false;\n                    }\n                };\n            }\n\n            // get data from data set\n            var data;\n\n            if (self.options.draw === 'cluster') {\n                var bounds = this.map.getBounds();\n                var ne = bounds.getNorthEast();\n                var sw = bounds.getSouthWest();\n                var clusterData = this.supercluster.getClusters([sw.lng, sw.lat, ne.lng, ne.lat], this.getZoom());\n                this.clusterDataSet.set(clusterData);\n                this.transferToMercator(this.clusterDataSet);\n                data = this.clusterDataSet.get(dataGetOptions);\n            } else {\n                data = self.dataSet.get(dataGetOptions);\n            }\n\n            this.processData(data);\n\n            var nwPixel = map.pointToPixel(new BMap$3.Point(0, 0));\n\n            if (self.options.unit == 'm') {\n                if (self.options.size) {\n                    self.options._size = self.options.size / zoomUnit;\n                }\n                if (self.options.width) {\n                    self.options._width = self.options.width / zoomUnit;\n                }\n                if (self.options.height) {\n                    self.options._height = self.options.height / zoomUnit;\n                }\n            } else {\n                self.options._size = self.options.size;\n                self.options._height = self.options.height;\n                self.options._width = self.options.width;\n            }\n\n            this.drawContext(context, data, self.options, nwPixel);\n\n            //console.timeEnd('draw');\n\n            //console.timeEnd('update')\n            self.options.updateCallback && self.options.updateCallback(time);\n        }\n    }, {\n        key: \"init\",\n        value: function init(options) {\n\n            var self = this;\n            self.options = options;\n            this.initDataRange(options);\n            this.context = self.options.context || '2d';\n\n            if (self.options.zIndex) {\n                this.canvasLayer && this.canvasLayer.setZIndex(self.options.zIndex);\n            }\n\n            if (self.options.max) {\n                this.intensity.setMax(self.options.max);\n            }\n\n            if (self.options.min) {\n                this.intensity.setMin(self.options.min);\n            }\n\n            this.initAnimator();\n            this.bindEvent();\n        }\n    }, {\n        key: \"getZoom\",\n        value: function getZoom() {\n            return this.map.getZoom();\n        }\n    }, {\n        key: \"addAnimatorEvent\",\n        value: function addAnimatorEvent() {\n            this.map.addEventListener('movestart', this.animatorMovestartEvent.bind(this));\n            this.map.addEventListener('moveend', this.animatorMoveendEvent.bind(this));\n        }\n    }, {\n        key: \"show\",\n        value: function show() {\n            this.map.addOverlay(this.canvasLayer);\n        }\n    }, {\n        key: \"hide\",\n        value: function hide() {\n            this.map.removeOverlay(this.canvasLayer);\n        }\n    }, {\n        key: \"draw\",\n        value: function draw() {\n            this.canvasLayer && this.canvasLayer.draw();\n        }\n    }, {\n        key: \"clearData\",\n        value: function clearData() {\n            this.dataSet && this.dataSet.clear();\n            this.update({\n                options: null\n            });\n        }\n    }, {\n        key: \"destroy\",\n        value: function destroy() {\n            this.unbindEvent();\n            this.clearData();\n            this.map.removeOverlay(this.canvasLayer);\n            this.canvasLayer = null;\n        }\n    }]);\n    return Layer;\n}(BaseLayer);\n\n/**\n * Copyright 2012 Google Inc. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Extends OverlayView to provide a canvas \"Layer\".\n * @author Brendan Kenny\n */\n\n/**\n * A map layer that provides a canvas over the slippy map and a callback\n * system for efficient animation. Requires canvas and CSS 2D transform\n * support.\n * @constructor\n * @extends google.maps.OverlayView\n * @param {CanvasLayerOptions=} opt_options Options to set in this CanvasLayer.\n */\nfunction CanvasLayer$2(opt_options) {\n  /**\n   * If true, canvas is in a map pane and the OverlayView is fully functional.\n   * See google.maps.OverlayView.onAdd for more information.\n   * @type {boolean}\n   * @private\n   */\n  this.isAdded_ = false;\n\n  /**\n   * If true, each update will immediately schedule the next.\n   * @type {boolean}\n   * @private\n   */\n  this.isAnimated_ = false;\n\n  /**\n   * The name of the MapPane in which this layer will be displayed.\n   * @type {string}\n   * @private\n   */\n  this.paneName_ = CanvasLayer$2.DEFAULT_PANE_NAME_;\n\n  /**\n   * A user-supplied function called whenever an update is required. Null or\n   * undefined if a callback is not provided.\n   * @type {?function=}\n   * @private\n   */\n  this.updateHandler_ = null;\n\n  /**\n   * A user-supplied function called whenever an update is required and the\n   * map has been resized since the last update. Null or undefined if a\n   * callback is not provided.\n   * @type {?function}\n   * @private\n   */\n  this.resizeHandler_ = null;\n\n  /**\n   * The LatLng coordinate of the top left of the current view of the map. Will\n   * be null when this.isAdded_ is false.\n   * @type {google.maps.LatLng}\n   * @private\n   */\n  this.topLeft_ = null;\n\n  /**\n   * The map-pan event listener. Will be null when this.isAdded_ is false. Will\n   * be null when this.isAdded_ is false.\n   * @type {?function}\n   * @private\n   */\n  this.centerListener_ = null;\n\n  /**\n   * The map-resize event listener. Will be null when this.isAdded_ is false.\n   * @type {?function}\n   * @private\n   */\n  this.resizeListener_ = null;\n\n  /**\n   * If true, the map size has changed and this.resizeHandler_ must be called\n   * on the next update.\n   * @type {boolean}\n   * @private\n   */\n  this.needsResize_ = true;\n\n  /**\n   * A browser-defined id for the currently requested callback. Null when no\n   * callback is queued.\n   * @type {?number}\n   * @private\n   */\n  this.requestAnimationFrameId_ = null;\n\n  var canvas = document.createElement('canvas');\n  canvas.style.position = 'absolute';\n  canvas.style.top = 0;\n  canvas.style.left = 0;\n  canvas.style.pointerEvents = 'none';\n\n  /**\n   * The canvas element.\n   * @type {!HTMLCanvasElement}\n   */\n  this.canvas = canvas;\n\n  /**\n   * The CSS width of the canvas, which may be different than the width of the\n   * backing store.\n   * @private {number}\n   */\n  this.canvasCssWidth_ = 300;\n\n  /**\n   * The CSS height of the canvas, which may be different than the height of\n   * the backing store.\n   * @private {number}\n   */\n  this.canvasCssHeight_ = 150;\n\n  /**\n   * A value for scaling the CanvasLayer resolution relative to the CanvasLayer\n   * display size.\n   * @private {number}\n   */\n  this.resolutionScale_ = 1;\n\n  /**\n   * Simple bind for functions with no args for bind-less browsers (Safari).\n   * @param {Object} thisArg The this value used for the target function.\n   * @param {function} func The function to be bound.\n   */\n  function simpleBindShim(thisArg, func) {\n    return function () {\n      func.apply(thisArg);\n    };\n  }\n\n  /**\n   * A reference to this.repositionCanvas_ with this bound as its this value.\n   * @type {function}\n   * @private\n   */\n  this.repositionFunction_ = simpleBindShim(this, this.repositionCanvas_);\n\n  /**\n   * A reference to this.resize_ with this bound as its this value.\n   * @type {function}\n   * @private\n   */\n  this.resizeFunction_ = simpleBindShim(this, this.resize_);\n\n  /**\n   * A reference to this.update_ with this bound as its this value.\n   * @type {function}\n   * @private\n   */\n  this.requestUpdateFunction_ = simpleBindShim(this, this.update_);\n\n  // set provided options, if any\n  if (opt_options) {\n    this.setOptions(opt_options);\n  }\n}\n\nvar global$6 = typeof window === 'undefined' ? {} : window;\n\nif (global$6.google && global$6.google.maps) {\n\n  CanvasLayer$2.prototype = new google.maps.OverlayView();\n\n  /**\n   * The default MapPane to contain the canvas.\n   * @type {string}\n   * @const\n   * @private\n   */\n  CanvasLayer$2.DEFAULT_PANE_NAME_ = 'overlayLayer';\n\n  /**\n   * Transform CSS property name, with vendor prefix if required. If browser\n   * does not support transforms, property will be ignored.\n   * @type {string}\n   * @const\n   * @private\n   */\n  CanvasLayer$2.CSS_TRANSFORM_ = function () {\n    var div = document.createElement('div');\n    var transformProps = ['transform', 'WebkitTransform', 'MozTransform', 'OTransform', 'msTransform'];\n    for (var i = 0; i < transformProps.length; i++) {\n      var prop = transformProps[i];\n      if (div.style[prop] !== undefined) {\n        return prop;\n      }\n    }\n\n    // return unprefixed version by default\n    return transformProps[0];\n  }();\n\n  /**\n   * The requestAnimationFrame function, with vendor-prefixed or setTimeout-based\n   * fallbacks. MUST be called with window as thisArg.\n   * @type {function}\n   * @param {function} callback The function to add to the frame request queue.\n   * @return {number} The browser-defined id for the requested callback.\n   * @private\n   */\n  CanvasLayer$2.prototype.requestAnimFrame_ = global$6.requestAnimationFrame || global$6.webkitRequestAnimationFrame || global$6.mozRequestAnimationFrame || global$6.oRequestAnimationFrame || global$6.msRequestAnimationFrame || function (callback) {\n    return global$6.setTimeout(callback, 1000 / 60);\n  };\n\n  /**\n   * The cancelAnimationFrame function, with vendor-prefixed fallback. Does not\n   * fall back to clearTimeout as some platforms implement requestAnimationFrame\n   * but not cancelAnimationFrame, and the cost is an extra frame on onRemove.\n   * MUST be called with window as thisArg.\n   * @type {function}\n   * @param {number=} requestId The id of the frame request to cancel.\n   * @private\n   */\n  CanvasLayer$2.prototype.cancelAnimFrame_ = global$6.cancelAnimationFrame || global$6.webkitCancelAnimationFrame || global$6.mozCancelAnimationFrame || global$6.oCancelAnimationFrame || global$6.msCancelAnimationFrame || function (requestId) {};\n\n  /**\n   * Sets any options provided. See CanvasLayerOptions for more information.\n   * @param {CanvasLayerOptions} options The options to set.\n   */\n  CanvasLayer$2.prototype.setOptions = function (options) {\n    if (options.animate !== undefined) {\n      this.setAnimate(options.animate);\n    }\n\n    if (options.paneName !== undefined) {\n      this.setPaneName(options.paneName);\n    }\n\n    if (options.updateHandler !== undefined) {\n      this.setUpdateHandler(options.updateHandler);\n    }\n\n    if (options.resizeHandler !== undefined) {\n      this.setResizeHandler(options.resizeHandler);\n    }\n\n    if (options.resolutionScale !== undefined) {\n      this.setResolutionScale(options.resolutionScale);\n    }\n\n    if (options.map !== undefined) {\n      this.setMap(options.map);\n    }\n  };\n\n  /**\n   * Set the animated state of the layer. If true, updateHandler will be called\n   * repeatedly, once per frame. If false, updateHandler will only be called when\n   * a map property changes that could require the canvas content to be redrawn.\n   * @param {boolean} animate Whether the canvas is animated.\n   */\n  CanvasLayer$2.prototype.setAnimate = function (animate) {\n    this.isAnimated_ = !!animate;\n\n    if (this.isAnimated_) {\n      this.scheduleUpdate();\n    }\n  };\n\n  /**\n   * @return {boolean} Whether the canvas is animated.\n   */\n  CanvasLayer$2.prototype.isAnimated = function () {\n    return this.isAnimated_;\n  };\n\n  /**\n   * Set the MapPane in which this layer will be displayed, by name. See\n   * {@code google.maps.MapPanes} for the panes available.\n   * @param {string} paneName The name of the desired MapPane.\n   */\n  CanvasLayer$2.prototype.setPaneName = function (paneName) {\n    this.paneName_ = paneName;\n\n    this.setPane_();\n  };\n\n  /**\n   * @return {string} The name of the current container pane.\n   */\n  CanvasLayer$2.prototype.getPaneName = function () {\n    return this.paneName_;\n  };\n\n  /**\n   * Adds the canvas to the specified container pane. Since this is guaranteed to\n   * execute only after onAdd is called, this is when paneName's existence is\n   * checked (and an error is thrown if it doesn't exist).\n   * @private\n   */\n  CanvasLayer$2.prototype.setPane_ = function () {\n    if (!this.isAdded_) {\n      return;\n    }\n\n    // onAdd has been called, so panes can be used\n    var panes = this.getPanes();\n    if (!panes[this.paneName_]) {\n      throw new Error('\"' + this.paneName_ + '\" is not a valid MapPane name.');\n    }\n\n    panes[this.paneName_].appendChild(this.canvas);\n  };\n\n  /**\n   * Set a function that will be called whenever the parent map and the overlay's\n   * canvas have been resized. If opt_resizeHandler is null or unspecified, any\n   * existing callback is removed.\n   * @param {?function=} opt_resizeHandler The resize callback function.\n   */\n  CanvasLayer$2.prototype.setResizeHandler = function (opt_resizeHandler) {\n    this.resizeHandler_ = opt_resizeHandler;\n  };\n\n  /**\n   * Sets a value for scaling the canvas resolution relative to the canvas\n   * display size. This can be used to save computation by scaling the backing\n   * buffer down, or to support high DPI devices by scaling it up (by e.g.\n   * window.devicePixelRatio).\n   * @param {number} scale\n   */\n  CanvasLayer$2.prototype.setResolutionScale = function (scale) {\n    if (typeof scale === 'number') {\n      this.resolutionScale_ = scale;\n      this.resize_();\n    }\n  };\n\n  /**\n   * Set a function that will be called when a repaint of the canvas is required.\n   * If opt_updateHandler is null or unspecified, any existing callback is\n   * removed.\n   * @param {?function=} opt_updateHandler The update callback function.\n   */\n  CanvasLayer$2.prototype.setUpdateHandler = function (opt_updateHandler) {\n    this.updateHandler_ = opt_updateHandler;\n  };\n\n  /**\n   * @inheritDoc\n   */\n  CanvasLayer$2.prototype.onAdd = function () {\n    if (this.isAdded_) {\n      return;\n    }\n\n    this.isAdded_ = true;\n    this.setPane_();\n\n    this.resizeListener_ = google.maps.event.addListener(this.getMap(), 'resize', this.resizeFunction_);\n    this.centerListener_ = google.maps.event.addListener(this.getMap(), 'center_changed', this.repositionFunction_);\n\n    this.resize_();\n    this.repositionCanvas_();\n  };\n\n  /**\n   * @inheritDoc\n   */\n  CanvasLayer$2.prototype.onRemove = function () {\n    if (!this.isAdded_) {\n      return;\n    }\n\n    this.isAdded_ = false;\n    this.topLeft_ = null;\n\n    // remove canvas and listeners for pan and resize from map\n    this.canvas.parentElement.removeChild(this.canvas);\n    if (this.centerListener_) {\n      google.maps.event.removeListener(this.centerListener_);\n      this.centerListener_ = null;\n    }\n    if (this.resizeListener_) {\n      google.maps.event.removeListener(this.resizeListener_);\n      this.resizeListener_ = null;\n    }\n\n    // cease canvas update callbacks\n    if (this.requestAnimationFrameId_) {\n      this.cancelAnimFrame_.call(global$6, this.requestAnimationFrameId_);\n      this.requestAnimationFrameId_ = null;\n    }\n  };\n\n  /**\n   * The internal callback for resize events that resizes the canvas to keep the\n   * map properly covered.\n   * @private\n   */\n  CanvasLayer$2.prototype.resize_ = function () {\n    if (!this.isAdded_) {\n      return;\n    }\n\n    var map = this.getMap();\n    var mapWidth = map.getDiv().offsetWidth;\n    var mapHeight = map.getDiv().offsetHeight;\n\n    var newWidth = mapWidth * this.resolutionScale_;\n    var newHeight = mapHeight * this.resolutionScale_;\n    var oldWidth = this.canvas.width;\n    var oldHeight = this.canvas.height;\n\n    // resizing may allocate a new back buffer, so do so conservatively\n    if (oldWidth !== newWidth || oldHeight !== newHeight) {\n      this.canvas.width = newWidth;\n      this.canvas.height = newHeight;\n\n      this.needsResize_ = true;\n      this.scheduleUpdate();\n    }\n\n    // reset styling if new sizes don't match; resize of data not needed\n    if (this.canvasCssWidth_ !== mapWidth || this.canvasCssHeight_ !== mapHeight) {\n      this.canvasCssWidth_ = mapWidth;\n      this.canvasCssHeight_ = mapHeight;\n      this.canvas.style.width = mapWidth + 'px';\n      this.canvas.style.height = mapHeight + 'px';\n    }\n  };\n\n  /**\n   * @inheritDoc\n   */\n  CanvasLayer$2.prototype.draw = function () {\n    this.repositionCanvas_();\n  };\n\n  /**\n   * Internal callback for map view changes. Since the Maps API moves the overlay\n   * along with the map, this function calculates the opposite translation to\n   * keep the canvas in place.\n   * @private\n   */\n  CanvasLayer$2.prototype.repositionCanvas_ = function () {\n    // TODO(bckenny): *should* only be executed on RAF, but in current browsers\n    //     this causes noticeable hitches in map and overlay relative\n    //     positioning.\n\n    var map = this.getMap();\n\n    // topLeft can't be calculated from map.getBounds(), because bounds are\n    // clamped to -180 and 180 when completely zoomed out. Instead, calculate\n    // left as an offset from the center, which is an unwrapped LatLng.\n    var top = map.getBounds().getNorthEast().lat();\n    var center = map.getCenter();\n    var scale = Math.pow(2, map.getZoom());\n    var left = center.lng() - this.canvasCssWidth_ * 180 / (256 * scale);\n    this.topLeft_ = new google.maps.LatLng(top, left);\n\n    // Canvas position relative to draggable map's container depends on\n    // overlayView's projection, not the map's. Have to use the center of the\n    // map for this, not the top left, for the same reason as above.\n    var projection = this.getProjection();\n    var divCenter = projection.fromLatLngToDivPixel(center);\n    var offsetX = -Math.round(this.canvasCssWidth_ / 2 - divCenter.x);\n    var offsetY = -Math.round(this.canvasCssHeight_ / 2 - divCenter.y);\n    this.canvas.style[CanvasLayer$2.CSS_TRANSFORM_] = 'translate(' + offsetX + 'px,' + offsetY + 'px)';\n\n    this.scheduleUpdate();\n  };\n\n  /**\n   * Internal callback that serves as main animation scheduler via\n   * requestAnimationFrame. Calls resize and update callbacks if set, and\n   * schedules the next frame if overlay is animated.\n   * @private\n   */\n  CanvasLayer$2.prototype.update_ = function () {\n    this.requestAnimationFrameId_ = null;\n\n    if (!this.isAdded_) {\n      return;\n    }\n\n    if (this.isAnimated_) {\n      this.scheduleUpdate();\n    }\n\n    if (this.needsResize_ && this.resizeHandler_) {\n      this.needsResize_ = false;\n      this.resizeHandler_();\n    }\n\n    if (this.updateHandler_) {\n      this.updateHandler_();\n    }\n  };\n\n  /**\n   * A convenience method to get the current LatLng coordinate of the top left of\n   * the current view of the map.\n   * @return {google.maps.LatLng} The top left coordinate.\n   */\n  CanvasLayer$2.prototype.getTopLeft = function () {\n    return this.topLeft_;\n  };\n\n  /**\n   * Schedule a requestAnimationFrame callback to updateHandler. If one is\n   * already scheduled, there is no effect.\n   */\n  CanvasLayer$2.prototype.scheduleUpdate = function () {\n    if (this.isAdded_ && !this.requestAnimationFrameId_) {\n      this.requestAnimationFrameId_ = this.requestAnimFrame_.call(global$6, this.requestUpdateFunction_);\n    }\n  };\n}\n\n/**\n * @author kyle / http://nikai.us/\n */\n\nvar Layer$2 = function (_BaseLayer) {\n    inherits(Layer, _BaseLayer);\n\n    function Layer(map, dataSet, options) {\n        classCallCheck(this, Layer);\n\n        var _this = possibleConstructorReturn(this, (Layer.__proto__ || Object.getPrototypeOf(Layer)).call(this, map, dataSet, options));\n\n        var self = _this;\n        var data = null;\n        options = options || {};\n\n        self.init(options);\n        self.argCheck(options);\n\n        var canvasLayerOptions = {\n            map: map,\n            animate: false,\n            updateHandler: function updateHandler() {\n                self._canvasUpdate();\n            },\n            resolutionScale: resolutionScale\n        };\n\n        var canvasLayer = _this.canvasLayer = new CanvasLayer$2(canvasLayerOptions);\n\n        _this.clickEvent = _this.clickEvent.bind(_this);\n        _this.mousemoveEvent = _this.mousemoveEvent.bind(_this);\n        _this.bindEvent();\n        return _this;\n    }\n\n    createClass(Layer, [{\n        key: \"clickEvent\",\n        value: function clickEvent(e) {\n            var pixel = e.pixel;\n            get(Layer.prototype.__proto__ || Object.getPrototypeOf(Layer.prototype), \"clickEvent\", this).call(this, pixel, e);\n        }\n    }, {\n        key: \"mousemoveEvent\",\n        value: function mousemoveEvent(e) {\n            var pixel = e.pixel;\n            get(Layer.prototype.__proto__ || Object.getPrototypeOf(Layer.prototype), \"mousemoveEvent\", this).call(this, pixel, e);\n        }\n    }, {\n        key: \"bindEvent\",\n        value: function bindEvent(e) {\n            var map = this.map;\n\n            if (this.options.methods) {\n                if (this.options.methods.click) {\n                    map.setDefaultCursor(\"default\");\n                    map.addListener('click', this.clickEvent);\n                }\n                if (this.options.methods.mousemove) {\n                    map.addListener('mousemove', this.mousemoveEvent);\n                }\n            }\n        }\n    }, {\n        key: \"unbindEvent\",\n        value: function unbindEvent(e) {\n            var map = this.map;\n\n            if (this.options.methods) {\n                if (this.options.methods.click) {\n                    map.removeListener('click', this.clickEvent);\n                }\n                if (this.options.methods.mousemove) {\n                    map.removeListener('mousemove', this.mousemoveEvent);\n                }\n            }\n        }\n    }, {\n        key: \"getContext\",\n        value: function getContext() {\n            return this.canvasLayer.canvas.getContext(this.context);\n        }\n    }, {\n        key: \"_canvasUpdate\",\n        value: function _canvasUpdate(time) {\n            if (!this.canvasLayer) {\n                return;\n            }\n\n            var self = this;\n\n            var animationOptions = self.options.animation;\n\n            var context = this.getContext();\n\n            if (self.isEnabledTime()) {\n                if (time === undefined) {\n                    clear(context);\n                    return;\n                }\n                if (this.context == '2d') {\n                    context.save();\n                    context.globalCompositeOperation = 'destination-out';\n                    context.fillStyle = 'rgba(0, 0, 0, .1)';\n                    context.fillRect(0, 0, context.canvas.width, context.canvas.height);\n                    context.restore();\n                }\n            } else {\n                clear(context);\n            }\n\n            if (this.context == '2d') {\n                for (var key in self.options) {\n                    context[key] = self.options[key];\n                }\n            } else {\n                context.clear(context.COLOR_BUFFER_BIT);\n            }\n\n            if (self.options.minZoom && map.getZoom() < self.options.minZoom || self.options.maxZoom && map.getZoom() > self.options.maxZoom) {\n                return;\n            }\n\n            var scale = 1;\n            if (this.context != '2d') {\n                scale = this.canvasLayer.devicePixelRatio;\n            }\n\n            var map = this.map;\n            var mapProjection = map.getProjection();\n            var scale = Math.pow(2, map.zoom) * resolutionScale;\n            var offset = mapProjection.fromLatLngToPoint(this.canvasLayer.getTopLeft());\n            var dataGetOptions = {\n                //fromColumn: self.options.coordType == 'bd09mc' ? 'coordinates' : 'coordinates_mercator',\n                transferCoordinate: function transferCoordinate(coordinate) {\n                    var latLng = new google.maps.LatLng(coordinate[1], coordinate[0]);\n                    var worldPoint = mapProjection.fromLatLngToPoint(latLng);\n                    var pixel = {\n                        x: (worldPoint.x - offset.x) * scale,\n                        y: (worldPoint.y - offset.y) * scale\n                    };\n                    return [pixel.x, pixel.y];\n                }\n            };\n\n            if (time !== undefined) {\n                dataGetOptions.filter = function (item) {\n                    var trails = animationOptions.trails || 10;\n                    if (time && item.time > time - trails && item.time < time) {\n                        return true;\n                    } else {\n                        return false;\n                    }\n                };\n            }\n\n            // get data from data set\n            var data = self.dataSet.get(dataGetOptions);\n\n            this.processData(data);\n\n            var latLng = new google.maps.LatLng(0, 0);\n            var worldPoint = mapProjection.fromLatLngToPoint(latLng);\n            var pixel = {\n                x: (worldPoint.x - offset.x) * scale,\n                y: (worldPoint.y - offset.y) * scale\n            };\n\n            if (self.options.unit == 'm' && self.options.size) {\n                self.options._size = self.options.size / zoomUnit;\n            } else {\n                self.options._size = self.options.size;\n            }\n\n            this.drawContext(context, new DataSet(data), self.options, pixel);\n\n            //console.timeEnd('draw');\n\n            //console.timeEnd('update')\n            self.options.updateCallback && self.options.updateCallback(time);\n        }\n    }, {\n        key: \"init\",\n        value: function init(options) {\n\n            var self = this;\n\n            self.options = options;\n\n            this.initDataRange(options);\n\n            this.context = self.options.context || '2d';\n\n            if (self.options.zIndex) {\n                this.canvasLayer && this.canvasLayer.setZIndex(self.options.zIndex);\n            }\n\n            this.initAnimator();\n        }\n    }, {\n        key: \"addAnimatorEvent\",\n        value: function addAnimatorEvent() {\n            this.map.addListener('movestart', this.animatorMovestartEvent.bind(this));\n            this.map.addListener('moveend', this.animatorMoveendEvent.bind(this));\n        }\n    }, {\n        key: \"show\",\n        value: function show() {\n            this.map.addOverlay(this.canvasLayer);\n        }\n    }, {\n        key: \"hide\",\n        value: function hide() {\n            this.map.removeOverlay(this.canvasLayer);\n        }\n    }, {\n        key: \"draw\",\n        value: function draw() {\n            self.canvasLayer.draw();\n        }\n    }]);\n    return Layer;\n}(BaseLayer);\n\n/**\n * MapV for maptalks.js (https://github.com/maptalks/maptalks.js)\n * @author fuzhenn / https://github.com/fuzhenn\n */\n// import * as maptalks from 'maptalks';\nvar Layer$4 = void 0;\nif (typeof maptalks !== 'undefined') {\n    Layer$4 = function (_maptalks$Layer) {\n        inherits(Layer, _maptalks$Layer);\n\n        function Layer(id, dataSet, options) {\n            classCallCheck(this, Layer);\n\n            var _this = possibleConstructorReturn(this, (Layer.__proto__ || Object.getPrototypeOf(Layer)).call(this, id, options));\n\n            _this.options_ = options;\n            _this.dataSet = dataSet;\n            _this._initBaseLayer(options);\n            return _this;\n        }\n\n        createClass(Layer, [{\n            key: \"_initBaseLayer\",\n            value: function _initBaseLayer(options) {\n                var self = this;\n                var baseLayer = this.baseLayer = new BaseLayer(null, this.dataSet, options);\n                self.init(options);\n                baseLayer.argCheck(options);\n            }\n        }, {\n            key: \"clickEvent\",\n            value: function clickEvent(e) {\n                if (!this.baseLayer) {\n                    return;\n                }\n                var pixel = e.containerPoint;\n                this.baseLayer.clickEvent(pixel, e.domEvent);\n            }\n        }, {\n            key: \"mousemoveEvent\",\n            value: function mousemoveEvent(e) {\n                if (!this.baseLayer) {\n                    return;\n                }\n                var pixel = e.containerPoint;\n                this.baseLayer.mousemoveEvent(pixel, e.domEvent);\n            }\n        }, {\n            key: \"getEvents\",\n            value: function getEvents() {\n                return {\n                    'click': this.clickEvent,\n                    'mousemove': this.mousemoveEvent\n                };\n            }\n        }, {\n            key: \"init\",\n            value: function init(options) {\n\n                var base = this.baseLayer;\n\n                base.options = options;\n\n                base.initDataRange(options);\n\n                base.context = base.options.context || '2d';\n\n                base.initAnimator();\n            }\n        }, {\n            key: \"addAnimatorEvent\",\n            value: function addAnimatorEvent() {\n                this.map.addListener('movestart', this.animatorMovestartEvent.bind(this));\n                this.map.addListener('moveend', this.animatorMoveendEvent.bind(this));\n            }\n        }]);\n        return Layer;\n    }(maptalks.Layer);\n\n    var LayerRenderer = function (_maptalks$renderer$Ca) {\n        inherits(LayerRenderer, _maptalks$renderer$Ca);\n\n        function LayerRenderer() {\n            classCallCheck(this, LayerRenderer);\n            return possibleConstructorReturn(this, (LayerRenderer.__proto__ || Object.getPrototypeOf(LayerRenderer)).apply(this, arguments));\n        }\n\n        createClass(LayerRenderer, [{\n            key: \"needToRedraw\",\n            value: function needToRedraw() {\n                var base = this.layer.baseLayer;\n                if (base.isEnabledTime()) {\n                    return true;\n                }\n                return get(LayerRenderer.prototype.__proto__ || Object.getPrototypeOf(LayerRenderer.prototype), \"needToRedraw\", this).call(this);\n            }\n        }, {\n            key: \"draw\",\n            value: function draw() {\n                var base = this.layer.baseLayer;\n                if (!this.canvas || !base.isEnabledTime() || this._shouldClear) {\n                    this.prepareCanvas();\n                    this._shouldClear = false;\n                }\n                this._update(this.gl || this.context, this._mapvFrameTime);\n                delete this._mapvFrameTime;\n                this.completeRender();\n            }\n        }, {\n            key: \"drawOnInteracting\",\n            value: function drawOnInteracting() {\n                this.draw();\n                this._shouldClear = false;\n            }\n        }, {\n            key: \"onSkipDrawOnInteracting\",\n            value: function onSkipDrawOnInteracting() {\n                this._shouldClear = true;\n            }\n        }, {\n            key: \"_canvasUpdate\",\n            value: function _canvasUpdate(time) {\n                this.setToRedraw();\n                this._mapvFrameTime = time;\n            }\n        }, {\n            key: \"_update\",\n            value: function _update(context, time) {\n                if (!this.canvas) {\n                    return;\n                }\n\n                var self = this.layer.baseLayer;\n\n                var animationOptions = self.options.animation;\n\n                var map = this.getMap();\n\n                if (self.isEnabledTime()) {\n                    if (time === undefined) {\n                        clear(context);\n                        return;\n                    }\n                    if (self.context == '2d') {\n                        context.save();\n                        context.globalCompositeOperation = 'destination-out';\n                        context.fillStyle = 'rgba(0, 0, 0, .1)';\n                        context.fillRect(0, 0, context.canvas.width, context.canvas.height);\n                        context.restore();\n                    }\n                } else {\n                    clear(context);\n                }\n\n                if (self.context == '2d') {\n                    for (var key in self.options) {\n                        context[key] = self.options[key];\n                    }\n                } else {\n                    context.clear(context.COLOR_BUFFER_BIT);\n                }\n\n                var scale = 1;\n                if (self.context === '2d' && self.options.draw !== 'heatmap') {\n                    //in heatmap.js, devicePixelRatio is being mulitplied independently\n                    scale = self.canvasLayer.devicePixelRatio;\n                }\n\n                //reuse to save coordinate instance creation\n                var coord = new maptalks.Coordinate(0, 0);\n                var dataGetOptions = {\n                    fromColumn: self.options.coordType === 'bd09mc' ? 'coordinates_mercator' : 'coordinates',\n                    transferCoordinate: function transferCoordinate(coordinate) {\n                        coord.x = coordinate[0];\n                        coord.y = coordinate[1];\n                        var r = map.coordToContainerPoint(coord)._multi(scale).toArray();\n                        return r;\n                    }\n                };\n\n                if (time !== undefined) {\n                    dataGetOptions.filter = function (item) {\n                        var trails = animationOptions.trails || 10;\n                        if (time && item.time > time - trails && item.time < time) {\n                            return true;\n                        } else {\n                            return false;\n                        }\n                    };\n                }\n\n                // get data from data set\n                var data = self.dataSet.get(dataGetOptions);\n\n                self.processData(data);\n\n                if (self.options.unit == 'm') {\n                    if (self.options.size) {\n                        self.options._size = self.options.size / zoomUnit;\n                    }\n                    if (self.options.width) {\n                        self.options._width = self.options.width / zoomUnit;\n                    }\n                    if (self.options.height) {\n                        self.options._height = self.options.height / zoomUnit;\n                    }\n                } else {\n                    self.options._size = self.options.size;\n                    self.options._height = self.options.height;\n                    self.options._width = self.options.width;\n                }\n\n                var zeroZero = new maptalks.Point(0, 0);\n                //screen position of the [0, 0] point\n                var zeroZeroScreen = map._pointToContainerPoint(zeroZero)._multi(scale);\n                self.drawContext(context, data, self.options, zeroZeroScreen);\n\n                //console.timeEnd('draw');\n\n                //console.timeEnd('update')\n                self.options.updateCallback && self.options.updateCallback(time);\n            }\n        }, {\n            key: \"createCanvas\",\n            value: function createCanvas() {\n                if (this.canvas) {\n                    return;\n                }\n                var map = this.getMap();\n                var size = map.getSize();\n                var r = maptalks.Browser.retina ? 2 : 1,\n                    w = r * size.width,\n                    h = r * size.height;\n                this.canvas = maptalks.Canvas.createCanvas(w, h, map.CanvasClass);\n                var mapvContext = this.layer.baseLayer.context;\n                if (mapvContext === '2d') {\n                    this.context = this.canvas.getContext('2d');\n                    if (this.layer.options['globalCompositeOperation']) {\n                        this.context.globalCompositeOperation = this.layer.options['globalCompositeOperation'];\n                    }\n                } else {\n                    var attributes = {\n                        'alpha': true,\n                        'preserveDrawingBuffer': true,\n                        'antialias': false\n                    };\n                    this.gl = this.canvas.getContext('webgl', attributes);\n                }\n\n                this.onCanvasCreate();\n\n                this._bindToMapv();\n\n                this.layer.fire('canvascreate', {\n                    'context': this.context,\n                    'gl': this.gl\n                });\n            }\n        }, {\n            key: \"_bindToMapv\",\n            value: function _bindToMapv() {\n                //some bindings needed by mapv baselayer\n                var base = this.layer.baseLayer;\n                this.devicePixelRatio = maptalks.Browser.retina ? 2 : 1;\n                base.canvasLayer = this;\n                base._canvasUpdate = this._canvasUpdate.bind(this);\n                base.getContext = function () {\n                    var renderer = self.getRenderer();\n                    return renderer.gl || renderer.context;\n                };\n            }\n        }]);\n        return LayerRenderer;\n    }(maptalks.renderer.CanvasRenderer);\n\n    Layer$4.registerRenderer('canvas', LayerRenderer);\n}\n\nvar Layer$5 = Layer$4;\n\n/**\n * MapV for AMap\n * @author sakitam-fdd - https://github.com/sakitam-fdd\n */\n\n/**\n * create canvas\n * @param width\n * @param height\n * @param Canvas\n * @returns {HTMLCanvasElement}\n */\nvar createCanvas = function createCanvas(width, height, Canvas) {\n    if (typeof document !== 'undefined') {\n        var canvas = document.createElement('canvas');\n        canvas.width = width;\n        canvas.height = height;\n        return canvas;\n    } else {\n        // create a new canvas instance in node.js\n        // the canvas class needs to have a default constructor without any parameter\n        return new Canvas(width, height);\n    }\n};\n\nvar Layer$6 = function (_BaseLayer) {\n    inherits(Layer, _BaseLayer);\n\n    function Layer() {\n        var map = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n        var dataSet = arguments[1];\n        var options = arguments[2];\n        classCallCheck(this, Layer);\n\n        var _this = possibleConstructorReturn(this, (Layer.__proto__ || Object.getPrototypeOf(Layer)).call(this, map, dataSet, options));\n\n        _this.options = options;\n\n        /**\n         * internal\n         * @type {{canvas: null, devicePixelRatio: number}}\n         */\n        _this.canvasLayer = {\n            canvas: null,\n            devicePixelRatio: window.devicePixelRatio\n        };\n\n        /**\n         * canvas layer\n         * @type {null}\n         * @private\n         */\n        _this.layer_ = null;\n\n        _this.initDataRange(options);\n        _this.initAnimator();\n        _this.onEvents();\n        map.on('complete', function () {\n            this.init(map, options);\n            this.argCheck(options);\n        }, _this);\n        return _this;\n    }\n\n    /**\n     * init mapv layer\n     * @param map\n     * @param options\n     */\n\n\n    createClass(Layer, [{\n        key: \"init\",\n        value: function init(map, options) {\n            if (map) {\n                this.map = map;\n                this.context = this.options.context || '2d';\n                this.getCanvasLayer();\n            } else {\n                throw new Error('not map object');\n            }\n        }\n\n        /**\n         * update layer\n         * @param time\n         * @private\n         */\n\n    }, {\n        key: \"_canvasUpdate\",\n        value: function _canvasUpdate(time) {\n            this.render(this.canvasLayer.canvas, time);\n        }\n\n        /**\n         * render layer\n         * @param canvas\n         * @param time\n         * @returns {Layer}\n         */\n\n    }, {\n        key: \"render\",\n        value: function render(canvas, time) {\n            if (!canvas) return;\n            var map = this.map;\n            var context = canvas.getContext(this.context);\n            var animationOptions = this.options.animation;\n            if (this.isEnabledTime()) {\n                if (time === undefined) {\n                    clear(context);\n                    return this;\n                }\n                if (this.context === '2d') {\n                    context.save();\n                    context.globalCompositeOperation = 'destination-out';\n                    context.fillStyle = 'rgba(0, 0, 0, .1)';\n                    context.fillRect(0, 0, context.canvas.width, context.canvas.height);\n                    context.restore();\n                }\n            } else {\n                clear(context);\n            }\n\n            if (this.context === '2d') {\n                for (var key in this.options) {\n                    context[key] = this.options[key];\n                }\n            } else {\n                context.clear(context.COLOR_BUFFER_BIT);\n            }\n            var dataGetOptions = {\n                transferCoordinate: function transferCoordinate(coordinate) {\n                    var _pixel = map.lngLatToContainer(new AMap.LngLat(coordinate[0], coordinate[1]));\n                    return [_pixel['x'], _pixel['y']];\n                }\n            };\n\n            if (time !== undefined) {\n                dataGetOptions.filter = function (item) {\n                    var trails = animationOptions.trails || 10;\n                    if (time && item.time > time - trails && item.time < time) {\n                        return true;\n                    } else {\n                        return false;\n                    }\n                };\n            }\n\n            var data = this.dataSet.get(dataGetOptions);\n            this.processData(data);\n\n            if (this.options.unit === 'm') {\n                if (this.options.size) {\n                    this.options._size = this.options.size / zoomUnit;\n                }\n                if (this.options.width) {\n                    this.options._width = this.options.width / zoomUnit;\n                }\n                if (this.options.height) {\n                    this.options._height = this.options.height / zoomUnit;\n                }\n            } else {\n                this.options._size = this.options.size;\n                this.options._height = this.options.height;\n                this.options._width = this.options.width;\n            }\n\n            this.drawContext(context, new DataSet(data), this.options, { x: 0, y: 0 });\n            this.options.updateCallback && this.options.updateCallback(time);\n            return this;\n        }\n\n        /**\n         * get canvas layer\n         */\n\n    }, {\n        key: \"getCanvasLayer\",\n        value: function getCanvasLayer() {\n            if (!this.canvasLayer.canvas && !this.layer_) {\n                var canvas = this.canvasFunction();\n                var bounds = this.map.getBounds();\n                this.layer_ = new AMap.CanvasLayer({\n                    canvas: canvas,\n                    bounds: this.options.bounds || bounds,\n                    zooms: this.options.zooms || [0, 22]\n                });\n                this.layer_.setMap(this.map);\n                this.map.on('mapmove', this.canvasFunction, this);\n                this.map.on('zoomchange', this.canvasFunction, this);\n            }\n        }\n\n        /**\n         * canvas constructor\n         * @returns {*}\n         */\n\n    }, {\n        key: \"canvasFunction\",\n        value: function canvasFunction() {\n            var _ref = [this.map.getSize().width, this.map.getSize().height],\n                width = _ref[0],\n                height = _ref[1];\n\n            if (!this.canvasLayer.canvas) {\n                this.canvasLayer.canvas = createCanvas(width, height);\n            } else {\n                this.canvasLayer.canvas.width = width;\n                this.canvasLayer.canvas.height = height;\n                var bounds = this.map.getBounds();\n                if (this.layer_) {\n                    this.layer_.setBounds(this.options.bounds || bounds);\n                }\n            }\n            this.render(this.canvasLayer.canvas);\n            return this.canvasLayer.canvas;\n        }\n\n        /**\n         * remove layer\n         */\n\n    }, {\n        key: \"removeLayer\",\n        value: function removeLayer() {\n            if (!this.map) return;\n            this.unEvents();\n            this.map.removeLayer(this.layer_);\n            delete this.map;\n            delete this.layer_;\n            delete this.canvasLayer.canvas;\n        }\n    }, {\n        key: \"getContext\",\n        value: function getContext() {\n            return this.canvasLayer.canvas.getContext(this.context);\n        }\n\n        /**\n         * handle click event\n         * @param event\n         */\n\n    }, {\n        key: \"clickEvent\",\n        value: function clickEvent(event) {\n            var pixel = event.pixel;\n            get(Layer.prototype.__proto__ || Object.getPrototypeOf(Layer.prototype), \"clickEvent\", this).call(this, pixel, event);\n        }\n\n        /**\n         * handle mousemove/pointermove event\n         * @param event\n         */\n\n    }, {\n        key: \"mousemoveEvent\",\n        value: function mousemoveEvent(event) {\n            var pixel = event.pixel;\n            get(Layer.prototype.__proto__ || Object.getPrototypeOf(Layer.prototype), \"mousemoveEvent\", this).call(this, pixel, event);\n        }\n\n        /**\n         * add animator event\n         */\n\n    }, {\n        key: \"addAnimatorEvent\",\n        value: function addAnimatorEvent() {\n            this.map.on('movestart', this.animatorMovestartEvent, this);\n            this.map.on('moveend', this.animatorMoveendEvent, this);\n        }\n\n        /**\n         * bind event\n         */\n\n    }, {\n        key: \"onEvents\",\n        value: function onEvents() {\n            var map = this.map;\n            this.unEvents();\n            if (this.options.methods) {\n                if (this.options.methods.click) {\n                    map.on('click', this.clickEvent, this);\n                }\n                if (this.options.methods.mousemove) {\n                    map.on('mousemove', this.mousemoveEvent, this);\n                }\n            }\n        }\n\n        /**\n         * unbind events\n         */\n\n    }, {\n        key: \"unEvents\",\n        value: function unEvents() {\n            var map = this.map;\n            if (this.options.methods) {\n                if (this.options.methods.click) {\n                    map.off('click', this.clickEvent, this);\n                }\n                if (this.options.methods.mousemove) {\n                    map.off('mousemove', this.mousemoveEvent, this);\n                }\n            }\n        }\n    }]);\n    return Layer;\n}(BaseLayer);\n\n/**\n * MapV for openlayers (https://openlayers.org)\n * @author sakitam-fdd - https://github.com/sakitam-fdd\n */\n\n/**\n * create canvas\n * @param width\n * @param height\n * @returns {HTMLCanvasElement}\n */\nvar createCanvas$1 = function createCanvas(width, height) {\n  if (typeof document !== 'undefined') {\n    var canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n  } else {\n    // create a new canvas instance in node.js\n    // the canvas class needs to have a default constructor without any parameter\n  }\n};\n\nvar Layer$8 = function (_BaseLayer) {\n  inherits(Layer, _BaseLayer);\n\n  function Layer() {\n    var map = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var dataSet = arguments[1];\n    var options = arguments[2];\n    classCallCheck(this, Layer);\n\n    var _this = possibleConstructorReturn(this, (Layer.__proto__ || Object.getPrototypeOf(Layer)).call(this, map, dataSet, options));\n\n    _this.options = options;\n\n    /**\n     * internal\n     * @type {{canvas: null, devicePixelRatio: number}}\n     */\n    _this.canvasLayer = {\n      canvas: null,\n      devicePixelRatio: window.devicePixelRatio\n\n      /**\n       * cavnas layer\n       * @type {null}\n       * @private\n       */\n    };_this.layer_ = null;\n\n    /**\n     * previous cursor\n     * @type {undefined}\n     * @private\n     */\n    _this.previousCursor_ = undefined;\n\n    _this.init(map, options);\n    _this.argCheck(options);\n    return _this;\n  }\n\n  /**\n   * init mapv layer\n   * @param map\n   * @param options\n   */\n\n\n  createClass(Layer, [{\n    key: \"init\",\n    value: function init(map, options) {\n      if (map && map instanceof ol.Map) {\n        this.$Map = map;\n        this.context = this.options.context || '2d';\n        this.getCanvasLayer();\n        this.initDataRange(options);\n        this.initAnimator();\n        this.onEvents();\n      } else {\n        throw new Error('not map object');\n      }\n    }\n\n    /**\n     * update layer\n     * @param time\n     * @private\n     */\n\n  }, {\n    key: \"_canvasUpdate\",\n    value: function _canvasUpdate(time) {\n      this.render(this.canvasLayer.canvas, time);\n    }\n\n    /**\n     * render layer\n     * @param canvas\n     * @param time\n     * @returns {Layer}\n     */\n\n  }, {\n    key: \"render\",\n    value: function render(canvas, time) {\n      var map = this.$Map;\n      var context = canvas.getContext(this.context);\n      var animationOptions = this.options.animation;\n      var _projection = this.options.hasOwnProperty('projection') ? this.options.projection : 'EPSG:4326';\n      if (this.isEnabledTime()) {\n        if (time === undefined) {\n          clear(context);\n          return this;\n        }\n        if (this.context === '2d') {\n          context.save();\n          context.globalCompositeOperation = 'destination-out';\n          context.fillStyle = 'rgba(0, 0, 0, .1)';\n          context.fillRect(0, 0, context.canvas.width, context.canvas.height);\n          context.restore();\n        }\n      } else {\n        clear(context);\n      }\n\n      if (this.context === '2d') {\n        for (var key in this.options) {\n          context[key] = this.options[key];\n        }\n      } else {\n        context.clear(context.COLOR_BUFFER_BIT);\n      }\n      var dataGetOptions = {\n        transferCoordinate: function transferCoordinate(coordinate) {\n          return map.getPixelFromCoordinate(ol.proj.transform(coordinate, _projection, 'EPSG:4326'));\n        }\n      };\n\n      if (time !== undefined) {\n        dataGetOptions.filter = function (item) {\n          var trails = animationOptions.trails || 10;\n          if (time && item.time > time - trails && item.time < time) {\n            return true;\n          } else {\n            return false;\n          }\n        };\n      }\n\n      var data = this.dataSet.get(dataGetOptions);\n      this.processData(data);\n\n      if (this.options.unit === 'm') {\n        if (this.options.size) {\n          this.options._size = this.options.size / zoomUnit;\n        }\n        if (this.options.width) {\n          this.options._width = this.options.width / zoomUnit;\n        }\n        if (this.options.height) {\n          this.options._height = this.options.height / zoomUnit;\n        }\n      } else {\n        this.options._size = this.options.size;\n        this.options._height = this.options.height;\n        this.options._width = this.options.width;\n      }\n\n      this.drawContext(context, new DataSet(data), this.options, { x: 0, y: 0 });\n      this.options.updateCallback && this.options.updateCallback(time);\n      return this;\n    }\n\n    /**\n     * get canvas layer\n     */\n\n  }, {\n    key: \"getCanvasLayer\",\n    value: function getCanvasLayer() {\n      if (!this.canvasLayer.canvas && !this.layer_) {\n        var extent = this.getMapExtent();\n        this.layer_ = new ol.layer.Image({\n          layerName: this.options.layerName,\n          minResolution: this.options.minResolution,\n          maxResolution: this.options.maxResolution,\n          zIndex: this.options.zIndex,\n          extent: extent,\n          source: new ol.source.ImageCanvas({\n            canvasFunction: this.canvasFunction.bind(this),\n            projection: this.options.hasOwnProperty('projection') ? this.options.projection : 'EPSG:4326',\n            ratio: this.options.hasOwnProperty('ratio') ? this.options.ratio : 1\n          })\n        });\n        this.$Map.addLayer(this.layer_);\n        this.$Map.un('precompose', this.reRender, this);\n        this.$Map.on('precompose', this.reRender, this);\n      }\n    }\n\n    /**\n     * re render\n     */\n\n  }, {\n    key: \"reRender\",\n    value: function reRender() {\n      if (!this.layer_) return;\n      var extent = this.getMapExtent();\n      this.layer_.setExtent(extent);\n    }\n\n    /**\n     * canvas constructor\n     * @param extent\n     * @param resolution\n     * @param pixelRatio\n     * @param size\n     * @param projection\n     * @returns {*}\n     */\n\n  }, {\n    key: \"canvasFunction\",\n    value: function canvasFunction(extent, resolution, pixelRatio, size, projection) {\n      if (!this.canvasLayer.canvas) {\n        this.canvasLayer.canvas = createCanvas$1(size[0], size[1]);\n      } else {\n        this.canvasLayer.canvas.width = size[0];\n        this.canvasLayer.canvas.height = size[1];\n      }\n      this.render(this.canvasLayer.canvas);\n      return this.canvasLayer.canvas;\n    }\n\n    /**\n     * get map current extent\n     * @returns {Array}\n     */\n\n  }, {\n    key: \"getMapExtent\",\n    value: function getMapExtent() {\n      var size = this.$Map.getSize();\n      return this.$Map.getView().calculateExtent(size);\n    }\n\n    /**\n     * add layer to map\n     * @param map\n     */\n\n  }, {\n    key: \"addTo\",\n    value: function addTo(map) {\n      this.init(map, this.options);\n    }\n\n    /**\n     * remove layer\n     */\n\n  }, {\n    key: \"removeLayer\",\n    value: function removeLayer() {\n      if (!this.$Map) return;\n      this.unEvents();\n      this.$Map.un('precompose', this.reRender, this);\n      this.$Map.removeLayer(this.layer_);\n      delete this.$Map;\n      delete this.layer_;\n      delete this.canvasLayer.canvas;\n    }\n  }, {\n    key: \"getContext\",\n    value: function getContext() {\n      return this.canvasLayer.canvas.getContext(this.context);\n    }\n\n    /**\n     * handle click event\n     * @param event\n     */\n\n  }, {\n    key: \"clickEvent\",\n    value: function clickEvent(event) {\n      var pixel = event.pixel;\n      get(Layer.prototype.__proto__ || Object.getPrototypeOf(Layer.prototype), \"clickEvent\", this).call(this, {\n        x: pixel[0],\n        y: pixel[1]\n      }, event);\n    }\n\n    /**\n     * handle mousemove/pointermove event\n     * @param event\n     */\n\n  }, {\n    key: \"mousemoveEvent\",\n    value: function mousemoveEvent(event) {\n      var pixel = event.pixel;\n      get(Layer.prototype.__proto__ || Object.getPrototypeOf(Layer.prototype), \"mousemoveEvent\", this).call(this, {\n        x: pixel[0],\n        y: pixel[1]\n      }, event);\n    }\n\n    /**\n     * add animator event\n     */\n\n  }, {\n    key: \"addAnimatorEvent\",\n    value: function addAnimatorEvent() {\n      this.$Map.on('movestart', this.animatorMovestartEvent, this);\n      this.$Map.on('moveend', this.animatorMoveendEvent, this);\n    }\n\n    /**\n     * bind event\n     */\n\n  }, {\n    key: \"onEvents\",\n    value: function onEvents() {\n      var map = this.$Map;\n      this.unEvents();\n      if (this.options.methods) {\n        if (this.options.methods.click) {\n          map.on('click', this.clickEvent, this);\n        }\n        if (this.options.methods.mousemove) {\n          map.on('pointermove', this.mousemoveEvent, this);\n        }\n      }\n    }\n\n    /**\n     * unbind events\n     */\n\n  }, {\n    key: \"unEvents\",\n    value: function unEvents() {\n      var map = this.$Map;\n      if (this.options.methods) {\n        if (this.options.methods.click) {\n          map.un('click', this.clickEvent, this);\n        }\n        if (this.options.methods.pointermove) {\n          map.un('pointermove', this.mousemoveEvent, this);\n        }\n      }\n    }\n\n    /**\n     * set map cursor\n     * @param cursor\n     * @param feature\n     */\n\n  }, {\n    key: \"setDefaultCursor\",\n    value: function setDefaultCursor(cursor, feature) {\n      if (!this.$Map) return;\n      var element = this.$Map.getTargetElement();\n      if (feature) {\n        if (element.style.cursor !== cursor) {\n          this.previousCursor_ = element.style.cursor;\n          element.style.cursor = cursor;\n        }\n      } else if (this.previousCursor_ !== undefined) {\n        element.style.cursor = this.previousCursor_;\n        this.previousCursor_ = undefined;\n      }\n    }\n  }]);\n  return Layer;\n}(BaseLayer);\n\n// https://github.com/SuperMap/iClient-JavaScript\n/**\n * @class MapVRenderer\n * @classdesc 地图渲染类。\n * @category Visualization MapV\n * @private\n * @extends mapv.BaseLayer\n * @param {L.Map} map - 待渲染的地图。\n * @param {L.Layer} layer - 待渲染的图层。\n * @param {DataSet} dataSet - 待渲染的数据集。\n * @param {Object} options - 渲染的参数。\n */\nvar MapVRenderer = function (_BaseLayer) {\n    inherits(MapVRenderer, _BaseLayer);\n\n    function MapVRenderer(map, layer, dataSet, options) {\n        classCallCheck(this, MapVRenderer);\n\n        var _this = possibleConstructorReturn(this, (MapVRenderer.__proto__ || Object.getPrototypeOf(MapVRenderer)).call(this, map, dataSet, options));\n\n        if (!BaseLayer) {\n            return possibleConstructorReturn(_this);\n        }\n\n        var self = _this;\n        options = options || {};\n\n        self.init(options);\n        self.argCheck(options);\n        _this.canvasLayer = layer;\n        _this.clickEvent = _this.clickEvent.bind(_this);\n        _this.mousemoveEvent = _this.mousemoveEvent.bind(_this);\n        _this._moveStartEvent = _this.moveStartEvent.bind(_this);\n        _this._moveEndEvent = _this.moveEndEvent.bind(_this);\n        _this._zoomStartEvent = _this.zoomStartEvent.bind(_this);\n        _this.bindEvent();\n        return _this;\n    }\n\n    /**\n     * @function MapVRenderer.prototype.clickEvent\n     * @description 点击事件。\n     * @param {Object} e - 触发对象。\n     */\n\n\n    createClass(MapVRenderer, [{\n        key: 'clickEvent',\n        value: function clickEvent(e) {\n            var offset = this.map.containerPointToLayerPoint([0, 0]);\n            var devicePixelRatio = this.devicePixelRatio = this.canvasLayer.devicePixelRatio = window.devicePixelRatio;\n            var pixel = e.layerPoint;\n            get(MapVRenderer.prototype.__proto__ || Object.getPrototypeOf(MapVRenderer.prototype), 'clickEvent', this).call(this, L.point((pixel.x - offset.x) / devicePixelRatio, (pixel.y - offset.y) / devicePixelRatio), e);\n        }\n\n        /**\n         * @function MapVRenderer.prototype.mousemoveEvent\n         * @description 鼠标移动事件。\n         * @param {Object} e - 触发对象。\n         */\n\n    }, {\n        key: 'mousemoveEvent',\n        value: function mousemoveEvent(e) {\n            var pixel = e.layerPoint;\n            get(MapVRenderer.prototype.__proto__ || Object.getPrototypeOf(MapVRenderer.prototype), 'mousemoveEvent', this).call(this, pixel, e);\n        }\n\n        /**\n         * @function MapVRenderer.prototype.bindEvent\n         * @description 绑定鼠标移动和鼠标点击事件。\n         * @param {Object} e - 触发对象。\n         */\n\n    }, {\n        key: 'bindEvent',\n        value: function bindEvent() {\n            var map = this.map;\n\n            if (this.options.methods) {\n                if (this.options.methods.click) {\n                    map.on('click', this.clickEvent);\n                }\n                if (this.options.methods.mousemove) {\n                    map.on('mousemove', this.mousemoveEvent);\n                }\n            }\n            this.map.on('movestart', this._moveStartEvent);\n            this.map.on('moveend', this._moveEndEvent);\n            this.map.on('zoomstart', this._zoomStartEvent);\n        }\n        /**\n         * @function MapVRenderer.prototype.destroy\n         * @description 释放资源。\n         */\n\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            this.unbindEvent();\n            this.clearData();\n            this.animator && this.animator.stop();\n            this.animator = null;\n            this.canvasLayer = null;\n        }\n        /**\n         * @function MapVRenderer.prototype.unbindEvent\n         * @description 解绑鼠标移动和鼠标滑动触发的事件。\n         * @param {Object} e - 触发对象。\n         */\n\n    }, {\n        key: 'unbindEvent',\n        value: function unbindEvent() {\n            var map = this.map;\n\n            if (this.options.methods) {\n                if (this.options.methods.click) {\n                    map.off('click', this.clickEvent);\n                }\n                if (this.options.methods.mousemove) {\n                    map.off('mousemove', this.mousemoveEvent);\n                }\n            }\n            this.map.off('movestart', this._moveStartEvent);\n            this.map.off('moveend', this._moveEndEvent);\n            this.map.off('zoomstart', this._zoomStartEvent);\n        }\n\n        /**\n         * @function MapVRenderer.prototype.getContext\n         * @description 获取信息。\n         */\n\n    }, {\n        key: 'getContext',\n        value: function getContext() {\n            return this.canvasLayer.getCanvas().getContext(this.context);\n        }\n\n        /**\n         * @function MapVRenderer.prototype.addData\n         * @description 添加数据。\n         * @param {Object} data - 待添加的数据。\n         * @param  {Object} options - 待添加的数据信息。\n         */\n\n    }, {\n        key: 'addData',\n        value: function addData(data, options) {\n            var _data = data;\n            if (data && data.get) {\n                _data = data.get();\n            }\n            this.dataSet.add(_data);\n            this.update({\n                options: options\n            });\n        }\n\n        /**\n         * @function MapVRenderer.prototype.update\n         * @description 更新图层。\n         * @param {Object} opt - 待更新的数据。\n         * @param {Object} opt.data - mapv数据集。\n         * @param {Object} opt.options - mapv绘制参数。\n         */\n\n    }, {\n        key: 'update',\n        value: function update(opt) {\n            var update = opt || {};\n            var _data = update.data;\n            if (_data && _data.get) {\n                _data = _data.get();\n            }\n            if (_data != undefined) {\n                this.dataSet.set(_data);\n            }\n            get(MapVRenderer.prototype.__proto__ || Object.getPrototypeOf(MapVRenderer.prototype), 'update', this).call(this, {\n                options: update.options\n            });\n        }\n\n        /**\n         * @function MapVRenderer.prototype.getData\n         * @description 获取数据\n         */\n\n    }, {\n        key: 'getData',\n        value: function getData() {\n            return this.dataSet;\n        }\n\n        /**\n         * @function MapVRenderer.prototype.removeData\n         * @description 删除符合过滤条件的数据。\n         * @param {Function} filter - 过滤条件。条件参数为数据项，返回值为 true，表示删除该元素；否则表示不删除。\n         */\n\n    }, {\n        key: 'removeData',\n        value: function removeData(_filter) {\n            if (!this.dataSet) {\n                return;\n            }\n            var newData = this.dataSet.get({\n                filter: function filter(data) {\n                    return _filter != null && typeof _filter === \"function\" ? !_filter(data) : true;\n                }\n            });\n            this.dataSet.set(newData);\n            this.update({\n                options: null\n            });\n        }\n\n        /**\n         * @function MapVRenderer.prototype.clearData\n         * @description 清除数据\n         */\n\n    }, {\n        key: 'clearData',\n        value: function clearData() {\n            this.dataSet && this.dataSet.clear();\n            this.update({\n                options: null\n            });\n        }\n    }, {\n        key: '_canvasUpdate',\n        value: function _canvasUpdate(time) {\n            if (!this.canvasLayer) {\n                return;\n            }\n\n            var self = this;\n\n            var animationOptions = self.options.animation;\n\n            var context = this.getContext();\n            var map = this.map;\n            if (self.isEnabledTime()) {\n                if (time === undefined) {\n                    this.clear(context);\n                    return;\n                }\n                if (this.context === '2d') {\n                    context.save();\n                    context.globalCompositeOperation = 'destination-out';\n                    context.fillStyle = 'rgba(0, 0, 0, .1)';\n                    context.fillRect(0, 0, context.canvas.width, context.canvas.height);\n                    context.restore();\n                }\n            } else {\n                this.clear(context);\n            }\n\n            if (this.context === '2d') {\n                for (var key in self.options) {\n                    context[key] = self.options[key];\n                }\n            } else {\n                context.clear(context.COLOR_BUFFER_BIT);\n            }\n\n            if (self.options.minZoom && map.getZoom() < self.options.minZoom || self.options.maxZoom && map.getZoom() > self.options.maxZoom) {\n                return;\n            }\n\n            var bounds = map.getBounds();\n            //获取当前像素下的地理范围\n            var dw = bounds.getEast() - bounds.getWest();\n            var dh = bounds.getNorth() - bounds.getSouth();\n            var mapCanvas = map.getSize();\n\n            var resolutionX = dw / mapCanvas.x,\n                resolutionY = dh / mapCanvas.y;\n            //var centerPx = map.latLngToLayerPoint(map.getCenter());\n\n            //获取屏幕左上角的地理坐标坐标\n            //左上角屏幕坐标为0,0\n            var topLeft = this.canvasLayer.getTopLeft();\n\n            var topLeftPX = map.latLngToContainerPoint(topLeft);\n            // 获取精确的像素坐标. https://github.com/SuperMap/iClient-JavaScript/blob/eacc26952b8915bba0122db751d766056c5fb24d/src/leaflet/core/Base.js\n            // var topLeftPX = map.latLngToAccurateContainerPoint(topLeft);\n            // var lopLeft = map.containerPointToLatLng([0, 0]);\n            var dataGetOptions = {\n                transferCoordinate: function transferCoordinate(coordinate) {\n                    var offset;\n                    if (self.context === '2d') {\n                        offset = map.latLngToContainerPoint(L.latLng(coordinate[1], coordinate[0]));\n                        // offset = map.latLngToAccurateContainerPoint(L.latLng(coordinate[1], coordinate[0]));\n                    } else {\n                        offset = {\n                            'x': (coordinate[0] - topLeft.lng) / resolutionX,\n                            'y': (topLeft.lat - coordinate[1]) / resolutionY\n                        };\n                    }\n                    var pixel = {\n                        x: offset.x - topLeftPX.x,\n                        y: offset.y - topLeftPX.y\n                    };\n                    return [pixel.x, pixel.y];\n                }\n            };\n\n            if (time !== undefined) {\n                dataGetOptions.filter = function (item) {\n                    var trails = animationOptions.trails || 10;\n                    return time && item.time > time - trails && item.time < time;\n                };\n            }\n\n            var data = self.dataSet.get(dataGetOptions);\n\n            this.processData(data);\n\n            self.options._size = self.options.size;\n\n            var worldPoint = map.latLngToContainerPoint(L.latLng(0, 0));\n            var pixel = {\n                x: worldPoint.x - topLeftPX.x,\n                y: worldPoint.y - topLeftPX.y\n            };\n            this.drawContext(context, data, self.options, pixel);\n\n            self.options.updateCallback && self.options.updateCallback(time);\n        }\n    }, {\n        key: 'init',\n        value: function init(options) {\n\n            var self = this;\n\n            self.options = options;\n\n            this.initDataRange(options);\n\n            this.context = self.options.context || '2d';\n\n            if (self.options.zIndex) {\n                this.canvasLayer && this.canvasLayer.setZIndex(self.options.zIndex);\n            }\n\n            this.initAnimator();\n        }\n    }, {\n        key: 'addAnimatorEvent',\n        value: function addAnimatorEvent() {}\n\n        /**\n         * @function MapVRenderer.prototype.moveStartEvent\n         * @description 开始移动事件。\n         */\n\n    }, {\n        key: 'moveStartEvent',\n        value: function moveStartEvent() {\n            var animationOptions = this.options.animation;\n            if (this.isEnabledTime() && this.animator) {\n                this.steps.step = animationOptions.stepsRange.start;\n                this._hide();\n            }\n        }\n\n        /**\n         * @function MapVRenderer.prototype.moveEndEvent\n         * @description 结束移动事件。\n         */\n\n    }, {\n        key: 'moveEndEvent',\n        value: function moveEndEvent() {\n            this.canvasLayer.draw();\n            this._show();\n        }\n\n        /**\n         * @function MapVRenderer.prototype.zoomStartEvent\n         * @description 隐藏渲染样式。\n         */\n\n    }, {\n        key: 'zoomStartEvent',\n        value: function zoomStartEvent() {\n            this._hide();\n        }\n\n        /**\n         * @function MapVRenderer.prototype.clear\n         * @description 清除信息。\n         * @param {string} context - 指定要清除的信息。\n         */\n\n    }, {\n        key: 'clear',\n        value: function clear(context) {\n            context && context.clearRect && context.clearRect(0, 0, context.canvas.width, context.canvas.height);\n        }\n    }, {\n        key: '_hide',\n        value: function _hide() {\n            this.canvasLayer.canvas.style.display = 'none';\n        }\n    }, {\n        key: '_show',\n        value: function _show() {\n            this.canvasLayer.canvas.style.display = 'block';\n        }\n\n        /**\n         * @function MapVRenderer.prototype.draw\n         * @description 绘制渲染\n         */\n\n    }, {\n        key: 'draw',\n        value: function draw() {\n            this.canvasLayer.draw();\n        }\n    }]);\n    return MapVRenderer;\n}(BaseLayer);\n\nvar mapVLayer;\nif (typeof L !== 'undefined') {\n    /**\n     * @class mapVLayer\n     * @classdesc MapV 图层。\n     * @category Visualization MapV\n     * @extends {L.Layer}\n     * @param {mapv.DataSet} dataSet - MapV 图层数据集。\n     * @param {Object} mapVOptions - MapV 图层参数。\n     * @param {Object} options - 参数。\n     * @param {string} [options.attributionPrefix] - 版权信息前缀。\n     * @param {string} [options.attribution='© 2018 百度 MapV'] - 版权信息。\n     * @fires mapVLayer#loaded\n     */\n    var MapVLayer = L.Layer.extend({\n\n        options: {\n            attributionPrefix: null,\n            attribution: ''\n        },\n\n        initialize: function initialize(dataSet, mapVOptions, options) {\n            options = options || {};\n            this.dataSet = dataSet || {};\n            this.mapVOptions = mapVOptions || {};\n            this.render = this.render.bind(this);\n            L.Util.setOptions(this, options);\n            if (this.options.attributionPrefix) {\n                this.options.attribution = this.options.attributionPrefix + this.options.attribution;\n            }\n\n            this.canvas = this._createCanvas();\n            L.stamp(this);\n        },\n\n        /**\n         * @private\n         * @function mapVLayer.prototype.onAdd\n         * @description 添加地图图层。\n         * @param {L.Map} map - 要添加的地图。\n         */\n        onAdd: function onAdd(map) {\n            this._map = map;\n            var overlayPane = this.getPane();\n            var container = this.container = L.DomUtil.create(\"div\", \"leaflet-layer leaflet-zoom-animated\", overlayPane);\n            container.appendChild(this.canvas);\n            var size = map.getSize();\n            container.style.width = size.x + \"px\";\n            container.style.height = size.y + \"px\";\n            this.renderer = new MapVRenderer(map, this, this.dataSet, this.mapVOptions);\n            this.draw();\n            /**\n             * @event mapVLayer#loaded\n             * @description 图层添加完成之后触发。\n             */\n            this.fire(\"loaded\");\n        },\n\n        // _hide: function () {\n        //     this.canvas.style.display = 'none';\n        // },\n\n        // _show: function () {\n        //     this.canvas.style.display = 'block';\n        // },\n\n        /**\n         * @private\n         * @function mapVLayer.prototype.onRemove\n         * @description 删除地图图层。\n         */\n        onRemove: function onRemove() {\n            L.DomUtil.remove(this.container);\n            this.renderer.destroy();\n        },\n\n        /**\n         * @function mapVLayer.prototype.addData\n         * @description 追加数据。\n         * @param {Object} data - 要追加的数据。\n         * @param {Object} options - 要追加的值。\n         */\n        addData: function addData(data, options) {\n            this.renderer.addData(data, options);\n        },\n\n        /**\n         * @function mapVLayer.prototype.update\n         * @description 更新图层。\n         * @param {Object} opt - 待更新的数据。\n         * @param {Object} data - mapv 数据集。\n         * @param {Object} options - mapv 绘制参数。\n         */\n        update: function update(opt) {\n            this.renderer.update(opt);\n        },\n\n        /**\n         * @function mapVLayer.prototype.getData\n         * @description 获取数据。\n         * @returns {mapv.DataSet} mapv 数据集。\n         */\n        getData: function getData() {\n            if (this.renderer) {\n                this.dataSet = this.renderer.getData();\n            }\n            return this.dataSet;\n        },\n\n        /**\n         * @function mapVLayer.prototype.removeData\n         * @description 删除符合过滤条件的数据。\n         * @param {Function} filter - 过滤条件。条件参数为数据项，返回值为 true，表示删除该元素；否则表示不删除。\n         * @example\n         *  filter=function(data){\n         *    if(data.id==\"1\"){\n         *      return true\n         *    }\n         *    return false;\n         *  }\n         */\n        removeData: function removeData(filter) {\n            this.renderer && this.renderer.removeData(filter);\n        },\n\n        /**\n         * @function mapVLayer.prototype.clearData\n         * @description 清除数据。\n         */\n        clearData: function clearData() {\n            this.renderer.clearData();\n        },\n\n        /**\n         * @function mapVLayer.prototype.draw\n         * @description 绘制图层。\n         */\n        draw: function draw() {\n            return this._reset();\n        },\n\n        /**\n         * @function mapVLayer.prototype.setZIndex\n         * @description 设置 canvas 层级。\n         * @param {number} zIndex - canvas 层级。\n         */\n        setZIndex: function setZIndex(zIndex) {\n            this.canvas.style.zIndex = zIndex;\n        },\n\n        /**\n         * @function mapVLayer.prototype.render\n         * @description 渲染。\n         */\n        render: function render() {\n            this.renderer._canvasUpdate();\n        },\n\n        /**\n         * @function mapVLayer.prototype.getCanvas\n         * @description 获取 canvas。\n         * @returns {HTMLElement} 返回 mapV 图层包含的 canvas 对象。\n         */\n        getCanvas: function getCanvas() {\n            return this.canvas;\n        },\n\n        /**\n         * @function mapVLayer.prototype.getContainer\n         * @description 获取容器。\n         * @returns {HTMLElement} 返回包含 mapV 图层的 dom 对象。\n         */\n        getContainer: function getContainer() {\n            return this.container;\n        },\n\n        /**\n         * @function mapVLayer.prototype.getTopLeft\n         * @description 获取左上角坐标。\n         * @returns {L.Bounds} 返回左上角坐标。\n         */\n        getTopLeft: function getTopLeft() {\n            var map = this._map;\n            var topLeft;\n            if (map) {\n                var bounds = map.getBounds();\n                topLeft = bounds.getNorthWest();\n            }\n            return topLeft;\n        },\n\n        _createCanvas: function _createCanvas() {\n            var canvas = document.createElement('canvas');\n            canvas.style.position = 'absolute';\n            canvas.style.top = 0 + \"px\";\n            canvas.style.left = 0 + \"px\";\n            canvas.style.pointerEvents = \"none\";\n            canvas.style.zIndex = this.options.zIndex || 600;\n            var global$2 = typeof window === 'undefined' ? {} : window;\n            var devicePixelRatio = this.devicePixelRatio = global$2.devicePixelRatio;\n            if (!this.mapVOptions.context || this.mapVOptions.context === '2d') {\n                canvas.getContext('2d').scale(devicePixelRatio, devicePixelRatio);\n            }\n            return canvas;\n        },\n\n        _resize: function _resize() {\n            var canvas = this.canvas;\n            if (!canvas) {\n                return;\n            }\n\n            var map = this._map;\n            var size = map.getSize();\n            canvas.width = size.x;\n            canvas.height = size.y;\n            canvas.style.width = size.x + 'px';\n            canvas.style.height = size.y + 'px';\n            var bounds = map.getBounds();\n            var topLeft = map.latLngToLayerPoint(bounds.getNorthWest());\n            L.DomUtil.setPosition(canvas, topLeft);\n        },\n\n        _reset: function _reset() {\n            this._resize();\n            this._render();\n        },\n        redraw: function redraw() {\n            this._resize();\n            this._render();\n        },\n        _render: function _render() {\n            this.render();\n        }\n\n    });\n\n    mapVLayer = function mapVLayer(dataSet, mapVOptions, options) {\n        return new MapVLayer(dataSet, mapVOptions, options);\n    };\n}\nvar mapVLayer$1 = mapVLayer;\n\nvar MapVRenderer$1 = function (_BaseLayer) {\n    inherits(MapVRenderer, _BaseLayer);\n\n    /**\n     * Creates an instance of MapVRenderer.\n     * @param {*} viewer cesium viewer\n     * @param {*} dataset mapv dataset\n     * @param {*} option mapvOptions\n     * @param {*} mapVLayer\n     * @memberof MapVRenderer\n     */\n    function MapVRenderer(viewer, dataset, option, mapVLayer) {\n        classCallCheck(this, MapVRenderer);\n\n        var _this = possibleConstructorReturn(this, (MapVRenderer.__proto__ || Object.getPrototypeOf(MapVRenderer)).call(this, viewer, dataset, option));\n\n        if (!BaseLayer) {\n            return possibleConstructorReturn(_this);\n        }\n        _this.map = viewer, _this.scene = viewer.scene, _this.dataSet = dataset;\n        option = option || {}, _this.init(option), _this.argCheck(option), _this.initDevicePixelRatio(), _this.canvasLayer = mapVLayer, _this.stopAniamation = !1, _this.animation = option.animation, _this.clickEvent = _this.clickEvent.bind(_this), _this.mousemoveEvent = _this.mousemoveEvent.bind(_this), _this.bindEvent();\n        return _this;\n    }\n\n    createClass(MapVRenderer, [{\n        key: \"initDevicePixelRatio\",\n        value: function initDevicePixelRatio() {\n            this.devicePixelRatio = window.devicePixelRatio || 1;\n        }\n    }, {\n        key: \"clickEvent\",\n        value: function clickEvent(t) {\n            var e = t.point;\n            get(MapVRenderer.prototype.__proto__ || Object.getPrototypeOf(MapVRenderer.prototype), \"clickEvent\", this).call(this, e, t);\n        }\n    }, {\n        key: \"mousemoveEvent\",\n        value: function mousemoveEvent(t) {\n            var e = t.point;\n            get(MapVRenderer.prototype.__proto__ || Object.getPrototypeOf(MapVRenderer.prototype), \"mousemoveEvent\", this).call(this, e, t);\n        }\n    }, {\n        key: \"addAnimatorEvent\",\n        value: function addAnimatorEvent() {}\n    }, {\n        key: \"animatorMovestartEvent\",\n        value: function animatorMovestartEvent() {\n            var t = this.options.animation;\n            this.isEnabledTime() && this.animator && (this.steps.step = t.stepsRange.start);\n        }\n    }, {\n        key: \"animatorMoveendEvent\",\n        value: function animatorMoveendEvent() {\n            this.isEnabledTime() && this.animator;\n        }\n    }, {\n        key: \"bindEvent\",\n        value: function bindEvent() {\n            this.map;\n            this.options.methods && (this.options.methods.click, this.options.methods.mousemove);\n        }\n    }, {\n        key: \"unbindEvent\",\n        value: function unbindEvent() {\n            var t = this.map;\n            this.options.methods && (this.options.methods.click && t.off(\"click\", this.clickEvent), this.options.methods.mousemove && t.off(\"mousemove\", this.mousemoveEvent));\n        }\n    }, {\n        key: \"getContext\",\n        value: function getContext() {\n            return this.canvasLayer.canvas.getContext(this.context);\n        }\n    }, {\n        key: \"init\",\n        value: function init(t) {\n            this.options = t, this.initDataRange(t), this.context = this.options.context || \"2d\", this.options.zIndex && this.canvasLayer && this.canvasLayer.setZIndex(this.options.zIndex), this.initAnimator();\n        }\n    }, {\n        key: \"_canvasUpdate\",\n        value: function _canvasUpdate(t) {\n            this.map;\n            var e = this.scene;\n            if (this.canvasLayer && !this.stopAniamation) {\n                var i = this.options.animation,\n                    n = this.getContext();\n                if (this.isEnabledTime()) {\n                    if (void 0 === t) return void this.clear(n);\n                    \"2d\" === this.context && (n.save(), n.globalCompositeOperation = \"destination-out\", n.fillStyle = \"rgba(0, 0, 0, .1)\", n.fillRect(0, 0, n.canvas.width, n.canvas.height), n.restore());\n                } else this.clear(n);\n                if (\"2d\" === this.context) for (var o in this.options) {\n                    n[o] = this.options[o];\n                } else n.clear(n.COLOR_BUFFER_BIT);\n                var a = {\n                    transferCoordinate: function transferCoordinate(t) {\n                        var i = Cesium.Cartesian3.fromDegrees(t[0], t[1]),\n                            n = Cesium.SceneTransforms.wgs84ToWindowCoordinates(e, i);\n                        return void 0 == n ? [-1, -1] : [n.x, n.y];\n                    }\n                };\n                void 0 !== t && (a.filter = function (e) {\n                    var n = i.trails || 10;\n                    return !!(t && e.time > t - n && e.time < t);\n                });\n                var c = this.dataSet.get(a);\n                this.processData(c), \"m\" == this.options.unit && this.options.size, this.options._size = this.options.size;\n                var h = Cesium.SceneTransforms.wgs84ToWindowCoordinates(e, Cesium.Cartesian3.fromDegrees(0, 0));\n                this.drawContext(n, new DataSet(c), this.options, h), this.options.updateCallback && this.options.updateCallback(t);\n            }\n        }\n    }, {\n        key: \"updateData\",\n        value: function updateData(t, e) {\n            var i = t;\n            i && i.get && (i = i.get()), void 0 != i && this.dataSet.set(i), get(MapVRenderer.prototype.__proto__ || Object.getPrototypeOf(MapVRenderer.prototype), \"update\", this).call(this, {\n                options: e\n            });\n        }\n    }, {\n        key: \"addData\",\n        value: function addData(t, e) {\n            var i = t;\n            t && t.get && (i = t.get()), this.dataSet.add(i), this.update({\n                options: e\n            });\n        }\n    }, {\n        key: \"getData\",\n        value: function getData() {\n            return this.dataSet;\n        }\n    }, {\n        key: \"removeData\",\n        value: function removeData(t) {\n            if (this.dataSet) {\n                var e = this.dataSet.get({\n                    filter: function filter(e) {\n                        return null == t || \"function\" != typeof t || !t(e);\n                    }\n                });\n                this.dataSet.set(e), this.update({\n                    options: null\n                });\n            }\n        }\n    }, {\n        key: \"clearData\",\n        value: function clearData() {\n            this.dataSet && this.dataSet.clear(), this.update({\n                options: null\n            });\n        }\n    }, {\n        key: \"draw\",\n        value: function draw() {\n            this.canvasLayer.draw();\n        }\n    }, {\n        key: \"clear\",\n        value: function clear(t) {\n            t && t.clearRect && t.clearRect(0, 0, t.canvas.width, t.canvas.height);\n        }\n    }]);\n    return MapVRenderer;\n}(BaseLayer);\n\nvar mapVLayer$2;\nif (typeof Cesium !== 'undefined') {\n    var defIndex = 0;\n    var r = Cesium;\n\n    var MapVLayer$1 = function () {\n        /**\n         *Creates an instance of MapVLayer.\n         * @param {*} viewer\n         * @param {*} dataset\n         * @param {*} options\n         * @param {*} container default viewer.container\n         * @memberof MapVLayer\n         */\n        function MapVLayer(viewer, dataset, options, container) {\n            classCallCheck(this, MapVLayer);\n\n            this.map = viewer, this.scene = viewer.scene, this.mapvBaseLayer = new MapVRenderer$1(viewer, dataset, options, this), this.mapVOptions = options, this.initDevicePixelRatio(), this.canvas = this._createCanvas(), this.render = this.render.bind(this);\n            if (container) {\n                this.container = container;\n            } else {\n                var inner = viewer.container.querySelector('.cesium-viewer-cesiumWidgetContainer');\n                this.container = inner ? inner : viewer.container;\n            }\n            this.addInnerContainer();\n\n            // void 0 != container ? (this.container = container,\n            //     container.appendChild(this.canvas)) : (this.container = viewer.container,\n            //         this.addInnerContainer()),\n            this.bindEvent();\n            this._reset();\n        }\n\n        createClass(MapVLayer, [{\n            key: 'initDevicePixelRatio',\n            value: function initDevicePixelRatio() {\n                this.devicePixelRatio = window.devicePixelRatio || 1;\n            }\n        }, {\n            key: 'addInnerContainer',\n            value: function addInnerContainer() {\n                this.container.appendChild(this.canvas);\n            }\n        }, {\n            key: 'bindEvent',\n            value: function bindEvent() {\n                var that = this;\n\n                this.innerMoveStart = this.moveStartEvent.bind(this);\n                this.innerMoveEnd = this.moveEndEvent.bind(this);\n                this.scene.camera.moveStart.addEventListener(this.innerMoveStart, this);\n                this.scene.camera.moveEnd.addEventListener(this.innerMoveEnd, this);\n\n                var t = new Cesium.ScreenSpaceEventHandler(this.scene.canvas);\n\n                t.setInputAction(function (t) {\n                    that.innerMoveEnd();\n                }, Cesium.ScreenSpaceEventType.LEFT_UP);\n                t.setInputAction(function (t) {\n                    that.innerMoveEnd();\n                }, Cesium.ScreenSpaceEventType.MIDDLE_UP);\n                this.handler = t;\n            }\n        }, {\n            key: 'unbindEvent',\n            value: function unbindEvent() {\n                this.scene.camera.moveStart.removeEventListener(this.innerMoveStart, this);\n                this.scene.camera.moveEnd.removeEventListener(this.innerMoveEnd, this);\n                this.scene.postRender.removeEventListener(this._reset, this);\n                this.handler && (this.handler.destroy(), this.handler = null);\n            }\n        }, {\n            key: 'moveStartEvent',\n            value: function moveStartEvent() {\n                if (this.mapvBaseLayer) {\n                    this.mapvBaseLayer.animatorMovestartEvent();\n                    this.scene.postRender.addEventListener(this._reset, this);\n                }\n            }\n        }, {\n            key: 'moveEndEvent',\n            value: function moveEndEvent() {\n                if (this.mapvBaseLayer) {\n                    this.scene.postRender.removeEventListener(this._reset, this), this.mapvBaseLayer.animatorMoveendEvent();\n                    this._reset();\n                }\n            }\n        }, {\n            key: 'zoomStartEvent',\n            value: function zoomStartEvent() {\n                this._unvisiable();\n            }\n        }, {\n            key: 'zoomEndEvent',\n            value: function zoomEndEvent() {\n                this._unvisiable();\n            }\n        }, {\n            key: 'addData',\n            value: function addData(t, e) {\n                void 0 != this.mapvBaseLayer && this.mapvBaseLayer.addData(t, e);\n            }\n        }, {\n            key: 'updateData',\n            value: function updateData(t, e) {\n                void 0 != this.mapvBaseLayer && this.mapvBaseLayer.updateData(t, e);\n            }\n        }, {\n            key: 'getData',\n            value: function getData() {\n                return this.mapvBaseLayer && (this.dataSet = this.mapvBaseLayer.getData()), this.dataSet;\n            }\n        }, {\n            key: 'removeData',\n            value: function removeData(t) {\n                void 0 != this.mapvBaseLayer && this.mapvBaseLayer && this.mapvBaseLayer.removeData(t);\n            }\n        }, {\n            key: 'removeAllData',\n            value: function removeAllData() {\n                void 0 != this.mapvBaseLayer && this.mapvBaseLayer.clearData();\n            }\n        }, {\n            key: '_visiable',\n            value: function _visiable() {\n                return this.canvas.style.display = \"block\", this;\n            }\n        }, {\n            key: '_unvisiable',\n            value: function _unvisiable() {\n                return this.canvas.style.display = \"none\", this;\n            }\n        }, {\n            key: '_createCanvas',\n            value: function _createCanvas() {\n                var t = document.createElement(\"canvas\");\n                t.id = this.mapVOptions.layerid || \"mapv\" + defIndex++, t.style.position = \"absolute\", t.style.top = \"0px\", t.style.left = \"0px\", t.style.pointerEvents = \"none\", t.style.zIndex = this.mapVOptions.zIndex || 0, t.width = parseInt(this.map.canvas.width), t.height = parseInt(this.map.canvas.height), t.style.width = this.map.canvas.style.width, t.style.height = this.map.canvas.style.height;\n                var e = this.devicePixelRatio;\n                return \"2d\" == this.mapVOptions.context && t.getContext(this.mapVOptions.context).scale(e, e), t;\n            }\n        }, {\n            key: '_reset',\n            value: function _reset() {\n                this.resizeCanvas();\n                this.fixPosition();\n                this.onResize();\n                this.render();\n            }\n        }, {\n            key: 'draw',\n            value: function draw() {\n                this._reset();\n            }\n        }, {\n            key: 'show',\n            value: function show() {\n                this._visiable();\n            }\n        }, {\n            key: 'hide',\n            value: function hide() {\n                this._unvisiable();\n            }\n        }, {\n            key: 'destroy',\n            value: function destroy() {\n                this.remove();\n            }\n        }, {\n            key: 'remove',\n            value: function remove() {\n                void 0 != this.mapvBaseLayer && (this.removeAllData(), this.mapvBaseLayer.clear(this.mapvBaseLayer.getContext()), this.mapvBaseLayer = void 0, this.canvas.parentElement.removeChild(this.canvas));\n            }\n        }, {\n            key: 'update',\n            value: function update(t) {\n                void 0 != t && this.updateData(t.data, t.options);\n            }\n        }, {\n            key: 'resizeCanvas',\n            value: function resizeCanvas() {\n                if (void 0 != this.canvas && null != this.canvas) {\n                    var t = this.canvas;\n                    t.style.position = \"absolute\", t.style.top = \"0px\", t.style.left = \"0px\", t.width = parseInt(this.map.canvas.width), t.height = parseInt(this.map.canvas.height), t.style.width = this.map.canvas.style.width, t.style.height = this.map.canvas.style.height;\n                }\n            }\n        }, {\n            key: 'fixPosition',\n            value: function fixPosition() {}\n        }, {\n            key: 'onResize',\n            value: function onResize() {}\n        }, {\n            key: 'render',\n            value: function render() {\n                void 0 != this.mapvBaseLayer && this.mapvBaseLayer._canvasUpdate();\n            }\n        }]);\n        return MapVLayer;\n    }();\n\n    mapVLayer$2 = function mapVLayer(viewer, dataSet, mapVOptions, container) {\n        return new MapVLayer$1(viewer, dataSet, mapVOptions, container);\n    };\n}\n\nvar mapVLayer$3 = mapVLayer$2;\n\n/**\n * @author kyle / http://nikai.us/\n */\n\nvar geojson = {\n    getDataSet: function getDataSet(geoJson) {\n\n        var data = [];\n        var features = geoJson.features;\n        if (features) {\n            for (var i = 0; i < features.length; i++) {\n                var feature = features[i];\n                var geometry = feature.geometry;\n                var properties = feature.properties;\n                var item = {};\n                for (var key in properties) {\n                    item[key] = properties[key];\n                }\n                item.geometry = geometry;\n                data.push(item);\n            }\n        }\n        return new DataSet(data);\n    }\n};\n\n/**\n * @author kyle / http://nikai.us/\n */\n\nvar csv = {\n    CSVToArray: function CSVToArray(strData, strDelimiter) {\n        // Check to see if the delimiter is defined. If not,\n        // then default to comma.\n        strDelimiter = strDelimiter || \",\";\n\n        // Create a regular expression to parse the CSV values.\n        var objPattern = new RegExp(\n        // Delimiters.\n        \"(\\\\\" + strDelimiter + \"|\\\\r?\\\\n|\\\\r|^)\" +\n\n        // Quoted fields.\n        \"(?:\\\"([^\\\"]*(?:\\\"\\\"[^\\\"]*)*)\\\"|\" +\n\n        // Standard fields.\n        \"([^\\\"\\\\\" + strDelimiter + \"\\\\r\\\\n]*))\", \"gi\");\n\n        // Create an array to hold our data. Give the array\n        // a default empty first row.\n        var arrData = [[]];\n\n        // Create an array to hold our individual pattern\n        // matching groups.\n        var arrMatches = null;\n\n        // Keep looping over the regular expression matches\n        // until we can no longer find a match.\n        while (arrMatches = objPattern.exec(strData)) {\n\n            // Get the delimiter that was found.\n            var strMatchedDelimiter = arrMatches[1];\n\n            // Check to see if the given delimiter has a length\n            // (is not the start of string) and if it matches\n            // field delimiter. If id does not, then we know\n            // that this delimiter is a row delimiter.\n            if (strMatchedDelimiter.length && strMatchedDelimiter !== strDelimiter) {\n\n                // Since we have reached a new row of data,\n                // add an empty row to our data array.\n                arrData.push([]);\n            }\n\n            var strMatchedValue;\n\n            // Now that we have our delimiter out of the way,\n            // let's check to see which kind of value we\n            // captured (quoted or unquoted).\n            if (arrMatches[2]) {\n\n                // We found a quoted value. When we capture\n                // this value, unescape any double quotes.\n                strMatchedValue = arrMatches[2].replace(new RegExp(\"\\\"\\\"\", \"g\"), \"\\\"\");\n            } else {\n\n                // We found a non-quoted value.\n                strMatchedValue = arrMatches[3];\n            }\n\n            // Now that we have our value string, let's add\n            // it to the data array.\n            arrData[arrData.length - 1].push(strMatchedValue);\n        }\n\n        // Return the parsed data.\n        return arrData;\n    },\n\n    getDataSet: function getDataSet(csvStr, split) {\n\n        var arr = this.CSVToArray(csvStr, split || ',');\n\n        var data = [];\n\n        var header = arr[0];\n\n        for (var i = 1; i < arr.length - 1; i++) {\n            var line = arr[i];\n            var item = {};\n            for (var j = 0; j < line.length; j++) {\n                var value = line[j];\n                if (header[j] == 'geometry') {\n                    value = JSON.parse(value);\n                }\n                item[header[j]] = value;\n            }\n            data.push(item);\n        }\n\n        return new DataSet(data);\n    }\n};\n\nexports.version = version;\nexports.canvasClear = clear;\nexports.canvasResolutionScale = resolutionScale$1;\nexports.canvasDrawSimple = drawSimple;\nexports.canvasDrawHeatmap = drawHeatmap;\nexports.canvasDrawGrid = drawGrid;\nexports.canvasDrawHoneycomb = drawHoneycomb;\nexports.webglDrawSimple = webglDrawSimple;\nexports.webglDrawPoint = point;\nexports.webglDrawLine = line;\nexports.webglDrawPolygon = polygon;\nexports.utilCityCenter = cityCenter;\nexports.utilCurve = curve;\nexports.utilForceEdgeBundling = ForceEdgeBundling;\nexports.utilDataRangeIntensity = Intensity;\nexports.utilDataRangeCategory = Category;\nexports.utilDataRangeChoropleth = Choropleth;\nexports.Map = MapHelper;\nexports.baiduMapCanvasLayer = CanvasLayer;\nexports.baiduMapAnimationLayer = AnimationLayer;\nexports.baiduMapLayer = Layer;\nexports.googleMapCanvasLayer = CanvasLayer$2;\nexports.googleMapLayer = Layer$2;\nexports.MaptalksLayer = Layer$5;\nexports.AMapLayer = Layer$6;\nexports.OpenlayersLayer = Layer$8;\nexports.leafletMapLayer = mapVLayer$1;\nexports.cesiumMapLayer = mapVLayer$3;\nexports.DataSet = DataSet;\nexports.geojson = geojson;\nexports.csv = csv;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/mapv/build/mapv.js?");

/***/ }),

/***/ "./node_modules/mapvgl/dist/mapvgl.min.js":
/*!************************************************!*\
  !*** ./node_modules/mapvgl/dist/mapvgl.min.js ***!
  \************************************************/
/*! unknown exports (runtime-defined) */
/*! runtime requirements: __webpack_exports__, top-level-this-exports, __webpack_require__.g, __webpack_require__.* */
/*! CommonJS bailout: this is used directly at 1:171-175 */
/*! CommonJS bailout: exports is used directly at 1:72-79 */
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("(function(y,P){ true?P(exports):0})(this,function(y){function P(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,\"default\")?e[\"default\"]:e}function O(e,c){return c={exports:{}},e(c,c.exports),c.exports}function lg(e,c){return function(a){return c(e(a))}}function mg(e){var c=function(a){if(void 0===a||null===a)return a;1<arguments.length&&(a=Array.prototype.slice.call(arguments));\nreturn e(a)};\"conversion\"in e&&(c.conversion=e.conversion);return c}function ng(e){var c=function(a){if(void 0===a||null===a)return a;1<arguments.length&&(a=Array.prototype.slice.call(arguments));var b=e(a);if(\"object\"===(\"undefined\"===typeof b?\"undefined\":qb(b)))for(var d=b.length,c=0;c<d;c++)b[c]=Math.round(b[c]);return b};\"conversion\"in e&&(c.conversion=e.conversion);return c}function fa(e,c){if(!(this instanceof fa))return new fa(e,c);c&&c in Yd&&(c=null);if(c&&!(c in wa))throw Error(\"Unknown model: \"+\nc);if(\"undefined\"===typeof e)this.model=\"rgb\",this.color=[0,0,0],this.valpha=1;else if(e instanceof fa)this.model=e.model,this.color=e.color.slice(),this.valpha=e.valpha;else if(\"string\"===typeof e){c=Hb.get(e);if(null===c)throw Error(\"Unable to parse color from string: \"+e);this.model=c.model;var a=wa[this.model].channels;this.color=c.value.slice(0,a);this.valpha=\"number\"===typeof c.value[a]?c.value[a]:1}else if(e.length)this.model=c||\"rgb\",a=wa[this.model].channels,c=Pc.call(e,0,a),this.color=Qc(c,\na),this.valpha=\"number\"===typeof e[a]?e[a]:1;else if(\"number\"===typeof e)e&=16777215,this.model=\"rgb\",this.color=[e>>16&255,e>>8&255,e&255],this.valpha=1;else{this.valpha=1;c=Ea(e);\"alpha\"in e&&(c.splice(c.indexOf(\"alpha\"),1),this.valpha=\"number\"===typeof e.alpha?e.alpha:0);c=c.sort().join(\"\");if(!(c in Rc))throw Error(\"Unable to parse color from object: \"+og(e));this.model=Rc[c];a=wa[this.model].labels;var b=[];for(c=0;c<a.length;c++)b.push(e[a[c]]);this.color=Qc(b)}if(jc[this.model])for(a=wa[this.model].channels,\nc=0;c<a;c++)(e=jc[this.model][c])&&(this.color[c]=e(this.color[c]));this.valpha=Math.max(0,Math.min(1,this.valpha));Zd&&Zd(this)}function pg(e){return function(c){return Number(c.toFixed(e))}}function Z(e,c,a){e=Array.isArray(e)?e:[e];e.forEach(function(b){(jc[b]||(jc[b]=[]))[c]=a});e=e[0];return function(b){if(arguments.length){a&&(b=a(b));var d=this[e]();d.color[c]=b;return d}d=this[e]().color[c];a&&(d=a(d));return d}}function ha(e){return function(c){return Math.max(0,Math.min(e,c))}}function Qc(e,\nc){for(var a=0;a<c;a++)\"number\"!==typeof e[a]&&(e[a]=0);return e}function la(e){return e*Math.PI/180}function Sc(e){return e/Math.PI*180}function Ib(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function Tc(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function Uc(e,c){return 1E-8>Math.abs(e-c)}function ra(){}function Vc(e,c){for(var a in c)e[a]=c[a]}function xa(e,c){this.lng=e;this.lat=c}function $d(e,c){this.x=e;this.y=c}function Wc(e,c){var a=document.createElement(\"canvas\");e&&\n(a.width=e);c&&(a.height=c);return a}function na(e){e=e||{};this.gradient=e.gradient||{\"0.25\":\"rgba(0, 0, 255, 1)\",\"0.55\":\"rgba(0, 255, 0, 1)\",\"0.85\":\"rgba(255, 255, 0, 1)\",1:\"rgba(255, 0, 0, 1)\"};this.maxSize=void 0===e.maxSize?35:e.maxSize;this.minSize=e.minSize||0;this.max=e.max||100;this.min=e.min||0;this.initPalette()}function Qa(e){this.options=e||{};this._initialize()}function Xc(e,c,a,b,d){var f=1-e,g=1-e;return f*f*f*c+3*g*g*e*a+3*(1-e)*e*e*b+e*e*e*d}function Ya(e){this.WORLD_SIZE_MC_HALF=\n2.0037726372307256E7;this.WORLD_SIZE_MC=2*this.WORLD_SIZE_MC_HALF;this.options=e||{};this._initialize()}function ae(e,c){return e&&c?Math.round(Math.sqrt(Math.pow(e.lng-c.lng,2)+Math.pow(e.lat-c.lat,2))):0}function be(e){for(var c=[\"webgl2\",\"experimental-webgl2\",\"webgl\",\"experimental-webgl\"],a,b=0;b<c.length;b++)try{if(a=e.getContext(c[b],{premultipliedAlpha:!1}))break}catch(d){}return a}function rb(e,c,a){a=T({TEXTURE_MAG_FILTER:\"LINEAR\",TEXTURE_MIN_FILTER:\"LINEAR\",TEXTURE_WRAP_S:\"REPEAT\",TEXTURE_WRAP_T:\"REPEAT\"},\na);var b=e.createTexture();e.bindTexture(e.TEXTURE_2D,b);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,c);for(var d in a)e.texParameteri(e.TEXTURE_2D,e[d],e[a[d]]);e.bindTexture(e.TEXTURE_2D,null);return b}function Ra(e,c,a,b){if(\"object\"===(\"undefined\"===typeof c?\"undefined\":qb(c)))c=rb(e,c,b),a(c,null);else{var d=new Image;d.crossOrigin=\"anonymous\";d.onload=function(){var c=Tc(d.width),g=Tc(d.height),k=document.createElement(\"canvas\");k.width=\nc;k.height=g;k.getContext(\"2d\").drawImage(d,0,0,c,g);d=k;c=rb(e,d,b);a(c,d)};d.src=c}}function Jb(e,c,a){a=a||2;var b=c&&c.length,d=b?c[0]*a:e.length,f=ce(e,0,d,a,!0),g=[];if(!f||f.next===f.prev)return g;var k;if(b){var h=a;b=[];var m;var n=0;for(m=c.length;n<m;n++){var p=c[n]*h;var l=n<m-1?c[n+1]*h:e.length;p=ce(e,p,l,h,!1);p===p.next&&(p.steiner=!0);b.push(qg(p))}b.sort(rg);for(n=0;n<b.length;n++){c=b[n];h=f;if(h=sg(c,h))c=de(h,c),Kb(c,c.next);f=Kb(f,f.next)}}if(e.length>80*a){var q=k=e[0];var r=\nb=e[1];for(h=a;h<d;h+=a)n=e[h],c=e[h+1],n<q&&(q=n),c<r&&(r=c),n>k&&(k=n),c>b&&(b=c);k=Math.max(k-q,b-r);k=0!==k?1/k:0}Lb(f,g,a,q,r,k);return g}function ce(e,c,a,b,d){if(d===0<Yc(e,c,a,b))for(d=c;d<a;d+=b)var f=ee(d,e[d],e[d+1],f);else for(d=a-b;d>=c;d-=b)f=ee(d,e[d],e[d+1],f);f&&fb(f,f.next)&&(Mb(f),f=f.next);return f}function Kb(e,c){if(!e)return e;c||(c=e);do{var a=!1;if(e.steiner||!fb(e,e.next)&&0!==ma(e.prev,e,e.next))e=e.next;else{Mb(e);e=c=e.prev;if(e===e.next)break;a=!0}}while(a||e!==c);return c}\nfunction Lb(e,c,a,b,d,f,g){if(e){if(!g&&f){var k=e,h=k;do null===h.z&&(h.z=Zc(h.x,h.y,b,d,f)),h.prevZ=h.prev,h=h.nextZ=h.next;while(h!==k);h.prevZ.nextZ=null;h.prevZ=null;k=h;var m,n,p,l,q=1;do{h=k;var r=k=null;for(n=0;h;){n++;var u=h;for(m=p=0;m<q&&(p++,u=u.nextZ,u);m++);for(l=q;0<p||0<l&&u;)0!==p&&(0===l||!u||h.z<=u.z)?(m=h,h=h.nextZ,p--):(m=u,u=u.nextZ,l--),r?r.nextZ=m:k=m,m.prevZ=r,r=m;h=u}r.nextZ=null;q*=2}while(1<n)}for(k=e;e.prev!==e.next;){h=e.prev;u=e.next;if(f)r=tg(e,b,d,f);else a:if(r=\ne,n=r.prev,p=r,q=r.next,0<=ma(n,p,q))r=!1;else{for(m=r.next.next;m!==r.prev;){if(sb(n.x,n.y,p.x,p.y,q.x,q.y,m.x,m.y)&&0<=ma(m.prev,m,m.next)){r=!1;break a}m=m.next}r=!0}if(r)c.push(h.i/a),c.push(e.i/a),c.push(u.i/a),Mb(e),k=e=u.next;else if(e=u,e===k){if(!g)Lb(Kb(e),c,a,b,d,f,1);else if(1===g){g=c;k=a;h=e;do u=h.prev,r=h.next.next,!fb(u,r)&&fe(u,h,h.next,r)&&Nb(u,r)&&Nb(r,u)&&(g.push(u.i/k),g.push(h.i/k),g.push(r.i/k),Mb(h),Mb(h.next),h=e=r),h=h.next;while(h!==e);e=h;Lb(e,c,a,b,d,f,2)}else if(2===\ng)a:{g=e;do{for(k=g.next.next;k!==g.prev;){if(h=g.i!==k.i){h=g;u=k;if(r=h.next.i!==u.i&&h.prev.i!==u.i){b:{r=h;do{if(r.i!==h.i&&r.next.i!==h.i&&r.i!==u.i&&r.next.i!==u.i&&fe(r,r.next,h,u)){r=!0;break b}r=r.next}while(r!==h);r=!1}r=!r}if(r=r&&Nb(h,u)&&Nb(u,h)){r=h;n=!1;p=(h.x+u.x)/2;u=(h.y+u.y)/2;do r.y>u!==r.next.y>u&&r.next.y!==r.y&&p<(r.next.x-r.x)*(u-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==h);r=n}h=r}if(h){e=de(g,k);g=Kb(g,g.next);e=Kb(e,e.next);Lb(g,c,a,b,d,f);Lb(e,c,a,b,d,f);break a}k=\nk.next}g=g.next}while(g!==e)}break}}}}function tg(e,c,a,b){var d=e.prev,f=e.next;if(0<=ma(d,e,f))return!1;var g=d.x>e.x?d.x>f.x?d.x:f.x:e.x>f.x?e.x:f.x,k=d.y>e.y?d.y>f.y?d.y:f.y:e.y>f.y?e.y:f.y,h=Zc(d.x<e.x?d.x<f.x?d.x:f.x:e.x<f.x?e.x:f.x,d.y<e.y?d.y<f.y?d.y:f.y:e.y<f.y?e.y:f.y,c,a,b);c=Zc(g,k,c,a,b);a=e.prevZ;for(b=e.nextZ;a&&a.z>=h&&b&&b.z<=c;){if(a!==e.prev&&a!==e.next&&sb(d.x,d.y,e.x,e.y,f.x,f.y,a.x,a.y)&&0<=ma(a.prev,a,a.next))return!1;a=a.prevZ;if(b!==e.prev&&b!==e.next&&sb(d.x,d.y,e.x,e.y,\nf.x,f.y,b.x,b.y)&&0<=ma(b.prev,b,b.next))return!1;b=b.nextZ}for(;a&&a.z>=h;){if(a!==e.prev&&a!==e.next&&sb(d.x,d.y,e.x,e.y,f.x,f.y,a.x,a.y)&&0<=ma(a.prev,a,a.next))return!1;a=a.prevZ}for(;b&&b.z<=c;){if(b!==e.prev&&b!==e.next&&sb(d.x,d.y,e.x,e.y,f.x,f.y,b.x,b.y)&&0<=ma(b.prev,b,b.next))return!1;b=b.nextZ}return!0}function rg(e,c){return e.x-c.x}function sg(e,c){var a=c,b=e.x,d=e.y,f=-Infinity;do{if(d<=a.y&&d>=a.next.y&&a.next.y!==a.y){var g=a.x+(d-a.y)*(a.next.x-a.x)/(a.next.y-a.y);if(g<=b&&g>f){f=\ng;if(g===b){if(d===a.y)return a;if(d===a.next.y)return a.next}var k=a.x<a.next.x?a:a.next}}a=a.next}while(a!==c);if(!k)return null;if(b===f)return k.prev;c=k;g=k.x;var h=k.y,m=Infinity;for(a=k.next;a!==c;){if(b>=a.x&&a.x>=g&&b!==a.x&&sb(d<h?b:f,d,g,h,d<h?f:b,d,a.x,a.y)){var n=Math.abs(d-a.y)/(b-a.x);(n<m||n===m&&a.x>k.x)&&Nb(a,e)&&(k=a,m=n)}a=a.next}return k}function Zc(e,c,a,b,d){e=32767*(e-a)*d;c=32767*(c-b)*d;e=(e|e<<8)&16711935;e=(e|e<<4)&252645135;e=(e|e<<2)&858993459;c=(c|c<<8)&16711935;c=(c|\nc<<4)&252645135;c=(c|c<<2)&858993459;return(e|e<<1)&1431655765|((c|c<<1)&1431655765)<<1}function qg(e){var c=e,a=e;do{if(c.x<a.x||c.x===a.x&&c.y<a.y)a=c;c=c.next}while(c!==e);return a}function sb(e,c,a,b,d,f,g,k){return 0<=(d-g)*(c-k)-(e-g)*(f-k)&&0<=(e-g)*(b-k)-(a-g)*(c-k)&&0<=(a-g)*(f-k)-(d-g)*(b-k)}function ma(e,c,a){return(c.y-e.y)*(a.x-c.x)-(c.x-e.x)*(a.y-c.y)}function fb(e,c){return e.x===c.x&&e.y===c.y}function fe(e,c,a,b){return fb(e,c)&&fb(a,b)||fb(e,b)&&fb(a,c)?!0:0<ma(e,c,a)!==0<ma(e,c,\nb)&&0<ma(a,b,e)!==0<ma(a,b,c)}function Nb(e,c){return 0>ma(e.prev,e,e.next)?0<=ma(e,c,e.next)&&0<=ma(e,e.prev,c):0>ma(e,c,e.prev)||0>ma(e,e.next,c)}function de(e,c){var a=new $c(e.i,e.x,e.y),b=new $c(c.i,c.x,c.y),d=e.next,f=c.prev;e.next=c;c.prev=e;a.next=d;d.prev=a;b.next=a;a.prev=b;f.next=b;b.prev=f;return b}function ee(e,c,a,b){e=new $c(e,c,a);b?(e.next=b.next,e.prev=b,b.next.prev=e,b.next=e):(e.prev=e,e.next=e);return e}function Mb(e){e.next.prev=e.prev;e.prev.next=e.next;e.prevZ&&(e.prevZ.nextZ=\ne.nextZ);e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function $c(e,c,a){this.i=e;this.x=c;this.y=a;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function Yc(e,c,a,b){for(var d=0,f=a-b;c<a;c+=b)d+=(e[f]-e[c])*(e[c+1]+e[f+1]),f=c;return d}function ge(e){try{return kc.createObjectURL(new Blob([e],{type:\"application/javascript\"}))}catch(a){var c=new ug;c.append(e);return kc.createObjectURL(c.getBlob(type))}}function gb(e,c){this.shapeLayer=e;this.gl=c;this.initData()}function he(){ad=!0;\nfor(var e=0;64>e;++e)Ka[e]=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\"[e],Aa[\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\".charCodeAt(e)]=e;Aa[45]=62;Aa[95]=63}function vg(e,c,a){for(var b=[],d=c;d<a;d+=3)c=(e[d]<<16)+(e[d+1]<<8)+e[d+2],b.push(Ka[c>>18&63]+Ka[c>>12&63]+Ka[c>>6&63]+Ka[c&63]);return b.join(\"\")}function ie(e){ad||he();for(var c=e.length,a=c%3,b=\"\",d=[],f=0,g=c-a;f<g;f+=16383)d.push(vg(e,f,f+16383>g?g:f+16383));1===a?(e=e[c-1],b+=Ka[e>>2],b+=\nKa[e<<4&63],b+=\"==\"):2===a&&(e=(e[c-2]<<8)+e[c-1],b+=Ka[e>>10],b+=Ka[e>>4&63],b+=Ka[e<<2&63],b+=\"=\");d.push(b);return d.join(\"\")}function lc(e,c,a,b,d){var f=8*d-b-1;var g=(1<<f)-1,k=g>>1,h=-7;d=a?d-1:0;var m=a?-1:1,n=e[c+d];d+=m;a=n&(1<<-h)-1;n>>=-h;for(h+=f;0<h;a=256*a+e[c+d],d+=m,h-=8);f=a&(1<<-h)-1;a>>=-h;for(h+=b;0<h;f=256*f+e[c+d],d+=m,h-=8);if(0===a)a=1-k;else{if(a===g)return f?NaN:Infinity*(n?-1:1);f+=Math.pow(2,b);a-=k}return(n?-1:1)*f*Math.pow(2,a-b)}function je(e,c,a,b,d,f){var g,k=8*f-\nd-1,h=(1<<k)-1,m=h>>1,n=23===d?Math.pow(2,-24)-Math.pow(2,-77):0;f=b?0:f-1;var p=b?1:-1,l=0>c||0===c&&0>1/c?1:0;c=Math.abs(c);isNaN(c)||Infinity===c?(c=isNaN(c)?1:0,b=h):(b=Math.floor(Math.log(c)/Math.LN2),1>c*(g=Math.pow(2,-b))&&(b--,g*=2),c=1<=b+m?c+n/g:c+n*Math.pow(2,1-m),2<=c*g&&(b++,g/=2),b+m>=h?(c=0,b=h):1<=b+m?(c=(c*g-1)*Math.pow(2,d),b+=m):(c=c*Math.pow(2,m-1)*Math.pow(2,d),b=0));for(;8<=d;e[a+f]=c&255,f+=p,c/=256,d-=8);b=b<<d|c;for(k+=d;0<k;e[a+f]=b&255,f+=p,b/=256,k-=8);e[a+f-p]|=128*l}\nfunction Sa(e,c){if((w.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<c)throw new RangeError(\"Invalid typed array length\");w.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(c),e.__proto__=w.prototype):(null===e&&(e=new w(c)),e.length=c);return e}function w(e,c,a){if(!(w.TYPED_ARRAY_SUPPORT||this instanceof w))return new w(e,c,a);if(\"number\"===typeof e){if(\"string\"===typeof c)throw Error(\"If encoding is specified then the first argument must be a string\");return bd(this,e)}return ke(this,e,c,a)}function ke(e,c,\na,b){if(\"number\"===typeof c)throw new TypeError('\"value\" argument must not be a number');if(\"undefined\"!==typeof ArrayBuffer&&c instanceof ArrayBuffer){c.byteLength;if(0>a||c.byteLength<a)throw new RangeError(\"'offset' is out of bounds\");if(c.byteLength<a+(b||0))throw new RangeError(\"'length' is out of bounds\");c=void 0===a&&void 0===b?new Uint8Array(c):void 0===b?new Uint8Array(c,a):new Uint8Array(c,a,b);w.TYPED_ARRAY_SUPPORT?(e=c,e.__proto__=w.prototype):e=cd(e,c);return e}if(\"string\"===typeof c){b=\ne;e=a;if(\"string\"!==typeof e||\"\"===e)e=\"utf8\";if(!w.isEncoding(e))throw new TypeError('\"encoding\" must be a valid string encoding');a=le(c,e)|0;b=Sa(b,a);c=b.write(c,e);c!==a&&(b=b.slice(0,c));return b}return wg(e,c)}function me(e){if(\"number\"!==typeof e)throw new TypeError('\"size\" argument must be a number');if(0>e)throw new RangeError('\"size\" argument must not be negative');}function bd(e,c){me(c);e=Sa(e,0>c?0:dd(c)|0);if(!w.TYPED_ARRAY_SUPPORT)for(var a=0;a<c;++a)e[a]=0;return e}function cd(e,\nc){var a=0>c.length?0:dd(c.length)|0;e=Sa(e,a);for(var b=0;b<a;b+=1)e[b]=c[b]&255;return e}function wg(e,c){if(La(c)){var a=dd(c.length)|0;e=Sa(e,a);if(0===e.length)return e;c.copy(e,0,0,a);return e}if(c){if(\"undefined\"!==typeof ArrayBuffer&&c.buffer instanceof ArrayBuffer||\"length\"in c)return(a=\"number\"!==typeof c.length)||(a=c.length,a=a!==a),a?Sa(e,0):cd(e,c);if(\"Buffer\"===c.type&&ne(c.data))return cd(e,c.data)}throw new TypeError(\"First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.\");\n}function dd(e){if(e>=(w.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError(\"Attempt to allocate Buffer larger than maximum size: 0x\"+(w.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+\" bytes\");return e|0}function La(e){return!(null==e||!e._isBuffer)}function le(e,c){if(La(e))return e.length;if(\"undefined\"!==typeof ArrayBuffer&&\"function\"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;\"string\"!==typeof e&&(e=\"\"+e);var a=e.length;\nif(0===a)return 0;for(var b=!1;;)switch(c){case \"ascii\":case \"latin1\":case \"binary\":return a;case \"utf8\":case \"utf-8\":case void 0:return mc(e).length;case \"ucs2\":case \"ucs-2\":case \"utf16le\":case \"utf-16le\":return 2*a;case \"hex\":return a>>>1;case \"base64\":return oe(e).length;default:if(b)return mc(e).length;c=(\"\"+c).toLowerCase();b=!0}}function xg(e,c,a){var b=!1;if(void 0===c||0>c)c=0;if(c>this.length)return\"\";if(void 0===a||a>this.length)a=this.length;if(0>=a)return\"\";a>>>=0;c>>>=0;if(a<=c)return\"\";\nfor(e||(e=\"utf8\");;)switch(e){case \"hex\":e=c;c=a;a=this.length;if(!e||0>e)e=0;if(!c||0>c||c>a)c=a;b=\"\";for(a=e;a<c;++a)e=b,b=this[a],b=16>b?\"0\"+b.toString(16):b.toString(16),b=e+b;return b;case \"utf8\":case \"utf-8\":return pe(this,c,a);case \"ascii\":e=\"\";for(a=Math.min(this.length,a);c<a;++c)e+=String.fromCharCode(this[c]&127);return e;case \"latin1\":case \"binary\":e=\"\";for(a=Math.min(this.length,a);c<a;++c)e+=String.fromCharCode(this[c]);return e;case \"base64\":return c=0===c&&a===this.length?ie(this):\nie(this.slice(c,a)),c;case \"ucs2\":case \"ucs-2\":case \"utf16le\":case \"utf-16le\":c=this.slice(c,a);a=\"\";for(e=0;e<c.length;e+=2)a+=String.fromCharCode(c[e]+256*c[e+1]);return a;default:if(b)throw new TypeError(\"Unknown encoding: \"+e);e=(e+\"\").toLowerCase();b=!0}}function hb(e,c,a){var b=e[c];e[c]=e[a];e[a]=b}function qe(e,c,a,b,d){if(0===e.length)return-1;\"string\"===typeof a?(b=a,a=0):2147483647<a?a=2147483647:-2147483648>a&&(a=-2147483648);a=+a;isNaN(a)&&(a=d?0:e.length-1);0>a&&(a=e.length+a);if(a>=\ne.length){if(d)return-1;a=e.length-1}else if(0>a)if(d)a=0;else return-1;\"string\"===typeof c&&(c=w.from(c,b));if(La(c))return 0===c.length?-1:re(e,c,a,b,d);if(\"number\"===typeof c)return c&=255,w.TYPED_ARRAY_SUPPORT&&\"function\"===typeof Uint8Array.prototype.indexOf?d?Uint8Array.prototype.indexOf.call(e,c,a):Uint8Array.prototype.lastIndexOf.call(e,c,a):re(e,[c],a,b,d);throw new TypeError(\"val must be string, number or Buffer\");}function re(e,c,a,b,d){function f(a,b){return 1===g?a[b]:a.readUInt16BE(b*\ng)}var g=1,k=e.length,h=c.length;if(void 0!==b&&(b=String(b).toLowerCase(),\"ucs2\"===b||\"ucs-2\"===b||\"utf16le\"===b||\"utf-16le\"===b)){if(2>e.length||2>c.length)return-1;g=2;k/=2;h/=2;a/=2}if(d)for(b=-1;a<k;a++)if(f(e,a)===f(c,-1===b?0:a-b)){if(-1===b&&(b=a),a-b+1===h)return b*g}else-1!==b&&(a-=a-b),b=-1;else for(a+h>k&&(a=k-h);0<=a;a--){k=!0;for(b=0;b<h;b++)if(f(e,a+b)!==f(c,b)){k=!1;break}if(k)return a}return-1}function pe(e,c,a){a=Math.min(e.length,a);for(var b=[];c<a;){var d=e[c],f=null,g=239<d?\n4:223<d?3:191<d?2:1;if(c+g<=a)switch(g){case 1:128>d&&(f=d);break;case 2:var k=e[c+1];128===(k&192)&&(d=(d&31)<<6|k&63,127<d&&(f=d));break;case 3:k=e[c+1];var h=e[c+2];128===(k&192)&&128===(h&192)&&(d=(d&15)<<12|(k&63)<<6|h&63,2047<d&&(55296>d||57343<d)&&(f=d));break;case 4:k=e[c+1];h=e[c+2];var m=e[c+3];128===(k&192)&&128===(h&192)&&128===(m&192)&&(d=(d&15)<<18|(k&63)<<12|(h&63)<<6|m&63,65535<d&&1114112>d&&(f=d))}null===f?(f=65533,g=1):65535<f&&(f-=65536,b.push(f>>>10&1023|55296),f=56320|f&1023);\nb.push(f);c+=g}e=b.length;if(e<=se)b=String.fromCharCode.apply(String,b);else{a=\"\";for(c=0;c<e;)a+=String.fromCharCode.apply(String,b.slice(c,c+=se));b=a}return b}function ja(e,c,a){if(0!==e%1||0>e)throw new RangeError(\"offset is not uint\");if(e+c>a)throw new RangeError(\"Trying to access beyond buffer length\");}function sa(e,c,a,b,d,f){if(!La(e))throw new TypeError('\"buffer\" argument must be a Buffer instance');if(c>d||c<f)throw new RangeError('\"value\" argument is out of bounds');if(a+b>e.length)throw new RangeError(\"Index out of range\");\n}function nc(e,c,a,b){0>c&&(c=65535+c+1);for(var d=0,f=Math.min(e.length-a,2);d<f;++d)e[a+d]=(c&255<<8*(b?d:1-d))>>>8*(b?d:1-d)}function oc(e,c,a,b){0>c&&(c=4294967295+c+1);for(var d=0,f=Math.min(e.length-a,4);d<f;++d)e[a+d]=c>>>8*(b?d:3-d)&255}function te(e,c,a,b,d,f){if(a+b>e.length)throw new RangeError(\"Index out of range\");if(0>a)throw new RangeError(\"Index out of range\");}function ue(e,c,a,b,d){d||te(e,c,a,4,3.4028234663852886E38,-3.4028234663852886E38);je(e,c,a,b,23,4);return a+4}function ve(e,\nc,a,b,d){d||te(e,c,a,8,1.7976931348623157E308,-1.7976931348623157E308);je(e,c,a,b,52,8);return a+8}function mc(e,c){c=c||Infinity;for(var a,b=e.length,d=null,f=[],g=0;g<b;++g){a=e.charCodeAt(g);if(55295<a&&57344>a){if(!d){if(56319<a){-1<(c-=3)&&f.push(239,191,189);continue}else if(g+1===b){-1<(c-=3)&&f.push(239,191,189);continue}d=a;continue}if(56320>a){-1<(c-=3)&&f.push(239,191,189);d=a;continue}a=(d-55296<<10|a-56320)+65536}else d&&-1<(c-=3)&&f.push(239,191,189);d=null;if(128>a){if(0>--c)break;\nf.push(a)}else if(2048>a){if(0>(c-=2))break;f.push(a>>6|192,a&63|128)}else if(65536>a){if(0>(c-=3))break;f.push(a>>12|224,a>>6&63|128,a&63|128)}else if(1114112>a){if(0>(c-=4))break;f.push(a>>18|240,a>>12&63|128,a>>6&63|128,a&63|128)}else throw Error(\"Invalid code point\");}return f}function we(e){for(var c=[],a=0;a<e.length;++a)c.push(e.charCodeAt(a)&255);return c}function oe(e){e=(e.trim?e.trim():e.replace(/^\\s+|\\s+$/g,\"\")).replace(yg,\"\");if(2>e.length)e=\"\";else for(;0!==e.length%4;)e+=\"=\";ad||he();\nvar c=e.length;if(0<c%4)throw Error(\"Invalid string. Length must be a multiple of 4\");var a=\"=\"===e[c-2]?2:\"=\"===e[c-1]?1:0;var b=new zg(3*c/4-a);var d=0<a?c-4:c;var f=0;for(c=0;c<d;c+=4){var g=Aa[e.charCodeAt(c)]<<18|Aa[e.charCodeAt(c+1)]<<12|Aa[e.charCodeAt(c+2)]<<6|Aa[e.charCodeAt(c+3)];b[f++]=g>>16&255;b[f++]=g>>8&255;b[f++]=g&255}2===a?(g=Aa[e.charCodeAt(c)]<<2|Aa[e.charCodeAt(c+1)]>>4,b[f++]=g&255):1===a&&(g=Aa[e.charCodeAt(c)]<<10|Aa[e.charCodeAt(c+1)]<<4|Aa[e.charCodeAt(c+2)]>>2,b[f++]=g>>\n8&255,b[f++]=g&255);return b}function Ob(e,c,a,b){for(var d=0;d<b&&!(d+a>=c.length||d>=e.length);++d)c[d+a]=e[d];return d}function xe(e){return!!e.constructor&&\"function\"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function Ba(e,c){var a=[];e.forEach(function(b){a.push(c?-b:b,b)});return a}function ye(e){for(var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=[],b=0;b<e-1;b++){var d=2*(b+c);a.push(d,d+1,d+2);a.push(d+2,d+1,d+3)}return a}function pc(e){return function(c,\na,b){c=a+e;a=b.length-1;return b[0<a?0>c?0:c>a?a:c:c<a?a:0<c?0:c]}}function Ma(e){if(!e[0]||!e[0].length)return e;for(var c=e[0].length,a=[],b=0,d=0;d<e.length;d++)for(var f=0;f<c;f++)a[b++]=e[d][f];return a}function ze(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],c=[],a=0,b=0;b<e.length;b++){var d=e[b];if(0<b){var f=e[b-1];a+=Math.sqrt(Math.pow(d[0]-f[0],2)+Math.pow(d[1]-f[1],2))}c.push(a)}return{arr:c,total:a}}function Ae(e){var c=0,a=0,b=!0,d=!1,f=void 0;try{for(var g=\ned(e),k;!(b=(k=g.next()).done);b=!0){var h=k.value;c+=h.w*h.h;a=Math.max(a,h.w)}}catch(u){d=!0,f=u}finally{try{!b&&g.return&&g.return()}finally{if(d)throw f;}}e.sort(function(a,b){return b.h-a.h});a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(c/.95)),a),h:Infinity}];d=b=0;f=!0;g=!1;k=void 0;try{for(var m=ed(e),n;!(f=(n=m.next()).done);f=!0)for(var p=n.value,l=a.length-1;0<=l;l--){var q=a[l];if(!(p.w>q.w||p.h>q.h)){p.x=q.x;p.y=q.y;d=Math.max(d,p.y+p.h);b=Math.max(b,p.x+p.w);if(p.w===q.w&&p.h===q.h){var r=\na.pop();l<a.length&&(a[l]=r)}else p.h===q.h?(q.x+=p.w,q.w-=p.w):(p.w!==q.w&&a.push({x:q.x+p.w,y:q.y,w:q.w-p.w,h:p.h}),q.y+=p.h,q.h-=p.h);break}}}catch(u){g=!0,k=u}finally{try{!f&&m.return&&m.return()}finally{if(g)throw k;}}return{w:b,h:d,fill:c/(b*d)||0}}function Ag(e,c,a){a=Math.PI/180*(60*a+30);return[e.x+c*Math.cos(a),e.y+c*Math.sin(a)]}function Bg(e,c,a){for(var b={},d=[],f=e.length,g=c/2/Math.sin(Math.PI/3),k=1.5*g,h=1,m=0;m<f;++m){var n=e[m].geometry.coordinates;a&&(n=a(n));var p=+n[0],l=+n[1];\nif(!isNaN(p)&&!isNaN(l)){n=Math.round(l/=k);var q=Math.round(p=p/c-(n&1)/2),r=l-n;if(1<3*Math.abs(r)){var u=p-q,z=q+(p<q?-1:1)/2,t=n+(l<n?-1:1);p-=z;l-=t;u*u+r*r>p*p+l*l&&(q=z+(n&1?1:-1)/2,n=t)}r=q+\"-\"+n;(u=b[r])?(u.count+=e[m].count||1,h=Math.max(h,u.count)):(b[r]={center:{x:(q+(n&1)/2)*c,y:n*k},count:e[m].count||1},d.push(b[r]))}}d.max=h;d.r=g;return d}function Cg(e){var c,a;this.promise=new e(function(b,d){if(void 0!==c||void 0!==a)throw TypeError(\"Bad Promise constructor\");c=b;a=d});this.resolve=\nib(c);this.reject=ib(a)}function Dg(e,c,a,b){switch(b){case 5122:return new Int16Array(e,c,a);case 5123:return new Uint16Array(e,c,a);case 5124:return new Int32Array(e,c,a);case 5125:return new Uint32Array(e,c,a);case 5126:return new Float32Array(e,c,a);default:return null}}function qc(e){return Dg(e.bufferView.data,e.byteOffset,e.count*fd[e.type],e.componentType)}function Eg(e){var c=\"\",a=e.lastIndexOf(\"/\");-1!==a&&(c=e.substring(0,a+1));return c}function Fg(e,c){var a=new XMLHttpRequest;a.overrideMimeType(\"application/json\");\na.open(\"GET\",e,!0);a.onreadystatechange=function(){4==a.readyState&&\"200\"==a.status&&c(a.responseText,this)};a.send(null)}function Gg(e,c){var a=new XMLHttpRequest;a.responseType=\"arraybuffer\";a.open(\"GET\",e,!0);a.onreadystatechange=function(){if(4==a.readyState&&\"200\"==a.status){var b=a.response;b&&c&&c(b)}};a.send(null)}function Hg(e,c,a){var b=new Image;b.crossOrigin=\"Anonymous\";b.src=e;b.onload=function(){a(b,c)}}function Ig(e){function c(b,d){a.uniform1i(b,d.index);a.activeTexture(a.TEXTURE0+\nd.index);b=E.glTF.textures[d.index];a.bindTexture(a.TEXTURE_2D,b.texture);a.bindSampler(d.index,b.sampler?b.sampler.sampler:g)}var a=e.gl,b=0,d=[];e=a.canvas;var f=function(a,b,d){this.glTFScene=a;this.glTF=b;this.id=d;this.rootTransform=C.create();this.nodeMatrix=Array(b.nodes.length);a=0;for(b=this.nodeMatrix.length;a<b;a++)this.nodeMatrix[a]=C.create()},g=a.createSampler();a.samplerParameteri(g,a.TEXTURE_MIN_FILTER,a.NEAREST_MIPMAP_LINEAR);a.samplerParameteri(g,a.TEXTURE_MAG_FILTER,a.LINEAR);a.samplerParameteri(g,\na.TEXTURE_WRAP_S,a.REPEAT);a.samplerParameteri(g,a.TEXTURE_WRAP_T,a.REPEAT);a.bindVertexArray(null);a.bindVertexArray(null);var k={HAS_SKIN:1,SKIN_VEC8:2,HAS_BASECOLORMAP:4,HAS_NORMALMAP:8,HAS_METALROUGHNESSMAP:16,HAS_OCCLUSIONMAP:32,HAS_EMISSIVEMAP:64},h={},m=function(){this.flags=0;this.programObject=null};m.prototype.hasSkin=function(){return this.flags&k.HAS_SKIN};m.prototype.hasBaseColorMap=function(){return this.flags&k.HAS_BASECOLORMAP};m.prototype.hasNormalMap=function(){return this.flags&\nk.HAS_NORMALMAP};m.prototype.hasMetalRoughnessMap=function(){return this.flags&k.HAS_METALROUGHNESSMAP};m.prototype.hasOcclusionMap=function(){return this.flags&k.HAS_OCCLUSIONMAP};m.prototype.hasEmissiveMap=function(){return this.flags&k.HAS_EMISSIVEMAP};m.prototype.defineMacro=function(a){void 0!==k[a]&&(this.flags|=k[a])};m.prototype.compile=function(){var b=h[this.flags];if(b)this.programObject=b;else{var d=b=\"\";this.flags&k.HAS_SKIN&&(b+=\"#define HAS_SKIN\\n\");this.flags&k.SKIN_VEC8&&(b+=\"#define SKIN_VEC8\\n\");\nthis.flags&k.HAS_BASECOLORMAP&&(d+=\"#define HAS_BASECOLORMAP\\n\");this.flags&k.HAS_NORMALMAP&&(d+=\"#define HAS_NORMALMAP\\n\");this.flags&k.HAS_METALROUGHNESSMAP&&(d+=\"#define HAS_METALROUGHNESSMAP\\n\");this.flags&k.HAS_OCCLUSIONMAP&&(d+=\"#define HAS_OCCLUSIONMAP\\n\");this.flags&k.HAS_EMISSIVEMAP&&(d+=\"#define HAS_EMISSIVEMAP\\n\");b=tb.createProgram(a,\"#version 300 es\\n\"+b+\"#define POSITION_LOCATION 0\\n#define NORMAL_LOCATION 1\\n#define TEXCOORD_0_LOCATION 2\\n#define JOINTS_0_LOCATION 3\\n#define JOINTS_1_LOCATION 5\\n#define WEIGHTS_0_LOCATION 4\\n#define WEIGHTS_1_LOCATION 6\\n#define TANGENT_LOCATION 7\\nprecision highp float;precision highp int;uniform mat4 u_MVP;uniform mat4 u_MV;uniform mat4 u_MVNormal;\\n#ifdef HAS_SKIN\\nuniform JointMatrix{mat4 matrix[65];}u_jointMatrix;\\n#endif\\nlayout(location=POSITION_LOCATION)in vec3 position;layout(location=NORMAL_LOCATION)in vec3 normal;layout(location=TEXCOORD_0_LOCATION)in vec2 uv;\\n#ifdef HAS_SKIN\\nlayout(location=JOINTS_0_LOCATION)in vec4 joint0;layout(location=WEIGHTS_0_LOCATION)in vec4 weight0;\\n#ifdef SKIN_VEC8\\nlayout(location=JOINTS_1_LOCATION)in vec4 joint1;layout(location=WEIGHTS_1_LOCATION)in vec4 weight1;\\n#endif\\n#endif\\nout vec3 v_position;out vec3 v_normal;out vec2 v_uv;void main(){\\n#ifdef HAS_SKIN\\nmat4 skinMatrix=weight0.x*u_jointMatrix.matrix[int(joint0.x)]+weight0.y*u_jointMatrix.matrix[int(joint0.y)]+weight0.z*u_jointMatrix.matrix[int(joint0.z)]+weight0.w*u_jointMatrix.matrix[int(joint0.w)];\\n#ifdef SKIN_VEC8\\nskinMatrix+=weight1.x*u_jointMatrix.matrix[int(joint1.x)]+weight1.y*u_jointMatrix.matrix[int(joint1.y)]+weight1.z*u_jointMatrix.matrix[int(joint1.z)]+weight1.w*u_jointMatrix.matrix[int(joint1.w)];\\n#endif\\n#endif\\nv_uv=uv;\\n#ifdef HAS_SKIN\\nv_normal=normalize((u_MVNormal*transpose(inverse(skinMatrix))*vec4(normal,0)).xyz);vec4 pos=u_MV*skinMatrix*vec4(position,1.0);gl_Position=u_MVP*skinMatrix*vec4(position,1.0);\\n#else\\nv_normal=normalize((u_MVNormal*vec4(normal,0)).xyz);vec4 pos=u_MV*vec4(position,1.0);gl_Position=u_MVP*vec4(position,1.0);\\n#endif\\nv_position=vec3(pos.xyz)/pos.w;}\",\n\"#version 300 es\\n\"+d+\"#define FRAG_COLOR_LOCATION 0\\nprecision highp float;precision highp int;uniform sampler2D u_brdfLUT;uniform vec4 u_baseColorFactor;\\n#ifdef HAS_BASECOLORMAP\\nuniform sampler2D u_baseColorTexture;\\n#endif\\n#ifdef HAS_NORMALMAP\\nuniform sampler2D u_normalTexture;uniform float u_normalTextureScale;\\n#endif\\n#ifdef HAS_EMISSIVEMAP\\nuniform sampler2D u_emissiveTexture;uniform vec3 u_emissiveFactor;\\n#endif\\n#ifdef HAS_METALROUGHNESSMAP\\nuniform sampler2D u_metallicRoughnessTexture;\\n#endif\\nuniform float u_metallicFactor;uniform float u_roughnessFactor;\\n#ifdef HAS_OCCLUSIONMAP\\nuniform sampler2D u_occlusionTexture;uniform float u_occlusionStrength;\\n#endif\\nin vec3 v_position;in vec3 v_normal;in vec2 v_uv;layout(location=FRAG_COLOR_LOCATION)out vec4 frag_color;struct PBRInfo{float NdotL;float NdotV;float NdotH;float LdotH;float VdotH;float perceptualRoughness;float metalness;vec3 reflectance0;vec3 reflectance90;float alphaRoughness;vec3 diffuseColor;vec3 specularColor;};const float M_PI=3.141592653589793;const float c_MinRoughness=0.04;vec3 getNormal(){vec3 pos_dx=dFdx(v_position);vec3 pos_dy=dFdy(v_position);vec3 tex_dx=dFdx(vec3(v_uv,0.0));vec3 tex_dy=dFdy(vec3(v_uv,0.0));vec3 t=(tex_dy.t*pos_dx-tex_dx.t*pos_dy)/(tex_dx.s*tex_dy.t-tex_dy.s*tex_dx.t);vec3 ng=v_normal;t=normalize(t-ng*dot(ng,t));vec3 b=normalize(cross(ng,t));mat3 tbn=mat3(t,b,ng);\\n#ifdef HAS_NORMALMAP\\nvec3 n=texture(u_normalTexture,v_uv).rgb;n=normalize(tbn*((2.0*n-1.0)*vec3(u_normalTextureScale,u_normalTextureScale,1.0)));\\n#else\\nvec3 n=tbn[2].xyz;\\n#endif\\nreturn n;}vec3 getIBLContribution(PBRInfo pbrInputs,vec3 n,vec3 reflection){float mipCount=10.0;float lod=(pbrInputs.perceptualRoughness*mipCount);vec3 brdf=texture(u_brdfLUT,vec2(pbrInputs.NdotV,1.0-pbrInputs.perceptualRoughness)).rgb;vec3 diffuseLight=vec3(0.6,0.6,0.6);vec3 specularLight=vec3(0.6,0.6,0.6);vec3 diffuse=diffuseLight*pbrInputs.diffuseColor;vec3 specular=specularLight*(pbrInputs.specularColor*brdf.x+brdf.y);return diffuse+specular;}vec3 diffuse(PBRInfo pbrInputs){return pbrInputs.diffuseColor/M_PI;}vec3 specularReflection(PBRInfo pbrInputs){return pbrInputs.reflectance0+(pbrInputs.reflectance90-pbrInputs.reflectance0)*pow(clamp(1.0-pbrInputs.VdotH,0.0,1.0),5.0);}float geometricOcclusion(PBRInfo pbrInputs){float NdotL=pbrInputs.NdotL;float NdotV=pbrInputs.NdotV;float r=pbrInputs.alphaRoughness;float attenuationL=2.0*NdotL/(NdotL+sqrt(r*r+(1.0-r*r)*(NdotL*NdotL)));float attenuationV=2.0*NdotV/(NdotV+sqrt(r*r+(1.0-r*r)*(NdotV*NdotV)));return attenuationL*attenuationV;}float microfacetDistribution(PBRInfo pbrInputs){float roughnessSq=pbrInputs.alphaRoughness*pbrInputs.alphaRoughness;float f=(pbrInputs.NdotH*roughnessSq-pbrInputs.NdotH)*pbrInputs.NdotH+1.0;return roughnessSq/(M_PI*f*f);}void main(){float perceptualRoughness=u_roughnessFactor;float metallic=u_metallicFactor;\\n#ifdef HAS_METALROUGHNESSMAP\\nvec4 mrSample=texture(u_metallicRoughnessTexture,v_uv);perceptualRoughness=mrSample.g*perceptualRoughness;metallic=mrSample.b*metallic;\\n#endif\\nperceptualRoughness=clamp(perceptualRoughness,c_MinRoughness,1.0);metallic=clamp(metallic,0.0,1.0);float alphaRoughness=perceptualRoughness*perceptualRoughness;\\n#ifdef HAS_BASECOLORMAP\\nvec4 baseColor=texture(u_baseColorTexture,v_uv)*u_baseColorFactor;\\n#else\\nvec4 baseColor=u_baseColorFactor;\\n#endif\\nvec3 f0=vec3(0.04);vec3 diffuseColor=baseColor.rgb*(vec3(1.0)-f0);diffuseColor*=1.0-metallic;vec3 specularColor=mix(f0,baseColor.rgb,metallic);float reflectance=max(max(specularColor.r,specularColor.g),specularColor.b);float reflectance90=clamp(reflectance*25.0,0.0,1.0);vec3 specularEnvironmentR0=specularColor.rgb;vec3 specularEnvironmentR90=vec3(1.0,1.0,1.0)*reflectance90;vec3 n=getNormal();vec3 v=normalize(-v_position);vec3 l=normalize(vec3(1.0,1.0,1.0));vec3 h=normalize(l+v);vec3 reflection=-normalize(reflect(v,n));float NdotL=clamp(dot(n,l),0.001,1.0);float NdotV=abs(dot(n,v))+0.001;float NdotH=clamp(dot(n,h),0.0,1.0);float LdotH=clamp(dot(l,h),0.0,1.0);float VdotH=clamp(dot(v,h),0.0,1.0);PBRInfo pbrInputs=PBRInfo(NdotL,NdotV,NdotH,LdotH,VdotH,perceptualRoughness,metallic,specularEnvironmentR0,specularEnvironmentR90,alphaRoughness,diffuseColor,specularColor);vec3 F=specularReflection(pbrInputs);float G=geometricOcclusion(pbrInputs);float D=microfacetDistribution(pbrInputs);vec3 diffuseContrib=(1.0-F)*diffuse(pbrInputs);vec3 specContrib=max(vec3(0.0),F*G*D/(4.0*NdotL*NdotV));vec3 color=NdotL*(diffuseContrib+specContrib);color+=getIBLContribution(pbrInputs,n,reflection);\\n#ifdef HAS_OCCLUSIONMAP\\nfloat ao=texture(u_occlusionTexture,v_uv).r;color=mix(color,color*ao,u_occlusionStrength);\\n#endif\\n#ifdef HAS_EMISSIVEMAP\\nvec3 emissive=texture(u_emissiveTexture,v_uv).rgb*u_emissiveFactor;color+=emissive;\\n#endif\\nfrag_color=vec4(color,baseColor.a);}\");\nthis.programObject={program:b,uniformLocations:{},uniformBlockIndices:{}};this.flags&k.HAS_SKIN&&(this.programObject.uniformBlockIndices.JointMatrix=a.getUniformBlockIndex(b,\"JointMatrix\"));d=this.programObject.uniformLocations;d.MVP=a.getUniformLocation(b,\"u_MVP\");d.MVNormal=a.getUniformLocation(b,\"u_MVNormal\");d.MV=a.getUniformLocation(b,\"u_MV\");d.baseColorFactor=a.getUniformLocation(b,\"u_baseColorFactor\");d.metallicFactor=a.getUniformLocation(b,\"u_metallicFactor\");d.roughnessFactor=a.getUniformLocation(b,\n\"u_roughnessFactor\");this.flags&k.HAS_BASECOLORMAP&&(d.baseColorTexture=a.getUniformLocation(b,\"u_baseColorTexture\"));this.flags&k.HAS_NORMALMAP&&(d.normalTexture=a.getUniformLocation(b,\"u_normalTexture\"),d.normalTextureScale=a.getUniformLocation(b,\"u_normalTextureScale\"));this.flags&k.HAS_METALROUGHNESSMAP&&(d.metallicRoughnessTexture=a.getUniformLocation(b,\"u_metallicRoughnessTexture\"));this.flags&k.HAS_OCCLUSIONMAP&&(d.occlusionTexture=a.getUniformLocation(b,\"u_occlusionTexture\"),d.occlusionStrength=\na.getUniformLocation(b,\"u_occlusionStrength\"));this.flags&k.HAS_EMISSIVEMAP&&(d.emissiveTexture=a.getUniformLocation(b,\"u_emissiveTexture\"),d.emissiveFactor=a.getUniformLocation(b,\"u_emissiveFactor\"));a.useProgram(null);h[this.flags]=this.programObject}};var n=1,p=I.create(),l=C.create();rc.create();var q=[];a.enable(a.CULL_FACE);a.cullFace(a.BACK);a.frontFace(a.CCW);var r=!0;a.enable(a.DEPTH_TEST);a.depthFunc(a.LEQUAL);var u=u||{},z=null;I.create();var t=C.create();C.perspective(t,.785,e.width/e.height,\n.01,100);C.create();var x=C.create(),v=C.create(),A=C.create();C.create();var B,E,D=[1,1,1,1],M=u.drawPrimitive=function(b,d){if(H){v=x=H.matrix;C.invert(A,x);C.transpose(A,A);d=D;var h=b.shader,g=b.material;if(null!==g){var f=g.pbrMetallicRoughness;d=f.baseColorFactor;b.material.doubleSided===r&&((r=!b.material.doubleSided)?a.enable(a.CULL_FACE):a.disable(a.CULL_FACE))}z!=b.shader.programObject&&(z=b.shader.programObject,a.useProgram(z.program));g&&(h.hasBaseColorMap()&&c(z.uniformLocations.baseColorTexture,\nf.baseColorTexture),h.hasNormalMap()&&(c(z.uniformLocations.normalTexture,g.normalTexture),a.uniform1f(z.uniformLocations.normalTextureScale,g.normalTexture.scale)),h.hasMetalRoughnessMap()&&c(z.uniformLocations.metallicRoughnessTexture,f.metallicRoughnessTexture),a.uniform1f(z.uniformLocations.metallicFactor,f.metallicFactor),a.uniform1f(z.uniformLocations.roughnessFactor,f.roughnessFactor),h.hasOcclusionMap()&&(c(z.uniformLocations.occlusionTexture,g.occlusionTexture),a.uniform1f(z.uniformLocations.occlusionStrength,\ng.occlusionTexture.strength)),h.hasEmissiveMap()&&(c(z.uniformLocations.emissiveTexture,g.emissiveTexture),a.uniform3fv(z.uniformLocations.emissiveFactor,g.emissiveFactor)));h.hasSkin()&&a.uniformBlockBinding(z.program,z.uniformBlockIndices.JointMatrix,B);a.activeTexture(a.TEXTURE0+29);a.bindTexture(a.TEXTURE_2D,null);a.uniform4fv(z.uniformLocations.baseColorFactor,d);a.uniformMatrix4fv(z.uniformLocations.MV,!1,x);a.uniformMatrix4fv(z.uniformLocations.MVP,!1,v);a.uniformMatrix4fv(z.uniformLocations.MVNormal,\n!1,A);a.bindVertexArray(b.vertexArray);null!==b.indices?a.drawElements(b.mode,b.indicesLength,b.indicesComponentType,b.indicesOffset):a.drawArrays(b.mode,b.drawArraysOffset,b.drawArraysCount);a.bindVertexArray(null)}},J=C.create(),G=C.create(),w=u.drawNode=function(b,d,c,h){d=c[d];void 0!==h?C.mul(d,h,b.matrix):C.copy(d,b.matrix);if(null!==b.skin){var g=b.skin;B=g.uniformBlockID;var f=b.skin.joints;C.invert(G,d);h=0;for(e=f.length;h<e;h++){var k=f[h];C.mul(J,c[k.nodeID],g.inverseBindMatrix[h]);C.mul(J,\nG,J);g.jointMatrixUnidormBufferData.set(J,16*h)}a.bindBuffer(a.UNIFORM_BUFFER,g.jointMatrixUniformBuffer);a.bufferSubData(a.UNIFORM_BUFFER,0,g.jointMatrixUnidormBufferData,0,g.jointMatrixUnidormBufferData.length)}var e;if(null!==b.mesh)for(g=b.mesh,h=0,e=g.primitives.length;h<e;h++)M(g.primitives[h],d);null!==b.skin&&a.bindBuffer(a.UNIFORM_BUFFER,null);h=0;for(e=b.children.length;h<e;h++)w(b.children[h],b.children[h].nodeID,c,d)},U=u.drawScene=function(a){var d=a.glTF;if(d.animations){var c=d.animations[b];\nvar h;var g=0;for(h=c.samplers.length;g<h;g++)c.samplers[g].getValue(F);g=0;for(h=c.channels.length;g<h;g++){var f=c.channels[g];var k=f.sampler;var e=d.nodes[f.target.nodeID];switch(f.target.path){case \"rotation\":Fa.copy(e.rotation,k.curValue);break;case \"translation\":I.copy(e.translation,k.curValue);break;case \"scale\":I.copy(e.scale,k.curValue)}e.updateMatrixFromTRS()}}c=0;for(d=a.glTFScene.nodes.length;c<d;c++)w(a.glTFScene.nodes[c],a.glTFScene.nodes[c].nodeID,a.nodeMatrix,a.rootTransform)},y=\nperformance.now(),F=0,H;return{setupScene:function(c,h){function g(b,d){if(void 0!==b){var c=b.bufferView;null===c.target?(a.bindBuffer(a.ARRAY_BUFFER,c.buffer),a.bufferData(a.ARRAY_BUFFER,c.data,a.STATIC_DRAW)):a.bindBuffer(c.target,c.buffer);b.prepareVertexAttrib(d,a);return!0}return!1}var k;if(c.animations){var e=0;for(k=c.animations.length;e<k;e++)d.add(c.animations[e].name||e)}b=0;e=c.scenes[c.defaultScene];I.fromValues(1.2*e.boundingBox.transform[0],0,0);I.create();h?h=q[h.id]=new f(e,c,h.id):\n(h=new f(e,c,q.length),q.push(h));1===q.length&&(C.identity(l),n=1/Math.max(e.boundingBox.transform[0],Math.max(e.boundingBox.transform[5],e.boundingBox.transform[10])),C.getTranslation(p,e.boundingBox.transform),I.scale(p,p,-1),p[0]+=-.5*e.boundingBox.transform[0],p[1]+=-.5*e.boundingBox.transform[5],p[2]+=-.5*e.boundingBox.transform[10],n*=.5,l[0]=n,l[5]=n,l[10]=n,C.translate(l,l,p),I.set(p,0,0,-1.5),n=1);var u;e=0;for(k=c.bufferViews.length;e<k;e++){var r=c.bufferViews[e];r.createBuffer(a);r.bindData(a)}if(c.textures)for(e=\n0,k=c.textures.length;e<k;e++){var z=c.textures[e];z.createTexture(a)}if(c.samplers)for(e=0,k=c.samplers.length;e<k;e++)z=c.samplers[e],z.createSampler(a);if(c.skins)for(e=0,k=c.skins.length;e<k;e++)z=c.skins[e],z.jointMatrixUniformBuffer=a.createBuffer(),a.bindBufferBase(a.UNIFORM_BUFFER,z.uniformBlockID,z.jointMatrixUniformBuffer),a.bindBuffer(a.UNIFORM_BUFFER,z.jointMatrixUniformBuffer),a.bufferData(a.UNIFORM_BUFFER,z.jointMatrixUnidormBufferData,a.DYNAMIC_DRAW),a.bufferSubData(a.UNIFORM_BUFFER,\n0,z.jointMatrixUnidormBufferData),a.bindBuffer(a.UNIFORM_BUFFER,null);var v=0;for(u=c.meshes.length;v<u;v++)for(z=c.meshes[v],e=0,k=z.primitives.length;e<k;++e){var t=z.primitives[e];t.shader=new m;t.vertexArray=r=a.createVertexArray();a.bindVertexArray(r);g(t.attributes.POSITION,0);g(t.attributes.NORMAL,1);g(t.attributes.TEXCOORD_0,2);g(t.attributes.JOINTS_0,3)&&g(t.attributes.WEIGHTS_0,4)&&t.shader.defineMacro(\"HAS_SKIN\");g(t.attributes.JOINTS_1,5)&&g(t.attributes.WEIGHTS_1,6)&&t.shader.defineMacro(\"SKIN_VEC8\");\nnull!==t.indices&&(r=c.accessors[t.indices],r=r.bufferView,null===r.target?(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,r.buffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,r.data,a.STATIC_DRAW)):a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,r.buffer));a.bindVertexArray(null);a.bindBuffer(a.ARRAY_BUFFER,null);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);if(r=t.material)r.pbrMetallicRoughness.baseColorTexture&&t.shader.defineMacro(\"HAS_BASECOLORMAP\"),r.pbrMetallicRoughness.metallicRoughnessTexture&&t.shader.defineMacro(\"HAS_METALROUGHNESSMAP\"),\nr.normalTexture&&t.shader.defineMacro(\"HAS_NORMALMAP\"),r.occlusionTexture&&t.shader.defineMacro(\"HAS_OCCLUSIONMAP\"),r.emissiveTexture&&t.shader.defineMacro(\"HAS_EMISSIVEMAP\");t.shader.compile()}return h},render:u.render=function(a){H=a;a=(new Date).getTime();var b;var d=0;for(b=q.length;d<b;d++)E=q[d],U(q[d]);z=null;F=.001*(a-y)}}}function aa(e){this.options=e=e||{};e.colors=e.colors||[\"rgba(0,192,73,0.99609375)\",\"rgba(242,48,48,0.99609375)\",\"rgba(255,159,25,0.99609375)\"];var c=e.colors;this.drawTogether=\n!0;this.parseColors(c);this.tileSize=256;this.ratio=window.devicePixelRatio;this.cache={};e.getTileUrl&&(this.getTileUrl=e.getTileUrl);this._loadCount={}}function Jg(e){var c=e/2,a=e+c,b=new Wc(2*a,2*a),d=b.getContext(\"2d\");d.shadowBlur=c;d.shadowColor=\"black\";d.shadowOffsetX=d.shadowOffsetY=1E4;d.beginPath();d.arc(a-1E4,a-1E4,e,0,2*Math.PI,!0);d.closePath();d.fill();return b}var Be=\"undefined\"!==typeof globalThis?globalThis:\"undefined\"!==typeof window?window:\"undefined\"!==typeof __webpack_require__.g?__webpack_require__.g:\"undefined\"!==\ntypeof self?self:{},Za=function(e){if(void 0==e)throw TypeError(\"Can't call method on  \"+e);return e},Kg={}.hasOwnProperty,X=function(e,c){return Kg.call(e,c)},Lg={}.toString,jb=function(e){return Lg.call(e).slice(8,-1)},gd=Object(\"z\").propertyIsEnumerable(0)?Object:function(e){return\"String\"==jb(e)?e.split(\"\"):Object(e)},Na=function(e){return gd(Za(e))},Mg=Math.ceil,Ng=Math.floor,hd=function(e){return isNaN(e=+e)?0:(0<e?Ng:Mg)(e)},Og=Math.min,sc=function(e){return 0<e?Og(hd(e),9007199254740991):\n0},Pg=Math.max,Qg=Math.min,W=O(function(e){e=e.exports={version:\"2.6.5\"};\"number\"==typeof __e&&(__e=e)}),K=O(function(e){e=e.exports=\"undefined\"!=typeof window&&Math==Math?window:\"undefined\"!=typeof self&&self.Math==Math?self:Function(\"return this\")();\"number\"==typeof __g&&(__g=e)}),Pb=O(function(e){var c=K[\"__core-js_shared__\"]||(K[\"__core-js_shared__\"]={});(e.exports=function(a,b){return c[a]||(c[a]=void 0!==b?b:{})})(\"versions\",[]).push({version:W.version,mode:\"pure\",copyright:\"\\u00a9 2019 Denis Pushkarev (zloirock.ru)\"})}),\nRg=0,Sg=Math.random(),tc=function(e){return\"Symbol(\".concat(void 0===e?\"\":e,\")_\",(++Rg+Sg).toString(36))},Ce=Pb(\"keys\"),id=function(e){return Ce[e]||(Ce[e]=tc(e))},Tg=function(e){return function(c,a,b){c=Na(c);var d=sc(c.length);b=hd(b);b=0>b?Pg(b+d,0):Qg(b,d);if(e&&a!=a)for(;d>b;){if(a=c[b++],a!=a)return!0}else for(;d>b;b++)if((e||b in c)&&c[b]===a)return e||b||0;return!e&&-1}}(!1),Ug=id(\"IE_PROTO\"),De=function(e,c){e=Na(e);var a=0,b=[],d;for(d in e)d!=Ug&&X(e,d)&&b.push(d);for(;c.length>a;)X(e,\nd=c[a++])&&(~Tg(b,d)||b.push(d));return b},uc=\"constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf\".split(\" \"),ub=Object.keys||function(e){return De(e,uc)},ib=function(e){if(\"function\"!=typeof e)throw TypeError(e+\" is not a function!\");return e},ka=function(e,c,a){ib(e);if(void 0===c)return e;switch(a){case 1:return function(a){return e.call(c,a)};case 2:return function(a,d){return e.call(c,a,d)};case 3:return function(a,d,f){return e.call(c,a,d,f)}}return function(){return e.apply(c,\narguments)}},oa=function(e){return\"object\"===typeof e?null!==e:\"function\"===typeof e},qa=function(e){if(!oa(e))throw TypeError(e+\" is not an object!\");return e},$a=function(e){try{return!!e()}catch(c){return!0}},Ca=!$a(function(){return 7!=Object.defineProperty({},\"a\",{get:function(){return 7}}).a}),vb=K.document,vc=oa(vb)&&oa(vb.createElement),Ee=!Ca&&!$a(function(){return 7!=Object.defineProperty(vc?vb.createElement(\"div\"):{},\"a\",{get:function(){return 7}}).a}),Qb=function(e,c){if(!oa(e))return e;\nvar a,b;if(c&&\"function\"==typeof(a=e.toString)&&!oa(b=a.call(e))||\"function\"==typeof(a=e.valueOf)&&!oa(b=a.call(e))||!c&&\"function\"==typeof(a=e.toString)&&!oa(b=a.call(e)))return b;throw TypeError(\"Can't convert object to primitive value\");},Vg=Object.defineProperty,ya={f:Ca?Object.defineProperty:function(e,c,a){qa(e);c=Qb(c,!0);qa(a);if(Ee)try{return Vg(e,c,a)}catch(b){}if(\"get\"in a||\"set\"in a)throw TypeError(\"Accessors not supported!\");\"value\"in a&&(e[c]=a.value);return e}},ab=function(e,c){return{enumerable:!(e&\n1),configurable:!(e&2),writable:!(e&4),value:c}},Ta=Ca?function(e,c,a){return ya.f(e,c,ab(1,a))}:function(e,c,a){e[c]=a;return e},pa=function(e,c,a){var b=e&pa.F,d=e&pa.G,f=e&pa.S,g=e&pa.P,k=e&pa.B,h=e&pa.W,m=d?W:W[c]||(W[c]={}),n=m.prototype;f=d?K:f?K[c]:(K[c]||{}).prototype;var p;d&&(a=c);for(p in a)if(c=!b&&f&&void 0!==f[p],!c||!X(m,p)){var l=c?f[p]:a[p];m[p]=d&&\"function\"!=typeof f[p]?a[p]:k&&c?ka(l,K):h&&f[p]==l?function(a){var b=function(b,d,c){if(this instanceof a){switch(arguments.length){case 0:return new a;\ncase 1:return new a(b);case 2:return new a(b,d)}return new a(b,d,c)}return a.apply(this,arguments)};b.prototype=a.prototype;return b}(l):g&&\"function\"==typeof l?ka(Function.call,l):l;g&&((m.virtual||(m.virtual={}))[p]=l,e&pa.R&&n&&!n[p]&&Ta(n,p,l))}};pa.F=1;pa.G=2;pa.S=4;pa.P=8;pa.B=16;pa.W=32;pa.U=64;pa.R=128;var F=pa,wc=function(e,c){var a=(W.Object||{})[e]||Object[e],b={};b[e]=c(a);F(F.S+F.F*$a(function(){a(1)}),\"Object\",b)};wc(\"keys\",function(){return function(e){return ub(Object(Za(e)))}});var Wg=\nW.Object.keys,Xg=O(function(e){e.exports={\"default\":Wg,__esModule:!0}}),Ea=P(Xg),jd=Object.getOwnPropertySymbols,xc={}.propertyIsEnumerable,yc=Object.assign,Yg=!yc||$a(function(){var e={},c={},a=Symbol();e[a]=7;\"abcdefghijklmnopqrst\".split(\"\").forEach(function(a){c[a]=a});return 7!=yc({},e)[a]||\"abcdefghijklmnopqrst\"!=Object.keys(yc({},c)).join(\"\")})?function(e,c){for(var a=Object(Za(e)),b=arguments.length,d=1,f=jd,g=xc;b>d;)for(var k=gd(arguments[d++]),h=f?ub(k).concat(f(k)):ub(k),m=h.length,n=0,\np;m>n;)g.call(k,p=h[n++])&&(a[p]=k[p]);return a}:yc;F(F.S+F.F,\"Object\",{assign:Yg});var Zg=W.Object.assign,$g=O(function(e){e.exports={\"default\":Zg,__esModule:!0}}),T=P($g),Fe=id(\"IE_PROTO\"),ah=Object.prototype,Ge=Object.getPrototypeOf||function(e){e=Object(Za(e));return X(e,Fe)?e[Fe]:\"function\"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?ah:null};wc(\"getPrototypeOf\",function(){return function(e){return Ge(Object(Za(e)))}});var bh=W.Object.getPrototypeOf,\nRb=O(function(e){e.exports={\"default\":bh,__esModule:!0}}),N=P(Rb),ch=O(function(e,c){c.__esModule=!0;c.default=function(a,b){if(!(a instanceof b))throw new TypeError(\"Cannot call a class as a function\");}}),H=P(ch);F(F.S+F.F*!Ca,\"Object\",{defineProperty:ya.f});var dh=W.Object,eh=function(e,c,a){return dh.defineProperty(e,c,a)},Ua=O(function(e){e.exports={\"default\":eh,__esModule:!0}}),ea=P(Ua),fh=O(function(e,c){c.__esModule=!0;var a=Ua&&Ua.__esModule?Ua:{default:Ua};c.default=function(){function b(b,\nc){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1;f.configurable=!0;\"value\"in f&&(f.writable=!0);(0,a.default)(b,f.key,f)}}return function(a,c,g){c&&b(a.prototype,c);g&&b(a,g);return a}}()}),L=P(fh),Oa={},gh=Ca?Object.defineProperties:function(e,c){qa(e);for(var a=ub(c),b=a.length,d=0,f;b>d;)ya.f(e,f=a[d++],c[f]);return e},He=K.document,kd=He&&He.documentElement,hh=id(\"IE_PROTO\"),ld=function(){},zc=function(){var e=vc?vb.createElement(\"iframe\"):{},c=uc.length;e.style.display=\n\"none\";kd.appendChild(e);e.src=\"javascript:\";e=e.contentWindow.document;e.open();e.write(\"<script>document.F=Object\\x3c/script>\");e.close();for(zc=e.F;c--;)delete zc.prototype[uc[c]];return zc()},bb=Object.create||function(e,c){if(null!==e){ld.prototype=qa(e);var a=new ld;ld.prototype=null;a[hh]=e}else a=zc();return void 0===c?a:gh(a,c)},ia=O(function(e){var c=Pb(\"wks\"),a=K.Symbol,b=\"function\"==typeof a;(e.exports=function(d){return c[d]||(c[d]=b&&a[d]||(b?a:tc)(\"Symbol.\"+d))}).store=c}),ih=ya.f,\nIe=ia(\"toStringTag\"),kb=function(e,c,a){e&&!X(e=a?e:e.prototype,Ie)&&ih(e,Ie,{configurable:!0,value:c})},Je={};Ta(Je,ia(\"iterator\"),function(){return this});var jh=function(e,c,a){e.prototype=bb(Je,{next:ab(1,a)});kb(e,c+\" Iterator\")},md=ia(\"iterator\"),nd=!([].keys&&\"next\"in[].keys()),kh=function(){return this},od=function(e,c,a,b,d,f,g){jh(a,c,b);b=function(b){return!nd&&b in n?n[b]:function(){return new a(this,b)}};var k=c+\" Iterator\",h=\"values\"==d,m=!1,n=e.prototype,p=n[md]||n[\"@@iterator\"]||d&&\nn[d],l=p||b(d),q=d?h?b(\"entries\"):l:void 0,r=\"Array\"==c?n.entries||p:p,u;r&&(e=Ge(r.call(new e)),e!==Object.prototype&&e.next&&kb(e,k,!0));h&&p&&\"values\"!==p.name&&(m=!0,l=function(){return p.call(this)});g&&(nd||m||!n[md])&&Ta(n,md,l);Oa[c]=l;Oa[k]=kh;if(d){var z={values:h?l:b(\"values\"),keys:f?l:b(\"keys\"),entries:q};if(g)for(u in z)u in n||Ta(n,u,z[u]);else F(F.P+F.F*(nd||m),c,z)}return z},lh=function(e){return function(c,a){c=String(Za(c));a=hd(a);var b=c.length,d;if(0>a||a>=b)return e?\"\":void 0;\nvar f=c.charCodeAt(a);return 55296>f||56319<f||a+1===b||56320>(d=c.charCodeAt(a+1))||57343<d?e?c.charAt(a):f:e?c.slice(a,a+2):(f-55296<<10)+(d-56320)+65536}}(!0);od(String,\"String\",function(e){this._t=String(e);this._i=0},function(){var e=this._t,c=this._i;if(c>=e.length)return{value:void 0,done:!0};e=lh(e,c);this._i+=e.length;return{value:e,done:!1}});var cb=function(e,c){return{value:c,done:!!e}};od(Array,\"Array\",function(e,c){this._t=Na(e);this._i=0;this._k=c},function(){var e=this._t,c=this._k,\na=this._i++;return!e||a>=e.length?(this._t=void 0,cb(1)):\"keys\"==c?cb(0,a):\"values\"==c?cb(0,e[a]):cb(0,[a,e[a]])},\"values\");Oa.Arguments=Oa.Array;for(var Ke=ia(\"toStringTag\"),Le=\"CSSRuleList CSSStyleDeclaration CSSValueList ClientRectList DOMRectList DOMStringList DOMTokenList DataTransferItemList FileList HTMLAllCollection HTMLCollection HTMLFormElement HTMLSelectElement MediaList MimeTypeArray NamedNodeMap NodeList PaintRequestList Plugin PluginArray SVGLengthList SVGNumberList SVGPathSegList SVGPointList SVGStringList SVGTransformList SourceBufferList StyleSheetList TextTrackCueList TextTrackList TouchList\".split(\" \"),\npd=0;pd<Le.length;pd++){var qd=Le[pd],Me=K[qd],rd=Me&&Me.prototype;rd&&!rd[Ke]&&Ta(rd,Ke,qd);Oa[qd]=Oa.Array}var Ac={f:ia},mh=Ac.f(\"iterator\"),Sb=O(function(e){e.exports={\"default\":mh,__esModule:!0}});P(Sb);var Bc=O(function(e){var c=tc(\"meta\"),a=ya.f,b=0,d=Object.isExtensible||function(){return!0},f=!$a(function(){return d(Object.preventExtensions({}))}),g=function(d){a(d,c,{value:{i:\"O\"+ ++b,w:{}}})},k=e.exports={KEY:c,NEED:!1,fastKey:function(a,b){if(!oa(a))return\"symbol\"==typeof a?a:(\"string\"==\ntypeof a?\"S\":\"P\")+a;if(!X(a,c)){if(!d(a))return\"F\";if(!b)return\"E\";g(a)}return a[c].i},getWeak:function(a,b){if(!X(a,c)){if(!d(a))return!0;if(!b)return!1;g(a)}return a[c].w},onFreeze:function(a){f&&k.NEED&&d(a)&&!X(a,c)&&g(a);return a}}}),nh=ya.f,sd=function(e){var c=W.Symbol||(W.Symbol={});\"_\"==e.charAt(0)||e in c||nh(c,e,{value:Ac.f(e)})},td=Array.isArray||function(e){return\"Array\"==jb(e)},oh=uc.concat(\"length\",\"prototype\"),Ne=Object.getOwnPropertyNames||function(e){return De(e,oh)},Oe=Ne,ph={}.toString,\nPe=\"object\"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Qe=function(e){if(Pe&&\"[object Window]\"==ph.call(e))try{var c=Oe(e)}catch(a){c=Pe.slice()}else c=Oe(Na(e));return c},Re=Object.getOwnPropertyDescriptor,Cc={f:Ca?Re:function(e,c){e=Na(e);c=Qb(c,!0);if(Ee)try{return Re(e,c)}catch(a){}if(X(e,c))return ab(!xc.call(e,c),e[c])}},qh=Bc.KEY,Se=Cc.f,lb=ya.f,Te=Qe,ta=K.Symbol,Dc=K.JSON,Ec=Dc&&Dc.stringify,ua=ia(\"_hidden\"),Ue=ia(\"toPrimitive\"),rh={}.propertyIsEnumerable,\nTb=Pb(\"symbol-registry\"),Va=Pb(\"symbols\"),Ub=Pb(\"op-symbols\"),Ga=Object.prototype,wb=\"function\"==typeof ta,ud=K.QObject,vd=!ud||!ud.prototype||!ud.prototype.findChild,wd=Ca&&$a(function(){return 7!=bb(lb({},\"a\",{get:function(){return lb(this,\"a\",{value:7}).a}})).a})?function(e,c,a){var b=Se(Ga,c);b&&delete Ga[c];lb(e,c,a);b&&e!==Ga&&lb(Ga,c,b)}:lb,Ve=function(e){var c=Va[e]=bb(ta.prototype);c._k=e;return c},xd=wb&&\"symbol\"==typeof ta.iterator?function(e){return\"symbol\"==typeof e}:function(e){return e instanceof\nta},Fc=function(e,c,a){e===Ga&&Fc(Ub,c,a);qa(e);c=Qb(c,!0);qa(a);return X(Va,c)?(a.enumerable?(X(e,ua)&&e[ua][c]&&(e[ua][c]=!1),a=bb(a,{enumerable:ab(0,!1)})):(X(e,ua)||lb(e,ua,ab(1,{})),e[ua][c]=!0),wd(e,c,a)):lb(e,c,a)},We=function(e,c){qa(e);var a=c=Na(c),b=ub(a),d=jd;if(d){d=d(a);for(var f=xc,g=0,k;d.length>g;)f.call(a,k=d[g++])&&b.push(k)}a=0;k=b.length;for(var h;k>a;)Fc(e,h=b[a++],c[h]);return e},sh=function(e){var c=rh.call(this,e=Qb(e,!0));return this===Ga&&X(Va,e)&&!X(Ub,e)?!1:c||!X(this,\ne)||!X(Va,e)||X(this,ua)&&this[ua][e]?c:!0},Xe=function(e,c){e=Na(e);c=Qb(c,!0);if(e!==Ga||!X(Va,c)||X(Ub,c)){var a=Se(e,c);!a||!X(Va,c)||X(e,ua)&&e[ua][c]||(a.enumerable=!0);return a}},Ye=function(e){e=Te(Na(e));for(var c=[],a=0,b;e.length>a;)X(Va,b=e[a++])||b==ua||b==qh||c.push(b);return c},Ze=function(e){var c=e===Ga;e=Te(c?Ub:Na(e));for(var a=[],b=0,d;e.length>b;)X(Va,d=e[b++])&&(c?X(Ga,d):1)&&a.push(Va[d]);return a};wb||(ta=function(){if(this instanceof ta)throw TypeError(\"Symbol is not a constructor!\");\nvar e=tc(0<arguments.length?arguments[0]:void 0),c=function(a){this===Ga&&c.call(Ub,a);X(this,ua)&&X(this[ua],e)&&(this[ua][e]=!1);wd(this,e,ab(1,a))};Ca&&vd&&wd(Ga,e,{configurable:!0,set:c});return Ve(e)},Ta(ta.prototype,\"toString\",function(){return this._k}),Cc.f=Xe,ya.f=Fc,Ne=Qe=Ye,xc=sh,jd=Ze,Ac.f=function(e){return Ve(ia(e))});F(F.G+F.W+F.F*!wb,{Symbol:ta});for(var $e=\"hasInstance isConcatSpreadable iterator match replace search species split toPrimitive toStringTag unscopables\".split(\" \"),af=\n0;$e.length>af;)ia($e[af++]);for(var bf=ub(ia.store),cf=0;bf.length>cf;)sd(bf[cf++]);F(F.S+F.F*!wb,\"Symbol\",{\"for\":function(e){return X(Tb,e+=\"\")?Tb[e]:Tb[e]=ta(e)},keyFor:function(e){if(!xd(e))throw TypeError(e+\" is not a symbol!\");for(var c in Tb)if(Tb[c]===e)return c},useSetter:function(){vd=!0},useSimple:function(){vd=!1}});F(F.S+F.F*!wb,\"Object\",{create:function(e,c){return void 0===c?bb(e):We(bb(e),c)},defineProperty:Fc,defineProperties:We,getOwnPropertyDescriptor:Xe,getOwnPropertyNames:Ye,\ngetOwnPropertySymbols:Ze});Dc&&F(F.S+F.F*(!wb||$a(function(){var e=ta();return\"[null]\"!=Ec([e])||\"{}\"!=Ec({a:e})||\"{}\"!=Ec(Object(e))})),\"JSON\",{stringify:function(e){for(var c=[e],a=1,b;arguments.length>a;)c.push(arguments[a++]);b=a=c[1];if((oa(a)||void 0!==e)&&!xd(e))return td(a)||(a=function(a,c){\"function\"==typeof b&&(c=b.call(this,a,c));if(!xd(c))return c}),c[1]=a,Ec.apply(Dc,c)}});ta.prototype[Ue]||Ta(ta.prototype,Ue,ta.prototype.valueOf);kb(ta,\"Symbol\");kb(Math,\"Math\",!0);kb(K.JSON,\"JSON\",\n!0);sd(\"asyncIterator\");sd(\"observable\");var th=W.Symbol,Vb=O(function(e){e.exports={\"default\":th,__esModule:!0}}),df=P(Vb),xb=O(function(e,c){c.__esModule=!0;e=Sb&&Sb.__esModule?Sb:{default:Sb};var a=Vb&&Vb.__esModule?Vb:{default:Vb},b=\"function\"===typeof a.default&&\"symbol\"===typeof e.default?function(a){return typeof a}:function(b){return b&&\"function\"===typeof a.default&&b.constructor===a.default&&b!==a.default.prototype?\"symbol\":typeof b};c.default=\"function\"===typeof a.default&&\"symbol\"===b(e.default)?\nfunction(a){return\"undefined\"===typeof a?\"undefined\":b(a)}:function(d){return d&&\"function\"===typeof a.default&&d.constructor===a.default&&d!==a.default.prototype?\"symbol\":\"undefined\"===typeof d?\"undefined\":b(d)}}),qb=P(xb),uh=O(function(e,c){c.__esModule=!0;var a=xb&&xb.__esModule?xb:{default:xb};c.default=function(b,d){if(!b)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!d||\"object\"!==(\"undefined\"===typeof d?\"undefined\":(0,a.default)(d))&&\"function\"!==\ntypeof d?b:d}}),Q=P(uh),vh=Cc.f;wc(\"getOwnPropertyDescriptor\",function(){return function(e,c){return vh(Na(e),c)}});var wh=W.Object,xh=function(e,c){return wh.getOwnPropertyDescriptor(e,c)},Wb=O(function(e){e.exports={\"default\":xh,__esModule:!0}}),ba=P(Wb),yh=O(function(e,c){c.__esModule=!0;var a=Rb&&Rb.__esModule?Rb:{default:Rb},b=Wb&&Wb.__esModule?Wb:{default:Wb};c.default=function h(c,g,k){null===c&&(c=Function.prototype);var f=(0,b.default)(c,g);if(void 0===f){if(c=(0,a.default)(c),null!==c)return h(c,\ng,k)}else{if(\"value\"in f)return f.value;g=f.get;return void 0===g?void 0:g.call(k)}}}),Wa=P(yh),zh=Object.setPrototypeOf||(\"__proto__\"in{}?function(e,c,a){try{a=ka(Function.call,Cc.f(Object.prototype,\"__proto__\").set,2),a(e,[]),c=!(e instanceof Array)}catch(b){c=!0}return function(b,d){qa(b);if(!oa(d)&&null!==d)throw TypeError(d+\": can't set as prototype!\");c?b.__proto__=d:a(b,d);return b}}({},!1):void 0);F(F.S,\"Object\",{setPrototypeOf:zh});var Ah=W.Object.setPrototypeOf,ef=O(function(e){e.exports=\n{\"default\":Ah,__esModule:!0}});P(ef);F(F.S,\"Object\",{create:bb});var Bh=W.Object,Ch=function(e,c){return Bh.create(e,c)},ff=O(function(e){e.exports={\"default\":Ch,__esModule:!0}}),Dh=P(ff),Eh=O(function(e,c){function a(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var b=a(ef),d=a(ff),f=a(xb);c.default=function(a,c){if(\"function\"!==typeof c&&null!==c)throw new TypeError(\"Super expression must either be null or a function, not \"+(\"undefined\"===typeof c?\"undefined\":(0,f.default)(c)));a.prototype=\n(0,d.default)(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(b.default?(0,b.default)(a,c):a.__proto__=c)}}),R=P(Eh),Fh=ia(\"toStringTag\"),Gh=\"Arguments\"==jb(function(){return arguments}()),Gc=function(e){var c;if(void 0===e)var a=\"Undefined\";else{if(null===e)var b=\"Null\";else{a:{var d=e=Object(e);try{b=d[Fh];break a}catch(f){}b=void 0}b=\"string\"==typeof(a=b)?a:Gh?jb(e):\"Object\"==(c=jb(e))&&\"function\"==typeof e.callee?\"Arguments\":c}a=b}return a},Hh=ia(\"iterator\"),\nIh=W.isIterable=function(e){e=Object(e);return void 0!==e[Hh]||\"@@iterator\"in e||Oa.hasOwnProperty(Gc(e))},Xb=O(function(e){e.exports={\"default\":Ih,__esModule:!0}});P(Xb);var Jh=ia(\"iterator\"),yd=W.getIteratorMethod=function(e){if(void 0!=e)return e[Jh]||e[\"@@iterator\"]||Oa[Gc(e)]},Kh=W.getIterator=function(e){var c=yd(e);if(\"function\"!=typeof c)throw TypeError(e+\" is not iterable!\");return qa(c.call(e))},Yb=O(function(e){e.exports={\"default\":Kh,__esModule:!0}}),ed=P(Yb),Lh=O(function(e,c){c.__esModule=\n!0;var a=Xb&&Xb.__esModule?Xb:{default:Xb},b=Yb&&Yb.__esModule?Yb:{default:Yb};c.default=function(){return function(d,c){if(Array.isArray(d))return d;if((0,a.default)(Object(d))){var g=[],f=!0,h=!1,e=void 0;try{for(var n=(0,b.default)(d),p;!(f=(p=n.next()).done)&&(g.push(p.value),!c||g.length!==c);f=!0);}catch(l){h=!0,e=l}finally{try{if(!f&&n[\"return\"])n[\"return\"]()}finally{if(h)throw e;}}return g}throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");}}()}),db=P(Lh),gf=function(e,\nc,a,b){try{return b?c(qa(a)[0],a[1]):c(a)}catch(d){throw c=e[\"return\"],void 0!==c&&qa(c.call(e)),d;}},hf=ia(\"iterator\"),jf=Array.prototype,zd=ia(\"iterator\"),kf=!1;try{[7][zd]()[\"return\"]=function(){kf=!0}}catch(e){}var lf=function(e,c){if(!c&&!kf)return!1;var a=!1;try{c=[7];var b=c[zd]();b.next=function(){return{done:a=!0}};c[zd]=function(){return b};e(c)}catch(d){}return a};F(F.S+F.F*!lf(function(e){}),\"Array\",{from:function(e){var c=Object(Za(e)),a=\"function\"==typeof this?this:Array,b=arguments.length,\nd=1<b?arguments[1]:void 0,f=void 0!==d,g=0,k=yd(c),h;f&&(d=ka(d,2<b?arguments[2]:void 0,2));if(void 0!=k&&(a!=Array||void 0===k||Oa.Array!==k&&jf[hf]!==k))for(c=k.call(c),a=new a;!(h=c.next()).done;g++)b=a,k=g,h=f?gf(c,d,[h.value,g],!0):h.value,k in b?ya.f(b,k,ab(0,h)):b[k]=h;else for(b=sc(c.length),a=new a(b);b>g;g++){k=a;h=g;var m=f?d(c[g],g):c[g];h in k?ya.f(k,h,ab(0,m)):k[h]=m}a.length=g;return a}});var Mh=W.Array.from,Zb=O(function(e){e.exports={\"default\":Mh,__esModule:!0}}),Nh=P(Zb),Oh=O(function(e,\nc){c.__esModule=!0;var a=Zb&&Zb.__esModule?Zb:{default:Zb};c.default=function(b){if(Array.isArray(b)){for(var d=0,c=Array(b.length);d<b.length;d++)c[d]=b[d];return c}return(0,a.default)(b)}}),ca=P(Oh),Ph=Bc.onFreeze;wc(\"freeze\",function(e){return function(c){return e&&oa(c)?e(Ph(c)):c}});var Qh=W.Object.freeze,Rh=O(function(e){e.exports={\"default\":Qh,__esModule:!0}}),Zd=P(Rh),mf=W.JSON||(W.JSON={stringify:JSON.stringify}),Sh=function(e){return mf.stringify.apply(mf,arguments)},Th=O(function(e){e.exports=\n{\"default\":Sh,__esModule:!0}}),og=P(Th),Ha={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,\n0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,\n105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,\n252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,\n0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,\n69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],\nsilver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},$b=O(function(e){var c=Array.prototype.concat,a=Array.prototype.slice,b=e.exports=function(b){for(var d=\n[],g=0,k=b.length;g<k;g++){var h=b[g];var e=(e=h)&&\"string\"!==typeof e?e instanceof Array||Array.isArray(e)||0<=e.length&&(e.splice instanceof Function||ba(e,e.length-1)&&\"String\"!==e.constructor.name):!1;e?d=c.call(d,a.call(h)):d.push(h)}return d};b.wrap=function(a){return function(){return a(b(arguments))}}}),Hb=O(function(e){function c(a,b,d){return Math.min(Math.max(b,a),d)}function a(a){a=a.toString(16).toUpperCase();return 2>a.length?\"0\"+a:a}var b={},d;for(d in Ha)Ha.hasOwnProperty(d)&&(b[Ha[d]]=\nd);var f=e.exports={to:{},get:{}};f.get=function(a){switch(a.substring(0,3).toLowerCase()){case \"hsl\":a=f.get.hsl(a);var b=\"hsl\";break;case \"hwb\":a=f.get.hwb(a);b=\"hwb\";break;default:a=f.get.rgb(a),b=\"rgb\"}return a?{model:b,value:a}:null};f.get.rgb=function(a){if(!a)return null;var b=/^#([a-f0-9]{3,4})$/i,d=/^rgba?\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/,g=/^rgba?\\(\\s*([+-]?[\\d\\.]+)%\\s*,\\s*([+-]?[\\d\\.]+)%\\s*,\\s*([+-]?[\\d\\.]+)%\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/,\nf=/(\\D+)/,e=[0,0,0,1],l;if(l=a.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){b=l[2];l=l[1];for(a=0;3>a;a++)d=2*a,e[a]=parseInt(l.slice(d,d+2),16);b&&(e[3]=Math.round(parseInt(b,16)/255*100)/100)}else if(l=a.match(b)){l=l[1];b=l[3];for(a=0;3>a;a++)e[a]=parseInt(l[a]+l[a],16);b&&(e[3]=Math.round(parseInt(b+b,16)/255*100)/100)}else if(l=a.match(d)){for(a=0;3>a;a++)e[a]=parseInt(l[a+1],0);l[4]&&(e[3]=parseFloat(l[4]))}else if(l=a.match(g)){for(a=0;3>a;a++)e[a]=Math.round(2.55*parseFloat(l[a+1]));l[4]&&(e[3]=\nparseFloat(l[4]))}else{if(l=a.match(f)){if(\"transparent\"===l[1])return[0,0,0,0];e=Ha[l[1]];if(!e)return null;e[3]=1;return e}return null}for(a=0;3>a;a++)e[a]=c(e[a],0,255);e[3]=c(e[3],0,1);return e};f.get.hsl=function(a){if(!a)return null;var b=a.match(/^hsla?\\(\\s*([+-]?(?:\\d*\\.)?\\d+)(?:deg)?\\s*,\\s*([+-]?[\\d\\.]+)%\\s*,\\s*([+-]?[\\d\\.]+)%\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/);if(b){var d=parseFloat(b[4]);a=(parseFloat(b[1])+360)%360;var g=c(parseFloat(b[2]),0,100);b=c(parseFloat(b[3]),0,100);d=c(isNaN(d)?\n1:d,0,1);return[a,g,b,d]}return null};f.get.hwb=function(a){if(!a)return null;var b=a.match(/^hwb\\(\\s*([+-]?\\d*[\\.]?\\d+)(?:deg)?\\s*,\\s*([+-]?[\\d\\.]+)%\\s*,\\s*([+-]?[\\d\\.]+)%\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/);if(b){var d=parseFloat(b[4]);a=(parseFloat(b[1])%360+360)%360;var g=c(parseFloat(b[2]),0,100);b=c(parseFloat(b[3]),0,100);d=c(isNaN(d)?1:d,0,1);return[a,g,b,d]}return null};f.to.hex=function(){var b=$b(arguments);return\"#\"+a(b[0])+a(b[1])+a(b[2])+(1>b[3]?a(Math.round(255*b[3])):\"\")};f.to.rgb=function(){var a=\n$b(arguments);return 4>a.length||1===a[3]?\"rgb(\"+Math.round(a[0])+\", \"+Math.round(a[1])+\", \"+Math.round(a[2])+\")\":\"rgba(\"+Math.round(a[0])+\", \"+Math.round(a[1])+\", \"+Math.round(a[2])+\", \"+a[3]+\")\"};f.to.rgb.percent=function(){var a=$b(arguments),b=Math.round(a[0]/255*100),d=Math.round(a[1]/255*100),c=Math.round(a[2]/255*100);return 4>a.length||1===a[3]?\"rgb(\"+b+\"%, \"+d+\"%, \"+c+\"%)\":\"rgba(\"+b+\"%, \"+d+\"%, \"+c+\"%, \"+a[3]+\")\"};f.to.hsl=function(){var a=$b(arguments);return 4>a.length||1===a[3]?\"hsl(\"+\na[0]+\", \"+a[1]+\"%, \"+a[2]+\"%)\":\"hsla(\"+a[0]+\", \"+a[1]+\"%, \"+a[2]+\"%, \"+a[3]+\")\"};f.to.hwb=function(){var a=$b(arguments),b=\"\";4<=a.length&&1!==a[3]&&(b=\", \"+a[3]);return\"hwb(\"+a[0]+\", \"+a[1]+\"%, \"+a[2]+\"%\"+b+\")\"};f.to.keyword=function(a){return b[a.slice(0,3)]}}),mb=O(function(e){var c={};for(d in Ha)Ha.hasOwnProperty(d)&&(c[Ha[d]]=d);var a=e.exports={rgb:{channels:3,labels:\"rgb\"},hsl:{channels:3,labels:\"hsl\"},hsv:{channels:3,labels:\"hsv\"},hwb:{channels:3,labels:\"hwb\"},cmyk:{channels:4,labels:\"cmyk\"},\nxyz:{channels:3,labels:\"xyz\"},lab:{channels:3,labels:\"lab\"},lch:{channels:3,labels:\"lch\"},hex:{channels:1,labels:[\"hex\"]},keyword:{channels:1,labels:[\"keyword\"]},ansi16:{channels:1,labels:[\"ansi16\"]},ansi256:{channels:1,labels:[\"ansi256\"]},hcg:{channels:3,labels:[\"h\",\"c\",\"g\"]},apple:{channels:3,labels:[\"r16\",\"g16\",\"b16\"]},gray:{channels:1,labels:[\"gray\"]}},b;for(b in a)if(a.hasOwnProperty(b)){if(!(\"channels\"in a[b]))throw Error(\"missing channels property: \"+b);if(!(\"labels\"in a[b]))throw Error(\"missing channel labels property: \"+\nb);if(a[b].labels.length!==a[b].channels)throw Error(\"channel and label counts mismatch: \"+b);e=a[b].channels;var d=a[b].labels;delete a[b].channels;delete a[b].labels;Object.defineProperty(a[b],\"channels\",{value:e});Object.defineProperty(a[b],\"labels\",{value:d})}a.rgb.hsl=function(a){var b=a[0]/255,d=a[1]/255,c=a[2]/255;a=Math.min(b,d,c);var f=Math.max(b,d,c),e=f-a,p;f===a?p=0:b===f?p=(d-c)/e:d===f?p=2+(c-b)/e:c===f&&(p=4+(b-d)/e);p=Math.min(60*p,360);0>p&&(p+=360);b=(a+f)/2;return[p,100*(f===a?\n0:.5>=b?e/(f+a):e/(2-f-a)),100*b]};a.rgb.hsv=function(a){var b,d=a[0]/255,c=a[1]/255,f=a[2]/255,e=Math.max(d,c,f);var p=e-Math.min(d,c,f);if(0===p)var l=b=0;else{b=p/e;a=(e-d)/6/p+.5;var q=(e-c)/6/p+.5;p=(e-f)/6/p+.5;d===e?l=p-q:c===e?l=1/3+a-p:f===e&&(l=2/3+q-a);0>l?l+=1:1<l&&--l}return[360*l,100*b,100*e]};a.rgb.hwb=function(b){var d=b[0],c=b[1],h=b[2];b=a.rgb.hsl(b)[0];var f=1/255*Math.min(d,Math.min(c,h));h=1-1/255*Math.max(d,Math.max(c,h));return[b,100*f,100*h]};a.rgb.cmyk=function(a){var b=a[0]/\n255,d=a[1]/255;a=a[2]/255;var c=Math.min(1-b,1-d,1-a);return[100*((1-b-c)/(1-c)||0),100*((1-d-c)/(1-c)||0),100*((1-a-c)/(1-c)||0),100*c]};a.rgb.keyword=function(a){var b=c[a];if(b)return b;b=Infinity;var d;for(d in Ha)if(Ha.hasOwnProperty(d)){var h=Ha[d];h=Math.pow(a[0]-h[0],2)+Math.pow(a[1]-h[1],2)+Math.pow(a[2]-h[2],2);if(h<b){b=h;var f=d}}return f};a.keyword.rgb=function(a){return Ha[a]};a.rgb.xyz=function(a){var b=a[0]/255,d=a[1]/255;a=a[2]/255;b=.04045<b?Math.pow((b+.055)/1.055,2.4):b/12.92;\nd=.04045<d?Math.pow((d+.055)/1.055,2.4):d/12.92;a=.04045<a?Math.pow((a+.055)/1.055,2.4):a/12.92;return[100*(.4124*b+.3576*d+.1805*a),100*(.2126*b+.7152*d+.0722*a),100*(.0193*b+.1192*d+.9505*a)]};a.rgb.lab=function(b){var d=a.rgb.xyz(b);b=d[0];var c=d[1];d=d[2];b/=95.047;c/=100;d/=108.883;b=.008856<b?Math.pow(b,1/3):7.787*b+16/116;c=.008856<c?Math.pow(c,1/3):7.787*c+16/116;d=.008856<d?Math.pow(d,1/3):7.787*d+16/116;return[116*c-16,500*(b-c),200*(c-d)]};a.hsl.rgb=function(a){var b=a[0]/360,d=a[1]/100;\na=a[2]/100;if(0===d){var c=255*a;return[c,c,c]}d=.5>a?a*(1+d):a+d-a*d;a=2*a-d;var f=[0,0,0];for(var e=0;3>e;e++)c=b+1/3*-(e-1),0>c&&c++,1<c&&c--,c=1>6*c?a+6*(d-a)*c:1>2*c?d:2>3*c?a+(d-a)*(2/3-c)*6:a,f[e]=255*c;return f};a.hsl.hsv=function(a){var b=a[0],d=a[1]/100;a=a[2]/100;var c=d,f=Math.max(a,.01);a*=2;d*=1>=a?a:2-a;c*=1>=f?f:2-f;return[b,100*(0===a?2*c/(f+c):2*d/(a+d)),(a+d)/2*100]};a.hsv.rgb=function(a){var b=a[0]/60,d=a[1]/100;a=a[2]/100;var c=Math.floor(b)%6,f=b-Math.floor(b);b=255*a*(1-d);\nvar e=255*a*(1-d*f);d=255*a*(1-d*(1-f));a*=255;switch(c){case 0:return[a,d,b];case 1:return[e,a,b];case 2:return[b,a,d];case 3:return[b,e,a];case 4:return[d,b,a];case 5:return[a,b,e]}};a.hsv.hsl=function(a){var b=a[0],d=a[1]/100;a=a[2]/100;var c=Math.max(a,.01);var f=(2-d)*c;c=d*c/(1>=f?f:2-f)||0;return[b,100*c,(2-d)*a/2*100]};a.hwb.rgb=function(a){var b=a[0]/360,d=a[1]/100;a=a[2]/100;var c=d+a;1<c&&(d/=c,a/=c);c=Math.floor(6*b);a=1-a;b=6*b-c;0!==(c&1)&&(b=1-b);b=d+b*(a-d);switch(c){default:case 6:case 0:c=\na;var f=b;break;case 1:c=b;f=a;break;case 2:c=d;f=a;d=b;break;case 3:c=d;f=b;d=a;break;case 4:c=b;f=d;d=a;break;case 5:c=a,f=d,d=b}return[255*c,255*f,255*d]};a.cmyk.rgb=function(a){var b=a[3]/100;return[255*(1-Math.min(1,a[0]/100*(1-b)+b)),255*(1-Math.min(1,a[1]/100*(1-b)+b)),255*(1-Math.min(1,a[2]/100*(1-b)+b))]};a.xyz.rgb=function(a){var b=a[0]/100,d=a[1]/100,c=a[2]/100;a=3.2406*b+-1.5372*d+-.4986*c;var f=-.9689*b+1.8758*d+.0415*c;b=.0557*b+-.204*d+1.057*c;a=.0031308<a?1.055*Math.pow(a,1/2.4)-.055:\n12.92*a;f=.0031308<f?1.055*Math.pow(f,1/2.4)-.055:12.92*f;b=.0031308<b?1.055*Math.pow(b,1/2.4)-.055:12.92*b;a=Math.min(Math.max(0,a),1);f=Math.min(Math.max(0,f),1);b=Math.min(Math.max(0,b),1);return[255*a,255*f,255*b]};a.xyz.lab=function(a){var b=a[0],d=a[1];a=a[2];b/=95.047;d/=100;a/=108.883;b=.008856<b?Math.pow(b,1/3):7.787*b+16/116;d=.008856<d?Math.pow(d,1/3):7.787*d+16/116;a=.008856<a?Math.pow(a,1/3):7.787*a+16/116;return[116*d-16,500*(b-d),200*(d-a)]};a.lab.xyz=function(a){var b=a[1],d=a[2];\na=(a[0]+16)/116;b=b/500+a;d=a-d/200;var c=Math.pow(a,3),f=Math.pow(b,3),e=Math.pow(d,3);return[95.047*(.008856<f?f:(b-16/116)/7.787),100*(.008856<c?c:(a-16/116)/7.787),108.883*(.008856<e?e:(d-16/116)/7.787)]};a.lab.lch=function(a){var b=a[0],d=a[1];a=a[2];var c=360*Math.atan2(a,d)/2/Math.PI;0>c&&(c+=360);return[b,Math.sqrt(d*d+a*a),c]};a.lch.lab=function(a){var b=a[0],d=a[1];a=a[2]/360*2*Math.PI;return[b,d*Math.cos(a),d*Math.sin(a)]};a.rgb.ansi16=function(b){var d=b[0],c=b[1],h=b[2],e=1 in arguments?\narguments[1]:a.rgb.hsv(b)[2];e=Math.round(e/50);if(0===e)return 30;d=30+(Math.round(h/255)<<2|Math.round(c/255)<<1|Math.round(d/255));2===e&&(d+=60);return d};a.hsv.ansi16=function(b){return a.rgb.ansi16(a.hsv.rgb(b),b[2])};a.rgb.ansi256=function(a){var b=a[0],d=a[1];a=a[2];return b===d&&d===a?8>b?16:248<b?231:Math.round((b-8)/247*24)+232:16+36*Math.round(b/255*5)+6*Math.round(d/255*5)+Math.round(a/255*5)};a.ansi16.rgb=function(a){var b=a%10;if(0===b||7===b)return 50<a&&(b+=3.5),b=b/10.5*255,[b,b,\nb];a=.5*(~~(50<a)+1);return[(b&1)*a*255,(b>>1&1)*a*255,(b>>2&1)*a*255]};a.ansi256.rgb=function(a){if(232<=a){var b=10*(a-232)+8;return[b,b,b]}a-=16;b=Math.floor(a/36)/5*255;var d=Math.floor((a%=36)/6)/5*255;return[b,d,a%6/5*255]};a.rgb.hex=function(a){a=(((Math.round(a[0])&255)<<16)+((Math.round(a[1])&255)<<8)+(Math.round(a[2])&255)).toString(16).toUpperCase();return\"000000\".substring(a.length)+a};a.hex.rgb=function(a){a=a.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!a)return[0,0,0];var b=a[0];\n3===a[0].length&&(b=b.split(\"\").map(function(a){return a+a}).join(\"\"));a=parseInt(b,16);return[a>>16&255,a>>8&255,a&255]};a.rgb.hcg=function(a){var b=a[0]/255,d=a[1]/255;a=a[2]/255;var c=Math.max(Math.max(b,d),a),e=Math.min(Math.min(b,d),a),f=c-e;return[(0>=f?0:c===b?(d-a)/f%6:c===d?2+(a-b)/f:(b-d)/f+8)/6%1*360,100*f,100*(1>f?e/(1-f):0)]};a.hsl.hcg=function(a){var b=a[1]/100,d=a[2]/100,c=0;b=.5>d?2*b*d:2*b*(1-d);1>b&&(c=(d-.5*b)/(1-b));return[a[0],100*b,100*c]};a.hsv.hcg=function(a){var b=a[2]/100,\nd=a[1]/100*b,c=0;1>d&&(c=(b-d)/(1-d));return[a[0],100*d,100*c]};a.hcg.rgb=function(a){var b=a[1]/100,d=a[2]/100;if(0===b)return[255*d,255*d,255*d];var c=[0,0,0];a=a[0]/360%1*6;var e=a%1,f=1-e;switch(Math.floor(a)){case 0:c[0]=1;c[1]=e;c[2]=0;break;case 1:c[0]=f;c[1]=1;c[2]=0;break;case 2:c[0]=0;c[1]=1;c[2]=e;break;case 3:c[0]=0;c[1]=f;c[2]=1;break;case 4:c[0]=e;c[1]=0;c[2]=1;break;default:c[0]=1,c[1]=0,c[2]=f}d*=1-b;return[255*(b*c[0]+d),255*(b*c[1]+d),255*(b*c[2]+d)]};a.hcg.hsv=function(a){var b=\na[1]/100,d=b+a[2]/100*(1-b),c=0;0<d&&(c=b/d);return[a[0],100*c,100*d]};a.hcg.hsl=function(a){var b=a[1]/100,d=a[2]/100*(1-b)+.5*b,c=0;0<d&&.5>d?c=b/(2*d):.5<=d&&1>d&&(c=b/(2*(1-d)));return[a[0],100*c,100*d]};a.hcg.hwb=function(a){var b=a[1]/100,d=b+a[2]/100*(1-b);return[a[0],100*(d-b),100*(1-d)]};a.hwb.hcg=function(a){var b=1-a[2]/100,d=b-a[1]/100,c=0;1>d&&(c=(b-d)/(1-d));return[a[0],100*d,100*c]};a.apple.rgb=function(a){return[a[0]/65535*255,a[1]/65535*255,a[2]/65535*255]};a.rgb.apple=function(a){return[a[0]/\n255*65535,a[1]/255*65535,a[2]/255*65535]};a.gray.rgb=function(a){return[a[0]/100*255,a[0]/100*255,a[0]/100*255]};a.gray.hsl=a.gray.hsv=function(a){return[0,0,a[0]]};a.gray.hwb=function(a){return[0,100,a[0]]};a.gray.cmyk=function(a){return[0,0,0,a[0]]};a.gray.lab=function(a){return[a[0],0,0]};a.gray.hex=function(a){a=Math.round(a[0]/100*255)&255;a=((a<<16)+(a<<8)+a).toString(16).toUpperCase();return\"000000\".substring(a.length)+a};a.rgb.gray=function(a){return[(a[0]+a[1]+a[2])/3/255*100]}}),Uh=function(e){for(var c=\n{},a=Ea(mb),b=a.length,d=0;d<b;d++)c[a[d]]={distance:-1,parent:null};a=[e];for(c[e].distance=0;a.length;){e=a.pop();b=Ea(mb[e]);d=b.length;for(var f=0;f<d;f++){var g=b[f],k=c[g];-1===k.distance&&(k.distance=c[e].distance+1,k.parent=e,a.unshift(g))}}a={};e=Ea(c);b=e.length;for(d=0;d<b;d++){var h=e[d];if(null!==c[h].parent){f=h;g=c;k=[g[h].parent,h];var m=mb[g[h].parent][h];for(h=g[h].parent;g[h].parent;)k.unshift(g[h].parent),m=lg(mb[g[h].parent][h],m),h=g[h].parent;m.conversion=k;a[f]=m}}return a},\nyb={};Ea(mb).forEach(function(e){yb[e]={};Object.defineProperty(yb[e],\"channels\",{value:mb[e].channels});Object.defineProperty(yb[e],\"labels\",{value:mb[e].labels});var c=Uh(e);Ea(c).forEach(function(a){var b=c[a];yb[e][a]=ng(b);yb[e][a].raw=mg(b)})});var wa=yb,Pc=[].slice,Yd=[\"keyword\",\"gray\",\"hex\"],Rc={};Ea(wa).forEach(function(e){Rc[Pc.call(wa[e].labels).sort().join(\"\")]=e});var jc={};fa.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(e){var c=\nthis.model in Hb.to?this:this.rgb();c=c.round(\"number\"===typeof e?e:1);e=1===c.valpha?c.color:c.color.concat(this.valpha);return Hb.to[c.model](e)},percentString:function(e){e=this.rgb().round(\"number\"===typeof e?e:1);e=1===e.valpha?e.color:e.color.concat(this.valpha);return Hb.to.rgb.percent(e)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var e={},c=wa[this.model].channels,a=wa[this.model].labels,b=0;b<c;b++)e[a[b]]=this.color[b];\n1!==this.valpha&&(e.alpha=this.valpha);return e},unitArray:function(){var e=this.rgb().color;e[0]/=255;e[1]/=255;e[2]/=255;1!==this.valpha&&e.push(this.valpha);return e},unitObject:function(){var e=this.rgb().object();e.r/=255;e.g/=255;e.b/=255;1!==this.valpha&&(e.alpha=this.valpha);return e},round:function(e){e=Math.max(e||0,0);return new fa(this.color.map(pg(e)).concat(this.valpha),this.model)},alpha:function(e){return arguments.length?new fa(this.color.concat(Math.max(0,Math.min(1,e))),this.model):\nthis.valpha},red:Z(\"rgb\",0,ha(255)),green:Z(\"rgb\",1,ha(255)),blue:Z(\"rgb\",2,ha(255)),hue:Z([\"hsl\",\"hsv\",\"hsl\",\"hwb\",\"hcg\"],0,function(e){return(e%360+360)%360}),saturationl:Z(\"hsl\",1,ha(100)),lightness:Z(\"hsl\",2,ha(100)),saturationv:Z(\"hsv\",1,ha(100)),value:Z(\"hsv\",2,ha(100)),chroma:Z(\"hcg\",1,ha(100)),gray:Z(\"hcg\",2,ha(100)),white:Z(\"hwb\",1,ha(100)),wblack:Z(\"hwb\",2,ha(100)),cyan:Z(\"cmyk\",0,ha(100)),magenta:Z(\"cmyk\",1,ha(100)),yellow:Z(\"cmyk\",2,ha(100)),black:Z(\"cmyk\",3,ha(100)),x:Z(\"xyz\",0,ha(100)),\ny:Z(\"xyz\",1,ha(100)),z:Z(\"xyz\",2,ha(100)),l:Z(\"lab\",0,ha(100)),a:Z(\"lab\",1),b:Z(\"lab\",2),keyword:function(e){return arguments.length?new fa(e):wa[this.model].keyword(this.color)},hex:function(e){return arguments.length?new fa(e):Hb.to.hex(this.rgb().round().color)},rgbNumber:function(){var e=this.rgb().color;return(e[0]&255)<<16|(e[1]&255)<<8|e[2]&255},luminosity:function(){for(var e=this.rgb().color,c=[],a=0;a<e.length;a++){var b=e[a]/255;c[a]=.03928>=b?b/12.92:Math.pow((b+.055)/1.055,2.4)}return.2126*\nc[0]+.7152*c[1]+.0722*c[2]},contrast:function(e){var c=this.luminosity();e=e.luminosity();return c>e?(c+.05)/(e+.05):(e+.05)/(c+.05)},level:function(e){e=this.contrast(e);return 7.1<=e?\"AAA\":4.5<=e?\"AA\":\"\"},isDark:function(){var e=this.rgb().color;return 128>(299*e[0]+587*e[1]+114*e[2])/1E3},isLight:function(){return!this.isDark()},negate:function(){for(var e=this.rgb(),c=0;3>c;c++)e.color[c]=255-e.color[c];return e},lighten:function(e){var c=this.hsl();c.color[2]+=c.color[2]*e;return c},darken:function(e){var c=\nthis.hsl();c.color[2]-=c.color[2]*e;return c},saturate:function(e){var c=this.hsl();c.color[1]+=c.color[1]*e;return c},desaturate:function(e){var c=this.hsl();c.color[1]-=c.color[1]*e;return c},whiten:function(e){var c=this.hwb();c.color[1]+=c.color[1]*e;return c},blacken:function(e){var c=this.hwb();c.color[2]+=c.color[2]*e;return c},grayscale:function(){var e=this.rgb().color;e=.3*e[0]+.59*e[1]+.11*e[2];return fa.rgb(e,e,e)},fade:function(e){return this.alpha(this.valpha-this.valpha*e)},opaquer:function(e){return this.alpha(this.valpha+\nthis.valpha*e)},rotate:function(e){var c=this.hsl(),a=c.color[0];a=(a+e)%360;c.color[0]=0>a?360+a:a;return c},mix:function(e,c){if(!e||!e.rgb)throw Error('Argument to \"mix\" was not a Color instance, but rather an instance of '+(\"undefined\"===typeof e?\"undefined\":qb(e)));e=e.rgb();var a=this.rgb();c=void 0===c?.5:c;var b=2*c-1,d=e.alpha()-a.alpha();b=((-1===b*d?b:(b+d)/(1+b*d))+1)/2;d=1-b;return fa.rgb(b*e.red()+d*a.red(),b*e.green()+d*a.green(),b*e.blue()+d*a.blue(),e.alpha()*c+a.alpha()*(1-c))}};\nEa(wa).forEach(function(e){if(-1===Yd.indexOf(e)){var c=wa[e].channels;fa.prototype[e]=function(){if(this.model===e)return new fa(this);if(arguments.length)return new fa(arguments,e);var a=\"number\"===typeof arguments[c]?c:this.valpha;var b=wa[this.model][e].raw(this.color);b=Array.isArray(b)?b:[b];return new fa(b.concat(a),e)};fa[e]=function(a){\"number\"===typeof a&&(a=Qc(Pc.call(arguments),c));return new fa(a,e)}}});Vc(xa.prototype,{equals:function(e){return this.lat===e.lat&&this.lng===e.lng},clone:function(){return new xa(this.lat,\nthis.lng)},getLngSpan:function(e){e=Math.abs(e-this.lng);180<e&&(e=360-e);return e},sub:function(e){return new xa(this.lat-e.lat,this.lng-e.lng)},toString:function(){return\"Point\"}});Vc(ra,{EARTHRADIUS:6370996.81,MCBAND:[1.289059486E7,8362377.87,5591021,3481989.83,1678043.12,0],LLBAND:[75,60,45,30,15,0],MC2LL:[[1.410526172116255E-8,8.98305509648872E-6,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,1.73379812E7],[-7.435856389565537E-9,\n8.983055097726239E-6,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,1.026014486E7],[-3.030883460898826E-8,8.98305509983578E-6,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,6856817.37],[-1.981981304930552E-8,8.983055099779535E-6,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,4482777.06],\n[3.09191371068437E-9,8.983055096812155E-6,6.995724062E-5,23.10934304144901,-2.3663490511E-4,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,2555164.4],[2.890871144776878E-9,8.983055095805407E-6,-3.068298E-8,7.47137025468032,-3.53937994E-6,-.02145144861037,-1.234426596E-5,1.0322952773E-4,-3.23890364E-6,826088.5]],LL2MC:[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[8.277824516172526E-4,\n111320.7020463578,6.477955746671607E8,-4.082003173641316E9,1.077490566351142E10,-1.517187553151559E10,1.205306533862167E10,-5.124939663577472E9,9.133119359512032E8,67.5],[.00337398766765,111320.7020202162,4481351.045890365,-2.339375119931662E7,7.968221547186455E7,-1.159649932797253E8,9.723671115602145E7,-4.366194633752821E7,8477230.501135234,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837.749470245,992013.7397791013,-1221952.21711287,1340652.697009075,-620943.6990984312,144416.9293806241,\n37.5],[-3.441963504368392E-4,111320.7020576856,278.2353980772752,2485758.690035394,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-3.218135878613132E-4,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]],getDistanceByMC:function(e,c){if(!e||!c)return 0;e=this.convertMC2LL(e);if(!e)return 0;var a=this.toRadians(e.lng);e=this.toRadians(e.lat);c=this.convertMC2LL(c);\nif(!c)return 0;var b=this.toRadians(c.lng);c=this.toRadians(c.lat);return this.getDistance(a,b,e,c)},getDistanceByLL:function(e,c){if(!e||!c)return 0;e.lng=this.getLoop(e.lng,-180,180);e.lat=this.getRange(e.lat,-74,74);c.lng=this.getLoop(c.lng,-180,180);c.lat=this.getRange(c.lat,-74,74);var a=this.toRadians(e.lng);var b=this.toRadians(e.lat);e=this.toRadians(c.lng);c=this.toRadians(c.lat);return this.getDistance(a,e,b,c)},convertMC2LL:function(e){if(null===e||void 0===e)return new xa(0,0);if(180>\ne.lng&&-180<e.lng&&90>e.lat&&-90<e.lat)return e;var c=new xa(Math.abs(e.lng),Math.abs(e.lat));for(var a=0;a<this.MCBAND.length;a++)if(c.lat>=this.MCBAND[a]){var b=this.MC2LL[a];break}e=this.convertor(e,b);return e=new xa(e.lng.toFixed(6),e.lat.toFixed(6))},convertLL2MC:function(e){if(null===e||void 0===e)return new xa(0,0);if(180<e.lng||-180>e.lng||90<e.lat||-90>e.lat)return e;e.lng=this.getLoop(e.lng,-180,180);e.lat=this.getRange(e.lat,-74,74);var c=new xa(e.lng,e.lat);for(var a=0;a<this.LLBAND.length;a++)if(c.lat>=\nthis.LLBAND[a]){var b=this.LL2MC[a];break}if(!b)for(a=0;a<this.LLBAND.length;a++)if(c.lat<=-this.LLBAND[a]){b=this.LL2MC[a];break}e=this.convertor(e,b);return e=new xa(Number(e.lng.toFixed(2)),Number(e.lat.toFixed(2)))},convertor:function(e,c){if(e&&c){var a=c[0]+c[1]*Math.abs(e.lng),b=Math.abs(e.lat)/c[9];c=c[2]+c[3]*b+c[4]*b*b+c[5]*b*b*b+c[6]*b*b*b*b+c[7]*b*b*b*b*b+c[8]*b*b*b*b*b*b;a*=0>e.lng?-1:1;c*=0>e.lat?-1:1;return new xa(a,c)}},getDistance:function(e,c,a,b){return this.EARTHRADIUS*Math.acos(Math.sin(a)*\nMath.sin(b)+Math.cos(a)*Math.cos(b)*Math.cos(c-e))},toRadians:function(e){return Math.PI*e/180},toDegrees:function(e){return 180*e/Math.PI},getRange:function(e,c,a){null!=c&&(e=Math.max(e,c));null!=a&&(e=Math.min(e,a));return e},getLoop:function(e,c,a){for(;e>a;)e-=a-c;for(;e<c;)e+=a-c;return e}});Vc(ra.prototype,{lngLatToMercator:function(e){return ra.convertLL2MC(e)},lngLatToPoint:function(e){e=ra.convertLL2MC(e);return new $d(e.lng,e.lat)},mercatorToLngLat:function(e){return ra.convertMC2LL(e)},\npointToLngLat:function(e){e=new xa(e.x,e.y);return ra.convertMC2LL(e)},pointToPixel:function(e,c,a,b,d){if(e)return e=this.lngLatToMercator(e,d),c=this.getZoomUnits(c),new $d(Math.round((e.lng-a.lng)/c+b.width/2),Math.round((a.lat-e.lat)/c+b.height/2))},pixelToPoint:function(e,c,a,b,d){if(e)return c=this.getZoomUnits(c),e=new xa(a.lng+c*(e.x-b.width/2),a.lat-c*(e.y-b.height/2)),this.mercatorToLngLat(e,d)},getZoomUnits:function(e){return Math.pow(2,18-e)}});na.prototype.setMax=function(e){this.max=\ne||100};na.prototype.setMin=function(e){this.min=e||0};na.prototype.setMaxSize=function(e){this.maxSize=e||35};na.prototype.setMinSize=function(e){this.minSize=e||0};na.prototype.initPalette=function(){var e=this.gradient,c=this.paletteCtx=(new Wc(256,1)).getContext(\"2d\"),a=c.createLinearGradient(0,0,256,1);Ea(e).forEach(function(b){a.addColorStop(parseFloat(b),e[b])});c.fillStyle=a;c.fillRect(0,0,256,1);c.imageData=c.getImageData(0,0,256,1).data};na.prototype.getColor=function(e){e=this.getImageData(e);\nreturn\"rgba(\"+e[0]+\", \"+e[1]+\", \"+e[2]+\", \"+e[3]/256+\")\"};na.prototype.getImageData=function(e){var c=this.paletteCtx.imageData;if(void 0===e)return c;var a=this.max,b=this.min;e>a&&(e=a);e<b&&(e=b);e=4*Math.floor((e-b)/(a-b)*255);return[c[e],c[e+1],c[e+2],c[e+3]]};na.prototype.getSize=function(e){var c=this.max,a=this.min,b=this.maxSize,d=this.minSize;e>c&&(e=c);e<a&&(e=a);return d+(e-a)/(c-a)*(b-d)};Qa.prototype._initialize=function(){this.v0=this._normalizaCoord(this.options.start);this.v3=this._normalizaCoord(this.options.end);\nthis.v1=this._getControlPoint(this.v0,this.v3,4);this.v2=this._getControlPoint(this.v3,this.v0,5);this.v0[2]||(this.v0[2]=0);this.v3[2]||(this.v3[2]=0)};Qa.prototype.setOptions=function(e){this.options=e||{};this._initialize()};Qa.prototype.getPoints=function(e){void 0===e&&(e=20);for(var c=[],a=0;a<=e;a++)c.push(this._getPoint(a/e));return c};Qa.prototype._normalizaCoord=function(e){if(!e)return[];e=ra.convertLL2MC({lng:Number(e[0]),lat:Number(e[1])});return[e.lng,e.lat]};Qa.prototype._getControlPoint=\nfunction(e,c){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;return[].concat(ca(this._getQuarter(e,c)),[this._getDistance(e,c)/a])};Qa.prototype._getQuarter=function(e,c){return[(3*e[0]+c[0])/4,(3*e[1]+c[1])/4]};Qa.prototype._getDistance=function(e,c){return Math.sqrt(Math.pow(e[0]-c[0],2)+Math.pow(e[1]-c[1],2))};Qa.prototype._getPoint=function(e){var c=[],a=this.v0,b=this.v1,d=this.v2,f=this.v3;c.push(Xc(e,a[0],b[0],d[0],f[0]),Xc(e,a[1],b[1],d[1],f[1]),Xc(e,a[2],b[2],d[2],f[2]));\nreturn c};Ya.prototype._initialize=function(){this.points=this.options.points||this.options.point||[];this.greatCirclePoints=[];for(var e=[],c=0;c<this.points.length;c++){var a=this._normalizaCoord(this.points[c]);a&&e.push(a)}this.points=e};Ya.prototype.setOptions=function(e){this.options=e||{};this._initialize()};Ya.prototype.getPoints=function(){if(0===this.greatCirclePoints.length)for(var e=0;e<this.points.length-1;e++)this._calcGreatCirclePoints(this.points[e],this.points[e+1]);return this.greatCirclePoints};\nYa.prototype._normalizaCoord=function(e){if(!e)return null;e instanceof Array&&(e={lng:Number(e[0]),lat:Number(e[1])});var c=ra.convertLL2MC(e);e=ra.convertMC2LL(e);c.latLng=e;return c};Ya.prototype._calcGreatCirclePoints=function(e,c){var a=e.latLng,b=c.latLng;if(!Uc(a.lng,b.lng)||!Uc(a.lat,b.lat)){var d=ra.getDistance(la(a.lng),la(a.lat),la(b.lng),la(b.lat));if(!(25E4>d)){d=Math.round(d/15E4);var f=this._calcAngularDistance(a,b);this.greatCirclePoints.push([e.lng,e.lat]);for(var g=0;g<d;g++){var k=\nthis._calcMiddlePoint(a,b,g/d,f);k=ra.convertLL2MC(k);var h=ae(k,e);30037726<h&&(k.lng=k.lng<e.lng?k.lng+this.WORLD_SIZE_MC:k.lng-this.WORLD_SIZE_MC);this.greatCirclePoints.push([k.lng,k.lat]);e=k}h=ae(c,e);30037726<h&&(c.lng=c.lng<e.lng?c.lng+this.WORLD_SIZE_MC:c.lng-this.WORLD_SIZE_MC);this.greatCirclePoints.push([c.lng,c.lat])}}};Ya.prototype._calcAngularDistance=function(e,c){var a=la(e.lat),b=la(c.lat);e=la(e.lng);c=la(c.lng);return Math.acos(Math.sin(a)*Math.sin(b)+Math.cos(a)*Math.cos(b)*Math.cos(Math.abs(c-\ne)))};Ya.prototype._calcMiddlePoint=function(e,c,a,b){var d=c.lat,f=e.lng;c=c.lng;e=la(e.lat);d=la(d);f=la(f);var g=la(c);c=Math.sin((1-a)*b)/Math.sin(b);b=Math.sin(a*b)/Math.sin(b);a=c*Math.cos(e)*Math.cos(f)+b*Math.cos(d)*Math.cos(g);f=c*Math.cos(e)*Math.sin(f)+b*Math.cos(d)*Math.sin(g);e=Math.atan2(c*Math.sin(e)+b*Math.sin(d),Math.sqrt(Math.pow(a,2)+Math.pow(f,2)));return new xa(Sc(Math.atan2(f,a)),Sc(e))};var Vh=function(){function e(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:\n{};H(this,e);this.options=c;this._initialize()}L(e,[{key:\"_initialize\",value:function(){this.points=this.options.points}},{key:\"_normalizaCoord\",value:function(c){if(!c)return null;c instanceof Array&&(c={lng:Number(c[0]),lat:Number(c[1])});return ra.convertLL2MC(c)}},{key:\"setOptions\",value:function(){this.options=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this._initialize()}},{key:\"getPoints\",value:function(c){for(var a=[],b=this.points,d=0;d<b.length-1;d++){var e=this.getCurveByTwoPoints(this._normalizaCoord(b[d]),\nthis._normalizaCoord(b[d+1]),c);e&&0<e.length&&(a=a.concat(e))}return a}},{key:\"getCurveByTwoPoints\",value:function(c,a){var b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:20;if(!c||!a)return null;var d=[],e=0;if(void 0===(\"undefined\"===typeof a?\"undefined\":qb(a)))\"undefined\"===typeof d||qb(d);else{var g=parseFloat(c.lat),k=parseFloat(a.lat),h=parseFloat(c.lng),m=parseFloat(a.lng);m>h&&180<parseFloat(m-h)&&0>h&&(h=parseFloat(360+h),m=parseFloat(360+m));var n=0;if(k===g){var p=0;var l=h-\nm}else m===h?(p=Math.PI/2,l=g-k):(p=Math.atan((k-g)/(m-h)),l=(k-g)/Math.sin(p));0===n&&(n=p+Math.PI/5);l/=2;p=l*Math.cos(n)+h;n=l*Math.sin(n)+g;for(l=0;l<b+1;l++){var q=h*(1-2*e+e*e)+p*(2*e-2*e*e)+m*e*e,r=a.lng;d.push([0>c.lng&&0<r?q-360:q,g*(1-2*e+e*e)+n*(2*e-2*e*e)+k*e*e]);e+=1/b}return d}}}]);return e}(),Ad=function(){function e(c){H(this,e);this.options=this.getCommonDefaultOptions();this.options=T(this.options,this.getDefaultOptions());this.autoUpdate=!1;this.options=T(this.options,c);this.options.data&&\n(this.data=this.options.data,delete this.options.data)}L(e,[{key:\"getCommonDefaultOptions\",value:function(){return{}}},{key:\"getDefaultOptions\",value:function(){return{}}},{key:\"initialize\",value:function(c){}},{key:\"destroy\",value:function(){this.onDestroy&&this.onDestroy()}},{key:\"render\",value:function(){}},{key:\"setData\",value:function(c,a){a=a||{};this.data=c;this.onDataChanged&&this.onDataChanged(this.getData());this.onChanged&&this.onChanged(this.getOptions(),this.getData());!1!==a.autoRender&&\nthis.webglLayer&&this.webglLayer.render()}},{key:\"getData\",value:function(){return this.data||[]}},{key:\"setOptions\",value:function(c){c=c||{};var a=T({},this.getOptions());T(this.options,c);this.onOptionsChanged&&this.onOptionsChanged(this.getOptions(),a);this.onChanged&&this.onChanged(this.getOptions(),this.getData());c.data?(this.setData(c.data),delete c.data):this.webglLayer&&this.webglLayer.render()}},{key:\"getOptions\",value:function(){return this.options||{}}},{key:\"onOptionsChanged\",value:function(c,\na){}},{key:\"onDataChanged\",value:function(c){}},{key:\"onChanged\",value:function(c,a){}},{key:\"onDestroy\",value:function(){}},{key:\"lnglatToMercator\",value:function(c,a){}},{key:\"setWebglLayer\",value:function(c){this.webglLayer=c}},{key:\"getWebglLayer\",value:function(){return this.webglLayer}},{key:\"isRequestAnimation\",value:function(){return this.autoUpdate}}]);return e}(),V=function(){function e(c,a,b){H(this,e);this.options=a;this.gl=c;b&&(this.map=b.map);b=this.getVertexShader(a.vertexShader);\nvar d=this.getFragmentShader(a.fragmentShader);a=c.createShader(c.VERTEX_SHADER);c.shaderSource(a,b);c.compileShader(a);c.getShaderParameter(a,c.COMPILE_STATUS)?(b=c.createShader(c.FRAGMENT_SHADER),c.shaderSource(b,d),c.compileShader(b),c.getShaderParameter(b,c.COMPILE_STATUS)?(d=c.createProgram(),c.attachShader(d,a),c.attachShader(d,b),c.deleteShader(a),c.deleteShader(b),c.linkProgram(d),c.getProgramParameter(d,c.LINK_STATUS)?a=d:(a=\"Shader program failed to link.  The error log is:\"+c.getProgramInfoLog(d),\nconsole.error(a),a=-1)):(a=\"Fragment shader failed to compile.  The error log is:\"+c.getShaderInfoLog(b),console.error(a),a=-1)):(a=\"Vertex shader failed to compile.  The error log is:\"+c.getShaderInfoLog(a),console.error(a),a=-1);a=this.program=a;b={};d=c.getProgramParameter(a,c.ACTIVE_ATTRIBUTES);for(var f=0;f<d;f++){var g=c.getActiveAttrib(a,f);b[g.name]=c.getAttribLocation(a,g.name)}f={};g={};for(var k=c.getProgramParameter(a,c.ACTIVE_UNIFORMS),h=0;h<k;h++){var m=c.getActiveUniform(a,h);f[m.name]=\nc.getUniformLocation(a,m.name);g[m.name]=m.type}this.parameter=c={attributes:b,numAttributes:d,uniformsType:g,uniforms:f};this.attributes=c.attributes;this.uniforms=c.uniforms;this.parameter=c}L(e,[{key:\"getVertexShader\",value:function(c){var a=\"\";this.map&&\"cesium\"===this.map.type&&(a=\"#define LOG_DEPTH\\n\");a+=\"#ifdef LOG_DEPTH\\nvarying float v_depthFromNearPlusOne;\\n#endif\\nuniform vec2 MAPV_resolution;\\n#if defined(PICK)\\nuniform bool uIsPickRender;attribute vec3 aPickColor;uniform vec3 uPickedColor;varying vec4 vPickColor;uniform bool uEnablePicked;bool mapvIsPicked(){return uEnablePicked&&aPickColor==uPickedColor;}\\n#endif\\nvoid afterMain(){\\n#if defined(LOG_DEPTH)\\nv_depthFromNearPlusOne=(gl_Position.w-0.1)+1.0;gl_Position.z=clamp(gl_Position.z/gl_Position.w,-1.0,1.0)*gl_Position.w;\\n#endif\\n#if defined(PICK)\\nvPickColor=vec4(aPickColor,0.0);if(mapvIsPicked()){vPickColor.a=1.0;}\\n#endif\\n}\";\nc=this.getDefines()+a+c;c=c.replace(\"void main\",\"void originMain\");return c+\"void main() {originMain(); afterMain();}\"}},{key:\"getFragmentShader\",value:function(c){var a=\"\";this.map&&\"cesium\"===this.map.type&&(a=\"#define LOG_DEPTH\\n\");a+=\"#if defined(LOG_DEPTH)\\n#extension GL_EXT_frag_depth : enable\\n#endif\\nprecision highp float;uniform vec2 MAPV_resolution;\\n#if defined(PICK)\\nuniform bool uIsPickRender;varying vec4 vPickColor;bool mapvIsPicked(){return vPickColor.a==1.0;}\\n#endif\\n#if defined(LOG_DEPTH)\\nuniform float oneOverLog2FarDepthFromNearPlusOne;uniform float farDepthFromNearPlusOne;varying float v_depthFromNearPlusOne;void writeLogDepth(float depth){if(depth<=0.9999999||depth>farDepthFromNearPlusOne){discard;}gl_FragDepthEXT=log2(depth)*oneOverLog2FarDepthFromNearPlusOne;}\\n#endif\\nvoid afterMain(){\\n#if defined(PICK)\\nif(uIsPickRender){gl_FragColor=vec4(vPickColor.rgb,1.0);return;}\\n#endif\\n#if defined(LOG_DEPTH)\\nwriteLogDepth(v_depthFromNearPlusOne);\\n#endif\\n}\";\nc=this.getDefines()+a+c;c=c.replace(\"void main\",\"void originMain\");return c+\"void main() {originMain(); afterMain();}\"}},{key:\"getDefines\",value:function(){var c=\"\",a=this.options.defines;if(a)for(var b=0;b<a.length;b++)c+=\"#define \"+a[b]+\"\\n\";return c}},{key:\"use\",value:function(c,a){this.gl=c;c.useProgram(this.program);this.map&&\"cesium\"===this.map.type&&this.setUniforms({oneOverLog2FarDepthFromNearPlusOne:this.map.map.scene.context._us._oneOverLog2FarDepthFromNearPlusOne,farDepthFromNearPlusOne:this.map.map.scene.context._us._farDepthFromNearPlusOne});\nthis.uniforms.MAPV_resolution&&this.setUniforms({MAPV_resolution:[c.canvas.width,c.canvas.height]})}},{key:\"setUniform\",value:function(c,a){var b=this.gl,d=this.uniforms[c];if(d)switch(this.parameter.uniformsType[c]){case b.FLOAT:b.uniform1f(d,a);break;case b.FLOAT_VEC2:b.uniform2f(d,a[0],a[1]);break;case b.FLOAT_VEC3:b.uniform3f(d,a[0],a[1],a[2]);break;case b.FLOAT_VEC4:b.uniform4f(d,a[0],a[1],a[2],a[3]);break;case b.SAMPLER_2D:case b.SAMPLER_CUBE:b.activeTexture(b[\"TEXTURE\"+this.textureIndex]);\nb.uniform1i(d,this.textureIndex);b.bindTexture(b.TEXTURE_2D,a);this.textureIndex++;break;case b.INT:case b.BOOL:b.uniform1i(d,a);break;case b.INT_VEC2:case b.BOOL_VEC2:b.uniform2i(d,a[0],a[1]);break;case b.INT_VEC3:case b.BOOL_VEC3:b.uniform3i(d,a[0],a[1],a[2]);break;case b.INT_VEC4:case b.BOOL_VEC4:b.uniform4i(d,a[0],a[1],a[2],a[3]);break;case b.FLOAT_MAT2:b.uniformMatrix2fv(d,!1,a);break;case b.FLOAT_MAT3:b.uniformMatrix3fv(d,!1,a);break;case b.FLOAT_MAT4:b.uniformMatrix4fv(d,!1,a);break;default:console.error(\"Unrecognized uniform type: \"+\nc)}else console.warn(\"Unrecognized uniform type: \"+c)}},{key:\"setUniforms\",value:function(c){this.textureIndex=0;for(var a in c)this.setUniform(a,c[a])}}]);return e}(),nf=function(){function e(c){H(this,e);this.options=c;this.gl=c.gl;this.savedState=[];this.currentState=this.getCurrentState()}L(e,[{key:\"setDefaultState\",value:function(){this.setState()}},{key:\"getDefaultState\",value:function(){return{blend:!1,depthTest:!1,cullFace:!1,depthMask:!0,stencilTest:!1}}},{key:\"getCurrentState\",value:function(){var c=\nthis.gl;return{blend:c.getParameter(c.BLEND),stencilTest:c.getParameter(c.STENCIL_TEST),depthTest:c.getParameter(c.DEPTH_TEST),cullFace:c.getParameter(c.CULL_FACE),depthMask:c.getParameter(c.DEPTH_WRITEMASK)}}},{key:\"save\",value:function(){this.savedState.push(this.getCurrentState())}},{key:\"restore\",value:function(){var c=this.savedState.pop();this.setState(c)}},{key:\"setState\",value:function(c){var a=this.gl,b=this.getCurrentState();c=T(this.getDefaultState(),c);c.blend!==b.blend&&(c.blend?a.enable(a.BLEND):\na.disable(a.BLEND));c.depthTest!==b.depthTest&&(c.depthTest?a.enable(a.DEPTH_TEST):a.disable(a.DEPTH_TEST));c.cullFace!==b.cullFace&&(c.cullFace?a.enable(a.CULL_FACE):a.disable(a.CULL_FACE));c.depthMask!==b.depthMask&&(c.depthMask?a.depthMask(!0):a.depthMask(!1));this.currentState=c}}]);return e}(),S=function(){function e(c){H(this,e);this.options=c;this.gl=c.gl;this.buffer=this.gl.createBuffer();c.data&&this.updateData(c.data)}L(e,[{key:\"updateData\",value:function(c){var a=this.options,b=this.gl;\nthis.bind();b.bufferData(b[a.target],c,b[a.usage])}},{key:\"bind\",value:function(c){c=c||this.gl;c.bindBuffer(c[this.options.target],this.buffer)}},{key:\"unBind\",value:function(c){c=c||this.gl;c.bindBuffer(c[this.options.target],null)}},{key:\"destroy\",value:function(){this.buffer=null}}]);return e}(),Wh={BYTE:1,UNSIGNED_BYTE:1,SHORT:2,UNSIGNED_SHORT:2,FLOAT:4},za=function(){function e(c){H(this,e);this.options=c;this.attributes=c.attributes;this.gl=c.gl;this.program=c.program;for(c=this.stride=0;c<\nthis.attributes.length;c++)this.stride+=Wh[this.attributes[c].type]*this.attributes[c].size}L(e,[{key:\"setVertexAttribPointers\",value:function(){for(var c=this.gl,a=this.program,b=0;b<this.attributes.length;b++){var d=this.attributes[b],e=a.attributes[d.name];void 0!==e&&(d.buffer.bind(c),c.vertexAttribPointer(e,d.size,c[d.type],d.normalize||!1,void 0!==d.stride?d.stride:this.stride,d.offset),c.enableVertexAttribArray(e))}}},{key:\"bind\",value:function(){this.setVertexAttribPointers()}},{key:\"destroy\",\nvalue:function(){}}]);return e}(),va=function d(c,a,b){H(this,d);a=a||c.canvas.width;b=b||c.canvas.height;var f=c.createFramebuffer(),g=c.createTexture();c.bindTexture(c.TEXTURE_2D,g);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,a,b,0,c.RGBA,c.UNSIGNED_BYTE,null);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);f.texture=\ng;var k=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,k);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,a,b);f.depthBuffer=k;c.bindFramebuffer(c.FRAMEBUFFER,f);c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,g,0);c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,k);a=c.checkFramebufferStatus(c.FRAMEBUFFER);c.FRAMEBUFFER_COMPLETE===a&&(c.bindFramebuffer(c.FRAMEBUFFER,null),c.bindTexture(c.TEXTURE_2D,null),c.bindRenderbuffer(c.RENDERBUFFER,\nnull),this.framebuffer=f)},Hc=function(){function c(a){H(this,c);this.options={};T(this.options,a);this.vertex=[-1,1,0,-1,-1,0,1,1,0,1,1,0,-1,-1,0,1,-1,0];this.sampleCoord=[0,1,0,0,1,1,1,1,0,0,1,0]}L(c,[{key:\"getOptions\",value:function(){return this.options}},{key:\"onResize\",value:function(a){}},{key:\"render\",value:function(a){var b=a.gl;a=a.texture;var d=this.programSample;b.useProgram(d.program);var c=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,c);var g=[-1,-1,0,-1,1,0,1,1,0,1,1,0,-1,-1,0,1,-1,\n0];b.bufferData(b.ARRAY_BUFFER,new Float32Array(g),b.STATIC_DRAW);b.enableVertexAttribArray(d.attributes.aPos);b.vertexAttribPointer(d.attributes.aPos,3,b.FLOAT,!1,0,0);c=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,c);b.bufferData(b.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,1,1,1,0,0,1,0]),b.STATIC_DRAW);b.enableVertexAttribArray(d.attributes.aTextureCoord);b.vertexAttribPointer(d.attributes.aTextureCoord,2,b.FLOAT,!1,0,0);b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_2D,a);b.uniform1i(d.uniforms.uSampler,\n0);b.drawArrays(b.TRIANGLES,0,g.length/3)}}]);return c}(),Xh=function(c){function a(b){H(this,a);return Q(this,(a.__proto__||N(a)).call(this,b))}R(a,c);L(a,[{key:\"getProgram\",value:function(a){this.programSample||(this.programSample=new V(a,{vertexShader:\"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}\",fragmentShader:\"precision mediump float;uniform sampler2D uSampler;varying vec2 vTextureCoord;void main(){float fStep=1.0/512.0;vec4 sample11=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t+1.0*fStep));vec4 sample12=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t+1.0*fStep));vec4 sample13=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t+1.0*fStep));vec4 sample21=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t));vec4 sample22=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t));vec4 sample23=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t));vec4 sample31=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t-1.0*fStep));vec4 sample32=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t-1.0*fStep));vec4 sample33=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t-1.0*fStep));vec4 blurSample=(sample11+sample12+sample13+sample21+2.0*sample22+sample23+sample31+sample32+sample33)/10.0;gl_FragColor=blurSample;}\"}),\nthis.vertexBuffer=new S({gl:a,target:\"ARRAY_BUFFER\",usage:\"STATIC_DRAW\"}),this.sampleBuffer=new S({gl:a,target:\"ARRAY_BUFFER\",usage:\"STATIC_DRAW\"}),this.vertexBuffer.updateData(new Float32Array(this.vertex)),this.sampleBuffer.updateData(new Float32Array(this.sampleCoord)),this.vertexArray=new za({gl:a,program:this.programSample,attributes:[{stride:12,name:\"aPos\",buffer:this.vertexBuffer,size:3,type:\"FLOAT\",offset:0},{stride:8,name:\"aTextureCoord\",buffer:this.sampleBuffer,size:2,type:\"FLOAT\",offset:0}]}));\nreturn this.programSample}},{key:\"render\",value:function(a){var b=a.gl;a=a.texture;b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);var c=this.getProgram(b);c.use(b);this.vertexArray.bind();b.activeTexture(b.TEXTURE1);b.bindTexture(b.TEXTURE_2D,a);b.uniform1i(c.uniforms.uSampler,1);b.drawArrays(b.TRIANGLES,0,this.vertex.length/3)}}]);return a}(Hc),Yh=function(c){function a(b){H(this,a);return Q(this,(a.__proto__||N(a)).call(this,b))}R(a,c);L(a,[{key:\"getProgram\",value:function(a){this.programBright||\n(this.programBright=new V(a,{vertexShader:\"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}\",fragmentShader:\"precision mediump float;uniform sampler2D uSampler;uniform float threshold;varying vec2 vTextureCoord;void main(){vec4 color=texture2D(uSampler,vTextureCoord);vec4 lightColor=max(vec4(0.0),(color-(1.0-threshold)/5.0));float brightness=dot(color.rgb,vec3(0.2126,0.7152,0.0722));if(brightness>threshold){color=lightColor;}else{color=vec4(0.0);}gl_FragColor=color;}\"}));\nthis.programBloom||(this.programBloom=new V(a,{vertexShader:\"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}\",fragmentShader:\"precision mediump float;uniform sampler2D uSampler;uniform bool isVertical;uniform vec2 canvasSize;uniform float blurSize;uniform float devicePixelRatio;varying vec2 vTextureCoord;void main(){float weight[10];weight[0]=0.2270270270;weight[1]=0.1945945946;weight[2]=0.1216216216;weight[3]=0.1135135135;weight[4]=0.0972972973;weight[5]=0.0608108108;weight[6]=0.0540540541;weight[7]=0.0270270270;weight[8]=0.0162162162;weight[9]=0.0081081081;vec2 offset=vec2(blurSize/canvasSize.x,blurSize/canvasSize.y)*devicePixelRatio;vec4 result=texture2D(uSampler,vTextureCoord)*weight[0];if(isVertical){for(int i=1;i<10;++i){result+=texture2D(uSampler,vTextureCoord+vec2(0.0,offset.y*float(i)))*weight[i];result+=texture2D(uSampler,vTextureCoord-vec2(0.0,offset.y*float(i)))*weight[i];}}else{for(int i=1;i<10;++i){result+=texture2D(uSampler,vTextureCoord+vec2(offset.x*float(i),0.0))*weight[i];result+=texture2D(uSampler,vTextureCoord-vec2(offset.x*float(i),0.0))*weight[i];}}gl_FragColor=result;}\"}));\nthis.programResult||(this.programResult=new V(a,{vertexShader:\"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}\",fragmentShader:\"precision mediump float;uniform sampler2D originalTexture;uniform sampler2D bloomTexture;varying vec2 vTextureCoord;void main(){vec4 color=texture2D(originalTexture,vTextureCoord);vec4 bloomColor=texture2D(bloomTexture,vTextureCoord);color+=bloomColor;gl_FragColor=color;}\"}));\nreturn{programBright:this.programBright,programBloom:this.programBloom,programResult:this.programResult}}},{key:\"onResize\",value:function(a){this.collectBrightBuffer=new va(a);this.bloomBuffer=new va(a)}},{key:\"getExtraFbo\",value:function(a){this.collectBrightBuffer||(this.collectBrightBuffer=new va(a));this.bloomBuffer||(this.bloomBuffer=new va(a));return{collectBrightBuffer:this.collectBrightBuffer.framebuffer,bloomBuffer:this.bloomBuffer.framebuffer}}},{key:\"render\",value:function(a){var b=a.gl,\nc=a.texture;a=a.fbo;var g=this.getOptions();b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);var k=this.getProgram(b),h=k.programBright,m=k.programBloom;k=k.programResult;var n=this.getExtraFbo(b),p=n.collectBrightBuffer;n=n.bloomBuffer;var l=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,l);b.bufferData(b.ARRAY_BUFFER,new Float32Array(this.vertex),b.STATIC_DRAW);b.enableVertexAttribArray(h.attributes.aPos);b.vertexAttribPointer(h.attributes.aPos,3,b.FLOAT,!1,0,0);b.enableVertexAttribArray(m.attributes.aPos);\nb.vertexAttribPointer(m.attributes.aPos,3,b.FLOAT,!1,0,0);b.enableVertexAttribArray(k.attributes.aPos);b.vertexAttribPointer(k.attributes.aPos,3,b.FLOAT,!1,0,0);l=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,l);b.bufferData(b.ARRAY_BUFFER,new Float32Array(this.sampleCoord),b.STATIC_DRAW);b.enableVertexAttribArray(h.attributes.aTextureCoord);b.vertexAttribPointer(h.attributes.aTextureCoord,2,b.FLOAT,!1,0,0);b.enableVertexAttribArray(m.attributes.aTextureCoord);b.vertexAttribPointer(m.attributes.aTextureCoord,\n2,b.FLOAT,!1,0,0);b.enableVertexAttribArray(k.attributes.aTextureCoord);b.vertexAttribPointer(k.attributes.aTextureCoord,2,b.FLOAT,!1,0,0);b.useProgram(h.program);b.bindFramebuffer(b.FRAMEBUFFER,p);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);b.activeTexture(b.TEXTURE1);b.bindTexture(b.TEXTURE_2D,c);b.uniform1i(h.uniforms.uSampler,1);b.uniform1f(h.uniforms.threshold,g.threshold||0);b.drawArrays(b.TRIANGLES,0,this.vertex.length/3);b.useProgram(m.program);b.bindFramebuffer(b.FRAMEBUFFER,\nn);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);b.activeTexture(b.TEXTURE1);b.bindTexture(b.TEXTURE_2D,p.texture);b.uniform1i(m.uniforms.uSampler,1);b.uniform1i(m.uniforms.isVertical,!0);b.uniform1f(m.uniforms.blurSize,g.blurSize||2);b.uniform1f(m.uniforms.devicePixelRatio,window.devicePixelRatio);b.uniform2fv(m.uniforms.canvasSize,[b.canvas.width,b.canvas.height]);b.drawArrays(b.TRIANGLES,0,this.vertex.length/3);b.useProgram(m.program);b.bindFramebuffer(b.FRAMEBUFFER,p);b.clearColor(0,\n0,0,0);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);b.activeTexture(b.TEXTURE1);b.bindTexture(b.TEXTURE_2D,n.texture);b.uniform1i(m.uniforms.uSampler,1);b.uniform1i(m.uniforms.isVertical,!1);b.uniform1f(m.uniforms.blurSize,g.blurSize||2);b.uniform1f(m.uniforms.devicePixelRatio,window.devicePixelRatio);b.uniform2fv(m.uniforms.canvasSize,[b.canvas.width,b.canvas.height]);b.drawArrays(b.TRIANGLES,0,this.vertex.length/3);b.useProgram(k.program);b.bindFramebuffer(b.FRAMEBUFFER,a);b.clearColor(0,0,0,\n0);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);b.activeTexture(b.TEXTURE1);b.bindTexture(b.TEXTURE_2D,c);b.uniform1i(k.uniforms.originalTexture,1);b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_2D,p.texture);b.uniform1i(k.uniforms.bloomTexture,0);b.drawArrays(b.TRIANGLES,0,this.vertex.length/3);b.bindBuffer(b.ARRAY_BUFFER,null);b.useProgram(null)}}]);return a}(Hc),Zh=function(c){function a(b){H(this,a);return Q(this,(a.__proto__||N(a)).call(this,b))}R(a,c);L(a,[{key:\"getProgram\",value:function(a){this.programBright||\n(this.programBright=new V(a,{vertexShader:\"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}\",fragmentShader:\"precision mediump float;uniform sampler2D uSampler;uniform float threshold;varying vec2 vTextureCoord;void main(){vec4 color=texture2D(uSampler,vTextureCoord);vec4 lightColor=max(vec4(0.0),(color-threshold));gl_FragColor=lightColor;}\"}));this.programBloom||(this.programBloom=new V(a,{vertexShader:\"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}\",\nfragmentShader:\"precision mediump float;uniform sampler2D uSampler;uniform bool isVertical;uniform vec2 canvasSize;uniform float blurSize;uniform float devicePixelRatio;varying vec2 vTextureCoord;void main(){float weight[10];weight[0]=0.2270270270;weight[1]=0.1945945946;weight[2]=0.1216216216;weight[3]=0.1135135135;weight[4]=0.0972972973;weight[5]=0.0608108108;weight[6]=0.0540540541;weight[7]=0.0270270270;weight[8]=0.0162162162;weight[9]=0.0081081081;vec2 offset=vec2(blurSize/canvasSize.x,blurSize/canvasSize.y)*devicePixelRatio;vec4 result=texture2D(uSampler,vTextureCoord)*weight[0];if(isVertical){for(int i=1;i<10;++i){result+=texture2D(uSampler,vTextureCoord+vec2(0.0,offset.y*float(i)))*weight[i];result+=texture2D(uSampler,vTextureCoord-vec2(0.0,offset.y*float(i)))*weight[i];}}else{for(int i=1;i<10;++i){result+=texture2D(uSampler,vTextureCoord+vec2(offset.x*float(i),0.0))*weight[i];result+=texture2D(uSampler,vTextureCoord-vec2(offset.x*float(i),0.0))*weight[i];}}gl_FragColor=result;}\"}));\nthis.programResult||(this.programResult=new V(a,{vertexShader:\"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}\",fragmentShader:\"precision mediump float;uniform sampler2D originalTexture;uniform sampler2D bloomTexture;uniform float toneScale;varying vec2 vTextureCoord;void main(){vec4 color=texture2D(originalTexture,vTextureCoord)*toneScale;vec4 bloomColor=texture2D(bloomTexture,vTextureCoord);color+=bloomColor;gl_FragColor=color;}\"}));\nreturn{programBright:this.programBright,programBloom:this.programBloom,programResult:this.programResult}}},{key:\"onResize\",value:function(a){this.collectBrightBuffer=new va(a);this.bloomBuffer=new va(a)}},{key:\"getExtraFbo\",value:function(a){this.collectBrightBuffer||(this.collectBrightBuffer=new va(a));this.bloomBuffer||(this.bloomBuffer=new va(a));return{collectBrightBuffer:this.collectBrightBuffer.framebuffer,bloomBuffer:this.bloomBuffer.framebuffer}}},{key:\"render\",value:function(a){var b=a.gl,\nc=a.texture;a=a.fbo;var g=this.getOptions(),k=\"clarity\"in g?g.clarity:1;k=Math.max(0,k);k=Math.min(1,k);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);var h=this.getProgram(b),m=h.programBright,n=h.programBloom;h=h.programResult;var p=this.getExtraFbo(b),l=p.collectBrightBuffer;p=p.bloomBuffer;var q=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,q);b.bufferData(b.ARRAY_BUFFER,new Float32Array(this.vertex),b.STATIC_DRAW);b.enableVertexAttribArray(m.attributes.aPos);b.vertexAttribPointer(m.attributes.aPos,\n3,b.FLOAT,!1,0,0);b.enableVertexAttribArray(n.attributes.aPos);b.vertexAttribPointer(n.attributes.aPos,3,b.FLOAT,!1,0,0);b.enableVertexAttribArray(h.attributes.aPos);b.vertexAttribPointer(h.attributes.aPos,3,b.FLOAT,!1,0,0);q=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,q);b.bufferData(b.ARRAY_BUFFER,new Float32Array(this.sampleCoord),b.STATIC_DRAW);b.enableVertexAttribArray(m.attributes.aTextureCoord);b.vertexAttribPointer(m.attributes.aTextureCoord,2,b.FLOAT,!1,0,0);b.enableVertexAttribArray(n.attributes.aTextureCoord);\nb.vertexAttribPointer(n.attributes.aTextureCoord,2,b.FLOAT,!1,0,0);b.enableVertexAttribArray(h.attributes.aTextureCoord);b.vertexAttribPointer(h.attributes.aTextureCoord,2,b.FLOAT,!1,0,0);b.useProgram(m.program);b.bindFramebuffer(b.FRAMEBUFFER,l);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);b.activeTexture(b.TEXTURE1);b.bindTexture(b.TEXTURE_2D,c);b.uniform1i(m.uniforms.uSampler,1);b.uniform1f(m.uniforms.threshold,g.threshold||0);b.drawArrays(b.TRIANGLES,0,this.vertex.length/\n3);b.useProgram(n.program);b.bindFramebuffer(b.FRAMEBUFFER,p);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);b.activeTexture(b.TEXTURE1);b.bindTexture(b.TEXTURE_2D,l.texture);b.uniform1i(n.uniforms.uSampler,1);b.uniform1i(n.uniforms.isVertical,!0);b.uniform1f(n.uniforms.blurSize,g.blurSize||2);b.uniform1f(n.uniforms.devicePixelRatio,window.devicePixelRatio);b.uniform2fv(n.uniforms.canvasSize,[b.canvas.width,b.canvas.height]);b.drawArrays(b.TRIANGLES,0,this.vertex.length/3);b.useProgram(n.program);\nb.bindFramebuffer(b.FRAMEBUFFER,l);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);b.activeTexture(b.TEXTURE1);b.bindTexture(b.TEXTURE_2D,p.texture);b.uniform1i(n.uniforms.uSampler,1);b.uniform1i(n.uniforms.isVertical,!1);b.uniform1f(n.uniforms.blurSize,g.blurSize||2);b.uniform1f(n.uniforms.devicePixelRatio,window.devicePixelRatio);b.uniform2fv(n.uniforms.canvasSize,[b.canvas.width,b.canvas.height]);b.drawArrays(b.TRIANGLES,0,this.vertex.length/3);b.useProgram(h.program);b.bindFramebuffer(b.FRAMEBUFFER,\na);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);b.activeTexture(b.TEXTURE1);b.bindTexture(b.TEXTURE_2D,c);b.uniform1i(h.uniforms.originalTexture,1);b.uniform1f(h.uniforms.toneScale,k);b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_2D,l.texture);b.uniform1i(h.uniforms.bloomTexture,0);b.drawArrays(b.TRIANGLES,0,this.vertex.length/3);b.bindBuffer(b.ARRAY_BUFFER,null);b.useProgram(null)}}]);return a}(Hc),$h=function(c){function a(b){H(this,a);return Q(this,(a.__proto__||N(a)).call(this,\nb))}R(a,c);L(a,[{key:\"getProgram\",value:function(a){this.programSample||(this.programSample=new V(a,{vertexShader:\"attribute vec3 aPos;attribute vec2 aTextureCoord;varying vec2 vTextureCoord;void main(){vTextureCoord=aTextureCoord;gl_Position=vec4(aPos,1.0);}\",fragmentShader:\"precision mediump float;uniform sampler2D uSampler;uniform vec2 canvasSize;varying vec2 vTextureCoord;void main(){float fStep=1.0/312.0;vec4 sample11=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t+1.0*fStep));vec4 sample12=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t+1.0*fStep));vec4 sample13=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t+1.0*fStep));vec4 sample21=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t));vec4 sample22=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t));vec4 sample23=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t));vec4 sample31=texture2D(uSampler,vec2(vTextureCoord.s-1.0*fStep,vTextureCoord.t-1.0*fStep));vec4 sample32=texture2D(uSampler,vec2(vTextureCoord.s,vTextureCoord.t-1.0*fStep));vec4 sample33=texture2D(uSampler,vec2(vTextureCoord.s+1.0*fStep,vTextureCoord.t-1.0*fStep));vec4 blurSample=(sample11+sample12+sample13+sample21+2.0*sample22+sample23+sample31+sample32+sample33)/10.0;float desX=abs((gl_FragCoord.x-canvasSize.x/2.0)/(canvasSize.x/2.0));float desY=abs((gl_FragCoord.y-canvasSize.y/2.0)/(canvasSize.y/2.0));float factor=max(desX,desY);gl_FragColor=(sample22*(1.0-factor)+blurSample*factor);}\"}));\nreturn this.programSample}},{key:\"render\",value:function(a){var b=a.gl;a=a.texture;var c=this.getProgram(b);b.useProgram(c.program);var g=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,g);b.bufferData(b.ARRAY_BUFFER,new Float32Array(this.vertex),b.STATIC_DRAW);b.enableVertexAttribArray(c.attributes.aPos);b.vertexAttribPointer(c.attributes.aPos,3,b.FLOAT,!1,0,0);g=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,g);b.bufferData(b.ARRAY_BUFFER,new Float32Array(this.sampleCoord),b.STATIC_DRAW);b.enableVertexAttribArray(c.attributes.aTextureCoord);\nb.vertexAttribPointer(c.attributes.aTextureCoord,2,b.FLOAT,!1,0,0);b.activeTexture(b.TEXTURE1);b.bindTexture(b.TEXTURE_2D,a);b.uniform1i(c.uniforms.uSampler,1);b.uniform2fv(c.uniforms.canvasSize,[b.canvas.width,b.canvas.height]);b.drawArrays(b.TRIANGLES,0,this.vertex.length/3)}}]);return a}(Hc),of=function(){function c(a){H(this,c);this.gl=a;this.effects=[];this.initFbo()}L(c,[{key:\"addEffect\",value:function(a){this.effects.push(a)}},{key:\"removeEffect\",value:function(a){}},{key:\"setEffects\",value:function(a){this.effects=\na}},{key:\"onResize\",value:function(){this.initFbo();var a=this.gl,b=this.effects;if(b&&1<b.length)for(var c=1;c<b.length;c++){var f=b[c];f.onResize&&f.onResize(a)}}},{key:\"initFbo\",value:function(){var a=this.gl;this.fbo=[new va(a),new va(a)]}},{key:\"render\",value:function(){var a=this.gl,b=this.effects;if(b&&0<b.length)for(var c={},f=0;f<b.length;f++){var g=this.fbo[f%2].framebuffer;f===b.length-1&&(g=null);a.bindFramebuffer(a.FRAMEBUFFER,g);var k=[0,0,0,0];a.clearColor(k[0],k[1],k[2],k[3]);a.clear(a.COLOR_BUFFER_BIT|\na.DEPTH_BUFFER_BIT);b[f].render({isPickRender:!1,gl:a,texture:c.texture,fbo:g});c=g}}}]);return c}(),da=function(c){function a(b){H(this,a);b=Q(this,(a.__proto__||N(a)).call(this,b));b.pickedColor=[-1,-1,-1];return b}R(a,c);L(a,[{key:\"getCommonDefaultOptions\",value:function(){return{repeat:!1,enablePicked:!1,autoSelect:!1,selectedIndex:-1,selectedColor:\"rgba(20, 20, 200, 1.0)\"}}},{key:\"commonInitialize\",value:function(a){var b=this.getOptions();this.gl=a;b.enablePicked&&(this.pickBuffer=new S({gl:a,\ntarget:\"ARRAY_BUFFER\",usage:\"STATIC_DRAW\"}))}},{key:\"getCommonAttributes\",value:function(){var a=[];this.getOptions().enablePicked&&a.push({name:\"aPickColor\",buffer:this.pickBuffer,size:3,type:\"FLOAT\",stride:12,offset:0});return a}},{key:\"normizedColor\",value:function(a){var b=a;a instanceof Array||(b=fa(a).unitArray());void 0===b[3]&&(b[3]=1);return b}},{key:\"normizedPoint\",value:function(a){if(!a||!a[0]||!a[1])return[0,0,0];var b=this.getPointOffset(),c=Number(a[0]),g=Number(a[1]);-180<=c&&180>=\nc&&-90<=g&&90>=g&&(g=this.webglLayer.map.lnglatToMercator(c,g),c=g[0],g=g[1]);var k=Number(a[2])||0;this.webglLayer&&\"cesium\"===this.webglLayer.options.mapType&&window.Cesium?(c=this.convertLngLat([c,g]),k=window.Cesium.Cartesian3.fromDegrees(c[0],c[1],k),c=k.x,g=k.y,k=k.z):this.webglLayer&&\"bmapgl\"===this.webglLayer.options.mapType&&\"B_EARTH_MAP\"===this.webglLayer.map.map.mapType&&(c=this.convertLngLat([c,g]),k=this.webglLayer.map.map.getEarth().scene.fromLatLngToXYZ({lng:c[0],lat:c[1]}),c=k.x,g=\nk.y,k=k.z);return 3<a.length?[c-b[0],g-b[1],k].concat(ca(a.slice(3))):[c-b[0],g-b[1],k]}},{key:\"convertLngLat\",value:function(a){return[a[0]/2.003750834E7*180,180/Math.PI*(2*Math.atan(Math.exp(a[1]/2.003750834E7*180*Math.PI/180))-Math.PI/2)]}},{key:\"getPointOffset\",value:function(){var a=[0,0],c=this.getOptions();this.webglLayer&&this.webglLayer.options.pointOffset?a=this.webglLayer.options.pointOffset:c.pointOffset&&(a=c.pointOffset);return a}},{key:\"indexToRgb\",value:function(a){a++;var b=Math.floor(a/\n65536);a-=65536*b;var c=Math.floor(a/256);return[a-256*c,c,b]}},{key:\"rgbToIndex\",value:function(a){return a[0]+256*a[1]+65536*a[2]-1}},{key:\"getCommonUniforms\",value:function(a){a=a.isPickRender;var b=this.getOptions(),c={};if(b.enablePicked){var g=b.autoSelect?this.pickedColor:this.indexToRgb(b.selectedIndex||-1);c=T(c,{uSelectedColor:this.normizedColor(b.selectedColor),uEnablePicked:b.enablePicked,uPickedColor:g.map(function(a){return a/255}),uIsPickRender:!!a})}return c}},{key:\"pick\",value:function(a,\nc){var b=this.gl;this.webglLayer.saveFramebuffer();this.webglLayer.bindFramebuffer(this.webglLayer.pickFBO);this.webglLayer.clear();this.render({gl:b,isPickRender:!0,matrix:this.webglLayer.matrix,projectionMatrix:this.webglLayer.projectionMatrix,viewMatrix:this.webglLayer.viewMatrix,orthoMatrix:this.webglLayer.orthoMatrix});var d=new Uint8Array(4);b.readPixels(a*window.devicePixelRatio,b.canvas.height-c*window.devicePixelRatio,1,1,b.RGBA,b.UNSIGNED_BYTE,d);a=this.rgbToIndex(d);this.pickedColor=[d[0],\nd[1],d[2]];this.webglLayer.restoreFramebuffer();return{dataIndex:a,dataItem:this.data[a]}}},{key:\"setGLState\",value:function(a){this.webglLayer.stateManager.setState(a)}},{key:\"addMultipleCoords\",value:function(a,c,f){if(!this.options.repeat||!this.webglLayer||\"bmapgl\"!==this.webglLayer.options.mapType||\"B_EARTH_MAP\"===this.webglLayer.map.map.mapType)return[a];var b=this.webglLayer.map.map;c=c||b.getZoom();var d=f?b.worldSize(c):4.007545274461451E7;c=function(a){return[[a[0]-d,a[1],a[2]||0],[a[0]+\nd,a[1],a[2]||0]]};if(a instanceof Array&&!(a[0]instanceof Array))return c=c(a),c=db(c,2),[a,c[0],c[1]];f=[];b=[];for(var h=0;h<a.length;h++){var m=c(a[h]);m=db(m,2);var n=m[1];f.push(m[0]);b.push(n)}return[a,f,b]}}]);return a}(Ad),Ia=O(function(c,a){Object.defineProperty(a,\"__esModule\",{value:!0});a.setMatrixArrayType=function(b){a.ARRAY_TYPE=d=b};a.toRadian=function(a){return a*f};a.equals=function(a,c){return Math.abs(a-c)<=b*Math.max(1,Math.abs(a),Math.abs(c))};a.RANDOM=a.ARRAY_TYPE=a.EPSILON=\nvoid 0;var b=1E-6;a.EPSILON=b;var d=\"undefined\"!==typeof Float32Array?Float32Array:Array;a.ARRAY_TYPE=d;a.RANDOM=Math.random;var f=Math.PI/180});P(Ia);var pf=O(function(c,a){function b(a,b,c){var d=b[0],h=b[1],g=b[2];b=b[3];var k=c[0],f=c[1],r=c[2];c=c[3];a[0]=d*k+g*f;a[1]=h*k+b*f;a[2]=d*r+g*c;a[3]=h*r+b*c;return a}function d(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];return a}Object.defineProperty(a,\"__esModule\",{value:!0});a.create=function(){var a=new f.ARRAY_TYPE(4);f.ARRAY_TYPE!=\nFloat32Array&&(a[1]=0,a[2]=0);a[0]=1;a[3]=1;return a};a.clone=function(a){var b=new f.ARRAY_TYPE(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};a.copy=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a};a.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a};a.fromValues=function(a,b,c,d){var h=new f.ARRAY_TYPE(4);h[0]=a;h[1]=b;h[2]=c;h[3]=d;return h};a.set=function(a,b,c,d,f){a[0]=b;a[1]=c;a[2]=d;a[3]=f;return a};a.transpose=function(a,b){if(a===b){var c=b[1];a[1]=b[2];a[2]=\nc}else a[0]=b[0],a[1]=b[2],a[2]=b[1],a[3]=b[3];return a};a.invert=function(a,b){var c=b[0],d=b[1],g=b[2];b=b[3];var k=c*b-g*d;if(!k)return null;k=1/k;a[0]=b*k;a[1]=-d*k;a[2]=-g*k;a[3]=c*k;return a};a.adjoint=function(a,b){var c=b[0];a[0]=b[3];a[1]=-b[1];a[2]=-b[2];a[3]=c;return a};a.determinant=function(a){return a[0]*a[3]-a[2]*a[1]};a.multiply=b;a.rotate=function(a,b,c){var d=b[0],h=b[1],g=b[2];b=b[3];var l=Math.sin(c);c=Math.cos(c);a[0]=d*c+g*l;a[1]=h*c+b*l;a[2]=d*-l+g*c;a[3]=h*-l+b*c;return a};\na.scale=function(a,b,c){var d=b[1],h=b[2],g=b[3],l=c[0];c=c[1];a[0]=b[0]*l;a[1]=d*l;a[2]=h*c;a[3]=g*c;return a};a.fromRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=-c;a[3]=b;return a};a.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=b[1];return a};a.str=function(a){return\"mat2(\"+a[0]+\", \"+a[1]+\", \"+a[2]+\", \"+a[3]+\")\"};a.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))};a.LDU=function(a,b,c,d){a[2]=d[2]/d[0];\nc[0]=d[0];c[1]=d[1];c[3]=d[3]-a[2]*c[1];return[a,b,c]};a.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];return a};a.subtract=d;a.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]};a.equals=function(a,b){var c=a[0],d=a[1],g=a[2];a=a[3];var k=b[0],l=b[1],q=b[2];b=b[3];return Math.abs(c-k)<=f.EPSILON*Math.max(1,Math.abs(c),Math.abs(k))&&Math.abs(d-l)<=f.EPSILON*Math.max(1,Math.abs(d),Math.abs(l))&&Math.abs(g-q)<=f.EPSILON*Math.max(1,\nMath.abs(g),Math.abs(q))&&Math.abs(a-b)<=f.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};a.multiplyScalar=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;return a};a.multiplyScalarAndAdd=function(a,b,c,d){a[0]=b[0]+c[0]*d;a[1]=b[1]+c[1]*d;a[2]=b[2]+c[2]*d;a[3]=b[3]+c[3]*d;return a};a.sub=a.mul=void 0;var f=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var d=ea&&ba?ba(a,c):{};d.get||d.set?ea(b,c,d):b[c]=a[c]}b.default=\na;return b}(Ia);a.mul=b;a.sub=d});P(pf);var qf=O(function(c,a){function b(a,b,c){var d=b[0],h=b[1],g=b[2],l=b[3],f=b[4];b=b[5];var k=c[0],u=c[1],z=c[2],t=c[3],x=c[4];c=c[5];a[0]=d*k+g*u;a[1]=h*k+l*u;a[2]=d*z+g*t;a[3]=h*z+l*t;a[4]=d*x+g*c+f;a[5]=h*x+l*c+b;return a}function d(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];a[4]=b[4]-c[4];a[5]=b[5]-c[5];return a}Object.defineProperty(a,\"__esModule\",{value:!0});a.create=function(){var a=new f.ARRAY_TYPE(6);f.ARRAY_TYPE!=Float32Array&&\n(a[1]=0,a[2]=0,a[4]=0,a[5]=0);a[0]=1;a[3]=1;return a};a.clone=function(a){var b=new f.ARRAY_TYPE(6);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];return b};a.copy=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a};a.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a};a.fromValues=function(a,b,c,d,n,p){var h=new f.ARRAY_TYPE(6);h[0]=a;h[1]=b;h[2]=c;h[3]=d;h[4]=n;h[5]=p;return h};a.set=function(a,b,c,d,f,p,l){a[0]=b;a[1]=c;a[2]=d;a[3]=\nf;a[4]=p;a[5]=l;return a};a.invert=function(a,b){var c=b[0],d=b[1],g=b[2],f=b[3],l=b[4];b=b[5];var k=c*f-d*g;if(!k)return null;k=1/k;a[0]=f*k;a[1]=-d*k;a[2]=-g*k;a[3]=c*k;a[4]=(g*b-f*l)*k;a[5]=(d*l-c*b)*k;return a};a.determinant=function(a){return a[0]*a[3]-a[1]*a[2]};a.multiply=b;a.rotate=function(a,b,c){var d=b[0],h=b[1],g=b[2],l=b[3],f=b[4];b=b[5];var k=Math.sin(c);c=Math.cos(c);a[0]=d*c+g*k;a[1]=h*c+l*k;a[2]=d*-k+g*c;a[3]=h*-k+l*c;a[4]=f;a[5]=b;return a};a.scale=function(a,b,c){var d=b[1],h=b[2],\ng=b[3],l=b[4],f=b[5],k=c[0];c=c[1];a[0]=b[0]*k;a[1]=d*k;a[2]=h*c;a[3]=g*c;a[4]=l;a[5]=f;return a};a.translate=function(a,b,c){var d=b[0],h=b[1],g=b[2],l=b[3],f=b[4];b=b[5];var k=c[0];c=c[1];a[0]=d;a[1]=h;a[2]=g;a[3]=l;a[4]=d*k+g*c+f;a[5]=h*k+l*c+b;return a};a.fromRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=-c;a[3]=b;a[4]=0;a[5]=0;return a};a.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=b[1];a[4]=0;a[5]=0;return a};a.fromTranslation=function(a,b){a[0]=1;a[1]=\n0;a[2]=0;a[3]=1;a[4]=b[0];a[5]=b[1];return a};a.str=function(a){return\"mat2d(\"+a[0]+\", \"+a[1]+\", \"+a[2]+\", \"+a[3]+\", \"+a[4]+\", \"+a[5]+\")\"};a.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};a.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];return a};a.subtract=d;a.multiplyScalar=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=\nb[4]*c;a[5]=b[5]*c;return a};a.multiplyScalarAndAdd=function(a,b,c,d){a[0]=b[0]+c[0]*d;a[1]=b[1]+c[1]*d;a[2]=b[2]+c[2]*d;a[3]=b[3]+c[3]*d;a[4]=b[4]+c[4]*d;a[5]=b[5]+c[5]*d;return a};a.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]};a.equals=function(a,b){var c=a[0],d=a[1],g=a[2],k=a[3],l=a[4];a=a[5];var q=b[0],r=b[1],u=b[2],z=b[3],t=b[4];b=b[5];return Math.abs(c-q)<=f.EPSILON*Math.max(1,Math.abs(c),Math.abs(q))&&Math.abs(d-r)<=f.EPSILON*\nMath.max(1,Math.abs(d),Math.abs(r))&&Math.abs(g-u)<=f.EPSILON*Math.max(1,Math.abs(g),Math.abs(u))&&Math.abs(k-z)<=f.EPSILON*Math.max(1,Math.abs(k),Math.abs(z))&&Math.abs(l-t)<=f.EPSILON*Math.max(1,Math.abs(l),Math.abs(t))&&Math.abs(a-b)<=f.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};a.sub=a.mul=void 0;var f=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var d=ea&&ba?ba(a,c):{};d.get||d.set?ea(b,c,d):b[c]=a[c]}b.default=a;return b}(Ia);\na.mul=b;a.sub=d});P(qf);var Bd=O(function(c,a){function b(a,b,c){var d=b[0],h=b[1],f=b[2],l=b[3],g=b[4],k=b[5],u=b[6],z=b[7];b=b[8];var t=c[0],x=c[1],v=c[2],A=c[3],B=c[4],E=c[5],D=c[6],M=c[7];c=c[8];a[0]=t*d+x*l+v*u;a[1]=t*h+x*g+v*z;a[2]=t*f+x*k+v*b;a[3]=A*d+B*l+E*u;a[4]=A*h+B*g+E*z;a[5]=A*f+B*k+E*b;a[6]=D*d+M*l+c*u;a[7]=D*h+M*g+c*z;a[8]=D*f+M*k+c*b;return a}function d(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];a[4]=b[4]-c[4];a[5]=b[5]-c[5];a[6]=b[6]-c[6];a[7]=b[7]-c[7];a[8]=\nb[8]-c[8];return a}Object.defineProperty(a,\"__esModule\",{value:!0});a.create=function(){var a=new f.ARRAY_TYPE(9);f.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0);a[0]=1;a[4]=1;a[8]=1;return a};a.fromMat4=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[4];a[4]=b[5];a[5]=b[6];a[6]=b[8];a[7]=b[9];a[8]=b[10];return a};a.clone=function(a){var b=new f.ARRAY_TYPE(9);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b};a.copy=function(a,\nb){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a};a.fromValues=function(a,b,c,d,n,p,l,q,r){var h=new f.ARRAY_TYPE(9);h[0]=a;h[1]=b;h[2]=c;h[3]=d;h[4]=n;h[5]=p;h[6]=l;h[7]=q;h[8]=r;return h};a.set=function(a,b,c,d,f,p,l,q,r,u){a[0]=b;a[1]=c;a[2]=d;a[3]=f;a[4]=p;a[5]=l;a[6]=q;a[7]=r;a[8]=u;return a};a.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};a.transpose=function(a,b){if(a===b){var c=b[1],d=b[2],\nf=b[5];a[1]=b[3];a[2]=b[6];a[3]=c;a[5]=b[7];a[6]=d;a[7]=f}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a};a.invert=function(a,b){var c=b[0],d=b[1],f=b[2],g=b[3],l=b[4],k=b[5],r=b[6],u=b[7];b=b[8];var z=b*l-k*u,t=-b*g+k*r,x=u*g-l*r,v=c*z+d*t+f*x;if(!v)return null;v=1/v;a[0]=z*v;a[1]=(-b*d+f*u)*v;a[2]=(k*d-f*l)*v;a[3]=t*v;a[4]=(b*c-f*r)*v;a[5]=(-k*c+f*g)*v;a[6]=x*v;a[7]=(-u*c+d*r)*v;a[8]=(l*c-d*g)*v;return a};a.adjoint=function(a,b){var c=b[0],\nd=b[1],f=b[2],g=b[3],l=b[4],k=b[5],r=b[6],u=b[7];b=b[8];a[0]=l*b-k*u;a[1]=f*u-d*b;a[2]=d*k-f*l;a[3]=k*r-g*b;a[4]=c*b-f*r;a[5]=f*g-c*k;a[6]=g*u-l*r;a[7]=d*r-c*u;a[8]=c*l-d*g;return a};a.determinant=function(a){var b=a[3],c=a[4],d=a[5],f=a[6],g=a[7],l=a[8];return a[0]*(l*c-d*g)+a[1]*(-l*b+d*f)+a[2]*(g*b-c*f)};a.multiply=b;a.translate=function(a,b,c){var d=b[0],h=b[1],f=b[2],l=b[3],g=b[4],k=b[5],u=b[6],z=b[7];b=b[8];var t=c[0];c=c[1];a[0]=d;a[1]=h;a[2]=f;a[3]=l;a[4]=g;a[5]=k;a[6]=t*d+c*l+u;a[7]=t*h+\nc*g+z;a[8]=t*f+c*k+b;return a};a.rotate=function(a,b,c){var d=b[0],h=b[1],f=b[2],l=b[3],g=b[4],k=b[5],u=b[6],z=b[7];b=b[8];var t=Math.sin(c);c=Math.cos(c);a[0]=c*d+t*l;a[1]=c*h+t*g;a[2]=c*f+t*k;a[3]=c*l-t*d;a[4]=c*g-t*h;a[5]=c*k-t*f;a[6]=u;a[7]=z;a[8]=b;return a};a.scale=function(a,b,c){var d=c[0];c=c[1];a[0]=d*b[0];a[1]=d*b[1];a[2]=d*b[2];a[3]=c*b[3];a[4]=c*b[4];a[5]=c*b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a};a.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=b[0];\na[7]=b[1];a[8]=1;return a};a.fromRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=0;a[3]=-c;a[4]=b;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};a.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=b[1];a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};a.fromMat2d=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=0;a[3]=b[2];a[4]=b[3];a[5]=0;a[6]=b[4];a[7]=b[5];a[8]=1;return a};a.fromQuat=function(a,b){var c=b[0],d=b[1],f=b[2];b=b[3];var g=c+c,l=d+d,q=f+f;c*=g;var k=d*g;d*=l;var u=f*g,z=f*l;\nf*=q;g*=b;l*=b;b*=q;a[0]=1-d-f;a[3]=k-b;a[6]=u+l;a[1]=k+b;a[4]=1-c-f;a[7]=z-g;a[2]=u-l;a[5]=z+g;a[8]=1-c-d;return a};a.normalFromMat4=function(a,b){var c=b[0],d=b[1],f=b[2],g=b[3],l=b[4],q=b[5],k=b[6],u=b[7],z=b[8],t=b[9],x=b[10],v=b[11],A=b[12],B=b[13],E=b[14];b=b[15];var D=c*q-d*l,M=c*k-f*l,J=c*u-g*l,G=d*k-f*q,w=d*u-g*q,U=f*u-g*k,y=z*B-t*A,C=z*E-x*A;z=z*b-v*A;var F=t*E-x*B;t=t*b-v*B;x=x*b-v*E;v=D*x-M*t+J*F+G*z-w*C+U*y;if(!v)return null;v=1/v;a[0]=(q*x-k*t+u*F)*v;a[1]=(k*z-l*x-u*C)*v;a[2]=(l*t-q*\nz+u*y)*v;a[3]=(f*t-d*x-g*F)*v;a[4]=(c*x-f*z+g*C)*v;a[5]=(d*z-c*t-g*y)*v;a[6]=(B*U-E*w+b*G)*v;a[7]=(E*J-A*U-b*M)*v;a[8]=(A*w-B*J+b*D)*v;return a};a.projection=function(a,b,c){a[0]=2/b;a[1]=0;a[2]=0;a[3]=0;a[4]=-2/c;a[5]=0;a[6]=-1;a[7]=1;a[8]=1;return a};a.str=function(a){return\"mat3(\"+a[0]+\", \"+a[1]+\", \"+a[2]+\", \"+a[3]+\", \"+a[4]+\", \"+a[5]+\", \"+a[6]+\", \"+a[7]+\", \"+a[8]+\")\"};a.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],\n2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))};a.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];a[6]=b[6]+c[6];a[7]=b[7]+c[7];a[8]=b[8]+c[8];return a};a.subtract=d;a.multiplyScalar=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;a[6]=b[6]*c;a[7]=b[7]*c;a[8]=b[8]*c;return a};a.multiplyScalarAndAdd=function(a,b,c,d){a[0]=b[0]+c[0]*d;a[1]=b[1]+c[1]*d;a[2]=b[2]+c[2]*d;a[3]=b[3]+c[3]*d;a[4]=\nb[4]+c[4]*d;a[5]=b[5]+c[5]*d;a[6]=b[6]+c[6]*d;a[7]=b[7]+c[7]*d;a[8]=b[8]+c[8]*d;return a};a.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]};a.equals=function(a,b){var c=a[0],d=a[1],g=a[2],k=a[3],l=a[4],q=a[5],r=a[6],u=a[7];a=a[8];var z=b[0],t=b[1],x=b[2],v=b[3],A=b[4],B=b[5],E=b[6],D=b[7];b=b[8];return Math.abs(c-z)<=f.EPSILON*Math.max(1,Math.abs(c),Math.abs(z))&&Math.abs(d-t)<=f.EPSILON*Math.max(1,\nMath.abs(d),Math.abs(t))&&Math.abs(g-x)<=f.EPSILON*Math.max(1,Math.abs(g),Math.abs(x))&&Math.abs(k-v)<=f.EPSILON*Math.max(1,Math.abs(k),Math.abs(v))&&Math.abs(l-A)<=f.EPSILON*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(q-B)<=f.EPSILON*Math.max(1,Math.abs(q),Math.abs(B))&&Math.abs(r-E)<=f.EPSILON*Math.max(1,Math.abs(r),Math.abs(E))&&Math.abs(u-D)<=f.EPSILON*Math.max(1,Math.abs(u),Math.abs(D))&&Math.abs(a-b)<=f.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};a.sub=a.mul=void 0;var f=function(a){if(a&&\na.__esModule)return a;var b={};if(null!=a)for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var d=ea&&ba?ba(a,c):{};d.get||d.set?ea(b,c,d):b[c]=a[c]}b.default=a;return b}(Ia);a.mul=b;a.sub=d});P(Bd);var Cd=O(function(c,a){function b(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function d(a,b,c){var d=b[0],h=b[1],f=b[2],m=b[3],g=b[4],k=b[5],n=b[6],x=b[7],v=b[8],A=b[9],B=b[10],E=b[11],D=b[12],M=b[13],J=b[14];\nb=b[15];var G=c[0],w=c[1],U=c[2],y=c[3];a[0]=G*d+w*g+U*v+y*D;a[1]=G*h+w*k+U*A+y*M;a[2]=G*f+w*n+U*B+y*J;a[3]=G*m+w*x+U*E+y*b;G=c[4];w=c[5];U=c[6];y=c[7];a[4]=G*d+w*g+U*v+y*D;a[5]=G*h+w*k+U*A+y*M;a[6]=G*f+w*n+U*B+y*J;a[7]=G*m+w*x+U*E+y*b;G=c[8];w=c[9];U=c[10];y=c[11];a[8]=G*d+w*g+U*v+y*D;a[9]=G*h+w*k+U*A+y*M;a[10]=G*f+w*n+U*B+y*J;a[11]=G*m+w*x+U*E+y*b;G=c[12];w=c[13];U=c[14];y=c[15];a[12]=G*d+w*g+U*v+y*D;a[13]=G*h+w*k+U*A+y*M;a[14]=G*f+w*n+U*B+y*J;a[15]=G*m+w*x+U*E+y*b;return a}function f(a,b,c){var d=\nb[0],h=b[1],f=b[2],m=b[3],g=d+d,k=h+h,n=f+f;b=d*g;var x=d*k;d*=n;var v=h*k;h*=n;f*=n;g*=m;k*=m;m*=n;a[0]=1-(v+f);a[1]=x+m;a[2]=d-k;a[3]=0;a[4]=x-m;a[5]=1-(b+f);a[6]=h+g;a[7]=0;a[8]=d+k;a[9]=h-g;a[10]=1-(b+v);a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a}function g(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];a[4]=b[4]-c[4];a[5]=b[5]-c[5];a[6]=b[6]-c[6];a[7]=b[7]-c[7];a[8]=b[8]-c[8];a[9]=b[9]-c[9];a[10]=b[10]-c[10];a[11]=b[11]-c[11];a[12]=b[12]-c[12];a[13]=b[13]-c[13];\na[14]=b[14]-c[14];a[15]=b[15]-c[15];return a}Object.defineProperty(a,\"__esModule\",{value:!0});a.create=function(){var a=new k.ARRAY_TYPE(16);k.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0);a[0]=1;a[5]=1;a[10]=1;a[15]=1;return a};a.clone=function(a){var b=new k.ARRAY_TYPE(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];\nb[15]=a[15];return b};a.copy=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};a.fromValues=function(a,b,c,d,f,q,g,u,z,t,x,v,A,B,E,D){var h=new k.ARRAY_TYPE(16);h[0]=a;h[1]=b;h[2]=c;h[3]=d;h[4]=f;h[5]=q;h[6]=g;h[7]=u;h[8]=z;h[9]=t;h[10]=x;h[11]=v;h[12]=A;h[13]=B;h[14]=E;h[15]=D;return h};a.set=function(a,b,c,d,f,q,g,k,z,t,x,v,A,B,E,D,M){a[0]=b;a[1]=c;a[2]=\nd;a[3]=f;a[4]=q;a[5]=g;a[6]=k;a[7]=z;a[8]=t;a[9]=x;a[10]=v;a[11]=A;a[12]=B;a[13]=E;a[14]=D;a[15]=M;return a};a.identity=b;a.transpose=function(a,b){if(a===b){var c=b[1],d=b[2],h=b[3],f=b[6],g=b[7],m=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=c;a[6]=b[9];a[7]=b[13];a[8]=d;a[9]=f;a[11]=b[14];a[12]=h;a[13]=g;a[14]=m}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a};\na.invert=function(a,b){var c=b[0],d=b[1],h=b[2],f=b[3],g=b[4],k=b[5],m=b[6],t=b[7],x=b[8],v=b[9],A=b[10],B=b[11],E=b[12],D=b[13],M=b[14];b=b[15];var J=c*k-d*g,G=c*m-h*g,w=c*t-f*g,U=d*m-h*k,y=d*t-f*k,C=h*t-f*m,F=x*D-v*E,H=x*M-A*E,I=x*b-B*E,L=v*M-A*D,N=v*b-B*D,O=A*b-B*M,K=J*O-G*N+w*L+U*I-y*H+C*F;if(!K)return null;K=1/K;a[0]=(k*O-m*N+t*L)*K;a[1]=(h*N-d*O-f*L)*K;a[2]=(D*C-M*y+b*U)*K;a[3]=(A*y-v*C-B*U)*K;a[4]=(m*I-g*O-t*H)*K;a[5]=(c*O-h*I+f*H)*K;a[6]=(M*w-E*C-b*G)*K;a[7]=(x*C-A*w+B*G)*K;a[8]=(g*N-k*I+\nt*F)*K;a[9]=(d*I-c*N-f*F)*K;a[10]=(E*y-D*w+b*J)*K;a[11]=(v*w-x*y-B*J)*K;a[12]=(k*H-g*L-m*F)*K;a[13]=(c*L-d*H+h*F)*K;a[14]=(D*G-E*U-M*J)*K;a[15]=(x*U-v*G+A*J)*K;return a};a.adjoint=function(a,b){var c=b[0],d=b[1],h=b[2],f=b[3],g=b[4],k=b[5],m=b[6],t=b[7],x=b[8],v=b[9],A=b[10],B=b[11],E=b[12],D=b[13],M=b[14];b=b[15];a[0]=k*(A*b-B*M)-v*(m*b-t*M)+D*(m*B-t*A);a[1]=-(d*(A*b-B*M)-v*(h*b-f*M)+D*(h*B-f*A));a[2]=d*(m*b-t*M)-k*(h*b-f*M)+D*(h*t-f*m);a[3]=-(d*(m*B-t*A)-k*(h*B-f*A)+v*(h*t-f*m));a[4]=-(g*(A*b-B*\nM)-x*(m*b-t*M)+E*(m*B-t*A));a[5]=c*(A*b-B*M)-x*(h*b-f*M)+E*(h*B-f*A);a[6]=-(c*(m*b-t*M)-g*(h*b-f*M)+E*(h*t-f*m));a[7]=c*(m*B-t*A)-g*(h*B-f*A)+x*(h*t-f*m);a[8]=g*(v*b-B*D)-x*(k*b-t*D)+E*(k*B-t*v);a[9]=-(c*(v*b-B*D)-x*(d*b-f*D)+E*(d*B-f*v));a[10]=c*(k*b-t*D)-g*(d*b-f*D)+E*(d*t-f*k);a[11]=-(c*(k*B-t*v)-g*(d*B-f*v)+x*(d*t-f*k));a[12]=-(g*(v*M-A*D)-x*(k*M-m*D)+E*(k*A-m*v));a[13]=c*(v*M-A*D)-x*(d*M-h*D)+E*(d*A-h*v);a[14]=-(c*(k*M-m*D)-g*(d*M-h*D)+E*(d*m-h*k));a[15]=c*(k*A-m*v)-g*(d*A-h*v)+x*(d*m-h*k);return a};\na.determinant=function(a){var b=a[0],c=a[1],d=a[2],h=a[3],f=a[4],g=a[5],k=a[6],z=a[7],t=a[8],x=a[9],v=a[10],A=a[11],B=a[12],E=a[13],D=a[14];a=a[15];return(b*g-c*f)*(v*a-A*D)-(b*k-d*f)*(x*a-A*E)+(b*z-h*f)*(x*D-v*E)+(c*k-d*g)*(t*a-A*B)-(c*z-h*g)*(t*D-v*B)+(d*z-h*k)*(t*E-x*B)};a.multiply=d;a.translate=function(a,b,c){var d=c[0],h=c[1];c=c[2];if(b===a)a[12]=b[0]*d+b[4]*h+b[8]*c+b[12],a[13]=b[1]*d+b[5]*h+b[9]*c+b[13],a[14]=b[2]*d+b[6]*h+b[10]*c+b[14],a[15]=b[3]*d+b[7]*h+b[11]*c+b[15];else{var f=b[0];var g=\nb[1];var k=b[2];var m=b[3];var n=b[4];var x=b[5];var v=b[6];var A=b[7];var B=b[8];var E=b[9];var D=b[10];var M=b[11];a[0]=f;a[1]=g;a[2]=k;a[3]=m;a[4]=n;a[5]=x;a[6]=v;a[7]=A;a[8]=B;a[9]=E;a[10]=D;a[11]=M;a[12]=f*d+n*h+B*c+b[12];a[13]=g*d+x*h+E*c+b[13];a[14]=k*d+v*h+D*c+b[14];a[15]=m*d+A*h+M*c+b[15]}return a};a.scale=function(a,b,c){var d=c[0],h=c[1];c=c[2];a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;a[3]=b[3]*d;a[4]=b[4]*h;a[5]=b[5]*h;a[6]=b[6]*h;a[7]=b[7]*h;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*\nc;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};a.rotate=function(a,b,c,d){var h=d[0],f=d[1];d=d[2];var g=Math.sqrt(h*h+f*f+d*d);if(g<k.EPSILON)return null;g=1/g;h*=g;f*=g;d*=g;var u=Math.sin(c);var m=Math.cos(c);var n=1-m;c=b[0];g=b[1];var x=b[2];var v=b[3];var p=b[4];var B=b[5];var E=b[6];var D=b[7];var M=b[8];var J=b[9];var G=b[10];var w=b[11];var y=h*h*n+m;var C=f*h*n+d*u;var F=d*h*n-f*u;var H=h*f*n-d*u;var I=f*f*n+m;var K=d*f*n+h*u;var L=h*d*n+f*u;h=f*d*n-h*u;f=d*d*n+m;a[0]=c*y+p*\nC+M*F;a[1]=g*y+B*C+J*F;a[2]=x*y+E*C+G*F;a[3]=v*y+D*C+w*F;a[4]=c*H+p*I+M*K;a[5]=g*H+B*I+J*K;a[6]=x*H+E*I+G*K;a[7]=v*H+D*I+w*K;a[8]=c*L+p*h+M*f;a[9]=g*L+B*h+J*f;a[10]=x*L+E*h+G*f;a[11]=v*L+D*h+w*f;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a};a.rotateX=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var h=b[4],f=b[5],g=b[6],k=b[7],m=b[8],n=b[9],x=b[10],v=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=h*c+m*d;a[5]=f*c+\nn*d;a[6]=g*c+x*d;a[7]=k*c+v*d;a[8]=m*c-h*d;a[9]=n*c-f*d;a[10]=x*c-g*d;a[11]=v*c-k*d;return a};a.rotateY=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var f=b[0],h=b[1],g=b[2],k=b[3],m=b[8],n=b[9],x=b[10],v=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=f*c-m*d;a[1]=h*c-n*d;a[2]=g*c-x*d;a[3]=k*c-v*d;a[8]=f*d+m*c;a[9]=h*d+n*c;a[10]=g*d+x*c;a[11]=k*d+v*c;return a};a.rotateZ=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var f=b[0],h=b[1],\ng=b[2],k=b[3],m=b[4],n=b[5],x=b[6],v=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=f*c+m*d;a[1]=h*c+n*d;a[2]=g*c+x*d;a[3]=k*c+v*d;a[4]=m*c-f*d;a[5]=n*c-h*d;a[6]=x*c-g*d;a[7]=v*c-k*d;return a};a.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};a.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b[1];\na[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=b[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};a.fromRotation=function(a,b,c){var d=c[0],f=c[1];c=c[2];var h=Math.sqrt(d*d+f*f+c*c);if(h<k.EPSILON)return null;h=1/h;d*=h;f*=h;c*=h;h=Math.sin(b);b=Math.cos(b);var g=1-b;a[0]=d*d*g+b;a[1]=f*d*g+c*h;a[2]=c*d*g-f*h;a[3]=0;a[4]=d*f*g-c*h;a[5]=f*f*g+b;a[6]=c*f*g+d*h;a[7]=0;a[8]=d*c*g+f*h;a[9]=f*c*g-d*h;a[10]=c*c*g+b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};a.fromXRotation=function(a,b){var c=Math.sin(b);\nb=Math.cos(b);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=c;a[7]=0;a[8]=0;a[9]=-c;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};a.fromYRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=0;a[2]=-c;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=c;a[9]=0;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};a.fromZRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=0;a[3]=0;a[4]=-c;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=\n0;a[15]=1;return a};a.fromRotationTranslation=f;a.fromQuat2=function(a,b){var c=new k.ARRAY_TYPE(3),d=-b[0],h=-b[1],g=-b[2],r=b[3],u=b[4],m=b[5],t=b[6],x=b[7],v=d*d+h*h+g*g+r*r;0<v?(c[0]=2*(u*r+x*d+m*g-t*h)/v,c[1]=2*(m*r+x*h+t*d-u*g)/v,c[2]=2*(t*r+x*g+u*h-m*d)/v):(c[0]=2*(u*r+x*d+m*g-t*h),c[1]=2*(m*r+x*h+t*d-u*g),c[2]=2*(t*r+x*g+u*h-m*d));f(a,b,c);return a};a.getTranslation=function(a,b){a[0]=b[12];a[1]=b[13];a[2]=b[14];return a};a.getScaling=function(a,b){var c=b[0],d=b[1],f=b[2],h=b[4],g=b[5],k=\nb[6],m=b[8],t=b[9];b=b[10];a[0]=Math.sqrt(c*c+d*d+f*f);a[1]=Math.sqrt(h*h+g*g+k*k);a[2]=Math.sqrt(m*m+t*t+b*b);return a};a.getRotation=function(a,b){var c=b[0]+b[5]+b[10];0<c?(c=2*Math.sqrt(c+1),a[3]=.25*c,a[0]=(b[6]-b[9])/c,a[1]=(b[8]-b[2])/c,a[2]=(b[1]-b[4])/c):b[0]>b[5]&&b[0]>b[10]?(c=2*Math.sqrt(1+b[0]-b[5]-b[10]),a[3]=(b[6]-b[9])/c,a[0]=.25*c,a[1]=(b[1]+b[4])/c,a[2]=(b[8]+b[2])/c):b[5]>b[10]?(c=2*Math.sqrt(1+b[5]-b[0]-b[10]),a[3]=(b[8]-b[2])/c,a[0]=(b[1]+b[4])/c,a[1]=.25*c,a[2]=(b[6]+b[9])/c):\n(c=2*Math.sqrt(1+b[10]-b[0]-b[5]),a[3]=(b[1]-b[4])/c,a[0]=(b[8]+b[2])/c,a[1]=(b[6]+b[9])/c,a[2]=.25*c);return a};a.fromRotationTranslationScale=function(a,b,c,d){var f=b[0],h=b[1],g=b[2],k=b[3],m=f+f,t=h+h,x=g+g;b=f*m;var v=f*t;f*=x;var n=h*t;h*=x;g*=x;m*=k;t*=k;k*=x;x=d[0];var p=d[1];d=d[2];a[0]=(1-(n+g))*x;a[1]=(v+k)*x;a[2]=(f-t)*x;a[3]=0;a[4]=(v-k)*p;a[5]=(1-(b+g))*p;a[6]=(h+m)*p;a[7]=0;a[8]=(f+t)*d;a[9]=(h-m)*d;a[10]=(1-(b+n))*d;a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a};a.fromRotationTranslationScaleOrigin=\nfunction(a,b,c,d,f){var h=b[0],l=b[1],g=b[2],k=b[3],m=h+h,x=l+l,v=g+g;b=h*m;var n=h*x,p=h*v;h=l*x;l*=v;var E=g*v;g=k*m;x*=k;var D=k*v,M=d[0],J=d[1];v=d[2];d=f[0];k=f[1];f=f[2];m=(1-(h+E))*M;var G=(n+D)*M;M*=p-x;n=(n-D)*J;E=(1-(b+E))*J;J*=l+g;p=(p+x)*v;l=(l-g)*v;b=(1-(b+h))*v;a[0]=m;a[1]=G;a[2]=M;a[3]=0;a[4]=n;a[5]=E;a[6]=J;a[7]=0;a[8]=p;a[9]=l;a[10]=b;a[11]=0;a[12]=c[0]+d-(m*d+n*k+p*f);a[13]=c[1]+k-(G*d+E*k+l*f);a[14]=c[2]+f-(M*d+J*k+b*f);a[15]=1;return a};a.fromQuat=function(a,b){var c=b[0],d=b[1],\nf=b[2];b=b[3];var h=c+c,g=d+d,k=f+f;c*=h;var m=d*h;d*=g;var t=f*h,x=f*g;f*=k;h*=b;g*=b;b*=k;a[0]=1-d-f;a[1]=m+b;a[2]=t-g;a[3]=0;a[4]=m-b;a[5]=1-c-f;a[6]=x+h;a[7]=0;a[8]=t+g;a[9]=x-h;a[10]=1-c-d;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};a.frustum=function(a,b,c,d,f,g,k){var h=1/(c-b),l=1/(f-d),q=1/(g-k);a[0]=2*g*h;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*g*l;a[6]=0;a[7]=0;a[8]=(c+b)*h;a[9]=(f+d)*l;a[10]=(k+g)*q;a[11]=-1;a[12]=0;a[13]=0;a[14]=k*g*2*q;a[15]=0;return a};a.perspective=function(a,b,c,\nd,f){b=1/Math.tan(b/2);a[0]=b/c;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[11]=-1;a[12]=0;a[13]=0;a[15]=0;null!=f&&Infinity!==f?(c=1/(d-f),a[10]=(f+d)*c,a[14]=2*f*d*c):(a[10]=-1,a[14]=-2*d);return a};a.perspectiveFromFieldOfView=function(a,b,c,d){var f=Math.tan(b.upDegrees*Math.PI/180),h=Math.tan(b.downDegrees*Math.PI/180),g=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*Math.PI/180);var k=2/(g+b),m=2/(f+h);a[0]=k;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=m;a[6]=0;a[7]=\n0;a[8]=-((g-b)*k*.5);a[9]=(f-h)*m*.5;a[10]=d/(c-d);a[11]=-1;a[12]=0;a[13]=0;a[14]=d*c/(c-d);a[15]=0;return a};a.ortho=function(a,b,c,d,f,g,k){var h=1/(b-c),l=1/(d-f),q=1/(g-k);a[0]=-2*h;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*l;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*q;a[11]=0;a[12]=(b+c)*h;a[13]=(f+d)*l;a[14]=(k+g)*q;a[15]=1;return a};a.lookAt=function(a,c,d,f){var h=c[0],g=c[1];c=c[2];var r=f[0];var u=f[1];var m=f[2];var t=d[0];f=d[1];var x=d[2];if(Math.abs(h-t)<k.EPSILON&&Math.abs(g-f)<k.EPSILON&&Math.abs(c-\nx)<k.EPSILON)return b(a);d=h-t;f=g-f;t=c-x;var v=1/Math.sqrt(d*d+f*f+t*t);d*=v;f*=v;t*=v;x=u*t-m*f;m=m*d-r*t;r=r*f-u*d;(v=Math.sqrt(x*x+m*m+r*r))?(v=1/v,x*=v,m*=v,r*=v):r=m=x=0;u=f*r-t*m;var n=t*x-d*r;var p=d*m-f*x;(v=Math.sqrt(u*u+n*n+p*p))?(v=1/v,u*=v,n*=v,p*=v):p=n=u=0;a[0]=x;a[1]=u;a[2]=d;a[3]=0;a[4]=m;a[5]=n;a[6]=f;a[7]=0;a[8]=r;a[9]=p;a[10]=t;a[11]=0;a[12]=-(x*h+m*g+r*c);a[13]=-(u*h+n*g+p*c);a[14]=-(d*h+f*g+t*c);a[15]=1;return a};a.targetTo=function(a,b,c,d){var f=b[0],h=b[1];b=b[2];var g=d[0],\nk=d[1],m=d[2];d=f-c[0];var t=h-c[1];c=b-c[2];var x=d*d+t*t+c*c;0<x&&(x=1/Math.sqrt(x),d*=x,t*=x,c*=x);var v=k*c-m*t;m=m*d-g*c;g=g*t-k*d;x=v*v+m*m+g*g;0<x&&(x=1/Math.sqrt(x),v*=x,m*=x,g*=x);a[0]=v;a[1]=m;a[2]=g;a[3]=0;a[4]=t*g-c*m;a[5]=c*v-d*g;a[6]=d*m-t*v;a[7]=0;a[8]=d;a[9]=t;a[10]=c;a[11]=0;a[12]=f;a[13]=h;a[14]=b;a[15]=1;return a};a.str=function(a){return\"mat4(\"+a[0]+\", \"+a[1]+\", \"+a[2]+\", \"+a[3]+\", \"+a[4]+\", \"+a[5]+\", \"+a[6]+\", \"+a[7]+\", \"+a[8]+\", \"+a[9]+\", \"+a[10]+\", \"+a[11]+\", \"+a[12]+\", \"+a[13]+\n\", \"+a[14]+\", \"+a[15]+\")\"};a.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};a.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];a[6]=b[6]+c[6];a[7]=b[7]+c[7];a[8]=b[8]+c[8];a[9]=\nb[9]+c[9];a[10]=b[10]+c[10];a[11]=b[11]+c[11];a[12]=b[12]+c[12];a[13]=b[13]+c[13];a[14]=b[14]+c[14];a[15]=b[15]+c[15];return a};a.subtract=g;a.multiplyScalar=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;a[6]=b[6]*c;a[7]=b[7]*c;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12]*c;a[13]=b[13]*c;a[14]=b[14]*c;a[15]=b[15]*c;return a};a.multiplyScalarAndAdd=function(a,b,c,d){a[0]=b[0]+c[0]*d;a[1]=b[1]+c[1]*d;a[2]=b[2]+c[2]*d;a[3]=b[3]+c[3]*d;a[4]=\nb[4]+c[4]*d;a[5]=b[5]+c[5]*d;a[6]=b[6]+c[6]*d;a[7]=b[7]+c[7]*d;a[8]=b[8]+c[8]*d;a[9]=b[9]+c[9]*d;a[10]=b[10]+c[10]*d;a[11]=b[11]+c[11]*d;a[12]=b[12]+c[12]*d;a[13]=b[13]+c[13]*d;a[14]=b[14]+c[14]*d;a[15]=b[15]+c[15]*d;return a};a.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]};a.equals=function(a,\nb){var c=a[0],d=a[1],f=a[2],g=a[3],h=a[4],u=a[5],z=a[6],t=a[7],x=a[8],v=a[9],m=a[10],B=a[11],E=a[12],D=a[13],M=a[14];a=a[15];var J=b[0],G=b[1],w=b[2],y=b[3],C=b[4],F=b[5],H=b[6],I=b[7],K=b[8],L=b[9],N=b[10],O=b[11],P=b[12],Q=b[13],R=b[14];b=b[15];return Math.abs(c-J)<=k.EPSILON*Math.max(1,Math.abs(c),Math.abs(J))&&Math.abs(d-G)<=k.EPSILON*Math.max(1,Math.abs(d),Math.abs(G))&&Math.abs(f-w)<=k.EPSILON*Math.max(1,Math.abs(f),Math.abs(w))&&Math.abs(g-y)<=k.EPSILON*Math.max(1,Math.abs(g),Math.abs(y))&&\nMath.abs(h-C)<=k.EPSILON*Math.max(1,Math.abs(h),Math.abs(C))&&Math.abs(u-F)<=k.EPSILON*Math.max(1,Math.abs(u),Math.abs(F))&&Math.abs(z-H)<=k.EPSILON*Math.max(1,Math.abs(z),Math.abs(H))&&Math.abs(t-I)<=k.EPSILON*Math.max(1,Math.abs(t),Math.abs(I))&&Math.abs(x-K)<=k.EPSILON*Math.max(1,Math.abs(x),Math.abs(K))&&Math.abs(v-L)<=k.EPSILON*Math.max(1,Math.abs(v),Math.abs(L))&&Math.abs(m-N)<=k.EPSILON*Math.max(1,Math.abs(m),Math.abs(N))&&Math.abs(B-O)<=k.EPSILON*Math.max(1,Math.abs(B),Math.abs(O))&&Math.abs(E-\nP)<=k.EPSILON*Math.max(1,Math.abs(E),Math.abs(P))&&Math.abs(D-Q)<=k.EPSILON*Math.max(1,Math.abs(D),Math.abs(Q))&&Math.abs(M-R)<=k.EPSILON*Math.max(1,Math.abs(M),Math.abs(R))&&Math.abs(a-b)<=k.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};a.sub=a.mul=void 0;var k=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var d=ea&&ba?ba(a,c):{};d.get||d.set?ea(b,c,d):b[c]=a[c]}b.default=a;return b}(Ia);a.mul=d;a.sub=g});P(Cd);var Dd=O(function(c,\na){function b(){var a=new r.ARRAY_TYPE(3);r.ARRAY_TYPE!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0);return a}function d(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)}function f(a,b,c){var d=new r.ARRAY_TYPE(3);d[0]=a;d[1]=b;d[2]=c;return d}function g(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];return a}function k(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];a[2]=b[2]*c[2];return a}function h(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];a[2]=b[2]/c[2];return a}function m(a,b){var c=b[0]-a[0],d=b[1]-a[1];\na=b[2]-a[2];return Math.sqrt(c*c+d*d+a*a)}function n(a,b){var c=b[0]-a[0],d=b[1]-a[1];a=b[2]-a[2];return c*c+d*d+a*a}function p(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a}function l(a,b){var c=b[0],d=b[1],f=b[2];c=c*c+d*d+f*f;0<c&&(c=1/Math.sqrt(c));a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;return a}function q(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}Object.defineProperty(a,\"__esModule\",{value:!0});a.create=b;a.clone=function(a){var b=new r.ARRAY_TYPE(3);b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};a.length=\nd;a.fromValues=f;a.copy=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];return a};a.set=function(a,b,c,d){a[0]=b;a[1]=c;a[2]=d;return a};a.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];return a};a.subtract=g;a.multiply=k;a.divide=h;a.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);return a};a.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=Math.floor(b[2]);return a};a.min=function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],\nc[1]);a[2]=Math.min(b[2],c[2]);return a};a.max=function(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);a[2]=Math.max(b[2],c[2]);return a};a.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);return a};a.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;return a};a.scaleAndAdd=function(a,b,c,d){a[0]=b[0]+c[0]*d;a[1]=b[1]+c[1]*d;a[2]=b[2]+c[2]*d;return a};a.distance=m;a.squaredDistance=n;a.squaredLength=p;a.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];\na[2]=-b[2];return a};a.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];return a};a.normalize=l;a.dot=q;a.cross=function(a,b,c){var d=b[0],f=b[1];b=b[2];var l=c[0],g=c[1];c=c[2];a[0]=f*c-b*g;a[1]=b*l-d*c;a[2]=d*g-f*l;return a};a.lerp=function(a,b,c,d){var f=b[0],l=b[1];b=b[2];a[0]=f+d*(c[0]-f);a[1]=l+d*(c[1]-l);a[2]=b+d*(c[2]-b);return a};a.hermite=function(a,b,c,d,f,l){var g=l*l,h=g*(2*l-3)+1,k=g*(l-2)+l,q=g*(l-1);l=g*(3-2*l);a[0]=b[0]*h+c[0]*k+d[0]*q+f[0]*l;a[1]=b[1]*h+c[1]*k+d[1]*q+f[1]*\nl;a[2]=b[2]*h+c[2]*k+d[2]*q+f[2]*l;return a};a.bezier=function(a,b,c,d,f,l){var g=1-l,h=g*g,k=l*l,q=h*g;h*=3*l;g*=3*k;l*=k;a[0]=b[0]*q+c[0]*h+d[0]*g+f[0]*l;a[1]=b[1]*q+c[1]*h+d[1]*g+f[1]*l;a[2]=b[2]*q+c[2]*h+d[2]*g+f[2]*l;return a};a.random=function(a,b){b=b||1;var c=2*r.RANDOM()*Math.PI,d=2*r.RANDOM()-1,f=Math.sqrt(1-d*d)*b;a[0]=Math.cos(c)*f;a[1]=Math.sin(c)*f;a[2]=d*b;return a};a.transformMat4=function(a,b,c){var d=b[0],f=b[1];b=b[2];var l=c[3]*d+c[7]*f+c[11]*b+c[15];l=l||1;a[0]=(c[0]*d+c[4]*f+\nc[8]*b+c[12])/l;a[1]=(c[1]*d+c[5]*f+c[9]*b+c[13])/l;a[2]=(c[2]*d+c[6]*f+c[10]*b+c[14])/l;return a};a.transformMat3=function(a,b,c){var d=b[0],f=b[1];b=b[2];a[0]=d*c[0]+f*c[3]+b*c[6];a[1]=d*c[1]+f*c[4]+b*c[7];a[2]=d*c[2]+f*c[5]+b*c[8];return a};a.transformQuat=function(a,b,c){var d=c[0],f=c[1],l=c[2],g=b[0],h=b[1];b=b[2];var k=f*b-l*h,q=l*g-d*b,r=d*h-f*g;c=2*c[3];a[0]=g+k*c+2*(f*r-l*q);a[1]=h+q*c+2*(l*k-d*r);a[2]=b+r*c+2*(d*q-f*k);return a};a.rotateX=function(a,b,c,d){var f=[],l=[];f[0]=b[0]-c[0];\nf[1]=b[1]-c[1];f[2]=b[2]-c[2];l[0]=f[0];l[1]=f[1]*Math.cos(d)-f[2]*Math.sin(d);l[2]=f[1]*Math.sin(d)+f[2]*Math.cos(d);a[0]=l[0]+c[0];a[1]=l[1]+c[1];a[2]=l[2]+c[2];return a};a.rotateY=function(a,b,c,d){var f=[],l=[];f[0]=b[0]-c[0];f[1]=b[1]-c[1];f[2]=b[2]-c[2];l[0]=f[2]*Math.sin(d)+f[0]*Math.cos(d);l[1]=f[1];l[2]=f[2]*Math.cos(d)-f[0]*Math.sin(d);a[0]=l[0]+c[0];a[1]=l[1]+c[1];a[2]=l[2]+c[2];return a};a.rotateZ=function(a,b,c,d){var f=[],l=[];f[0]=b[0]-c[0];f[1]=b[1]-c[1];f[2]=b[2]-c[2];l[0]=f[0]*Math.cos(d)-\nf[1]*Math.sin(d);l[1]=f[0]*Math.sin(d)+f[1]*Math.cos(d);l[2]=f[2];a[0]=l[0]+c[0];a[1]=l[1]+c[1];a[2]=l[2]+c[2];return a};a.angle=function(a,b){a=f(a[0],a[1],a[2]);b=f(b[0],b[1],b[2]);l(a,a);l(b,b);b=q(a,b);return 1<b?0:-1>b?Math.PI:Math.acos(b)};a.zero=function(a){a[0]=0;a[1]=0;a[2]=0;return a};a.str=function(a){return\"vec3(\"+a[0]+\", \"+a[1]+\", \"+a[2]+\")\"};a.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]};a.equals=function(a,b){var c=a[0],d=a[1];a=a[2];var f=b[0],l=b[1];b=b[2];\nreturn Math.abs(c-f)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(f))&&Math.abs(d-l)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(l))&&Math.abs(a-b)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};a.forEach=a.sqrLen=a.len=a.sqrDist=a.dist=a.div=a.mul=a.sub=void 0;var r=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var d=ea&&ba?ba(a,c):{};d.get||d.set?ea(b,c,d):b[c]=a[c]}b.default=a;return b}(Ia);a.sub=g;a.mul=k;a.div=h;a.dist=\nm;a.sqrDist=n;a.len=d;a.sqrLen=p;c=function(){var a=b();return function(b,c,d,f,l,g){c||(c=3);d||(d=0);for(f=f?Math.min(f*c+d,b.length):b.length;d<f;d+=c)a[0]=b[d],a[1]=b[d+1],a[2]=b[d+2],l(a,a,g),b[d]=a[0],b[d+1]=a[1],b[d+2]=a[2];return b}}();a.forEach=c});P(Dd);var Ed=O(function(c,a){function b(){var a=new p.ARRAY_TYPE(4);p.ARRAY_TYPE!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0,a[3]=0);return a}function d(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];return a}function f(a,b,c){a[0]=\nb[0]*c[0];a[1]=b[1]*c[1];a[2]=b[2]*c[2];a[3]=b[3]*c[3];return a}function g(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];a[2]=b[2]/c[2];a[3]=b[3]/c[3];return a}function k(a,b){var c=b[0]-a[0],d=b[1]-a[1],f=b[2]-a[2];a=b[3]-a[3];return Math.sqrt(c*c+d*d+f*f+a*a)}function h(a,b){var c=b[0]-a[0],d=b[1]-a[1],f=b[2]-a[2];a=b[3]-a[3];return c*c+d*d+f*f+a*a}function m(a){var b=a[0],c=a[1],d=a[2];a=a[3];return Math.sqrt(b*b+c*c+d*d+a*a)}function n(a){var b=a[0],c=a[1],d=a[2];a=a[3];return b*b+c*c+d*d+a*a}Object.defineProperty(a,\n\"__esModule\",{value:!0});a.create=b;a.clone=function(a){var b=new p.ARRAY_TYPE(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};a.fromValues=function(a,b,c,d){var f=new p.ARRAY_TYPE(4);f[0]=a;f[1]=b;f[2]=c;f[3]=d;return f};a.copy=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a};a.set=function(a,b,c,d,f){a[0]=b;a[1]=c;a[2]=d;a[3]=f;return a};a.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];return a};a.subtract=d;a.multiply=f;a.divide=g;a.ceil=function(a,\nb){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);a[3]=Math.ceil(b[3]);return a};a.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=Math.floor(b[2]);a[3]=Math.floor(b[3]);return a};a.min=function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);a[2]=Math.min(b[2],c[2]);a[3]=Math.min(b[3],c[3]);return a};a.max=function(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);a[2]=Math.max(b[2],c[2]);a[3]=Math.max(b[3],c[3]);return a};a.round=function(a,b){a[0]=\nMath.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);a[3]=Math.round(b[3]);return a};a.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;return a};a.scaleAndAdd=function(a,b,c,d){a[0]=b[0]+c[0]*d;a[1]=b[1]+c[1]*d;a[2]=b[2]+c[2]*d;a[3]=b[3]+c[3]*d;return a};a.distance=k;a.squaredDistance=h;a.length=m;a.squaredLength=n;a.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=-b[3];return a};a.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];a[3]=1/b[3];return a};\na.normalize=function(a,b){var c=b[0],d=b[1],f=b[2];b=b[3];var g=c*c+d*d+f*f+b*b;0<g&&(g=1/Math.sqrt(g));a[0]=c*g;a[1]=d*g;a[2]=f*g;a[3]=b*g;return a};a.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};a.cross=function(a,b,c,d){var f=c[0]*d[1]-c[1]*d[0],g=c[0]*d[2]-c[2]*d[0],l=c[0]*d[3]-c[3]*d[0],h=c[1]*d[2]-c[2]*d[1],k=c[1]*d[3]-c[3]*d[1];c=c[2]*d[3]-c[3]*d[2];d=b[0];var q=b[1],r=b[2];b=b[3];a[0]=q*c-r*k+b*h;a[1]=-(d*c)+r*l-b*g;a[2]=d*k-q*l+b*f;a[3]=-(d*h)+q*g-r*f;return a};a.lerp=\nfunction(a,b,c,d){var f=b[0],g=b[1],l=b[2];b=b[3];a[0]=f+d*(c[0]-f);a[1]=g+d*(c[1]-g);a[2]=l+d*(c[2]-l);a[3]=b+d*(c[3]-b);return a};a.random=function(a,b){b=b||1;do{var c=2*p.RANDOM()-1;var d=2*p.RANDOM()-1;var f=c*c+d*d}while(1<=f);do{var g=2*p.RANDOM()-1;var l=2*p.RANDOM()-1;var h=g*g+l*l}while(1<=h);f=Math.sqrt((1-f)/h);a[0]=b*c;a[1]=b*d;a[2]=b*g*f;a[3]=b*l*f;return a};a.transformMat4=function(a,b,c){var d=b[0],f=b[1],g=b[2];b=b[3];a[0]=c[0]*d+c[4]*f+c[8]*g+c[12]*b;a[1]=c[1]*d+c[5]*f+c[9]*g+c[13]*\nb;a[2]=c[2]*d+c[6]*f+c[10]*g+c[14]*b;a[3]=c[3]*d+c[7]*f+c[11]*g+c[15]*b;return a};a.transformQuat=function(a,b,c){var d=b[0],f=b[1],g=b[2],l=c[0],h=c[1],k=c[2];c=c[3];var q=c*d+h*g-k*f,r=c*f+k*d-l*g,m=c*g+l*f-h*d;d=-l*d-h*f-k*g;a[0]=q*c+d*-l+r*-k-m*-h;a[1]=r*c+d*-h+m*-l-q*-k;a[2]=m*c+d*-k+q*-h-r*-l;a[3]=b[3];return a};a.zero=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a};a.str=function(a){return\"vec4(\"+a[0]+\", \"+a[1]+\", \"+a[2]+\", \"+a[3]+\")\"};a.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===\nb[1]&&a[2]===b[2]&&a[3]===b[3]};a.equals=function(a,b){var c=a[0],d=a[1],f=a[2];a=a[3];var g=b[0],h=b[1],l=b[2];b=b[3];return Math.abs(c-g)<=p.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(d-h)<=p.EPSILON*Math.max(1,Math.abs(d),Math.abs(h))&&Math.abs(f-l)<=p.EPSILON*Math.max(1,Math.abs(f),Math.abs(l))&&Math.abs(a-b)<=p.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};a.forEach=a.sqrLen=a.len=a.sqrDist=a.dist=a.div=a.mul=a.sub=void 0;var p=function(a){if(a&&a.__esModule)return a;var b={};if(null!=\na)for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var d=ea&&ba?ba(a,c):{};d.get||d.set?ea(b,c,d):b[c]=a[c]}b.default=a;return b}(Ia);a.sub=d;a.mul=f;a.div=g;a.dist=k;a.sqrDist=h;a.len=m;a.sqrLen=n;c=function(){var a=b();return function(b,c,d,f,g,h){c||(c=4);d||(d=0);for(f=f?Math.min(f*c+d,b.length):b.length;d<f;d+=c)a[0]=b[d],a[1]=b[d+1],a[2]=b[d+2],a[3]=b[d+3],g(a,a,h),b[d]=a[0],b[d+1]=a[1],b[d+2]=a[2],b[d+3]=a[3];return b}}();a.forEach=c});P(Ed);var Fd=O(function(c,a){function b(a){if(a&&\na.__esModule)return a;var b={};if(null!=a)for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var d=ea&&ba?ba(a,c):{};d.get||d.set?ea(b,c,d):b[c]=a[c]}b.default=a;return b}function d(){var a=new m.ARRAY_TYPE(4);m.ARRAY_TYPE!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0);a[3]=1;return a}function f(a,b,c){c*=.5;var d=Math.sin(c);a[0]=d*b[0];a[1]=d*b[1];a[2]=d*b[2];a[3]=Math.cos(c);return a}function g(a,b,c){var d=b[0],f=b[1],g=b[2];b=b[3];var h=c[0],k=c[1],l=c[2];c=c[3];a[0]=d*c+b*h+f*l-g*k;a[1]=f*\nc+b*k+g*h-d*l;a[2]=g*c+b*l+d*k-f*h;a[3]=b*c-d*h-f*k-g*l;return a}function k(a,b,c,d){var f=b[0],g=b[1],h=b[2];b=b[3];var k=c[0],l=c[1],q=c[2];c=c[3];var r=f*k+g*l+h*q+b*c;0>r&&(r=-r,k=-k,l=-l,q=-q,c=-c);if(1-r>m.EPSILON){var u=Math.acos(r);var n=Math.sin(u);r=Math.sin((1-d)*u)/n;d=Math.sin(d*u)/n}else r=1-d;a[0]=r*f+d*k;a[1]=r*g+d*l;a[2]=r*h+d*q;a[3]=r*b+d*c;return a}function h(a,b){var c=b[0]+b[4]+b[8];if(0<c)c=Math.sqrt(c+1),a[3]=.5*c,c=.5/c,a[0]=(b[5]-b[7])*c,a[1]=(b[6]-b[2])*c,a[2]=(b[1]-b[3])*\nc;else{var d=0;b[4]>b[0]&&(d=1);b[8]>b[3*d+d]&&(d=2);var f=(d+1)%3,g=(d+2)%3;c=Math.sqrt(b[3*d+d]-b[3*f+f]-b[3*g+g]+1);a[d]=.5*c;c=.5/c;a[3]=(b[3*f+g]-b[3*g+f])*c;a[f]=(b[3*f+d]+b[3*d+f])*c;a[g]=(b[3*g+d]+b[3*d+g])*c}return a}Object.defineProperty(a,\"__esModule\",{value:!0});a.create=d;a.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};a.setAxisAngle=f;a.getAxisAngle=function(a,b){var c=2*Math.acos(b[3]),d=Math.sin(c/2);d>m.EPSILON?(a[0]=b[0]/d,a[1]=b[1]/d,a[2]=b[2]/d):(a[0]=1,a[1]=0,a[2]=\n0);return c};a.multiply=g;a.rotateX=function(a,b,c){c*=.5;var d=b[0],f=b[1],g=b[2];b=b[3];var h=Math.sin(c);c=Math.cos(c);a[0]=d*c+b*h;a[1]=f*c+g*h;a[2]=g*c-f*h;a[3]=b*c-d*h;return a};a.rotateY=function(a,b,c){c*=.5;var d=b[0],f=b[1],g=b[2];b=b[3];var h=Math.sin(c);c=Math.cos(c);a[0]=d*c-g*h;a[1]=f*c+b*h;a[2]=g*c+d*h;a[3]=b*c-f*h;return a};a.rotateZ=function(a,b,c){c*=.5;var d=b[0],f=b[1],g=b[2];b=b[3];var h=Math.sin(c);c=Math.cos(c);a[0]=d*c+f*h;a[1]=f*c-d*h;a[2]=g*c+b*h;a[3]=b*c-g*h;return a};a.calculateW=\nfunction(a,b){var c=b[0],d=b[1];b=b[2];a[0]=c;a[1]=d;a[2]=b;a[3]=Math.sqrt(Math.abs(1-c*c-d*d-b*b));return a};a.slerp=k;a.random=function(a){var b=m.RANDOM(),c=m.RANDOM(),d=m.RANDOM(),f=Math.sqrt(1-b);b=Math.sqrt(b);a[0]=f*Math.sin(2*Math.PI*c);a[1]=f*Math.cos(2*Math.PI*c);a[2]=b*Math.sin(2*Math.PI*d);a[3]=b*Math.cos(2*Math.PI*d);return a};a.invert=function(a,b){var c=b[0],d=b[1],f=b[2];b=b[3];var g=c*c+d*d+f*f+b*b;g=g?1/g:0;a[0]=-c*g;a[1]=-d*g;a[2]=-f*g;a[3]=b*g;return a};a.conjugate=function(a,\nb){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=b[3];return a};a.fromMat3=h;a.fromEuler=function(a,b,c,d){var f=.5*Math.PI/180;b*=f;c*=f;d*=f;f=Math.sin(b);b=Math.cos(b);var g=Math.sin(c);c=Math.cos(c);var h=Math.sin(d);d=Math.cos(d);a[0]=f*c*d-b*g*h;a[1]=b*g*d+f*c*h;a[2]=b*c*h-f*g*d;a[3]=b*c*d+f*g*h;return a};a.str=function(a){return\"quat(\"+a[0]+\", \"+a[1]+\", \"+a[2]+\", \"+a[3]+\")\"};a.setAxes=a.sqlerp=a.rotationTo=a.equals=a.exactEquals=a.normalize=a.sqrLen=a.squaredLength=a.len=a.length=a.lerp=a.dot=a.scale=\na.mul=a.add=a.set=a.copy=a.fromValues=a.clone=void 0;var m=b(Ia),n=b(Bd),p=b(Dd);c=b(Ed);a.clone=c.clone;a.fromValues=c.fromValues;a.copy=c.copy;a.set=c.set;a.add=c.add;a.mul=g;a.scale=c.scale;a.dot=c.dot;a.lerp=c.lerp;var l=c.length;a.length=l;a.len=l;l=c.squaredLength;a.squaredLength=l;a.sqrLen=l;var q=c.normalize;a.normalize=q;a.exactEquals=c.exactEquals;a.equals=c.equals;c=function(){var a=p.create(),b=p.fromValues(1,0,0),c=p.fromValues(0,1,0);return function(d,g,h){var k=p.dot(g,h);if(-.999999>\nk)return p.cross(a,b,g),1E-6>p.len(a)&&p.cross(a,c,g),p.normalize(a,a),f(d,a,Math.PI),d;if(.999999<k)return d[0]=0,d[1]=0,d[2]=0,d[3]=1,d;p.cross(a,g,h);d[0]=a[0];d[1]=a[1];d[2]=a[2];d[3]=1+k;return q(d,d)}}();a.rotationTo=c;c=function(){var a=d(),b=d();return function(c,d,f,g,h,l){k(a,d,h,l);k(b,f,g,l);k(c,a,b,2*l*(1-l));return c}}();a.sqlerp=c;c=function(){var a=n.create();return function(b,c,d,f){a[0]=d[0];a[3]=d[1];a[6]=d[2];a[1]=f[0];a[4]=f[1];a[7]=f[2];a[2]=-c[0];a[5]=-c[1];a[8]=-c[2];return q(b,\nh(b,a))}}();a.setAxes=c});P(Fd);var rf=O(function(c,a){function b(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var d=ea&&ba?ba(a,c):{};d.get||d.set?ea(b,c,d):b[c]=a[c]}b.default=a;return b}function d(a,b,c){var d=.5*c[0],f=.5*c[1];c=.5*c[2];var g=b[0],h=b[1],k=b[2];b=b[3];a[0]=g;a[1]=h;a[2]=k;a[3]=b;a[4]=d*b+f*k-c*h;a[5]=f*b+c*g-d*k;a[6]=c*b+d*h-f*g;a[7]=-d*g-f*h-c*k;return a}function f(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];\na[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];return a}function g(a,b,c){var d=b[0],f=b[1],g=b[2],h=b[3],k=c[4],l=c[5],q=c[6],m=c[7],r=b[4],n=b[5],p=b[6];b=b[7];var G=c[0],w=c[1],y=c[2];c=c[3];a[0]=d*c+h*G+f*y-g*w;a[1]=f*c+h*w+g*G-d*y;a[2]=g*c+h*y+d*w-f*G;a[3]=h*c-d*G-f*w-g*y;a[4]=d*m+h*k+f*q-g*l+r*c+b*G+n*y-p*w;a[5]=f*m+h*l+g*k-d*q+n*c+b*w+p*G-r*y;a[6]=g*m+h*q+d*l-f*k+p*c+b*y+r*w-n*G;a[7]=h*m-d*k-f*l-g*q+b*c-r*G-n*w-p*y;return a}Object.defineProperty(a,\"__esModule\",{value:!0});a.create=function(){var a=\nnew k.ARRAY_TYPE(8);k.ARRAY_TYPE!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0,a[4]=0,a[5]=0,a[6]=0,a[7]=0);a[3]=1;return a};a.clone=function(a){var b=new k.ARRAY_TYPE(8);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];return b};a.fromValues=function(a,b,c,d,f,g,h,m){var l=new k.ARRAY_TYPE(8);l[0]=a;l[1]=b;l[2]=c;l[3]=d;l[4]=f;l[5]=g;l[6]=h;l[7]=m;return l};a.fromRotationTranslationValues=function(a,b,c,d,f,g,h){var l=new k.ARRAY_TYPE(8);l[0]=a;l[1]=b;l[2]=c;l[3]=d;f*=.5;g*=\n.5;h*=.5;l[4]=f*d+g*c-h*b;l[5]=g*d+h*a-f*c;l[6]=h*d+f*b-g*a;l[7]=-f*a-g*b-h*c;return l};a.fromRotationTranslation=d;a.fromTranslation=function(a,b){a[0]=0;a[1]=0;a[2]=0;a[3]=1;a[4]=.5*b[0];a[5]=.5*b[1];a[6]=.5*b[2];a[7]=0;return a};a.fromRotation=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=0;a[5]=0;a[6]=0;a[7]=0;return a};a.fromMat4=function(a,b){var c=h.create();m.getRotation(c,b);var f=new k.ARRAY_TYPE(3);m.getTranslation(f,b);d(a,c,f);return a};a.copy=f;a.identity=function(a){a[0]=\n0;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;a[6]=0;a[7]=0;return a};a.set=function(a,b,c,d,f,g,h,k,m){a[0]=b;a[1]=c;a[2]=d;a[3]=f;a[4]=g;a[5]=h;a[6]=k;a[7]=m;return a};a.getDual=function(a,b){a[0]=b[4];a[1]=b[5];a[2]=b[6];a[3]=b[7];return a};a.setDual=function(a,b){a[4]=b[0];a[5]=b[1];a[6]=b[2];a[7]=b[3];return a};a.getTranslation=function(a,b){var c=b[4],d=b[5],f=b[6],g=b[7],h=-b[0],k=-b[1],l=-b[2];b=b[3];a[0]=2*(c*b+g*h+d*l-f*k);a[1]=2*(d*b+g*k+f*h-c*l);a[2]=2*(f*b+g*l+c*k-d*h);return a};a.translate=function(a,\nb,c){var d=b[0],f=b[1],g=b[2],h=b[3],k=.5*c[0],l=.5*c[1];c=.5*c[2];var q=b[4],m=b[5],r=b[6];b=b[7];a[0]=d;a[1]=f;a[2]=g;a[3]=h;a[4]=h*k+f*c-g*l+q;a[5]=h*l+g*k-d*c+m;a[6]=h*c+d*l-f*k+r;a[7]=-d*k-f*l-g*c+b;return a};a.rotateX=function(a,b,c){var d=-b[0],f=-b[1],g=-b[2],k=b[3],l=b[4],q=b[5],m=b[6],r=b[7],n=l*k+r*d+q*g-m*f,p=q*k+r*f+m*d-l*g,J=m*k+r*g+l*f-q*d;l=r*k-l*d-q*f-m*g;h.rotateX(a,b,c);d=a[0];f=a[1];g=a[2];k=a[3];a[4]=n*k+l*d+p*g-J*f;a[5]=p*k+l*f+J*d-n*g;a[6]=J*k+l*g+n*f-p*d;a[7]=l*k-n*d-p*f-J*\ng;return a};a.rotateY=function(a,b,c){var d=-b[0],f=-b[1],g=-b[2],k=b[3],l=b[4],q=b[5],m=b[6],r=b[7],n=l*k+r*d+q*g-m*f,p=q*k+r*f+m*d-l*g,J=m*k+r*g+l*f-q*d;l=r*k-l*d-q*f-m*g;h.rotateY(a,b,c);d=a[0];f=a[1];g=a[2];k=a[3];a[4]=n*k+l*d+p*g-J*f;a[5]=p*k+l*f+J*d-n*g;a[6]=J*k+l*g+n*f-p*d;a[7]=l*k-n*d-p*f-J*g;return a};a.rotateZ=function(a,b,c){var d=-b[0],f=-b[1],g=-b[2],k=b[3],l=b[4],m=b[5],q=b[6],r=b[7],n=l*k+r*d+m*g-q*f,p=m*k+r*f+q*d-l*g,J=q*k+r*g+l*f-m*d;l=r*k-l*d-m*f-q*g;h.rotateZ(a,b,c);d=a[0];f=a[1];\ng=a[2];k=a[3];a[4]=n*k+l*d+p*g-J*f;a[5]=p*k+l*f+J*d-n*g;a[6]=J*k+l*g+n*f-p*d;a[7]=l*k-n*d-p*f-J*g;return a};a.rotateByQuatAppend=function(a,b,c){var d=c[0],f=c[1],g=c[2];c=c[3];var h=b[0],k=b[1],l=b[2],m=b[3];a[0]=h*c+m*d+k*g-l*f;a[1]=k*c+m*f+l*d-h*g;a[2]=l*c+m*g+h*f-k*d;a[3]=m*c-h*d-k*f-l*g;h=b[4];k=b[5];l=b[6];m=b[7];a[4]=h*c+m*d+k*g-l*f;a[5]=k*c+m*f+l*d-h*g;a[6]=l*c+m*g+h*f-k*d;a[7]=m*c-h*d-k*f-l*g;return a};a.rotateByQuatPrepend=function(a,b,c){var d=b[0],f=b[1],g=b[2];b=b[3];var h=c[0],k=c[1],\nl=c[2],m=c[3];a[0]=d*m+b*h+f*l-g*k;a[1]=f*m+b*k+g*h-d*l;a[2]=g*m+b*l+d*k-f*h;a[3]=b*m-d*h-f*k-g*l;h=c[4];k=c[5];l=c[6];m=c[7];a[4]=d*m+b*h+f*l-g*k;a[5]=f*m+b*k+g*h-d*l;a[6]=g*m+b*l+d*k-f*h;a[7]=b*m-d*h-f*k-g*l;return a};a.rotateAroundAxis=function(a,b,c,d){if(Math.abs(d)<k.EPSILON)return f(a,b);var g=Math.sqrt(c[0]*c[0]+c[1]*c[1]+c[2]*c[2]);d*=.5;var h=Math.sin(d),l=h*c[0]/g,m=h*c[1]/g;c=h*c[2]/g;d=Math.cos(d);g=b[0];h=b[1];var q=b[2],n=b[3];a[0]=g*d+n*l+h*c-q*m;a[1]=h*d+n*m+q*l-g*c;a[2]=q*d+n*c+\ng*m-h*l;a[3]=n*d-g*l-h*m-q*c;g=b[4];h=b[5];q=b[6];b=b[7];a[4]=g*d+b*l+h*c-q*m;a[5]=h*d+b*m+q*l-g*c;a[6]=q*d+b*c+g*m-h*l;a[7]=b*d-g*l-h*m-q*c;return a};a.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];a[6]=b[6]+c[6];a[7]=b[7]+c[7];return a};a.multiply=g;a.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;a[6]=b[6]*c;a[7]=b[7]*c;return a};a.lerp=function(a,b,c,d){var f=1-d;0>n(b,c)&&(d=-d);a[0]=\nb[0]*f+c[0]*d;a[1]=b[1]*f+c[1]*d;a[2]=b[2]*f+c[2]*d;a[3]=b[3]*f+c[3]*d;a[4]=b[4]*f+c[4]*d;a[5]=b[5]*f+c[5]*d;a[6]=b[6]*f+c[6]*d;a[7]=b[7]*f+c[7]*d;return a};a.invert=function(a,b){var c=p(b);a[0]=-b[0]/c;a[1]=-b[1]/c;a[2]=-b[2]/c;a[3]=b[3]/c;a[4]=-b[4]/c;a[5]=-b[5]/c;a[6]=-b[6]/c;a[7]=b[7]/c;return a};a.conjugate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=b[3];a[4]=-b[4];a[5]=-b[5];a[6]=-b[6];a[7]=b[7];return a};a.normalize=function(a,b){var c=p(b);if(0<c){c=Math.sqrt(c);var d=b[0]/c,f=b[1]/\nc,g=b[2]/c,h=b[3]/c,k=b[4],l=b[5],m=b[6];b=b[7];var q=d*k+f*l+g*m+h*b;a[0]=d;a[1]=f;a[2]=g;a[3]=h;a[4]=(k-d*q)/c;a[5]=(l-f*q)/c;a[6]=(m-g*q)/c;a[7]=(b-h*q)/c}return a};a.str=function(a){return\"quat2(\"+a[0]+\", \"+a[1]+\", \"+a[2]+\", \"+a[3]+\", \"+a[4]+\", \"+a[5]+\", \"+a[6]+\", \"+a[7]+\")\"};a.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]};a.equals=function(a,b){var c=a[0],d=a[1],f=a[2],g=a[3],h=a[4],l=a[5],m=a[6];a=a[7];\nvar n=b[0],q=b[1],p=b[2],M=b[3],J=b[4],G=b[5],w=b[6];b=b[7];return Math.abs(c-n)<=k.EPSILON*Math.max(1,Math.abs(c),Math.abs(n))&&Math.abs(d-q)<=k.EPSILON*Math.max(1,Math.abs(d),Math.abs(q))&&Math.abs(f-p)<=k.EPSILON*Math.max(1,Math.abs(f),Math.abs(p))&&Math.abs(g-M)<=k.EPSILON*Math.max(1,Math.abs(g),Math.abs(M))&&Math.abs(h-J)<=k.EPSILON*Math.max(1,Math.abs(h),Math.abs(J))&&Math.abs(l-G)<=k.EPSILON*Math.max(1,Math.abs(l),Math.abs(G))&&Math.abs(m-w)<=k.EPSILON*Math.max(1,Math.abs(m),Math.abs(w))&&\nMath.abs(a-b)<=k.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};a.sqrLen=a.squaredLength=a.len=a.length=a.dot=a.mul=a.setReal=a.getReal=void 0;var k=b(Ia),h=b(Fd),m=b(Cd);a.getReal=h.copy;a.setReal=h.copy;a.mul=g;var n=h.dot;a.dot=n;c=h.length;a.length=c;a.len=c;var p=h.squaredLength;a.squaredLength=p;a.sqrLen=p});P(rf);var sf=O(function(c,a){function b(){var a=new p.ARRAY_TYPE(2);p.ARRAY_TYPE!=Float32Array&&(a[0]=0,a[1]=0);return a}function d(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];return a}function f(a,\nb,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];return a}function g(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];return a}function k(a,b){var c=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(c*c+a*a)}function h(a,b){var c=b[0]-a[0];a=b[1]-a[1];return c*c+a*a}function m(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)}function n(a){var b=a[0];a=a[1];return b*b+a*a}Object.defineProperty(a,\"__esModule\",{value:!0});a.create=b;a.clone=function(a){var b=new p.ARRAY_TYPE(2);b[0]=a[0];b[1]=a[1];return b};a.fromValues=function(a,b){var c=\nnew p.ARRAY_TYPE(2);c[0]=a;c[1]=b;return c};a.copy=function(a,b){a[0]=b[0];a[1]=b[1];return a};a.set=function(a,b,c){a[0]=b;a[1]=c;return a};a.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];return a};a.subtract=d;a.multiply=f;a.divide=g;a.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);return a};a.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);return a};a.min=function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);return a};a.max=function(a,b,c){a[0]=Math.max(b[0],\nc[0]);a[1]=Math.max(b[1],c[1]);return a};a.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);return a};a.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;return a};a.scaleAndAdd=function(a,b,c,d){a[0]=b[0]+c[0]*d;a[1]=b[1]+c[1]*d;return a};a.distance=k;a.squaredDistance=h;a.length=m;a.squaredLength=n;a.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};a.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];return a};a.normalize=function(a,b){var c=b[0],d=b[1];c=c*c+d*d;0<c&&(c=1/Math.sqrt(c));\na[0]=b[0]*c;a[1]=b[1]*c;return a};a.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};a.cross=function(a,b,c){b=b[0]*c[1]-b[1]*c[0];a[0]=a[1]=0;a[2]=b;return a};a.lerp=function(a,b,c,d){var f=b[0];b=b[1];a[0]=f+d*(c[0]-f);a[1]=b+d*(c[1]-b);return a};a.random=function(a,b){b=b||1;var c=2*p.RANDOM()*Math.PI;a[0]=Math.cos(c)*b;a[1]=Math.sin(c)*b;return a};a.transformMat2=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[2]*b;a[1]=c[1]*d+c[3]*b;return a};a.transformMat2d=function(a,b,c){var d=b[0];b=b[1];a[0]=\nc[0]*d+c[2]*b+c[4];a[1]=c[1]*d+c[3]*b+c[5];return a};a.transformMat3=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[3]*b+c[6];a[1]=c[1]*d+c[4]*b+c[7];return a};a.transformMat4=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[4]*b+c[12];a[1]=c[1]*d+c[5]*b+c[13];return a};a.rotate=function(a,b,c,d){var f=b[0]-c[0];b=b[1]-c[1];var g=Math.sin(d);d=Math.cos(d);a[0]=f*d-b*g+c[0];a[1]=f*g+b*d+c[1];return a};a.angle=function(a,b){var c=a[0];a=a[1];var d=b[0];b=b[1];var f=c*c+a*a;0<f&&(f=1/Math.sqrt(f));var g=\nd*d+b*b;0<g&&(g=1/Math.sqrt(g));c=(c*d+a*b)*f*g;return 1<c?0:-1>c?Math.PI:Math.acos(c)};a.zero=function(a){a[0]=0;a[1]=0;return a};a.str=function(a){return\"vec2(\"+a[0]+\", \"+a[1]+\")\"};a.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]};a.equals=function(a,b){var c=a[0];a=a[1];var d=b[0];b=b[1];return Math.abs(c-d)<=p.EPSILON*Math.max(1,Math.abs(c),Math.abs(d))&&Math.abs(a-b)<=p.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};a.forEach=a.sqrLen=a.sqrDist=a.dist=a.div=a.mul=a.sub=a.len=void 0;\nvar p=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var d=ea&&ba?ba(a,c):{};d.get||d.set?ea(b,c,d):b[c]=a[c]}b.default=a;return b}(Ia);a.len=m;a.sub=d;a.mul=f;a.div=g;a.dist=k;a.sqrDist=h;a.sqrLen=n;c=function(){var a=b();return function(b,c,d,f,g,h){c||(c=2);d||(d=0);for(f=f?Math.min(f*c+d,b.length):b.length;d<f;d+=c)a[0]=b[d],a[1]=b[d+1],g(a,a,h),b[d]=a[0],b[d+1]=a[1];return b}}();a.forEach=c});P(sf);var Da=O(function(c,\na){function b(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var d=ea&&ba?ba(a,c):{};d.get||d.set?ea(b,c,d):b[c]=a[c]}b.default=a;return b}Object.defineProperty(a,\"__esModule\",{value:!0});a.vec4=a.vec3=a.vec2=a.quat2=a.quat=a.mat4=a.mat3=a.mat2d=a.mat2=a.glMatrix=void 0;c=b(Ia);a.glMatrix=c;c=b(pf);a.mat2=c;c=b(qf);a.mat2d=c;c=b(Bd);a.mat3=c;c=b(Cd);a.mat4=c;c=b(Fd);a.quat=c;c=b(rf);a.quat2=c;c=b(sf);a.vec2=c;c=b(Dd);a.vec3=c;c=b(Ed);\na.vec4=c});P(Da);var Fa=Da.vec4,I=Da.vec3,ai=Da.vec2,bi=Da.quat2,rc=Da.quat,C=Da.mat4,ci=Da.mat3,di=Da.mat2d,ei=Da.mat2,fi=Da.glMatrix;Jb.deviation=function(c,a,b,d){var f=a&&a.length,g=Math.abs(Yc(c,0,f?a[0]*b:c.length,b));if(f){f=0;for(var k=a.length;f<k;f++)g-=Math.abs(Yc(c,a[f]*b,f<k-1?a[f+1]*b:c.length,b))}for(f=a=0;f<d.length;f+=3){k=d[f]*b;var h=d[f+1]*b,m=d[f+2]*b;a+=Math.abs((c[k]-c[m])*(c[h+1]-c[k+1])-(c[k]-c[h])*(c[m+1]-c[k+1]))}return 0===g&&0===a?0:Math.abs((a-g)/g)};Jb.flatten=function(c){for(var a=\nc[0][0].length,b={vertices:[],holes:[],dimensions:a},d=0,f=0;f<c.length;f++){for(var g=0;g<c[f].length;g++)for(var k=0;k<a;k++)b.vertices.push(c[f][g][k]);0<f&&(d+=c[f-1].length,b.holes.push(d))}return b};Jb.default=Jb;var tf=\"undefined\"===typeof df?\"__target\":df(),ug=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,kc=window.URL||window.webkitURL,zb=window.Worker;if(zb){var uf=ge(\"self.onmessage = function () {}\"),vf=new Uint8Array(1);try{if(/(?:Trident|Edge)\\/(?:[567]|12)/i.test(navigator.userAgent))throw Error(\"Not available\");\nvar Gd=new zb(uf);Gd.postMessage(vf,[vf.buffer])}catch(c){zb=null}finally{kc.revokeObjectURL(uf),Gd&&Gd.terminate()}}var gi=new function(c,a){return function(b){var d=this;if(a){if(zb&&!b)return b=(\"\"+a).replace(/^function.+?{/,\"\").slice(0,-1),b=ge(b),this[tf]=new zb(b),kc.revokeObjectURL(b),this[tf];var f={postMessage:function(a){d.onmessage&&setTimeout(function(){return d.onmessage({data:a,target:f})})}};a.call(f);this.postMessage=function(a){setTimeout(function(){return f.onmessage({data:a,target:d})})};\nthis.isThisThread=!0}else return new zb(c)}}(\"./worker.js\",function(c,a){}),wf={window:1,windowAnimation:2,gradual:3,ripple:4,water:6},Ic=function(c){function a(b,c){H(this,a);b=Q(this,(a.__proto__||N(a)).call(this,b,c));b._isShow=!0;c=b.getOptions();if(\"windowAnimation\"===c.style||\"ripple\"===c.style||0<c.riseTime)b.autoUpdate=!0;b.selectedColor=[-1,-1,-1];b.textureCache={};return b}R(a,c);L(a,[{key:\"getDefaultOptions\",value:function(){return{color:\"rgba(50, 50, 230, 1.0)\",opacity:.8,isTextureFull:!1,\ntopColor:\"rgba(76, 76, 76, 76)\",textureScale:1,useLight:!0,riseTime:0}}},{key:\"initialize\",value:function(a){this.gl=a;var b=this.getOptions();this.dataMgr=new gb(this,this.gl);this.texture=null;this.isUseTexture=!1;var c=[];b.enablePicked&&c.push(\"PICK\");b.texture&&c.push(\"USE_TEXTURE\");this.program=new V(this.gl,{vertexShader:\"precision highp float;uniform vec4 uSelectedColor;attribute vec4 a_pos;attribute vec3 a_normal;attribute vec4 a_color;attribute vec4 a_pre_color;attribute float a_height;attribute float a_pre_height;\\n#if defined(USE_TEXTURE)\\nattribute vec2 a_texture_coord;\\n#endif\\nuniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;uniform mat4 u_normal_matrix;uniform vec3 u_side_light_dir;uniform bool u_use_lighting;uniform bool u_use_texture;uniform vec3 u_ripple_center;uniform float u_radius;uniform float style;uniform float alpha;uniform float time;uniform float dataTime;uniform float riseTime;uniform vec2 uMapCenter;uniform float uMapZoom;varying float v_height;varying vec4 v_color;varying vec3 v_position;varying vec2 v_texture_coord;const vec3 point_color=vec3(0.06,0.06,0.06);const vec3 light_color=vec3(0.53,0.53,0.53);const vec3 light_color_2=vec3(0.4,0.4,0.4);const vec3 uAmbientColor=vec3(0.8,0.8,0.8);const vec3 uLightingDirection=vec3(0.0,1.0,1.0);const vec3 uDirectionalColor=vec3(1.0,1.0,1.0);float getTransitionValue(float pre_value,float to_value,float dataTime,float riseTime){float result=0.0;if(pre_value==to_value){result=to_value;}else{if(riseTime>0.0&&dataTime<riseTime){result=(pre_value+(to_value-pre_value)*(dataTime/riseTime));}else{result=to_value;}}return result;}void main(){vec4 pos=a_pos;pos.z=pos.z+pos.w*getTransitionValue(a_pre_height,a_height,dataTime,riseTime);v_position=pos.xyz;v_height=a_height;\\n#if defined(USE_TEXTURE)\\nif(u_use_texture){v_texture_coord=a_texture_coord;}\\n#endif\\nvec4 position=u_proj_matrix*u_mv_matrix*vec4(pos.xyz,1.0);gl_Position=position;vec4 icolor=a_color;\\n#if defined(PICK)\\nif(mapvIsPicked()){icolor=uSelectedColor;}\\n#endif\\nif(u_use_lighting){vec3 N=normalize(vec3(u_normal_matrix*vec4(a_normal,1.0)));vec4 point_dir=u_mv_matrix*vec4(0,1,0,0);vec3 L_point=normalize(point_dir.xyz);float lambert_point=max(0.0,dot(N,-L_point));vec4 light_dir=u_mv_matrix*vec4(u_side_light_dir,0);vec3 L=normalize(light_dir.xyz);float lambert=max(0.0,dot(N,-L));if(pos.z<5.0){float deepGradientColor=(5.0-pos.z)/8.0;lambert=lambert-deepGradientColor;}vec4 light_dir_2=u_mv_matrix*vec4(0,0,-1,0);vec3 L2=normalize(light_dir_2.xyz);float lambert_2=max(0.0,dot(N,-L2));if(a_pre_color.r==a_color.r&&a_pre_color.g==a_color.g&&a_pre_color.b==a_color.b){}else{if(riseTime>0.0&&dataTime<riseTime){icolor.r=a_pre_color.r+(a_color.r-a_pre_color.r)*(dataTime/riseTime);icolor.g=a_pre_color.g+(a_color.g-a_pre_color.g)*(dataTime/riseTime);icolor.b=a_pre_color.b+(a_color.b-a_pre_color.b)*(dataTime/riseTime);}}v_color.rgb=icolor.rgb+icolor.rgb*light_color*lambert+icolor.rgb*light_color_2*lambert_2+icolor.rgb*point_color*lambert_point;v_color.a=icolor.a;if(u_use_texture){mat3 normalMatrix=mat3(u_normal_matrix);vec3 transformedNormal=normalMatrix*a_normal;vec3 dir=uLightingDirection;dir=vec3(normalMatrix*vec3(0.0,-1.0,2.0));float directionalLightWeighting=max(dot(normalize(transformedNormal),normalize(dir)),0.0);vec4 vLightWeighting;vLightWeighting=vec4(uAmbientColor+uDirectionalColor*directionalLightWeighting,1.0);v_color=vLightWeighting;}}else{v_color=icolor;}}\",\nfragmentShader:\"precision highp float;varying vec4 v_color;varying vec3 v_position;varying float v_height;varying vec2 v_texture_coord;uniform vec3 u_ripple_center;uniform vec4 top_color;uniform float u_radius;uniform float style;uniform float alpha;uniform float time;uniform sampler2D u_sampler;uniform bool u_use_lighting;uniform bool u_use_texture;void main(){vec4 color=vec4(v_color);vec4 textureColor=vec4(1.0,1.0,1.0,1.0);if(u_use_texture){if(style==6.0){float x=v_texture_coord.s;float y=v_texture_coord.t;vec2 cPos=-1.0+2.0*gl_FragCoord.xy/MAPV_resolution;float cLength=length(cPos);vec2 uv=gl_FragCoord.xy/MAPV_resolution+(cPos/cLength)*cos(cLength*12.0-time/1000.0*4.0)*0.03;textureColor=texture2D(u_sampler,uv/2.0+vec2(x,y));}else{textureColor=texture2D(u_sampler,vec2(v_texture_coord.s,v_texture_coord.t));}if(u_use_lighting){color=vec4(textureColor*v_color*1.1);}else{color=textureColor;}}if(style==1.0||style==2.0){float t=time/1000.0;float diffDistance=5.0;float modX=mod(v_position.x,diffDistance*2.0);float modZ=mod(v_position.z,diffDistance*2.0);if(modX<diffDistance&&modZ<diffDistance&&v_position.z<v_height){color*=1.05;if(time>0.0&&style==2.0){float iX=ceil(v_position.x/diffDistance);float iZ=ceil(v_position.z/diffDistance);float timeDistance=8.0;t+=tan(sin(iZ));color*=(1.0+mod(t,timeDistance)/timeDistance);}}color.a=alpha;}else if(style==5.0){float t=time/1000.0;float diffDistance=10.0;float modZ=mod(v_position.z-t*40.0,diffDistance*2.0);color.a=1.0-pow(v_position.z/v_height,0.5);if(v_position.z/v_height<0.3){color.r+=0.2;color.g+=0.2;color.b+=0.2;}if(modZ<diffDistance*2.0-4.0){discard;}}else if(style==3.0){float diffDistance=10.0;float modX=mod(v_position.x,diffDistance*2.0);color.a=1.0-pow(v_position.z/v_height,0.3);}else if(style==4.0){float dis=distance(u_ripple_center,v_position);float rSize=400.0;if(v_position.z>=v_height){color=top_color;}if(dis>u_radius-rSize&&dis<u_radius+rSize){color*=(1.0-abs(dis-u_radius)/rSize)*2.0+1.0;}}else if(style==6.0){}gl_FragColor=color;}\",\ndefines:c},this);this.vertexBuffer=new S({gl:a,target:\"ARRAY_BUFFER\",usage:\"STATIC_DRAW\"});this.colorBuffer=new S({gl:a,target:\"ARRAY_BUFFER\",usage:\"STATIC_DRAW\"});this.heightBuffer=new S({gl:a,target:\"ARRAY_BUFFER\",usage:\"STATIC_DRAW\"});this.textureBuffer=new S({gl:a,target:\"ARRAY_BUFFER\",usage:\"STATIC_DRAW\"});this.indexBuffer=new S({gl:a,target:\"ELEMENT_ARRAY_BUFFER\",usage:\"STATIC_DRAW\"});c=[{name:\"a_pos\",buffer:this.vertexBuffer,stride:28,size:4,type:\"FLOAT\",offset:0},{name:\"a_normal\",buffer:this.vertexBuffer,\nsize:3,stride:28,type:\"FLOAT\",offset:16},{name:\"a_color\",buffer:this.colorBuffer,size:4,stride:32,type:\"FLOAT\",offset:0},{name:\"a_pre_color\",buffer:this.colorBuffer,size:4,stride:32,type:\"FLOAT\",offset:16},{name:\"a_height\",buffer:this.heightBuffer,size:1,stride:8,type:\"FLOAT\",offset:0},{name:\"a_pre_height\",buffer:this.heightBuffer,size:1,stride:8,type:\"FLOAT\",offset:4}];b.texture&&c.push({name:\"a_texture_coord\",buffer:this.textureBuffer,size:2,stride:8,type:\"FLOAT\",offset:0});c=c.concat(this.getCommonAttributes());\nthis.vertexArray=new za({gl:a,program:this.program,attributes:c});this.initializeTime=new Date;this.normalMatrix=C.create()}},{key:\"onChanged\",value:function(a,c){var b=this;this.gl&&(this.loadTextureTime&&clearTimeout(this.loadTextureTime),this.loadTextureTime=setTimeout(function(){b.loadTexture(function(){b.dataMgr.parseData(c);b.dataTime=new Date;b.webglLayer.render()})},0))}},{key:\"render\",value:function(a){var b=a.gl,c=a.projectionMatrix,g=a.viewMatrix;if(this._isShow){var k=this.getData();if(k&&\n!(0>=k.length)){k=this.getOptions();var h=this.program;h.use(b);if(!k.texture||this.texture){b.disable(b.CULL_FACE);k.blend&&(b.enable(b.BLEND),b.blendFunc(b.ONE,b.ONE),b.blendEquation(b.FUNC_ADD));0===k.height&&(b.enable(b.BLEND),b.blendFunc(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA));var m=0;k.style&&wf[k.style]&&(m=wf[k.style]);\"gradual\"===k.style?(b.depthMask(!1),b.enable(b.BLEND),b.blendFunc(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA)):b.depthMask(!0);var n=this.normizedColor(k.topColor);if(\"ripple\"===k.style&&\nk.rippleLayer&&k.rippleLayer.data&&k.rippleLayer.data[0]){var p=this.normizedPoint(k.rippleLayer.data[0].geometry.coordinates);h.setUniforms({u_ripple_center:[p[0],p[1],0],u_radius:k.rippleLayer.options.size*k.rippleLayer.currentScale})}p=I.fromValues(0,-1,2);k.lightDir&&(p=I.fromValues(k.lightDir[0],k.lightDir[1],k.lightDir[2]));var l=this.normalMatrix;C.invert(l,g);C.transpose(l,l);h.setUniforms(T(this.getCommonUniforms(a),{u_normal_matrix:l,u_sampler:this.texture,u_proj_matrix:c,u_mv_matrix:g,\nstyle:m,top_color:n,u_use_lighting:k.useLight,u_use_texture:this.isUseTexture,alpha:void 0===k.opacity?.8:parseFloat(k.opacity),time:new Date-this.initializeTime,dataTime:new Date-this.dataTime,riseTime:k.riseTime,u_side_light_dir:p}));a=this.dataMgr.getData();0<a.vertex.length&&(this.vertexArray.bind(),this.indexBuffer.bind(),b.drawElements(b.TRIANGLES,a.index.length,b.UNSIGNED_INT,0))}}}else this.webglLayer.clear()}},{key:\"loadTexture\",value:function(a){var b=this,c=this.getOptions();c.texture?\n(this.isUseTexture=!0,Ra(this.gl,c.texture,function(c,d){b.image=d;b.texture=c;a&&a();b.webglLayer.render()})):(this.isUseTexture=!1,this.image=this.texture=null,a&&a())}}]);return a}(da);gb.prototype.initData=function(){this.outBuilding3d={pickColorVertex:[],vertex:[],texture:[],color:[],height:[],index:[]}};gb.prototype.getData=function(){return this.outBuilding3d};gb.prototype.initWorker=function(){this.worker=new gi;this.worker.onmessage=function(c){}};gb.prototype.parseData=function(c){var a=\nthis;this.initData();for(var b=this.shapeLayer.getOptions(),d=0;d<c.length;d++){var f=c[d],g=f.height||0;\"properties\"in f&&\"height\"in f.properties&&(g=f.properties.height);g*=1;var k=f.color||b.color;\"properties\"in f&&\"color\"in f.properties&&(k=f.properties.color);\"[object Function]\"===Object.prototype.toString.call(k)&&(k=k(f));k=this.shapeLayer.normizedColor(k);var h=void 0;b.enablePicked&&(h=this.shapeLayer.indexToRgb(d));var m=void 0,n=void 0;b.riseTime&&(n=f.preColor,\"properties\"in f&&\"preColor\"in\nf.properties&&(n=f.properties.preColor),m=f.preHeight,\"properties\"in f&&\"preHeight\"in f.properties&&(m=f.properties.preHeight),void 0===m&&(m=0));if(f.geometry.coordinates)if(\"MultiPolygon\"===f.geometry.type)for(var p=f.geometry.coordinates,l=function(b){var c=[],d=[];f.geometry.coordinates[b][0].forEach(function(b){b=a.shapeLayer.normizedPoint(b);c.push(b[0],b[1]);d.push(b[2])});a.parseBuilding3d(c,d,m,g,n,k,h,a.outBuilding3d)},q=0;q<p.length;q++)l(q);else(function(){var b=[],c=[];f.geometry.coordinates[0].forEach(function(d){d=\na.shapeLayer.normizedPoint(d);b.push(d[0],d[1]);c.push(d[2])});a.parseBuilding3d(b,c,m,g,n,k,h,a.outBuilding3d)})()}this.shapeLayer.vertexBuffer.updateData(new Float32Array(this.outBuilding3d.vertex));this.shapeLayer.colorBuffer.updateData(new Float32Array(this.outBuilding3d.color));this.shapeLayer.heightBuffer.updateData(new Float32Array(this.outBuilding3d.height));this.shapeLayer.textureBuffer.updateData(new Float32Array(this.outBuilding3d.texture));this.shapeLayer.indexBuffer.updateData(new Uint32Array(this.outBuilding3d.index));\nb.enablePicked&&this.shapeLayer.pickBuffer.updateData(new Float32Array(this.outBuilding3d.pickColorVertex))};gb.prototype.getBounds=function(c){for(var a=c[0],b=c[1],d=c[0],f=c[1],g=0;g<c.length;g+=2)a=Math.min(c[g],a),b=Math.min(c[g+1],b),d=Math.max(c[g],d),f=Math.max(c[g+1],f);return{minX:a,minY:b,maxX:d,maxY:f,width:d-a,height:f-b}};gb.prototype.parseBuilding3d=function(c,a,b,d,f,g,k,h){void 0===b&&(b=d);var m=this.shapeLayer.options,n=h.vertex,p=h.texture,l=h.color,q=h.height,r=h.pickColorVertex;\nh=h.index;void 0===f&&(f=g);var u=0,z=0;this.shapeLayer.image&&(u=this.shapeLayer.image.width*m.textureScale,z=this.shapeLayer.image.height*m.textureScale);if(\"gradual\"!=m.style){var t=Jb(c),x=t[0],v=t[1],A=t[2];x=[c[2*x],c[2*x+1],1];v=[c[2*v],c[2*v+1],1];var B=[c[2*A],c[2*A+1],1];A=[];I.cross(A,[B[0]-v[0],B[1]-v[1],B[2]-v[2]],[x[0]-v[0],x[1]-v[1],x[2]-v[2]]);v=n.length/7;if(m.texture)var E=this.getBounds(c);x=m.isTextureFull;B=0;for(var D=c.length;B<D;B+=2)n.push(c[B],c[B+1],a[B/2],1,A[0],A[1],A[2]),\nl.push(g[0],g[1],g[2],g[3],f[0],f[1],f[2],f[3]),q.push(d,b),m.texture&&(x?(p.push((c[B]-E.minX)/E.width),p.push((c[B+1]-E.minY)/E.height)):(p.push((c[B]-E.minX)/u),p.push((c[B+1]-E.minY)/z))),k&&r.push(k[0]/255,k[1]/255,k[2]/255);E=0;for(A=t.length;E<A;E++)h.push(t[E]+v)}if(!(d===b&&0>=d))for(t=0,E=c.length;t<E;t+=2){A=n.length/7;var M=c[t],J=c[t+1];v=[M,J,a[t/2],0];B=[M,J,a[t/2],1];D=t+2;var G=t+3;t===E-2&&(D=0,G=1);D=c[D];G=c[G];M=Math.sqrt(Math.pow(D-M,2),Math.pow(G-J,2));J=[D,G,a[t/2],0];D=[D,\nG,a[t/2],1];G=[];I.cross(G,[J[0]-v[0],J[1]-v[1],J[2]-v[2]],[B[0]-v[0],B[1]-v[1],B[2]-v[2]]);n.push(v[0],v[1],v[2],v[3]);n.push(G[0],G[1],G[2]);n.push(B[0],B[1],B[2],B[3]);n.push(G[0],G[1],G[2]);n.push(J[0],J[1],J[2],J[3]);n.push(G[0],G[1],G[2]);n.push(D[0],D[1],D[2],D[3]);n.push(G[0],G[1],G[2]);l.push(g[0],g[1],g[2],g[3]);l.push(f[0],f[1],f[2],f[3]);l.push(g[0],g[1],g[2],g[3]);l.push(f[0],f[1],f[2],f[3]);l.push(g[0],g[1],g[2],g[3]);l.push(f[0],f[1],f[2],f[3]);l.push(g[0],g[1],g[2],g[3]);l.push(f[0],\nf[1],f[2],f[3]);q.push(d);q.push(b);q.push(d);q.push(b);q.push(d);q.push(b);q.push(d);q.push(b);m.texture&&(x?(p.push(0,0),p.push(0,1),p.push(1,0),p.push(1,1)):(p.push(0,0),p.push(0,d/z),p.push(M/u,0),p.push(M/u,d/z)));k&&(r.push(k[0]/255,k[1]/255,k[2]/255),r.push(k[0]/255,k[1]/255,k[2]/255),r.push(k[0]/255,k[1]/255,k[2]/255),r.push(k[0]/255,k[1]/255,k[2]/255));h.push(A,A+2,A+3,A,A+3,A+1)}};var xf=function(c){function a(b,c){H(this,a);b=Q(this,(a.__proto__||N(a)).call(this,b,c));b.preHeightMapper=\n{};b.preColorMapper={};return b}R(a,c);L(a,[{key:\"getDefaultOptions\",value:function(){return T(Wa(a.prototype.__proto__||N(a.prototype),\"getDefaultOptions\",this).call(this),{style:\"grid\",gridSize:500,height:function(){return 1E3},color:function(){return\"rgb(200, 200, 20)\"}})}},{key:\"generateGrid\",value:function(a,c){var b=c.gridSize,d=[],k={};c=a.length;for(var h=this.getPointOffset(),m=0;m<c;m++){var n=this.normizedPoint(a[m].geometry.coordinates);n=~~((n[0]+h[0])/b)+\"_\"+~~((n[1]+h[1])/b);void 0===\nk[n]&&(k[n]=0);var p=~~a[m].count||1;\"properties\"in a[m]&&\"count\"in a[m].properties&&(p=~~a[m].properties.count);k[n]+=p}Ea(k).forEach(function(a){var c=a.split(\"_\");d.push([c[0]*b+b/2,c[1]*b+b/2,k[a]])});return d}},{key:\"onChanged\",value:function(b,c){c=this.processData(c);Wa(a.prototype.__proto__||N(a.prototype),\"onChanged\",this).call(this,b,c)}},{key:\"getGridDataRange\",value:function(){var a=this.gridData,c=void 0,f=void 0;a[0]&&(c=a[0][2],f=a[0][2]);for(var g=a.length,k=0;k<g;k++){var h=a[k];\nc=Math.max(h[2],c);f=Math.min(h[2],f)}return{max:c/2,min:f}}},{key:\"processData\",value:function(a){var b=this.getOptions(),c=b.style,g=b.gridSize,k=[];this.gridData=k;if(\"normal\"===c){c=this.getPointOffset();for(var h=0;h<a.length;h++){var m=this.normizedPoint(a[h].geometry.coordinates),n=m[0]+c[0];m=m[1]+c[1];var p=~~a[h].count||1;\"properties\"in a[h]&&\"count\"in a[h].properties&&(p=~~a[h].properties.count);var l=a[h].color;\"properties\"in a[h]&&\"color\"in a[h].properties&&(l=~~a[h].properties.color);\nk.push([n,m,p,l])}}else k=this.generateGrid(a,b);a=[];this._preHeightMapper={};this._preColorMapper={};for(c=0;c<k.length;c++)h=k[c],h[0]=h[0],h[1]=h[1],n=h[2],b.height&&(n=\"function\"===typeof b.height?b.height({count:h[2]}):b.height),m=g/2-5,p=h[3],b.color&&(p=\"function\"===typeof b.color?b.color({count:h[2],color:h[3]}):fa(p).unitArray()),l=\"p\"+h[0]+h[1],a.push({geometry:{type:\"Polygon\",coordinates:[[[h[0]-m,h[1]-m],[h[0]-m,h[1]+m],[h[0]+m,h[1]+m],[h[0]+m,h[1]-m]]]},color:p,preHeight:this.preHeightMapper[l],\npreColor:this.preColorMapper[l],height:n}),this._preHeightMapper[l]=n,this._preColorMapper[l]=p;this.preHeightMapper=this._preHeightMapper;this.preColorMapper=this._preColorMapper;return a}}]);return a}(Ic),nb=function(c){function a(b){H(this,a);return Q(this,(a.__proto__||N(a)).call(this,b))}R(a,c);L(a,[{key:\"initialize\",value:function(a){var b=this;this.children&&this.children.forEach(function(c){c.map=b.map;c.setWebglLayer(b.getWebglLayer());c.commonInitialize&&c.commonInitialize(a);c.initialize&&\nc.initialize(a);c.onOptionsChanged(c.getOptions());c.onDataChanged(c.getData());c.onChanged(c.getOptions(),c.getData())})}},{key:\"isRequestAnimation\",value:function(){if(void 0!==this.autoUpdate)return Wa(a.prototype.__proto__||N(a.prototype),\"isRequestAnimation\",this).call(this);for(var b=!1,c=0;c<this.children.length;c++)if(this.children[c].isRequestAnimation()){b=!0;break}return b}},{key:\"render\",value:function(a){this.children&&this.children.forEach(function(b){b.render(a)})}}]);return a}(Ad),\nhi=function(c){function a(b,c){H(this,a);b=Q(this,(a.__proto__||N(a)).call(this,b,c));b.gridLayer=new xf(b.getGridOptions());b.children=[b.gridLayer];b.options.riseTime&&(b.autoUpdate=!0);return b}R(a,c);L(a,[{key:\"onDataChanged\",value:function(a){this.gridLayer.setData(a)}},{key:\"getGridOptions\",value:function(){var a=this.getOptions(),c=a.max,f=a.min;void 0===c&&(f=this.gridLayer.getGridDataRange(),c=f.max,f=f.min);var g=new na({max:c,min:f,gradient:a.gradient,maxSize:a.maxHeight,minSize:a.minHeight});\na.height=function(a){var b=g.getSize(a.count);\"properties\"in a&&\"count\"in a.properties&&(b=g.getSize(a.properties.count));return b};a.color=function(a){var b=g.getImageData(a.count);\"properties\"in a&&\"count\"in a.properties&&(b=g.getImageData(a.properties.count));return[b[0]/255,b[1]/255,b[2]/255]};return a}},{key:\"onOptionsChanged\",value:function(a){this.gridLayer.setOptions(this.getGridOptions())}},{key:\"getDefaultOptions\",value:function(){return{style:\"grid\",gridSize:500,maxHeight:8E3,minHeight:200,\ngradient:{0:\"rgb(50, 50, 256)\",\"0.1\":\"rgb(50, 250, 56)\",\"0.5\":\"rgb(250, 250, 56)\",1:\"rgb(250, 50, 56)\"}}}}]);return a}(nb),yf=function(c){function a(b,c){H(this,a);b=Q(this,(a.__proto__||N(a)).call(this,b,c));b.bufferData=[];return b}R(a,c);L(a,[{key:\"initialize\",value:function(a){this.gl=a;var b=this.getOptions();this.program=new V(this.gl,{vertexShader:\"uniform mat4 u_matrix;attribute vec3 aPos;attribute vec4 aColor;varying vec4 vColor;\\n#if defined(DASH)\\nvarying vec3 vPos;\\n#endif\\nvoid main(){if(aColor.w>=0.0&&aColor.w<=1.0){vColor=aColor;}else{vColor=vec4(aColor.xyz,1.0);}gl_Position=u_matrix*vec4(aPos,1.0);\\n#if defined(DASH)\\nvPos=aPos;\\n#endif\\n}\",\nfragmentShader:\"precision highp float;varying vec4 vColor;varying vec3 vPos;void main(){\\n#if defined(DASH)\\nif(mod(vPos.x,3.0)<1.5){discard;}\\n#endif\\ngl_FragColor=vColor;}\",defines:b.useDash?[\"DASH\"]:\"\"},this);this.buffer=new S({gl:a,target:\"ARRAY_BUFFER\",usage:\"STATIC_DRAW\"});this.vertexArray=new za({gl:a,program:this.program,attributes:[{stride:28,name:\"aPos\",buffer:this.buffer,size:3,type:\"FLOAT\",offset:0},{stride:28,name:\"aColor\",buffer:this.buffer,size:4,type:\"FLOAT\",offset:12}]})}},{key:\"onChanged\",\nvalue:function(a,c){var b=this;if(this.gl){var d=[],k=function(a,c){if(a)for(var f=0;f<a.length-1;f++){var g=b.normizedPoint(a[f]);d.push(g[0]);d.push(g[1]);d.push(g[2]);d.push(c[0],c[1],c[2],c[3]);g=b.normizedPoint(a[f+1]);d.push(g[0]);d.push(g[1]);d.push(g[2]);d.push(c[0],c[1],c[2],c[3])}};a=a.color;for(var h=0;h<c.length;h++){var m=c[h].color||a;\"properties\"in c[h]&&\"color\"in c[h].properties&&(m=c[h].properties.color);\"[object Function]\"===Object.prototype.toString.call(m)&&(m=m(c[h]));m=this.normizedColor(m);\nvar n=c[h].geometry,p=n.coordinates;if(\"MultiPolygon\"===n.type){if(p)for(n=0;n<p.length;n++)k(p[n][0],m)}else if(\"Polygon\"===n.type)p&&k(p[0],m);else if(\"MultiLineString\"===n.type){if(p)for(n=0;n<p.length;n++)k(p[n],m)}else k(p,m)}this.bufferData=d;this.buffer.updateData(new Float32Array(d))}}},{key:\"render\",value:function(a){var b=a.gl;a=a.matrix;if(this.bufferData&&!(0>=this.bufferData.length)){var c=this.program;c.use(b);this.vertexArray.bind();c.setUniforms({u_matrix:a});a=this.getOptions().blend;\nb.enable(b.BLEND);b.blendEquation(b.FUNC_ADD);a&&\"lighter\"===a?b.blendFunc(b.SRC_ALPHA,b.ONE):b.blendFunc(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA);b.drawArrays(b.LINES,0,this.bufferData.length/7);b.disable(b.BLEND)}}}]);return a}(da),ii=Ac.f(\"species\"),ji=O(function(c){c.exports={\"default\":ii,__esModule:!0}});P(ji);var zf=\"undefined\"!==typeof __webpack_require__.g?__webpack_require__.g:\"undefined\"!==typeof self?self:\"undefined\"!==typeof window?window:{},Ka=[],Aa=[],zg=\"undefined\"!==typeof Uint8Array?Uint8Array:Array,ad=!1,ki={}.toString,\nne=Array.isArray||function(c){return\"[object Array]\"==ki.call(c)};w.TYPED_ARRAY_SUPPORT=void 0!==zf.TYPED_ARRAY_SUPPORT?zf.TYPED_ARRAY_SUPPORT:!0;w.poolSize=8192;w._augment=function(c){c.__proto__=w.prototype;return c};w.from=function(c,a,b){return ke(null,c,a,b)};w.TYPED_ARRAY_SUPPORT&&(w.prototype.__proto__=Uint8Array.prototype,w.__proto__=Uint8Array);w.alloc=function(c,a,b){me(c);c=0>=c?Sa(null,c):void 0!==a?\"string\"===typeof b?Sa(null,c).fill(a,b):Sa(null,c).fill(a):Sa(null,c);return c};w.allocUnsafe=\nfunction(c){return bd(null,c)};w.allocUnsafeSlow=function(c){return bd(null,c)};w.isBuffer=function(c){return null!=c&&(!!c._isBuffer||xe(c)||\"function\"===typeof c.readFloatLE&&\"function\"===typeof c.slice&&xe(c.slice(0,0)))};w.compare=function(c,a){if(!La(c)||!La(a))throw new TypeError(\"Arguments must be Buffers\");if(c===a)return 0;for(var b=c.length,d=a.length,f=0,g=Math.min(b,d);f<g;++f)if(c[f]!==a[f]){b=c[f];d=a[f];break}return b<d?-1:d<b?1:0};w.isEncoding=function(c){switch(String(c).toLowerCase()){case \"hex\":case \"utf8\":case \"utf-8\":case \"ascii\":case \"latin1\":case \"binary\":case \"base64\":case \"ucs2\":case \"ucs-2\":case \"utf16le\":case \"utf-16le\":return!0;\ndefault:return!1}};w.concat=function(c,a){if(!ne(c))throw new TypeError('\"list\" argument must be an Array of Buffers');if(0===c.length)return w.alloc(0);var b;if(void 0===a)for(b=a=0;b<c.length;++b)a+=c[b].length;a=w.allocUnsafe(a);var d=0;for(b=0;b<c.length;++b){var f=c[b];if(!La(f))throw new TypeError('\"list\" argument must be an Array of Buffers');f.copy(a,d);d+=f.length}return a};w.byteLength=le;w.prototype._isBuffer=!0;w.prototype.swap16=function(){var c=this.length;if(0!==c%2)throw new RangeError(\"Buffer size must be a multiple of 16-bits\");\nfor(var a=0;a<c;a+=2)hb(this,a,a+1);return this};w.prototype.swap32=function(){var c=this.length;if(0!==c%4)throw new RangeError(\"Buffer size must be a multiple of 32-bits\");for(var a=0;a<c;a+=4)hb(this,a,a+3),hb(this,a+1,a+2);return this};w.prototype.swap64=function(){var c=this.length;if(0!==c%8)throw new RangeError(\"Buffer size must be a multiple of 64-bits\");for(var a=0;a<c;a+=8)hb(this,a,a+7),hb(this,a+1,a+6),hb(this,a+2,a+5),hb(this,a+3,a+4);return this};w.prototype.toString=function(){var c=\nthis.length|0;return 0===c?\"\":0===arguments.length?pe(this,0,c):xg.apply(this,arguments)};w.prototype.equals=function(c){if(!La(c))throw new TypeError(\"Argument must be a Buffer\");return this===c?!0:0===w.compare(this,c)};w.prototype.inspect=function(){var c=\"\";0<this.length&&(c=this.toString(\"hex\",0,50).match(/.{2}/g).join(\" \"),50<this.length&&(c+=\" ... \"));return\"<Buffer \"+c+\">\"};w.prototype.compare=function(c,a,b,d,f){if(!La(c))throw new TypeError(\"Argument must be a Buffer\");void 0===a&&(a=0);\nvoid 0===b&&(b=c?c.length:0);void 0===d&&(d=0);void 0===f&&(f=this.length);if(0>a||b>c.length||0>d||f>this.length)throw new RangeError(\"out of range index\");if(d>=f&&a>=b)return 0;if(d>=f)return-1;if(a>=b)return 1;a>>>=0;b>>>=0;d>>>=0;f>>>=0;if(this===c)return 0;var g=f-d,k=b-a,h=Math.min(g,k);d=this.slice(d,f);c=c.slice(a,b);for(a=0;a<h;++a)if(d[a]!==c[a]){g=d[a];k=c[a];break}return g<k?-1:k<g?1:0};w.prototype.includes=function(c,a,b){return-1!==this.indexOf(c,a,b)};w.prototype.indexOf=function(c,\na,b){return qe(this,c,a,b,!0)};w.prototype.lastIndexOf=function(c,a,b){return qe(this,c,a,b,!1)};w.prototype.write=function(c,a,b,d){if(void 0===a)d=\"utf8\",b=this.length,a=0;else if(void 0===b&&\"string\"===typeof a)d=a,b=this.length,a=0;else if(isFinite(a))a|=0,isFinite(b)?(b|=0,void 0===d&&(d=\"utf8\")):(d=b,b=void 0);else throw Error(\"Buffer.write(string, encoding, offset[, length]) is no longer supported\");var f=this.length-a;if(void 0===b||b>f)b=f;if(0<c.length&&(0>b||0>a)||a>this.length)throw new RangeError(\"Attempt to write outside buffer bounds\");\nd||(d=\"utf8\");for(f=!1;;)switch(d){case \"hex\":a:{a=Number(a)||0;d=this.length-a;b?(b=Number(b),b>d&&(b=d)):b=d;d=c.length;if(0!==d%2)throw new TypeError(\"Invalid hex string\");b>d/2&&(b=d/2);for(d=0;d<b;++d){f=parseInt(c.substr(2*d,2),16);if(isNaN(f)){c=d;break a}this[a+d]=f}c=d}return c;case \"utf8\":case \"utf-8\":return Ob(mc(c,this.length-a),this,a,b);case \"ascii\":return Ob(we(c),this,a,b);case \"latin1\":case \"binary\":return Ob(we(c),this,a,b);case \"base64\":return Ob(oe(c),this,a,b);case \"ucs2\":case \"ucs-2\":case \"utf16le\":case \"utf-16le\":d=\nc;f=this.length-a;for(var g=[],k=0;k<d.length&&!(0>(f-=2));++k){var h=d.charCodeAt(k);c=h>>8;h%=256;g.push(h);g.push(c)}return Ob(g,this,a,b);default:if(f)throw new TypeError(\"Unknown encoding: \"+d);d=(\"\"+d).toLowerCase();f=!0}};w.prototype.toJSON=function(){return{type:\"Buffer\",data:Array.prototype.slice.call(this._arr||this,0)}};var se=4096;w.prototype.slice=function(c,a){var b=this.length;c=~~c;a=void 0===a?b:~~a;0>c?(c+=b,0>c&&(c=0)):c>b&&(c=b);0>a?(a+=b,0>a&&(a=0)):a>b&&(a=b);a<c&&(a=c);if(w.TYPED_ARRAY_SUPPORT)a=\nthis.subarray(c,a),a.__proto__=w.prototype;else{b=a-c;a=new w(b,void 0);for(var d=0;d<b;++d)a[d]=this[d+c]}return a};w.prototype.readUIntLE=function(c,a,b){c|=0;a|=0;b||ja(c,a,this.length);b=this[c];for(var d=1,f=0;++f<a&&(d*=256);)b+=this[c+f]*d;return b};w.prototype.readUIntBE=function(c,a,b){c|=0;a|=0;b||ja(c,a,this.length);b=this[c+--a];for(var d=1;0<a&&(d*=256);)b+=this[c+--a]*d;return b};w.prototype.readUInt8=function(c,a){a||ja(c,1,this.length);return this[c]};w.prototype.readUInt16LE=function(c,\na){a||ja(c,2,this.length);return this[c]|this[c+1]<<8};w.prototype.readUInt16BE=function(c,a){a||ja(c,2,this.length);return this[c]<<8|this[c+1]};w.prototype.readUInt32LE=function(c,a){a||ja(c,4,this.length);return(this[c]|this[c+1]<<8|this[c+2]<<16)+16777216*this[c+3]};w.prototype.readUInt32BE=function(c,a){a||ja(c,4,this.length);return 16777216*this[c]+(this[c+1]<<16|this[c+2]<<8|this[c+3])};w.prototype.readIntLE=function(c,a,b){c|=0;a|=0;b||ja(c,a,this.length);b=this[c];for(var d=1,f=0;++f<a&&\n(d*=256);)b+=this[c+f]*d;b>=128*d&&(b-=Math.pow(2,8*a));return b};w.prototype.readIntBE=function(c,a,b){c|=0;a|=0;b||ja(c,a,this.length);b=a;for(var d=1,f=this[c+--b];0<b&&(d*=256);)f+=this[c+--b]*d;f>=128*d&&(f-=Math.pow(2,8*a));return f};w.prototype.readInt8=function(c,a){a||ja(c,1,this.length);return this[c]&128?-1*(255-this[c]+1):this[c]};w.prototype.readInt16LE=function(c,a){a||ja(c,2,this.length);c=this[c]|this[c+1]<<8;return c&32768?c|4294901760:c};w.prototype.readInt16BE=function(c,a){a||\nja(c,2,this.length);c=this[c+1]|this[c]<<8;return c&32768?c|4294901760:c};w.prototype.readInt32LE=function(c,a){a||ja(c,4,this.length);return this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24};w.prototype.readInt32BE=function(c,a){a||ja(c,4,this.length);return this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]};w.prototype.readFloatLE=function(c,a){a||ja(c,4,this.length);return lc(this,c,!0,23,4)};w.prototype.readFloatBE=function(c,a){a||ja(c,4,this.length);return lc(this,c,!1,23,4)};w.prototype.readDoubleLE=\nfunction(c,a){a||ja(c,8,this.length);return lc(this,c,!0,52,8)};w.prototype.readDoubleBE=function(c,a){a||ja(c,8,this.length);return lc(this,c,!1,52,8)};w.prototype.writeUIntLE=function(c,a,b,d){c=+c;a|=0;b|=0;d||sa(this,c,a,b,Math.pow(2,8*b)-1,0);d=1;var f=0;for(this[a]=c&255;++f<b&&(d*=256);)this[a+f]=c/d&255;return a+b};w.prototype.writeUIntBE=function(c,a,b,d){c=+c;a|=0;b|=0;d||sa(this,c,a,b,Math.pow(2,8*b)-1,0);d=b-1;var f=1;for(this[a+d]=c&255;0<=--d&&(f*=256);)this[a+d]=c/f&255;return a+b};\nw.prototype.writeUInt8=function(c,a,b){c=+c;a|=0;b||sa(this,c,a,1,255,0);w.TYPED_ARRAY_SUPPORT||(c=Math.floor(c));this[a]=c&255;return a+1};w.prototype.writeUInt16LE=function(c,a,b){c=+c;a|=0;b||sa(this,c,a,2,65535,0);w.TYPED_ARRAY_SUPPORT?(this[a]=c&255,this[a+1]=c>>>8):nc(this,c,a,!0);return a+2};w.prototype.writeUInt16BE=function(c,a,b){c=+c;a|=0;b||sa(this,c,a,2,65535,0);w.TYPED_ARRAY_SUPPORT?(this[a]=c>>>8,this[a+1]=c&255):nc(this,c,a,!1);return a+2};w.prototype.writeUInt32LE=function(c,a,b){c=\n+c;a|=0;b||sa(this,c,a,4,4294967295,0);w.TYPED_ARRAY_SUPPORT?(this[a+3]=c>>>24,this[a+2]=c>>>16,this[a+1]=c>>>8,this[a]=c&255):oc(this,c,a,!0);return a+4};w.prototype.writeUInt32BE=function(c,a,b){c=+c;a|=0;b||sa(this,c,a,4,4294967295,0);w.TYPED_ARRAY_SUPPORT?(this[a]=c>>>24,this[a+1]=c>>>16,this[a+2]=c>>>8,this[a+3]=c&255):oc(this,c,a,!1);return a+4};w.prototype.writeIntLE=function(c,a,b,d){c=+c;a|=0;d||(d=Math.pow(2,8*b-1),sa(this,c,a,b,d-1,-d));d=0;var f=1,g=0;for(this[a]=c&255;++d<b&&(f*=256);)0>\nc&&0===g&&0!==this[a+d-1]&&(g=1),this[a+d]=(c/f>>0)-g&255;return a+b};w.prototype.writeIntBE=function(c,a,b,d){c=+c;a|=0;d||(d=Math.pow(2,8*b-1),sa(this,c,a,b,d-1,-d));d=b-1;var f=1,g=0;for(this[a+d]=c&255;0<=--d&&(f*=256);)0>c&&0===g&&0!==this[a+d+1]&&(g=1),this[a+d]=(c/f>>0)-g&255;return a+b};w.prototype.writeInt8=function(c,a,b){c=+c;a|=0;b||sa(this,c,a,1,127,-128);w.TYPED_ARRAY_SUPPORT||(c=Math.floor(c));0>c&&(c=255+c+1);this[a]=c&255;return a+1};w.prototype.writeInt16LE=function(c,a,b){c=+c;\na|=0;b||sa(this,c,a,2,32767,-32768);w.TYPED_ARRAY_SUPPORT?(this[a]=c&255,this[a+1]=c>>>8):nc(this,c,a,!0);return a+2};w.prototype.writeInt16BE=function(c,a,b){c=+c;a|=0;b||sa(this,c,a,2,32767,-32768);w.TYPED_ARRAY_SUPPORT?(this[a]=c>>>8,this[a+1]=c&255):nc(this,c,a,!1);return a+2};w.prototype.writeInt32LE=function(c,a,b){c=+c;a|=0;b||sa(this,c,a,4,2147483647,-2147483648);w.TYPED_ARRAY_SUPPORT?(this[a]=c&255,this[a+1]=c>>>8,this[a+2]=c>>>16,this[a+3]=c>>>24):oc(this,c,a,!0);return a+4};w.prototype.writeInt32BE=\nfunction(c,a,b){c=+c;a|=0;b||sa(this,c,a,4,2147483647,-2147483648);0>c&&(c=4294967295+c+1);w.TYPED_ARRAY_SUPPORT?(this[a]=c>>>24,this[a+1]=c>>>16,this[a+2]=c>>>8,this[a+3]=c&255):oc(this,c,a,!1);return a+4};w.prototype.writeFloatLE=function(c,a,b){return ue(this,c,a,!0,b)};w.prototype.writeFloatBE=function(c,a,b){return ue(this,c,a,!1,b)};w.prototype.writeDoubleLE=function(c,a,b){return ve(this,c,a,!0,b)};w.prototype.writeDoubleBE=function(c,a,b){return ve(this,c,a,!1,b)};w.prototype.copy=function(c,\na,b,d){b||(b=0);d||0===d||(d=this.length);a>=c.length&&(a=c.length);a||(a=0);0<d&&d<b&&(d=b);if(d===b||0===c.length||0===this.length)return 0;if(0>a)throw new RangeError(\"targetStart out of bounds\");if(0>b||b>=this.length)throw new RangeError(\"sourceStart out of bounds\");if(0>d)throw new RangeError(\"sourceEnd out of bounds\");d>this.length&&(d=this.length);c.length-a<d-b&&(d=c.length-a+b);var f=d-b;if(this===c&&b<a&&a<d)for(d=f-1;0<=d;--d)c[d+a]=this[d+b];else if(1E3>f||!w.TYPED_ARRAY_SUPPORT)for(d=\n0;d<f;++d)c[d+a]=this[d+b];else Uint8Array.prototype.set.call(c,this.subarray(b,b+f),a);return f};w.prototype.fill=function(c,a,b,d){if(\"string\"===typeof c){\"string\"===typeof a?(d=a,a=0,b=this.length):\"string\"===typeof b&&(d=b,b=this.length);if(1===c.length){var f=c.charCodeAt(0);256>f&&(c=f)}if(void 0!==d&&\"string\"!==typeof d)throw new TypeError(\"encoding must be a string\");if(\"string\"===typeof d&&!w.isEncoding(d))throw new TypeError(\"Unknown encoding: \"+d);}else\"number\"===typeof c&&(c&=255);if(0>\na||this.length<a||this.length<b)throw new RangeError(\"Out of range index\");if(b<=a)return this;a>>>=0;b=void 0===b?this.length:b>>>0;c||(c=0);if(\"number\"===typeof c)for(d=a;d<b;++d)this[d]=c;else for(c=La(c)?c:mc((new w(c,d)).toString()),f=c.length,d=0;d<b-a;++d)this[d+a]=c[d%f];return this};var yg=/[^+\\/0-9A-Za-z-_]/g,Hd={normal:null,road:function(){var c=document.createElement(\"canvas\");c.width=c.height=32;var a=c.getContext(\"2d\");a.save();a.moveTo(0,0);a.lineTo(20,0);a.lineTo(32,16);a.lineTo(20,\n32);a.lineTo(0,32);a.lineTo(10,16);a.fillStyle=\"#fff\";a.fill();a.restore();return c}()},Af=function(c){function a(b,c){H(this,a);b=Q(this,(a.__proto__||N(a)).call(this,b,c));b.initData();return b}R(a,c);L(a,[{key:\"getDefaultOptions\",value:function(){return{color:\"rgba(25, 25, 250, 1)\",blend:\"normal\",width:4,isFlat:!0,antialias:!1,lineJoin:\"miter\",lineCap:\"butt\",style:\"normal\",dashArray:[0,0],dashOffset:0}}},{key:\"initData\",value:function(){this.dataMgr={position:[],prev:[],next:[],direction:[],color:[],\nindex:[],counter:[],uv:[]}}},{key:\"initialize\",value:function(a){this.gl=a;var b=this.getOptions(),c=[];b.enablePicked&&c.push(\"PICK\");Hd[b.style]&&(this.isUseTexture=!0,c.push(\"USE_TEXTURE\"));this.program=new V(this.gl,{vertexShader:\"precision highp float;uniform vec4 uSelectedColor;uniform mat4 uMatrix;uniform bool uFlat;uniform vec2 uDashArray;uniform float thickness;uniform float zoomUnits;uniform float devicePixelRatio;uniform int miter;attribute vec3 position;attribute vec3 next;attribute vec3 previous;attribute float direction;attribute vec4 aColor;attribute float aDistance;attribute float aTotalDistance;\\n#if defined(USE_TEXTURE)\\nattribute vec2 uv;\\n#endif\\nvarying vec4 vColor;varying vec2 vNormal;varying vec2 vUV;varying vec2 vDashArray;varying float vTotalDistance;varying float vCounter;vec2 project(vec4 coord){vec3 screen=coord.xyz/coord.w;vec2 clip=(screen.xy+1.0)/2.0;return clip*MAPV_resolution;}vec4 unproject(vec2 projected,float z,float w){vec2 clip=projected/MAPV_resolution;vec2 screen=clip*2.0-1.0;return vec4(screen*w,z,w);}vec3 getNormalAndWidth(vec2 currentScreen,vec2 previousScreen,vec2 nextScreen,float thickness){vec2 dir=vec2(0.0);if(currentScreen==previousScreen){dir=normalize(nextScreen-currentScreen);}else if(currentScreen==nextScreen){dir=normalize(currentScreen-previousScreen);}else{vec2 dirA=normalize((currentScreen-previousScreen));if(miter==1){vec2 dirB=normalize((nextScreen-currentScreen));vec2 tangent=normalize(dirA+dirB);vec2 perp=vec2(-dirA.y,dirA.x);vec2 miter=vec2(-tangent.y,tangent.x);dir=tangent;float angle=40.0;if(dot(dirA,dirB)>cos(radians(angle))){thickness=thickness/dot(miter,perp);}}else{dir=dirA;}}vec2 normal=vec2(-dir.y,dir.x);return vec3(normal,thickness);}void main(){vColor=aColor;vCounter=aDistance/aTotalDistance;vDashArray=zoomUnits*uDashArray/aTotalDistance;vTotalDistance=aTotalDistance;\\n#if defined(USE_TEXTURE)\\nvUV=uv;\\n#endif\\n#if defined(PICK)\\nif(mapvIsPicked()){vColor=uSelectedColor;}\\n#endif\\nif(uFlat){float width=thickness*zoomUnits;vec3 nw=getNormalAndWidth(position.xy,previous.xy,next.xy,width);width=nw.z;vec2 normal=nw.xy*width/2.0;vNormal=normal*direction;gl_Position=uMatrix*vec4(position.xy+normal*direction,position.z,1.0);}else{vec4 previousProjected=uMatrix*vec4(previous,1.0);vec4 currentProjected=uMatrix*vec4(position,1.0);vec4 nextProjected=uMatrix*vec4(next,1.0);vec2 currentScreen=project(currentProjected);vec2 previousScreen=project(previousProjected);vec2 nextScreen=project(nextProjected);float width=thickness*devicePixelRatio;vec3 nw=getNormalAndWidth(currentScreen,previousScreen,nextScreen,width);width=nw.z;vec2 normal=nw.xy*width/2.0;vNormal=normal*direction;vec2 pos=currentScreen+normal*direction;vec4 finalPos=unproject(pos,currentProjected.z,currentProjected.w);gl_Position=finalPos;}}\",\nfragmentShader:\"precision highp float;varying vec4 vColor;varying vec2 vNormal;varying vec2 vUV;varying vec2 vDashArray;varying float vCounter;varying float vTotalDistance;uniform bool uAntialias;uniform float uDashOffset;uniform float zoomUnits;uniform float thickness;\\n#if defined(USE_TEXTURE)\\nuniform float uTextureMargin;uniform sampler2D textureImage;\\n#endif\\nvoid main(){vec4 color=vColor;if(uAntialias){float blur=1.0;blur=1.0-smoothstep(0.98,1.0,length(vNormal));color.a*=blur;}\\n#if defined(USE_TEXTURE)\\nfloat segLen=uTextureMargin*zoomUnits;float textureLen=thickness*zoomUnits;float deltaX=mod(vUV.x,segLen);float middle=segLen/2.0;if(deltaX>=middle&&deltaX<=middle+textureLen){float uvx=(deltaX-middle)/textureLen;vec4 texture=texture2D(textureImage,vec2(uvx,vUV.y));color=texture.a>=0.5 ? texture : color;}\\n#endif\\nif(vDashArray.y>0.0){float offset=uDashOffset*zoomUnits/vTotalDistance;color.a*=(1.0-step(vDashArray.x,mod(vCounter+offset,vDashArray.x+vDashArray.y)));}gl_FragColor=color;}\",\ndefines:c},this);this.prevBuffer=new S({gl:a,target:\"ARRAY_BUFFER\",usage:\"STATIC_DRAW\"});this.currentBuffer=new S({gl:a,target:\"ARRAY_BUFFER\",usage:\"STATIC_DRAW\"});this.nextBuffer=new S({gl:a,target:\"ARRAY_BUFFER\",usage:\"STATIC_DRAW\"});this.directionBuffer=new S({gl:a,target:\"ARRAY_BUFFER\",usage:\"STATIC_DRAW\"});this.colorBuffer=new S({gl:a,target:\"ARRAY_BUFFER\",usage:\"STATIC_DRAW\"});this.counterBuffer=new S({gl:a,target:\"ARRAY_BUFFER\",usage:\"STATIC_DRAW\"});this.uvBuffer=new S({gl:a,target:\"ARRAY_BUFFER\",\nusage:\"STATIC_DRAW\"});this.indexBuffer=new S({gl:a,target:\"ELEMENT_ARRAY_BUFFER\",usage:\"STATIC_DRAW\"});c=[{stride:12,name:\"previous\",buffer:this.prevBuffer,size:3,type:\"FLOAT\",offset:0},{stride:12,name:\"position\",buffer:this.currentBuffer,size:3,type:\"FLOAT\",offset:0},{stride:12,name:\"next\",buffer:this.nextBuffer,size:3,type:\"FLOAT\",offset:0},{stride:4,name:\"direction\",buffer:this.directionBuffer,size:1,type:\"FLOAT\",offset:0},{stride:16,name:\"aColor\",buffer:this.colorBuffer,size:4,type:\"FLOAT\",offset:0},\n{stride:8,name:\"aDistance\",buffer:this.counterBuffer,size:1,type:\"FLOAT\",offset:0},{stride:8,name:\"aTotalDistance\",buffer:this.counterBuffer,size:1,type:\"FLOAT\",offset:4}];c=c.concat(this.getCommonAttributes());Hd[b.style]&&(c.push({stride:8,name:\"uv\",buffer:this.uvBuffer,size:2,type:\"FLOAT\",offset:0}),this.setOptions({texture:Hd[b.style]}),this.loadTexture());this.vertexArray=new za({gl:a,program:this.program,attributes:c})}},{key:\"onChanged\",value:function(a,c){var b=this;if(this.gl){this.initData();\nfor(var d=a.color,k=[],h=0;h<c.length;h++){var m=[],n=c[h].geometry.coordinates;n&&0<n.length&&(m=\"Polygon\"===c[h].geometry.type?n[0].map(function(a){return b.normizedPoint(a)}):n.map(function(a){return b.normizedPoint(a)}));n=c[h].color||d;\"properties\"in c[h]&&\"color\"in c[h].properties&&(n=c[h].properties.color);\"[object Function]\"===Object.prototype.toString.call(n)&&(n=n(c[h]));n=this.normizedColor(n);for(var p=this.addMultipleCoords(m),l=0;l<p.length;l++)this.processData(this.dataMgr,p[l],n);\nif(a.enablePicked)for(n=this.indexToRgb(h),p=0;p<m.length;p++)k.push(n[0]/255,n[1]/255,n[2]/255),k.push(n[0]/255,n[1]/255,n[2]/255),a.repeat&&(k.push(n[0]/255,n[1]/255,n[2]/255),k.push(n[0]/255,n[1]/255,n[2]/255),k.push(n[0]/255,n[1]/255,n[2]/255),k.push(n[0]/255,n[1]/255,n[2]/255))}this.counterBuffer.updateData(new Float32Array(this.dataMgr.counter));this.currentBuffer.updateData(new Float32Array(this.dataMgr.position));this.prevBuffer.updateData(new Float32Array(this.dataMgr.prev));this.nextBuffer.updateData(new Float32Array(this.dataMgr.next));\nthis.directionBuffer.updateData(new Float32Array(this.dataMgr.direction));this.colorBuffer.updateData(new Float32Array(this.dataMgr.color));this.indexBuffer.updateData(new Uint32Array(this.dataMgr.index));this.isUseTexture&&this.uvBuffer.updateData(new Float32Array(this.dataMgr.uv));a.enablePicked&&this.pickBuffer.updateData(new Float32Array(k))}}},{key:\"processData\",value:function(a,c,f){var b,d,h,m,n,p,l,q,r=c.length,u=a.position.length/6,z=ze(c),t=z.arr,x=z.total;z=Ba(t.map(function(a){return[a,\nx]}));t=t.map(function(a){return[a,0,a,1]});var v=Ba(c.map(function(a){return-1}),!0),A=Ba(c),B=Ba(c.map(pc(-1))),E=Ba(c.map(pc(1)));c=Ba(c.map(function(a){return f}));r=ye(r,u);(b=a.uv).push.apply(b,ca(Ma(t)));(d=a.counter).push.apply(d,ca(Ma(z)));(h=a.position).push.apply(h,ca(Ma(A)));(m=a.prev).push.apply(m,ca(Ma(B)));(n=a.next).push.apply(n,ca(Ma(E)));(p=a.direction).push.apply(p,ca(v));(l=a.color).push.apply(l,ca(Ma(c)));(q=a.index).push.apply(q,ca(r))}},{key:\"render\",value:function(a){var b=\na.gl,c=a.matrix,g=this.dataMgr;if(g&&!(0>=g.index.length)&&this.map){var k=this.getOptions(),h=this.program;h.use(b);a=T(this.getCommonUniforms(a),{uMatrix:c,uFlat:k.isFlat,zoomUnits:this.map.getZoomUnits(),devicePixelRatio:window.devicePixelRatio,miter:1,thickness:k.width,uDashArray:k.dashArray,uDashOffset:k.dashOffset,uAntialias:k.antialias});this.isUseTexture&&(a=T(a,{uTextureMargin:140,textureImage:this.texture}));h.setUniforms(a);b.enable(b.BLEND);b.blendEquation(b.FUNC_ADD);k.blend&&\"lighter\"===\nk.blend?b.blendFunc(b.SRC_ALPHA,b.ONE):b.blendFunc(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA);this.indexBuffer.bind();this.vertexArray.bind();b.drawElements(b.TRIANGLES,g.index.length,b.UNSIGNED_INT,0);b.bindBuffer(b.ARRAY_BUFFER,null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null);b.disable(b.BLEND)}}},{key:\"loadTexture\",value:function(a){var b=this,c=this.getOptions();c.texture?Ra(this.gl,c.texture,function(c,d){b.image=d;b.texture=c;a&&a();b.webglLayer.render()}):(this.image=this.texture=null,a&&a())}}]);return a}(da),\nli=function(){function c(a,b){H(this,c);this.layer=a;this.gl=b;this.initData()}L(c,[{key:\"initData\",value:function(){this.outWall3d={vertex:[],vertexBuffer:[],index:[],indexBuffer:[]};this.maxLength=0}},{key:\"getData\",value:function(){return this.outWall3d}},{key:\"getMaxDataLength\",value:function(){return this.maxLength}},{key:\"onLayerChange\",value:function(a,b){this.initData();var c=a.color,f=a.height,g=a.gradient;a=this.gl;for(var k=0;k<b.length;k++){var h=b[k].geometry.coordinates,m=h.length;this.maxLength=\nm>this.maxLength?m:this.maxLength;for(var n=[],p=0;p<m;p++){var l=this.layer.normizedPoint(h[p]);n.push(l)}m=b[k].color||c;\"properties\"in b[k]&&\"color\"in b[k].properties&&(m=b[k].properties.color);g||\"[object Function]\"!==Object.prototype.toString.call(m)||(m=m(b[k]));h=this.layer.normizedColor(g?g[0]:m);m=this.layer.normizedColor(g?g[1]:m);p=b[k].height||f;\"properties\"in b[k]&&\"height\"in b[k].properties&&(p=b[k].properties.height);\"[object Function]\"===Object.prototype.toString.call(p)&&(p=p(b[k]));\nthis.processData(this.outWall3d,n,h,m,p)}for(b=0;b<this.outWall3d.vertex.length;b++){c=[];f=this.outWall3d.vertex[b].length;for(g=0;g<f;g++)c.push.apply(c,ca(this.outWall3d.vertex[b][g]));f=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,f);a.bufferData(a.ARRAY_BUFFER,new Float32Array(c),a.STATIC_DRAW);this.outWall3d.vertexBuffer[b]=f;a.bindBuffer(a.ARRAY_BUFFER,null);f=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,f);a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.outWall3d.index[b]),\na.STATIC_DRAW);this.outWall3d.indexBuffer[b]=f;a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null)}}},{key:\"processData\",value:function(a,b,c,f,g){var d=a.vertex[a.vertex.length-1],h=a.index[a.index.length-1],m=b.length;if(!h||65536<=h.length+2*m+2)d=[],h=[],a.vertex.push(d),a.index.push(h);(a=d.length)&&h.push(a-1,a);for(var n=a=0;n<m;n++){var p=[],l=[],q=b[n];p.push(q[0],q[1]);p.push(q[2]?Number(q[2])+g:g);p.push(q[3]?Number(q[3]):n);p.push(a);p.push(c[0],c[1],c[2],c[3]);l.push(q[0],q[1]);l.push(q[2]?Number(q[2]):\n0);l.push(q[3]?Number(q[3]):n);l.push(a);l.push(f[0],f[1],f[2],f[3]);q=d.length;d.push(p,l);h.push(q,q+1);n<m-1&&(a+=this.getDistance(b[n],b[n+1]))}}},{key:\"getDistance\",value:function(a,b){return Math.sqrt(Math.pow(Math.abs(a[0]-b[0]),2)+Math.pow(Math.abs(a[1]-b[1]),2))}}]);return c}(),Bf=function(c){function a(b,c){H(this,a);b=Q(this,(a.__proto__||N(a)).call(this,b,c));b.startTime=b.options.startTime||0;b.endTime=b.options.endTime;b.time=b.startTime;b.autoUpdate=!0;return b}R(a,c);L(a,[{key:\"getDefaultOptions\",\nvalue:function(){return{height:100,color:[1,1,1,1],trailLength:3,step:.1}}},{key:\"initialize\",value:function(a){this.gl=a;this.dataMgr=new li(this,this.gl);this.program=new V(this.gl,{vertexShader:\"uniform mat4 u_matrix;uniform float currentTime;uniform float trailLength;attribute vec4 aPos;attribute float aDistance;attribute vec4 aColor;varying vec4 vColor;varying float vHeight;varying float vTime;varying float vDistance;void main(){vTime=1.0-((currentTime-aPos.w)/trailLength);vHeight=aPos.z;vColor=aColor;vDistance=aDistance;gl_Position=u_matrix*vec4(aPos.xyz,1.0);}\",\nfragmentShader:\"precision highp float;varying vec4 vColor;varying float vTime;varying float vDistance;varying float vHeight;uniform float currentTime;void main(){if(vTime>1.0||vTime<0.0){}float radius=2.5;float distance=vDistance+currentTime*20.0;float modDistance=mod(distance,9.0);float alpha=1.0;if(modDistance>radius*2.0){discard;}else{float x=abs(modDistance-radius);float y=abs(vHeight-radius);float dis=sqrt(pow(x,2.0)+pow(y,2.0));if(dis>radius){discard;}alpha=dis/radius;}gl_FragColor=vec4(vColor.rgb,1.0-alpha);}\"})}},\n{key:\"onChanged\",value:function(a,c){this.gl&&(this.dataMgr.onLayerChange(a,c),void 0===a.endTime&&(this.endTime=this.dataMgr.getMaxDataLength()))}},{key:\"render\",value:function(a){var b=a.gl,c=a.matrix;if((a=this.dataMgr.getData())&&!(0>=a.vertex.length)){var g=this.getOptions(),k=this.program;b.useProgram(k.program);b.enable(b.BLEND);b.blendEquation(b.FUNC_ADD);b.blendFunc(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA);b.enableVertexAttribArray(k.attributes.aPos);b.enableVertexAttribArray(k.attributes.aDistance);\nb.enableVertexAttribArray(k.attributes.aColor);b.uniformMatrix4fv(k.uniforms.u_matrix,!1,c);b.uniform1f(k.uniforms.currentTime,this.time);b.uniform1f(k.uniforms.trailLength,g.trailLength);for(c=0;c<a.vertex.length;c++)if(!(0>=a.vertex[c].length)){var h=a.vertex[c],m=(new Float32Array(h[0])).BYTES_PER_ELEMENT;h=m*h[0].length;b.bindBuffer(b.ARRAY_BUFFER,a.vertexBuffer[c]);b.vertexAttribPointer(k.attributes.aPos,4,b.FLOAT,!1,h,0);b.vertexAttribPointer(k.attributes.aDistance,1,b.FLOAT,!1,h,4*m);b.vertexAttribPointer(k.attributes.aColor,\n4,b.FLOAT,!1,h,5*m);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,a.indexBuffer[c]);b.drawElements(b.TRIANGLE_STRIP,a.index[c].length,b.UNSIGNED_SHORT,0);b.bindBuffer(b.ARRAY_BUFFER,null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null)}b.disable(b.BLEND);this.time+=g.step;this.time>this.endTime&&(this.time=this.startTime);b.useProgram(null)}}}]);return a}(da),mi=O(function(c,a){a.__esModule=!0;var b=Ua&&Ua.__esModule?Ua:{default:Ua};a.default=function(a,c,g){c in a?(0,b.default)(a,c,{value:g,enumerable:!0,configurable:!0,\nwritable:!0}):a[c]=g;return a}}),Ab=P(mi),ac,bc,ni=(ac={},Ab(ac,1,1),Ab(ac,2,1),Ab(ac,3,1),ac),oi=(bc={},Ab(bc,1,1),Ab(bc,2,1),Ab(bc,3,1),bc),ob=function(c){function a(b,c){H(this,a);b=Q(this,(a.__proto__||N(a)).call(this,b,c));b.bufferMap={};b.bufferData=[];b.autoUpdate=!0;return b}R(a,c);L(a,[{key:\"getDefaultOptions\",value:function(){return{color:[1,1,1,.8],speed:1,size:5,pointFade:!0,pointFadeBuffer:1,minLineLength:2,animationType:2,shapeType:2,depthTest:!1}}},{key:\"initialize\",value:function(a){this.gl=\na;var b=this.getOptions();this.updateUniformsFromOptions(b);this.program=new V(this.gl,{vertexShader:\"precision highp float;attribute vec3 aPos;attribute vec3 aNextPos;attribute float aIndex;attribute float aNextIndex;attribute float aLength;uniform float uSize;uniform mat4 u_matrix;uniform float uElapsedSteps;uniform int uAnimationType;uniform int uPointFade;uniform float uPointFadeBuffer;varying float vAddOpacity;void main(){if(uAnimationType==1){if(abs(aIndex-mod(uElapsedSteps,aLength))>.1){gl_Position=vec4(-2.,-2.,0,1.0);return;}gl_Position=u_matrix*vec4(aPos.xyz,1.0);vAddOpacity=1.;}else if(uAnimationType==2){float lineLength=aLength-1.;float cIndex=mod(uElapsedSteps,lineLength);float rest=cIndex-aIndex;if(rest<1.&&rest>=0.){if(uPointFade==1){if(cIndex<uPointFadeBuffer){vAddOpacity=cIndex/uPointFadeBuffer;}else if(cIndex>lineLength-uPointFadeBuffer){vAddOpacity=(lineLength-cIndex)/uPointFadeBuffer;}else{vAddOpacity=1.;}}else{vAddOpacity=1.;}gl_Position=u_matrix*vec4(aPos.x+(aNextPos.x-aPos.x)*rest,aPos.y+(aNextPos.y-aPos.y)*rest,aPos.z+(aNextPos.z-aPos.z)*rest,1.0);}else{gl_Position=vec4(-2.,-2.,0,1.0);return;}}else if(uAnimationType==3){float percent=mod(uElapsedSteps,aLength)/aLength;if(percent<=aNextIndex&&percent>=aIndex){if(uPointFade==1){float fadePercent=uPointFadeBuffer*1000./aLength;if(percent<fadePercent){vAddOpacity=percent/fadePercent;}else if(percent>1.-fadePercent){vAddOpacity=(1.-percent)/fadePercent;}else{vAddOpacity=1.;}}else{vAddOpacity=1.;}float rest=(percent-aIndex)/(aNextIndex-aIndex);gl_Position=u_matrix*vec4(aPos.x+(aNextPos.x-aPos.x)*rest,aPos.y+(aNextPos.y-aPos.y)*rest,aPos.z+(aNextPos.z-aPos.z)*rest,1.0);}else{gl_Position=vec4(-2.,-2.,0,1.0);return;}}gl_PointSize=uSize;}\",\nfragmentShader:\"precision highp float;uniform vec4 uColor;uniform int ushapeType;varying float vAddOpacity;void main(){if(ushapeType==2){float d=distance(gl_PointCoord,vec2(0.5,0.5));if(d>0.5){discard;}gl_FragColor=vec4(uColor.rgb,uColor.a*vAddOpacity);}else if(ushapeType==3){float d=distance(gl_PointCoord,vec2(0.5,0.5));if(d>0.5){discard;}gl_FragColor=vec4(uColor.rgb,uColor.a*smoothstep(1.0,0.0,d*2.)*vAddOpacity);}else{gl_FragColor=vec4(uColor.rgb,uColor.a*vAddOpacity);}}\"});this.buffer=a.createBuffer();\na.bindBuffer(a.ARRAY_BUFFER,this.buffer)}},{key:\"bindAttributeBufferData\",value:function(a,c,f,g){var b=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,b);f=new Float32Array(f);a.bufferData(a.ARRAY_BUFFER,f,a.STATIC_DRAW);this.bufferMap[c]={buffer:b,data:f,elementSize:g}}},{key:\"onChanged\",value:function(a,c){var b=this.gl;if(b){Array.isArray(c)||(c=[]);this.updateUniformsFromOptions(a);var d=[],k=[],h=[],m=[],n=[];a=a.minLineLength;for(var p=0;p<c.length;p++){var l=c[p].geometry.coordinates,q=l.length;\nif(!(q<a)){for(var r=0;r<q;++r){var u=this.normizedPoint(l[r]);d.push(u[0]);d.push(u[1]);d.push(u[2]||0);3!==this.animationType&&(k.push(r),m.push(q))}if(1!==this.animationType){u=d.length-3*q+3;r=d.length;for(l=u;l<r;++l)n.push(d[l]);d.splice(r-3,3);if(2===this.animationType)k.pop(),m.pop();else if(3===this.animationType){u-=3;r=d.length-3;l=0;q=[];for(var z=u;z<=r;z+=3)u=Math.sqrt(Math.pow(n[z]-d[z],2)+Math.pow(n[z+1]-d[z+1],2)+Math.pow(n[z+2]-d[z+2],2)),l+=u,q.push(u);k.push(0);z=r=0;for(var t=\nq.length-1;z<t;++z)r+=q[z],u=r/l,k.push(u),h.push(u),m.push(l);h.push(1);m.push(l)}}}}this.bindAttributeBufferData(b,\"aPos\",d,3);this.bindAttributeBufferData(b,\"aIndex\",k,1);this.bindAttributeBufferData(b,\"aLength\",m,1);1!==this.animationType&&(this.bindAttributeBufferData(b,\"aNextPos\",n,3),3===this.animationType&&this.bindAttributeBufferData(b,\"aNextIndex\",h,1));this.vertCount=d.length/3}}},{key:\"updateUniformsFromOptions\",value:function(a){this.color=this.normizedColor(a.color);this.startTime=(new Date).getTime();\nni[a.animationType]||(a.animationType=2);oi[a.shapeType]||(a.shapeType=2);if(isNaN(a.minLineLength)||2>a.minLineLength)a.minLineLength=2;this.animationType=a.animationType}},{key:\"renderAttributeArr\",value:function(a,c,f){if(void 0!==c.attributes[f]){var b=this.bufferMap[f];b&&(a.bindBuffer(a.ARRAY_BUFFER,b.buffer),a.enableVertexAttribArray(c.attributes[f]),a.vertexAttribPointer(c.attributes[f],b.elementSize,a.FLOAT,!1,b.data.BYTES_PER_ELEMENT*b.elementSize,0))}}},{key:\"render\",value:function(a){var b=\na.gl;a=a.matrix;if(!(0>=this.vertCount)){var c=this.program;b.useProgram(c.program);this.renderAttributeArr(b,c,\"aPos\");this.renderAttributeArr(b,c,\"aIndex\");this.renderAttributeArr(b,c,\"aLength\");1!==this.animationType&&(this.renderAttributeArr(b,c,\"aNextPos\"),3===this.animationType&&this.renderAttributeArr(b,c,\"aNextIndex\"));var g=(new Date).getTime()-this.startTime;g=1===this.animationType?Math.round(g/1E3*this.options.speed*20):3===this.animationType?g/1E3*this.options.speed*1E3:g/1E3*this.options.speed;\nb.uniformMatrix4fv(c.uniforms.u_matrix,!1,a);b.uniform4f(c.uniforms.uColor,this.color[0],this.color[1],this.color[2],this.color[3]);b.uniform1f(c.uniforms.uSize,this.options.size);b.uniform1f(c.uniforms.uElapsedSteps,g);b.uniform1i(c.uniforms.uAnimationType,this.animationType);b.uniform1i(c.uniforms.ushapeType,this.options.shapeType);b.uniform1i(c.uniforms.uPointFade,this.options.pointFade?1:0);b.uniform1f(c.uniforms.uPointFadeBuffer,this.options.pointFadeBuffer);a=this.options.blend;c=this.options.depthTest;\nb.enable(b.BLEND);b.blendEquation(b.FUNC_ADD);a&&\"lighter\"===a?b.blendFunc(b.SRC_ALPHA,b.ONE):b.blendFunc(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA);c||b.disable(b.DEPTH_TEST);b.drawArrays(b.POINTS,0,this.vertCount);b.bindBuffer(b.ARRAY_BUFFER,null);b.disable(b.BLEND);b.disable(b.DEPTH_TEST);b.useProgram(null)}}}]);return a}(da);ob.ANIMATION_TYPE_LEAP=1;ob.ANIMATION_TYPE_SMOOTH=2;ob.ANIMATION_TYPE_UNIFORM_SPEED=3;ob.SHAPE_TYPE_SQUARE=1;ob.SHAPE_TYPE_CIRCLE=2;ob.SHAPE_TYPE_CIRCLE_GRADIENT=3;var pi=function(){function c(a,\nb){H(this,c);this.layer=a;this.gl=b;this.initData()}L(c,[{key:\"initData\",value:function(){this.outWall3d={vertex:[],vertexBuffer:[],index:[],indexBuffer:[]}}},{key:\"getData\",value:function(){return this.outWall3d}},{key:\"onLayerChange\",value:function(a,b){this.initData();for(var c=a.color,f=a.height,g=a.gradient,k=a.enablePreciseMap,h=this.gl,m=0;m<b.length;m++){for(var n=b[m].geometry.coordinates,p=n.length,l=[],q=[],r=0,u=0;u<p;u++){var z=this.layer.normizedPoint(n[u]);if(0<u&&k){var t=this.layer.normizedPoint(n[u-\n1]);r+=Math.sqrt(Math.pow(z[0]-t[0],2)+Math.pow(z[1]-t[1],2))}l.push(z);q.push(r)}p=b[m].color||c;\"properties\"in b[m]&&\"color\"in b[m].properties&&(p=b[m].properties.color);g||\"[object Function]\"!==Object.prototype.toString.call(p)||(p=p(b[m]));n=this.layer.normizedColor(g?g[0]:p);p=this.layer.normizedColor(g?g[1]:p);r=b[m].height||f;\"properties\"in b[m]&&\"height\"in b[m].properties&&(r=b[m].properties.height);\"[object Function]\"===Object.prototype.toString.call(r)&&(r=r(b[m]));this.processData(this.outWall3d,\na,l,q,n,p,r)}for(a=0;a<this.outWall3d.vertex.length;a++){b=[];c=this.outWall3d.vertex[a].length;for(f=0;f<c;f++)b.push.apply(b,ca(this.outWall3d.vertex[a][f]));c=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,c);h.bufferData(h.ARRAY_BUFFER,new Float32Array(b),h.STATIC_DRAW);this.outWall3d.vertexBuffer[a]=c;h.bindBuffer(h.ARRAY_BUFFER,null);c=h.createBuffer();h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,c);h.bufferData(h.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.outWall3d.index[a]),h.STATIC_DRAW);this.outWall3d.indexBuffer[a]=\nc;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,null)}}},{key:\"processData\",value:function(a,b,c,f,g,k,h){var d=f[f.length-1],n=a.vertex[a.vertex.length-1],p=a.index[a.index.length-1],l=c.length;if(!p||65536<=p.length+2*l+2)n=[],p=[],a.vertex.push(n),a.index.push(p);(a=n.length)&&p.push(a-1,a);for(a=0;a<l;a++){var q=[],r=[],u=c[a];q.push(u[0],u[1],h);q.push(g[0],g[1],g[2],g[3]);r.push(u[0],u[1],0);r.push(k[0],k[1],k[2],k[3]);b.texture&&(u=f[a],b.enablePreciseMap?(q.push(u/d,1),r.push(u/d,0)):(q.push(a/(l-1),\n1),r.push(a/(l-1),0)));u=n.length;n.push(q,r);p.push(u,u+1)}}}]);return c}(),qi=function(c){function a(b,c){H(this,a);return Q(this,(a.__proto__||N(a)).call(this,b,c))}R(a,c);L(a,[{key:\"getDefaultOptions\",value:function(){return{texture:null,enablePreciseMap:!1,height:100,color:[1,1,1,1]}}},{key:\"initialize\",value:function(a){this.gl=a;this.dataMgr=new pi(this,this.gl);this.texture=null;this.isUseTexture=!1;this.vertexLength=10;this.program=new V(this.gl,{vertexShader:\"uniform mat4 u_matrix;uniform bool uUseTexture;attribute vec3 aPos;attribute vec4 aColor;attribute vec2 aTextureCoords;varying vec2 vTextureCoords;varying vec4 vColor;void main(){if(aColor.w>=0.0&&aColor.w<=1.0){vColor=aColor;}else{vColor=vec4(aColor.xyz,1.0);}if(uUseTexture){vTextureCoords=aTextureCoords;}gl_Position=u_matrix*vec4(aPos,1.0);}\",\nfragmentShader:\"precision highp float;uniform bool uUseTexture;uniform sampler2D uSampler;varying vec2 vTextureCoords;varying vec4 vColor;void main(){if(uUseTexture){gl_FragColor=vec4(1.0,1.0,1.0,1.0)*texture2D(uSampler,vTextureCoords);}else{gl_FragColor=vColor;}}\"});this.loadTexture()}},{key:\"onChanged\",value:function(a,c){var b=this;this.gl&&(this.loadTextureTime&&clearTimeout(this.loadTextureTime),this.loadTextureTime=setTimeout(function(){b.loadTexture(function(){b.dataMgr.onLayerChange(a,c);\nb.webglLayer.render()})},0))}},{key:\"render\",value:function(a){var b=a.gl,c=a.matrix;if((a=this.dataMgr.getData())&&!(0>=a.vertex.length)){var g=this.getOptions(),k=this.program;b.useProgram(k.program);b.enable(b.BLEND);b.blendEquation(b.FUNC_ADD);b.blendFunc(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA);if(g.texture){if(!this.texture)return;b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_2D,this.texture);b.uniform1i(k.uniforms.uSampler,0);b.depthMask(!0);b.depthFunc(b.LESS)}else b.depthMask(!1);g.texture?\nb.enableVertexAttribArray(k.attributes.aTextureCoords):b.disableVertexAttribArray(k.attributes.aTextureCoords);b.enableVertexAttribArray(k.attributes.aPos);b.enableVertexAttribArray(k.attributes.aColor);b.uniformMatrix4fv(k.uniforms.u_matrix,!1,c);b.uniform1i(k.uniforms.uUseTexture,this.isUseTexture);for(c=0;c<a.vertex.length;c++)if(!(0>=a.vertex[c].length)){var h=a.vertex[c],m=(new Float32Array(h[0])).BYTES_PER_ELEMENT;h=m*h[0].length;b.bindBuffer(b.ARRAY_BUFFER,a.vertexBuffer[c]);b.vertexAttribPointer(k.attributes.aPos,\n3,b.FLOAT,!1,h,0);b.vertexAttribPointer(k.attributes.aColor,4,b.FLOAT,!1,h,3*m);g.texture&&b.vertexAttribPointer(k.attributes.aTextureCoords,2,b.FLOAT,!1,h,7*m);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,a.indexBuffer[c]);b.drawElements(b.TRIANGLE_STRIP,a.index[c].length,b.UNSIGNED_SHORT,0);b.bindBuffer(b.ARRAY_BUFFER,null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null)}b.disable(b.BLEND);b.useProgram(null)}}},{key:\"loadTexture\",value:function(a){var b=this,c=this.getOptions();c.texture?(this.isUseTexture=!0,\nRa(this.gl,c.texture,function(c,d){b.image=d;b.texture=c;a&&a();b.webglLayer.render()})):(this.isUseTexture=!1,this.image=this.texture=null,a&&a())}}]);return a}(da),ri=function(){function c(a,b){H(this,c);this.layer=a;this.gl=b;this.initData()}L(c,[{key:\"initData\",value:function(){this.outWall3d={vertex:[],vertexBuffer:[],index:[],indexBuffer:[]};this.maxLength=0}},{key:\"getData\",value:function(){return this.outWall3d}},{key:\"getMaxDataLength\",value:function(){return this.maxLength}},{key:\"onLayerChange\",\nvalue:function(a,b){this.initData();var c=a.color,f=a.height,g=a.gradient;a=this.gl;for(var k=0;k<b.length;k++){var h=b[k].geometry.coordinates,m=h.length;this.maxLength=m>this.maxLength?m:this.maxLength;for(var n=[],p=0;p<m;p++){var l=this.layer.normizedPoint(h[p]);n.push(l)}m=b[k].color||c;\"properties\"in b[k]&&\"color\"in b[k].properties&&(m=b[k].properties.color);g||\"[object Function]\"!==Object.prototype.toString.call(m)||(m=m(b[k]));h=this.layer.normizedColor(g?g[0]:m);m=this.layer.normizedColor(g?\ng[1]:m);p=b[k].height||f;\"properties\"in b[k]&&\"height\"in b[k].properties&&(p=b[k].properties.height);\"[object Function]\"===Object.prototype.toString.call(p)&&(p=p(b[k]));this.processData(this.outWall3d,n,h,m,p)}for(b=0;b<this.outWall3d.vertex.length;b++){c=[];f=this.outWall3d.vertex[b].length;for(g=0;g<f;g++)c.push.apply(c,ca(this.outWall3d.vertex[b][g]));f=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,f);a.bufferData(a.ARRAY_BUFFER,new Float32Array(c),a.STATIC_DRAW);this.outWall3d.vertexBuffer[b]=\nf;a.bindBuffer(a.ARRAY_BUFFER,null);f=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,f);a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.outWall3d.index[b]),a.STATIC_DRAW);this.outWall3d.indexBuffer[b]=f;a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null)}}},{key:\"processData\",value:function(a,b,c,f,g){var d=a.vertex[a.vertex.length-1],h=a.index[a.index.length-1],m=b.length;if(!h||65536<=h.length+2*m+2)d=[],h=[],a.vertex.push(d),a.index.push(h);(a=d.length)&&h.push(a-1,a);for(a=0;a<m;a++){var n=\n[],p=[],l=b[a];n.push(l[0],l[1]);n.push(l[2]?Number(l[2])+g:g);n.push(l[3]?Number(l[3]):a);n.push(c[0],c[1],c[2],c[3]);p.push(l[0],l[1]);p.push(l[2]?Number(l[2]):0);p.push(l[3]?Number(l[3]):a);p.push(f[0],f[1],f[2],f[3]);l=d.length;d.push(n,p);h.push(l,l+1)}}}]);return c}(),si=function(c){function a(b,c){H(this,a);b=Q(this,(a.__proto__||N(a)).call(this,b,c));b.startTime=b.options.startTime||0;b.endTime=b.options.endTime;b.time=b.startTime;b.autoUpdate=!0;return b}R(a,c);L(a,[{key:\"getDefaultOptions\",\nvalue:function(){return{height:100,color:[1,1,1,1],trailLength:3,step:.1}}},{key:\"initialize\",value:function(a){this.gl=a;this.dataMgr=new ri(this,this.gl);this.program=new V(this.gl,{vertexShader:\"uniform mat4 u_matrix;uniform float currentTime;uniform float trailLength;attribute vec4 aPos;attribute vec4 aColor;varying vec4 vColor;varying float vTime;void main(){vTime=1.0-((currentTime-aPos.w)/trailLength);vColor=aColor;gl_Position=u_matrix*vec4(aPos.xyz,1.0);}\",fragmentShader:\"precision highp float;varying vec4 vColor;varying float vTime;void main(){if(vTime>1.0||vTime<0.0){discard;}gl_FragColor=vec4(vColor.rgb,1.0*vTime);}\"})}},\n{key:\"onChanged\",value:function(a,c){this.gl&&(this.dataMgr.onLayerChange(a,c),void 0===a.endTime&&(this.endTime=this.dataMgr.getMaxDataLength()))}},{key:\"render\",value:function(a){var b=a.gl,c=a.matrix;if((a=this.dataMgr.getData())&&!(0>=a.vertex.length)){var g=this.getOptions(),k=this.program;b.useProgram(k.program);b.enable(b.BLEND);b.blendEquation(b.FUNC_ADD);b.blendFunc(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA);b.enableVertexAttribArray(k.attributes.aPos);b.enableVertexAttribArray(k.attributes.aColor);\nb.uniformMatrix4fv(k.uniforms.u_matrix,!1,c);b.uniform1f(k.uniforms.currentTime,this.time);b.uniform1f(k.uniforms.trailLength,g.trailLength);for(c=0;c<a.vertex.length;c++)if(!(0>=a.vertex[c].length)){var h=a.vertex[c],m=(new Float32Array(h[0])).BYTES_PER_ELEMENT;h=m*h[0].length;b.bindBuffer(b.ARRAY_BUFFER,a.vertexBuffer[c]);b.vertexAttribPointer(k.attributes.aPos,4,b.FLOAT,!1,h,0);b.vertexAttribPointer(k.attributes.aColor,4,b.FLOAT,!1,h,4*m);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,a.indexBuffer[c]);b.drawElements(b.TRIANGLE_STRIP,\na.index[c].length,b.UNSIGNED_SHORT,0);b.bindBuffer(b.ARRAY_BUFFER,null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null)}b.disable(b.BLEND);this.time+=g.step;this.time>this.endTime&&(this.time=this.startTime);b.useProgram(null)}}}]);return a}(da),ti=function(c){function a(b,c){H(this,a);b=Q(this,(a.__proto__||N(a)).call(this,b,c));b.simpleLineLayer=new yf(b.getHeatOptions());b.children=[b.simpleLineLayer];return b}R(a,c);L(a,[{key:\"getDefaultOptions\",value:function(){return{blend:\"normal\",gradient:{0:\"rgb(50, 50, 256)\",\n\"0.1\":\"rgb(50, 250, 56)\",\"0.5\":\"rgb(250, 250, 56)\",1:\"rgb(250, 50, 56)\"}}}},{key:\"onDataChanged\",value:function(a){this.simpleLineLayer.setData(a)}},{key:\"onOptionsChanged\",value:function(a){this.simpleLineLayer.setOptions(this.getHeatOptions())}},{key:\"getHeatOptions\",value:function(){var a=this.getOptions(),c=a.max,f=a.min;void 0===c&&(f=this.getDataRange(),c=f.max,f=f.min);var g=new na({max:c,min:f,gradient:a.gradient});a.color=function(a){var b=~~a.count||1;\"properties\"in a&&\"count\"in a.properties&&\n(b=~~a.properties.count);a=g.getImageData(b);return[a[0]/255,a[1]/255,a[2]/255,a[3]/255]};return a}},{key:\"getDataRange\",value:function(){var a=this.getData(),c=0,f=0;a[0]&&(c=~~a[0].count||1,f=~~a[0].count||1);\"properties\"in a[0]&&\"count\"in a[0].properties&&(c=~~a[0].properties.count,f=~~a[0].properties.count);for(var g=a.length,k=0;k<g;k++){var h=~~a[k].count||1;\"properties\"in a[k]&&\"count\"in a[k].properties&&(h=~~a[k].properties.count);c=Math.max(h,c);f=Math.min(h,f)}return{max:c/2,min:f}}}]);\nreturn a}(nb),ui=O(function(c,a){(function(a,d){c.exports=d()})(Be,function(){function a(b,d,f,g,h){for(;g>f;){if(600<g-f){var k=g-f+1,l=d-f+1,m=Math.log(k),n=.5*Math.exp(2*m/3);m=.5*Math.sqrt(m*n*(k-n)/k)*(0>l-k/2?-1:1);a(b,d,Math.max(f,Math.floor(d-l*n/k+m)),Math.min(g,Math.floor(d+(k-l)*n/k+m)),h)}k=b[d];l=f;n=g;c(b,f,d);for(0<h(b[g],k)&&c(b,f,g);l<n;){c(b,l,n);l++;for(n--;0>h(b[l],k);)l++;for(;0<h(b[n],k);)n--}0===h(b[f],k)?c(b,f,n):(n++,c(b,n,g));n<=d&&(f=n+1);d<=n&&(g=n-1)}}function c(a,b,c){var d=\na[b];a[b]=a[c];a[c]=d}function f(a,b){return a<b?-1:a>b?1:0}function g(a,b){k(a,0,a.children.length,b,a)}function k(a,b,c,d,f){f||(f=u(null));f.minX=Infinity;f.minY=Infinity;f.maxX=-Infinity;for(f.maxY=-Infinity;b<c;b++){var g=a.children[b];h(f,a.leaf?d(g):g)}return f}function h(a,b){a.minX=Math.min(a.minX,b.minX);a.minY=Math.min(a.minY,b.minY);a.maxX=Math.max(a.maxX,b.maxX);a.maxY=Math.max(a.maxY,b.maxY);return a}function m(a,b){return a.minX-b.minX}function n(a,b){return a.minY-b.minY}function p(a){return(a.maxX-\na.minX)*(a.maxY-a.minY)}function l(a){return a.maxX-a.minX+(a.maxY-a.minY)}function q(a,b){return a.minX<=b.minX&&a.minY<=b.minY&&b.maxX<=a.maxX&&b.maxY<=a.maxY}function r(a,b){return b.minX<=a.maxX&&b.minY<=a.maxY&&b.maxX>=a.minX&&b.maxY>=a.minY}function u(a){return{children:a,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function z(b,c,d,g,h){for(var k=[c,d];k.length;)if(d=k.pop(),c=k.pop(),!(d-c<=g)){var l=c+Math.ceil((d-c)/g/2)*g;a(b,l,c||0,d||b.length-1,h||f);k.push(c,\nl,l,d)}}var t=function(a){void 0===a&&(a=9);this._maxEntries=Math.max(4,a);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));this.clear()};t.prototype.all=function(){return this._all(this.data,[])};t.prototype.search=function(a){var b=this.data,c=[];if(!r(a,b))return c;for(var d=this.toBBox,f=[];b;){for(var g=0;g<b.children.length;g++){var h=b.children[g],k=b.leaf?d(h):h;r(a,k)&&(b.leaf?c.push(h):q(a,k)?this._all(h,c):f.push(h))}b=f.pop()}return c};t.prototype.collides=function(a){var b=\nthis.data;if(!r(a,b))return!1;for(var c=[];b;){for(var d=0;d<b.children.length;d++){var f=b.children[d],g=b.leaf?this.toBBox(f):f;if(r(a,g)){if(b.leaf||q(a,g))return!0;c.push(f)}}b=c.pop()}return!1};t.prototype.load=function(a){if(!a||!a.length)return this;if(a.length<this._minEntries){for(var b=0;b<a.length;b++)this.insert(a[b]);return this}a=this._build(a.slice(),0,a.length-1,0);this.data.children.length?this.data.height===a.height?this._splitRoot(this.data,a):(this.data.height<a.height&&(b=this.data,\nthis.data=a,a=b),this._insert(a,this.data.height-a.height-1,!0)):this.data=a;return this};t.prototype.insert=function(a){a&&this._insert(a,this.data.height-1);return this};t.prototype.clear=function(){this.data=u([]);return this};t.prototype.remove=function(a,b){if(!a)return this;for(var c=this.data,d=this.toBBox(a),f=[],g=[],h,k,l;c||f.length;){c||(c=f.pop(),k=f[f.length-1],h=g.pop(),l=!0);if(c.leaf){a:{var m=a;var n=c.children,p=b;if(p){for(var v=0;v<n.length;v++)if(p(m,n[v])){m=v;break a}m=-1}else m=\nn.indexOf(m)}if(-1!==m){c.children.splice(m,1);f.push(c);this._condense(f);break}}l||c.leaf||!q(c,d)?k?(h++,c=k.children[h],l=!1):c=null:(f.push(c),g.push(h),h=0,k=c,c=c.children[0])}return this};t.prototype.toBBox=function(a){return a};t.prototype.compareMinX=function(a,b){return a.minX-b.minX};t.prototype.compareMinY=function(a,b){return a.minY-b.minY};t.prototype.toJSON=function(){return this.data};t.prototype.fromJSON=function(a){this.data=a;return this};t.prototype._all=function(a,b){for(var c=\n[];a;)a.leaf?b.push.apply(b,a.children):c.push.apply(c,a.children),a=c.pop();return b};t.prototype._build=function(a,b,c,d){var f=c-b+1,h=this._maxEntries;if(f<=h){var k=u(a.slice(b,c+1));g(k,this.toBBox);return k}d||(d=Math.ceil(Math.log(f)/Math.log(h)),h=Math.ceil(f/Math.pow(h,d-1)));k=u([]);k.leaf=!1;k.height=d;f=Math.ceil(f/h);h=f*Math.ceil(Math.sqrt(h));for(z(a,b,c,h,this.compareMinX);b<=c;b+=h){var l=Math.min(b+h-1,c);z(a,b,l,f,this.compareMinY);for(var m=b;m<=l;m+=f)k.children.push(this._build(a,\nm,Math.min(m+f-1,l),d-1))}g(k,this.toBBox);return k};t.prototype._chooseSubtree=function(a,b,c,d){for(;;){d.push(b);if(b.leaf||d.length-1===c)break;for(var f=Infinity,g=Infinity,h=void 0,k=0;k<b.children.length;k++){var l=b.children[k],m=p(l),n=(Math.max(l.maxX,a.maxX)-Math.min(l.minX,a.minX))*(Math.max(l.maxY,a.maxY)-Math.min(l.minY,a.minY))-m;n<g?(g=n,f=m<f?m:f,h=l):n===g&&m<f&&(f=m,h=l)}b=h||b.children[0]}return b};t.prototype._insert=function(a,b,c){c=c?a:this.toBBox(a);var d=[],f=this._chooseSubtree(c,\nthis.data,b,d);f.children.push(a);for(h(f,c);0<=b;)if(d[b].children.length>this._maxEntries)this._split(d,b),b--;else break;this._adjustParentBBoxes(c,d,b)};t.prototype._split=function(a,b){var c=a[b],d=c.children.length,f=this._minEntries;this._chooseSplitAxis(c,f,d);d=this._chooseSplitIndex(c,f,d);d=u(c.children.splice(d,c.children.length-d));d.height=c.height;d.leaf=c.leaf;g(c,this.toBBox);g(d,this.toBBox);b?a[b-1].children.push(d):this._splitRoot(c,d)};t.prototype._splitRoot=function(a,b){this.data=\nu([a,b]);this.data.height=a.height+1;this.data.leaf=!1;g(this.data,this.toBBox)};t.prototype._chooseSplitIndex=function(a,b,c){for(var d,f=Infinity,g=Infinity,h=b;h<=c-b;h++){var l=k(a,0,h,this.toBBox),m=k(a,h,c,this.toBBox);var n=Math.max(0,Math.min(l.maxX,m.maxX)-Math.max(l.minX,m.minX))*Math.max(0,Math.min(l.maxY,m.maxY)-Math.max(l.minY,m.minY));l=p(l)+p(m);n<f?(f=n,d=h,g=l<g?l:g):n===f&&l<g&&(g=l,d=h)}return d||c-b};t.prototype._chooseSplitAxis=function(a,b,c){var d=a.leaf?this.compareMinX:m,\nf=a.leaf?this.compareMinY:n,g=this._allDistMargin(a,b,c,d);b=this._allDistMargin(a,b,c,f);g<b&&a.children.sort(d)};t.prototype._allDistMargin=function(a,b,c,d){a.children.sort(d);d=this.toBBox;for(var f=k(a,0,b,d),g=k(a,c-b,c,d),m=l(f)+l(g),n=b;n<c-b;n++){var p=a.children[n];h(f,a.leaf?d(p):p);m+=l(f)}for(c=c-b-1;c>=b;c--)f=a.children[c],h(g,a.leaf?d(f):f),m+=l(g);return m};t.prototype._adjustParentBBoxes=function(a,b,c){for(;0<=c;c--)h(b[c],a)};t.prototype._condense=function(a){for(var b=a.length-\n1,c;0<=b;b--)0===a[b].children.length?0<b?(c=a[b-1].children,c.splice(c.indexOf(a[b]),1)):this.clear():g(a[b],this.toBBox)};return t})}),Bb=window.devicePixelRatio,Cb=Math.max(2,Bb),Id=function(c){function a(b,c){H(this,a);b=Q(this,(a.__proto__||N(a)).call(this,b,c));c=b.canvas=document.createElement(\"canvas\");c=b.ctx=c.getContext(\"2d\");c.textAlign=\"start\";c.textBaseline=\"top\";return b}R(a,c);L(a,[{key:\"getDefaultOptions\",value:function(){return{color:\"#fff\",fontFamily:\"Microsoft Yahei\",fontSize:14,\nisFlat:!1,collides:!0,offset:[0,0],padding:[2,2],margin:[0,0]}}},{key:\"initialize\",value:function(a){this.gl=a;var b=this.getOptions();this.texture=null;this.program=new V(this.gl,{vertexShader:\"precision highp float;uniform mat4 matrix;uniform bool uFlat;uniform float zoomUnits;uniform float devicePixelRatio;uniform vec2 offset;attribute vec3 position;attribute float corner;attribute vec2 size;attribute vec2 aTextCoord;varying vec2 vTextCoord;vec3 transformCoord(vec3 coord,vec2 size,float corner){float x=coord.x;float y=coord.y;if(corner==1.0){x-=size[0];y+=size[1];}else if(corner==2.0){x+=size[0];y+=size[1];}else if(corner==3.0){x+=size[0];y-=size[1];}else{x-=size[0];y-=size[1];}return vec3(x,y,coord.z);}void main(){vec2 pixelOffset=offset*zoomUnits;vTextCoord=aTextCoord;if(uFlat){vec2 halfSize=size/2.0*zoomUnits;vec3 current=transformCoord(position,halfSize,corner);gl_Position=matrix*vec4(current.x+pixelOffset[0],current.y+pixelOffset[1],current.z,1.0);}else{vec4 projection=matrix*vec4(position.x+pixelOffset[0],position.y+pixelOffset[1],position.z,1.0);vec3 screen=projection.xyz/projection.w;vec2 halfSize=size/MAPV_resolution*devicePixelRatio;vec3 current=transformCoord(screen,halfSize,corner);gl_Position=vec4(current,1.0);}}\",\nfragmentShader:\"precision highp float;uniform sampler2D textureImage;uniform vec4 uSelectedColor;varying vec2 vTextCoord;void main(){gl_FragColor=texture2D(textureImage,vec2(vTextCoord.x,1.0-vTextCoord.y));\\n#if defined(PICK)\\nif(mapvIsPicked()){gl_FragColor=vec4(uSelectedColor.rgb,gl_FragColor.a);}\\n#endif\\n}\",defines:b.enablePicked?[\"PICK\"]:[]},this);this.vertexBuffer=new S({gl:a,target:\"ARRAY_BUFFER\",usage:\"STATIC_DRAW\"});this.uvBuffer=new S({gl:a,target:\"ARRAY_BUFFER\",usage:\"STATIC_DRAW\"});this.indexBuffer=\nnew S({gl:a,target:\"ELEMENT_ARRAY_BUFFER\",usage:\"STATIC_DRAW\"});b=[{name:\"position\",buffer:this.vertexBuffer,size:3,stride:24,type:\"FLOAT\",offset:0},{name:\"corner\",buffer:this.vertexBuffer,size:1,stride:24,type:\"FLOAT\",offset:12},{name:\"size\",buffer:this.vertexBuffer,size:2,stride:24,type:\"FLOAT\",offset:16},{name:\"aTextCoord\",buffer:this.uvBuffer,size:2,stride:8,type:\"FLOAT\",offset:0}];b=b.concat(this.getCommonAttributes());this.vertexArray=new za({gl:a,program:this.program,attributes:b})}},{key:\"onChanged\",\nvalue:function(a,c){this.gl&&this.processCache(c)}},{key:\"processCache\",value:function(a){this.cachedData=[];for(var b=0;b<a.length;b++){var c=this.normizedPoint(a[b].geometry.coordinates),g=a[b].text||\"\";\"properties\"in a[b]&&\"text\"in a[b].properties&&(g=a[b].properties.text);c&&g&&this.cachedData.push({point:c,text:g})}}},{key:\"render\",value:function(a){if(this.cachedData&&this.cachedData.length&&this.map){var b=a.gl,c=a.matrix,g=this.getOptions(),k=this.program;k.use(b);this.updateText(a);b.enable(b.BLEND);\nb.blendFunc(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA);b.disable(b.DEPTH_TEST);var h=this.map.getZoomUnits();k.setUniforms(T(this.getCommonUniforms(a),{matrix:c,devicePixelRatio:Bb,textureImage:this.texture,uFlat:g.isFlat,offset:g.offset,zoomUnits:h}));0<this.index.length&&(this.indexBuffer.bind(),this.vertexArray.bind(),b.drawElements(b.TRIANGLES,this.index.length,b.UNSIGNED_INT,0));b.useProgram(null)}}},{key:\"updateText\",value:function(a){var b=a.gl,c=a.matrix,g=this.getOptions(),k=g.color,h=g.fontSize,\nm=g.fontFamily;a=g.padding;var n=g.margin,p=g.collides;g=g.enablePicked;var l=b.canvas.width,q=b.canvas.height,r=this.canvas;b=this.ctx;b.save();b.scale(Cb,Cb);b.textBaseline=\"top\";b.font=h+\"px \"+m;for(var u=new ui,z=[],t=0;t<this.cachedData.length;t++){var x=this.cachedData[t],v=x.point;x=x.text;var A=db(v,3);A=Fa.clone([A[0],A[1],A[2],1]);Fa.transformMat4(A,A,c);Fa.scale(A,A,1/A[3]);var B=(A[0]+1)/2*l,E=(-A[1]+1)/2*q,D=b.measureText(x);A=D.width+a[0];D=D.actualBoundingBoxAscent&&D.actualBoundingBoxDescent?\nD.actualBoundingBoxDescent-D.actualBoundingBoxAscent:h+a[1];D+=a[1];var w=A+n[0],J=D+n[1];B-=w/2*Bb;E-=J/2*Bb;w=B+w*Bb;J=E+J*Bb;if(!(0>w||0>J||B>l||E>q)){if(p){J={minX:B,maxX:w,minY:E,maxY:J};if(u.collides(J))continue;u.insert(J)}z.push({w:A,h:D,point:v,text:x})}}b.restore();n=Ae(z);c=Ib(n.w);n=Ib(n.h);r.width=c*Cb;r.height=n*Cb;b.save();b.scale(Cb,Cb);b.textBaseline=\"top\";b.fillStyle=k;b.font=h+\"px \"+m;k=[];h=[];m=[];r=[];p=0;for(l=z.length;p<l;++p){q=z[p];b.fillText(q.text,q.x+a[0],q.y+a[1]);v=\ndb(q.point,3);u=v[0];t=v[1];v=v[2];for(x=0;4>x;x++)k.push(u,t,v),k.push(x),k.push(q.w,q.h);u=q.x/c;t=(q.x+q.w)/c;v=(q.y+q.h)/n;q=q.y/n;h.push(u,v,u,q,t,q,t,v);q=4*p;m.push(q,q+2,q+1,q,q+3,q+2);g&&(q=this.indexToRgb(p),r.push(q[0]/255,q[1]/255,q[2]/255),r.push(q[0]/255,q[1]/255,q[2]/255),r.push(q[0]/255,q[1]/255,q[2]/255),r.push(q[0]/255,q[1]/255,q[2]/255))}b.restore();this.loadTexture();this.index=m;this.vertexBuffer.updateData(new Float32Array(k));this.uvBuffer.updateData(new Float32Array(h));this.indexBuffer.updateData(new Uint32Array(m));\ng&&this.pickBuffer.updateData(new Float32Array(r))}},{key:\"loadTexture\",value:function(){var a=this;this.canvas?Ra(this.gl,this.canvas,function(b){a.texture=b}):this.texture=null}}]);return a}(da),Cf=O(function(c,a){(function(a,d){c.exports=d()})(Be,function(){function a(b,d,f,g,h,k){if(!(h-g<=f)){var l=g+h>>1;c(b,d,l,g,h,k%2);a(b,d,f,g,l-1,k+1);a(b,d,f,l+1,h,k+1)}}function c(a,b,d,g,h,k){for(;h>g;){if(600<h-g){var l=h-g+1,m=d-g+1,n=Math.log(l),p=.5*Math.exp(2*n/3);n=.5*Math.sqrt(n*p*(l-p)/l)*(0>\nm-l/2?-1:1);c(a,b,d,Math.max(g,Math.floor(d-m*p/l+n)),Math.min(h,Math.floor(d+(l-m)*p/l+n)),k)}l=b[2*d+k];m=g;p=h;f(a,b,g,d);for(b[2*h+k]>l&&f(a,b,g,h);m<p;){f(a,b,m,p);m++;for(p--;b[2*m+k]<l;)m++;for(;b[2*p+k]>l;)p--}b[2*g+k]===l?f(a,b,g,p):(p++,f(a,b,p,h));p<=d&&(g=p+1);d<=p&&(h=p-1)}}function f(a,b,c,d){g(a,c,d);g(b,2*c,2*d);g(b,2*c+1,2*d+1)}function g(a,b,c){var d=a[b];a[b]=a[c];a[c]=d}function k(a,b){a=a.geometry.coordinates;return{x:a[0]/360+.5,y:n(a[1]),zoom:Infinity,index:b,parentId:-1}}function h(a){var b=\na.id,c=m(a);return{type:\"Feature\",id:b,properties:c,geometry:{type:\"Point\",coordinates:[360*(a.x-.5),360*Math.atan(Math.exp((180-360*a.y)*Math.PI/180))/Math.PI-90]}}}function m(a){var b=a.numPoints,c=1E4<=b?Math.round(b/1E3)+\"k\":1E3<=b?Math.round(b/100)/10+\"k\":b;return p(p({},a.properties),{cluster:!0,cluster_id:a.id,point_count:b,point_count_abbreviated:c})}function n(a){a=Math.sin(a*Math.PI/180);a=.5-.25*Math.log((1+a)/(1-a))/Math.PI;return 0>a?0:1<a?1:a}function p(a,b){for(var c in b)a[c]=b[c];\nreturn a}function l(a){return a.x}function q(a){return a.y}var r=function(a){return a[0]},u=function(a){return a[1]},w=function(b,c,d,f,g){void 0===c&&(c=r);void 0===d&&(d=u);void 0===f&&(f=64);void 0===g&&(g=Float64Array);this.nodeSize=f;this.points=b;var h=this.ids=new (65536>b.length?Uint16Array:Uint32Array)(b.length);g=this.coords=new g(2*b.length);for(var k=0;k<b.length;k++)h[k]=k,g[2*k]=c(b[k]),g[2*k+1]=d(b[k]);a(h,g,f,0,h.length-1,0)};w.prototype.range=function(a,b,c,d){for(var f=this.ids,\ng=this.coords,h=this.nodeSize,k=[0,f.length-1,0],l=[],m,n;k.length;){var p=k.pop(),q=k.pop(),r=k.pop();if(q-r<=h)for(p=r;p<=q;p++)m=g[2*p],n=g[2*p+1],m>=a&&m<=c&&n>=b&&n<=d&&l.push(f[p]);else{var v=Math.floor((r+q)/2);m=g[2*v];n=g[2*v+1];m>=a&&m<=c&&n>=b&&n<=d&&l.push(f[v]);var u=(p+1)%2;if(0===p?a<=m:b<=n)k.push(r),k.push(v-1),k.push(u);if(0===p?c>=m:d>=n)k.push(v+1),k.push(q),k.push(u)}}return l};w.prototype.within=function(a,b,c){for(var d=this.ids,f=this.coords,g=this.nodeSize,h=[0,d.length-1,\n0],k=[],l=c*c;h.length;){var m=h.pop(),n=h.pop(),p=h.pop();if(n-p<=g)for(m=p;m<=n;m++){p=f[2*m]-a;var q=f[2*m+1]-b;p*p+q*q<=l&&k.push(d[m])}else{q=Math.floor((p+n)/2);var r=f[2*q],v=f[2*q+1],u=r-a,t=v-b;u*u+t*t<=l&&k.push(d[q]);u=(m+1)%2;if(0===m?a-c<=r:b-c<=v)h.push(p),h.push(q-1),h.push(u);if(0===m?a+c>=r:b+c>=v)h.push(q+1),h.push(n),h.push(u)}}return k};var t={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(a){return a}},x=function(a){this.options=\np(Dh(t),a);this.trees=Array(this.options.maxZoom+1)};x.prototype.load=function(a){var b=this.options,c=b.minZoom,d=b.maxZoom;b=b.nodeSize;this.points=a;for(var f=[],g=0;g<a.length;g++)a[g].geometry&&f.push(k(a[g],g));this.trees[d+1]=new w(f,l,q,b,Float32Array);for(a=d;a>=c;a--)f=this._cluster(f,a),this.trees[a]=new w(f,l,q,b,Float32Array);return this};x.prototype.getClusters=function(a,b){var c=((a[0]+180)%360+360)%360-180,d=Math.max(-90,Math.min(90,a[1])),f=180===a[2]?180:((a[2]+180)%360+360)%360-\n180,g=Math.max(-90,Math.min(90,a[3]));if(360<=a[2]-a[0])c=-180,f=180;else if(c>f)return c=this.getClusters([c,d,180,g],b),d=this.getClusters([-180,d,f,g],b),c.concat(d);b=this.trees[this._limitZoom(b)];a=[];var k=0;for(d=b.range(c/360+.5,n(g),f/360+.5,n(d));k<d.length;k+=1)f=b.points[d[k]],a.push(f.numPoints?h(f):this.points[f.index]);return a};x.prototype.getChildren=function(a){var b=this._getOriginId(a),c=this._getOriginZoom(a),d=this.trees[c];if(!d)throw Error(\"No cluster with the specified id.\");\nvar f=d.points[b];if(!f)throw Error(\"No cluster with the specified id.\");b=[];var g=0;for(c=d.within(f.x,f.y,this.options.radius/(this.options.extent*Math.pow(2,c-1)));g<c.length;g+=1)f=d.points[c[g]],f.parentId===a&&b.push(f.numPoints?h(f):this.points[f.index]);if(0===b.length)throw Error(\"No cluster with the specified id.\");return b};x.prototype.getLeaves=function(a,b,c){var d=[];this._appendLeaves(d,a,b||10,c||0,0);return d};x.prototype.getTile=function(a,b,c){var d=this.trees[this._limitZoom(a)];\na=Math.pow(2,a);var f=this.options;f=f.radius/f.extent;var g=(c-f)/a,h=(c+1+f)/a,k={features:[]};this._addTileFeatures(d.range((b-f)/a,g,(b+1+f)/a,h),d.points,b,c,a,k);0===b&&this._addTileFeatures(d.range(1-f/a,g,1,h),d.points,a,c,a,k);b===a-1&&this._addTileFeatures(d.range(0,g,f/a,h),d.points,-1,c,a,k);return k.features.length?k:null};x.prototype.getClusterExpansionZoom=function(a){for(var b=this._getOriginZoom(a)-1;b<=this.options.maxZoom;){a=this.getChildren(a);b++;if(1!==a.length)break;a=a[0].properties.cluster_id}return b};\nx.prototype._appendLeaves=function(a,b,c,d,f){var g=0;for(b=this.getChildren(b);g<b.length;g+=1){var h=b[g],k=h.properties;k&&k.cluster?f=f+k.point_count<=d?f+k.point_count:this._appendLeaves(a,k.cluster_id,c,d,f):f<d?f++:a.push(h);if(a.length===c)break}return f};x.prototype._addTileFeatures=function(a,b,c,d,f,g){for(var h=0;h<a.length;h+=1){var k=b[a[h]],l=k.numPoints,n={type:1,geometry:[[Math.round(this.options.extent*(k.x*f-c)),Math.round(this.options.extent*(k.y*f-d))]],tags:l?m(k):this.points[k.index].properties},\np=void 0;l?p=k.id:this.options.generateId?p=k.index:this.points[k.index].id&&(p=this.points[k.index].id);void 0!==p&&(n.id=p);g.features.push(n)}};x.prototype._limitZoom=function(a){return Math.max(this.options.minZoom,Math.min(a,this.options.maxZoom+1))};x.prototype._cluster=function(a,b){var c=[],d=this.options,f=d.reduce;d=d.radius/(d.extent*Math.pow(2,b));for(var g=0;g<a.length;g++){var h=a[g];if(!(h.zoom<=b)){h.zoom=b;for(var k=this.trees[b+1],l=k.within(h.x,h.y,d),m=h.numPoints||1,n=h.x*m,p=\nh.y*m,q=f&&1<m?this._map(h,!0):null,r=(g<<5)+(b+1)+this.points.length,u=0;u<l.length;u+=1){var t=k.points[l[u]];if(!(t.zoom<=b)){t.zoom=b;var v=t.numPoints||1;n+=t.x*v;p+=t.y*v;m+=v;t.parentId=r;f&&(q||(q=this._map(h,!0)),f(q,this._map(t)))}}1===m?c.push(h):(h.parentId=r,c.push({x:n/m,y:p/m,zoom:Infinity,id:r,parentId:-1,numPoints:m,properties:q}))}}return c};x.prototype._getOriginId=function(a){return a-this.points.length>>5};x.prototype._getOriginZoom=function(a){return(a-this.points.length)%32};\nx.prototype._map=function(a,b){if(a.numPoints)return b?p({},a.properties):a.properties;a=this.points[a.index].properties;var c=this.options.map(a);return b&&c===a?p({},c):c};return x})}),vi=function(c){function a(b){H(this,a);b=Q(this,(a.__proto__||N(a)).call(this,b));b.shapeLayer=new Ic(b.options);b.textLayer=new Id(b.options.textOptions);b.children=[b.shapeLayer,b.textLayer];b.max=[];return b}R(a,c);L(a,[{key:\"getDefaultOptions\",value:function(){return{size:50,height:0,maxZoom:19,minZoom:5,gradient:{0:\"rgb(50, 50, 256)\",\n\"0.1\":\"rgb(50, 250, 56)\",\"0.5\":\"rgb(250, 250, 56)\",1:\"rgb(250, 50, 56)\"},enableCluster:!1,showText:!0,textOptions:{fontSize:13,color:\"white\"}}}},{key:\"onOptionsChanged\",value:function(a){this.textLayer.setOptions(a.textOptions)}},{key:\"setOptions\",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},c=this.options.textOptions;a.textOptions&&T(c,a.textOptions);var f=a.minZoom,g=a.maxZoom,k=a.size;f=g&&g!==this.options.maxZoom||f&&f!==this.options.minZoom||k&&k!==this.options.size;\nT(this.options,a,{textOptions:c});if(f)this.onChanged(this.options,this.data);else this.refreshLayer();this.onOptionsChanged(this.getOptions())}},{key:\"onChanged\",value:function(a,c){if(c&&c.length){this.zoom=Math.floor(this.map.map.getZoom());var b=a.maxZoom,d=a.minZoom,k=a.enableCluster;a=a.size;this.zoom>b?this.zoom=b:this.zoom<d&&(this.zoom=d);k&&(this.supercluster=new Cf({maxZoom:b,minZoom:d,radius:a/2}),this.supercluster.load(c));this.refreshLayer()}}},{key:\"refreshLayer\",value:function(){var a=\n0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.options,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.data,f=this.map.map,g=this.zoom;a.enableCluster&&this.supercluster&&(c=this.getClusterData(a));if(c&&c.length){var k=a.gradient,h=a.showText,m=a.textOptions,n=a.height,p=a.size;p*=Math.pow(2,18-g);c=Bg(c,p,function(a){var b=db(a,2),c=b[0];b=b[1];-180<=c&&180>=c&&-90<=b&&90>=b&&(b=f.lnglatToMercator(c,b),c=b[0],b=b[1]);a[0]=c;a[1]=b;return a});this.max[g]=Math.max(this.max[g]||\n0,c.max);var l=new na({max:this.max[g],min:0,maxSize:n*Math.pow(2,18-g),minSize:0,gradient:k});k=[];if(h){var q=m&&m.format;q=\"function\"===typeof q?q:null;k=c.map(function(a){return{geometry:{coordinates:[a.center.x,a.center.y,l.getSize(a.count)+m.fontSize/2*Math.pow(2,18-g)]},text:q?q(a.count):a.count}})}this.textLayer.setData(k);h=c.map(function(a){for(var b=a.center,d=c.r,f=[],g=0;6>g;g++)f.push(Ag({x:b.x,y:b.y},d,g));return{geometry:{type:\"Polygon\",coordinates:[f]},properties:{height:l.getSize(a.count),\ncolor:l.getColor(a.count)}}});this.shapeLayer.setData(h);a.enablePicked&&a.autoSelect&&this.pick(-1,-1)}}},{key:\"getClusterData\",value:function(){var a=this.map.map,c=a.getBounds(),f=c.ne;c=c.sw;this.ne=f;this.sw=c;var g=f,k=g.lng;g=g.lat;var h=[];-180<=k&&180>=k&&-90<=g&&90>=g?h=[c.lng,c.lat,f.lng,f.lat]:(f=a.mercatorToLnglat(this.ne.lng,this.ne.lat),c=a.mercatorToLnglat(this.sw.lng,this.sw.lat),h=c.concat(f));return this.supercluster.getClusters(h,this.zoom).map(function(a){var b=0;a.properties&&\na.properties.point_count&&(b=a.properties.point_count);return{geometry:a.geometry,count:b}})}},{key:\"pick\",value:function(a,c){return this.shapeLayer.pick(a,c)}},{key:\"shouldUpdate\",value:function(){if(!this.data)return!1;var a=this.map.map,c=Math.floor(a.getZoom()),f=this.options,g=f.maxZoom;f=f.minZoom;c>g?c=g:c<f&&(c=f);if(this.zoom!==c)return this.zoom=c,!0;if(!this.options.enableCluster)return!1;c=a.getBounds();a=c.ne;c=c.sw;if(!(a&&c&&this.ne&&this.sw))return!1;if(this.ne.lng!==a.lng||this.ne.lat!==\na.lat||this.sw.lng!==c.lng||this.sw.lat!==c.lat)return!0}},{key:\"render\",value:function(b){this.shouldUpdate()?this.refreshLayer():Wa(a.prototype.__proto__||N(a.prototype),\"render\",this).call(this,b)}}]);return a}(nb),cc=function(){function c(a,b){H(this,c);this.map=a;this.options=b||{}}L(c,[{key:\"onResize\",value:function(a){}},{key:\"onUpdate\",value:function(a){throw\"\\u672a\\u5b9e\\u73b0onUpdate\\u65b9\\u6cd5\";}},{key:\"getContainer\",value:function(){throw\"\\u672a\\u5b9e\\u73b0getContainer\\u65b9\\u6cd5\";}},\n{key:\"getSize\",value:function(){throw\"\\u672a\\u5b9e\\u73b0getSize\\u65b9\\u6cd5\";}},{key:\"getTilt\",value:function(){throw\"\\u672a\\u5b9e\\u73b0getTilt\\u65b9\\u6cd5\";}},{key:\"getHeading\",value:function(){throw\"\\u672a\\u5b9e\\u73b0getHeading\\u65b9\\u6cd5\";}},{key:\"getZoomUnits\",value:function(){throw\"\\u672a\\u5b9e\\u73b0getZoomUnits\\u65b9\\u6cd5\";}},{key:\"getCenter\",value:function(){throw\"\\u672a\\u5b9e\\u73b0getCenter\\u65b9\\u6cd5\";}},{key:\"getMapType\",value:function(){throw\"\\u672a\\u5b9e\\u73b0getMapType\\u65b9\\u6cd5\";\n}},{key:\"lnglatToMercator\",value:function(a,b){if(\"gcj02\"===this.options.coordinateSystem)return b=b*Math.PI/180,b=3189068.5*Math.log((1+Math.sin(b))/(1-Math.sin(b))),[parseFloat((a*Math.PI/180*6378137).toFixed(2)),parseFloat(b.toFixed(2))];a=ra.convertLL2MC({lng:a,lat:b});return[a.lng,a.lat]}}]);return c}(),wi=function(c){function a(b){H(this,a);return Q(this,(a.__proto__||N(a)).call(this,b))}R(a,c);L(a,[{key:\"onResize\",value:function(a){this.map.addEventListener(\"resize\",a)}},{key:\"onMousemove\",\nvalue:function(a){this.map.addEventListener(\"mousemove\",function(b){a(T(b,{x:b.x,y:b.y}))})}},{key:\"onClick\",value:function(a){this.map.addEventListener(\"click\",function(b){a(T(b,{x:b.x,y:b.y}))})}},{key:\"onDblClick\",value:function(a){this.map.addEventListener(\"dblclick\",function(b){a(T(b,{x:b.x,y:b.y}))})}},{key:\"onRightClick\",value:function(a){this.map.addEventListener(\"rightclick\",function(b){a(T(b,{x:b.x,y:b.y}))})}},{key:\"onUpdate\",value:function(a){this.map.addEventListener(\"update\",a);this.map.addEventListener(\"onearthstatuschange\",\na)}},{key:\"getContainer\",value:function(){return this.map.getContainer()}},{key:\"getSize\",value:function(){return this.map.getSize()}},{key:\"getTilt\",value:function(){return this.map.getTilt()}},{key:\"getHeading\",value:function(){return this.map.getHeading()}},{key:\"getZoomUnits\",value:function(){return this.map.getZoomUnits()}},{key:\"getZoom\",value:function(){return this.map.getZoom()}},{key:\"getCenter\",value:function(){var a=this.map.getCenter();-180<=a.lng&&180>=a.lng&&(a=this.map.lnglatToMercator(a.lng,\na.lat),a={lng:a[0],lat:a[1]});return a}},{key:\"getMapType\",value:function(){return this.map.getMapType()}},{key:\"lnglatToMercator\",value:function(a,c){return this.map.lnglatToMercator(a,c)}}]);return a}(cc),xi=function(c){function a(b){H(this,a);b=Q(this,(a.__proto__||N(a)).call(this,b));b.div=document.createElement(\"div\");b.div.style.position=\"absolute\";b.div.style.userSelect=\"none\";b.map.getPanes().mapPane.appendChild(b.div);return b}R(a,c);L(a,[{key:\"onResize\",value:function(a){this.map.addEventListener(\"resize\",\na)}},{key:\"onMousemove\",value:function(a){this.map.addEventListener(\"mousemove\",function(b){a(T(b,{x:b.pixel.x,y:b.pixel.y}))})}},{key:\"onClick\",value:function(a){this.map.addEventListener(\"click\",function(b){a(T(b,{x:b.pixel.x,y:b.pixel.y}))})}},{key:\"onDblClick\",value:function(a){this.map.addEventListener(\"dblclick\",function(b){a(T(b,{x:b.pixel.x,y:b.pixel.y}))})}},{key:\"onRightClick\",value:function(a){this.map.addEventListener(\"rightclick\",function(b){a(T(b,{x:b.pixel.x,y:b.pixel.y}))})}},{key:\"changeCanvas\",\nvalue:function(){var a=this.map,c=a.getSize(),f=a.getCenter();a=a.pointToOverlayPixel(f);this.div.style.left=a.x-c.width/2+\"px\";this.div.style.top=a.y-c.height/2+\"px\"}},{key:\"onUpdate\",value:function(a){var b=this;this.map.addEventListener(\"moveend\",function(){b.changeCanvas();a()});this.map.addEventListener(\"moving\",function(){b.changeCanvas();a()});this.map.addEventListener(\"zoomend\",function(){b.changeCanvas();a()})}},{key:\"getContainer\",value:function(){return this.div}},{key:\"getSize\",value:function(){return this.map.getSize()}},\n{key:\"getTilt\",value:function(){return 0}},{key:\"getHeading\",value:function(){return 0}},{key:\"getZoomUnits\",value:function(){return Math.pow(2,18-this.map.getZoom())}},{key:\"getCenter\",value:function(){var a=this.map.getMapType().getProjection().lngLatToPoint(this.map.getCenter());return{lng:a.x,lat:a.y}}}]);return a}(cc),yi=function(c){function a(b){H(this,a);return Q(this,(a.__proto__||N(a)).call(this,b))}R(a,c);L(a,[{key:\"onResize\",value:function(a){window.addEventListener(\"resize\",a)}},{key:\"onUpdate\",\nvalue:function(a){}},{key:\"getContainer\",value:function(){return this.map.container.getElementsByClassName(\"cesium-widget\")[0]}},{key:\"getSize\",value:function(){var a=this.map;return{width:a.canvas.clientWidth,height:a.canvas.clientHeight}}},{key:\"getTilt\",value:function(){return 180*this.map.camera.pitch/Math.PI+90}},{key:\"getHeading\",value:function(){return 360-180*this.map.camera.heading/Math.PI}},{key:\"getZoomUnits\",value:function(){var a=this.map;return 6.8*a.scene.globe.ellipsoid.cartesianToCartographic(a.camera.position).height/\n6500}},{key:\"getZoom\",value:function(){return 10}},{key:\"getCenter\",value:function(){var a=this.map;a=a.camera.pickEllipsoid(new Cesium.Cartesian2(a.canvas.clientWidth/2,a.canvas.clientHeight/2));a=Cesium.Ellipsoid.WGS84.cartesianToCartographic(a);a=this.getMercator([180*a.longitude/Math.PI,180*a.latitude/Math.PI]);return{lng:a[0],lat:a[1]}}},{key:\"getMercator\",value:function(a){var b=[];b[0]=a[0]*Math.PI/180*6378137;a=a[1]*Math.PI/180;b[1]=3189068.5*Math.log((1+Math.sin(a))/(1-Math.sin(a)));return b}}]);\nreturn a}(cc),zi=function(c){function a(b){H(this,a);return Q(this,(a.__proto__||N(a)).call(this,b))}R(a,c);L(a,[{key:\"onResize\",value:function(a){window.addEventListener(\"resize\",a)}},{key:\"onUpdate\",value:function(a){}},{key:\"getContainer\",value:function(){return this.map.container}},{key:\"getSize\",value:function(){return{width:this.map.container.clientWidth,height:this.map.container.clientHeight}}},{key:\"getTilt\",value:function(){return this.map.tilt}},{key:\"getHeading\",value:function(){return this.map.heading}},\n{key:\"getZoomUnits\",value:function(){return this.map.zoomUnits}},{key:\"getCenter\",value:function(){return this.map.center}}]);return a}(cc),Ai=function(c){function a(b,c){H(this,a);return Q(this,(a.__proto__||N(a)).call(this,b,c))}R(a,c);L(a,[{key:\"onResize\",value:function(a){window.addEventListener(\"resize\",a)}},{key:\"onUpdate\",value:function(a){}},{key:\"getContainer\",value:function(){return this.map.container}},{key:\"getSize\",value:function(){return{width:this.map.container.clientWidth,height:this.map.container.clientHeight}}},\n{key:\"getTilt\",value:function(){return this.map.tilt}},{key:\"getHeading\",value:function(){return this.map.heading}},{key:\"getZoomUnits\",value:function(){return this.map.zoomUnits}},{key:\"getCenter\",value:function(){return this.map.center}}]);return a}(cc),Df=function(){function c(a,b){H(this,c);b=b||{};\"bmap\"===b.mapType?this.map=new xi(a,b):\"blank\"===b.mapType?this.map=new zi(a,b):\"cesium\"===b.mapType?this.map=new yi(a,b):\"three\"===b.mapType?this.map=new Ai(a,b):(b.mapType=\"bmapgl\",this.map=new wi(a,\nb));this.map.type=b.mapType;this.options=b||{};this.renderArr=[];(a=b.canvas)||(a=document.createElement(\"canvas\"));this.canvas=a;this.gl=b.gl?b.gl:be(a);this.gl.getExtension(\"OES_element_index_uint\");this.changeSize();this.projectionMatrix=C.create(Float64Array);this.orthoMatrix=C.create(Float64Array);this.matrix=C.create(Float64Array);this.viewMatrix=C.create(Float64Array);this.pointToPixelMatrix=C.create(Float64Array);this.pixelToViewMatrix=C.create(Float64Array);this.fovy=35;this._animation=this.animation.bind(this);\nthis._update=this.update.bind(this);this.onInitialize(this.options.onInitialize);this.options.onRender&&this.renderArr.push(this.options.onRender);this.stateManager=new nf({gl:this.gl});this.pickFBO=new va(this.gl);this.transferOptions={};this.bind()}L(c,[{key:\"bind\",value:function(){var a=this,b=this.map;b.onResize(function(){a.changeSize();a.render()});b.onUpdate(this._update);b.onClick&&b.onClick(function(b){a.onClick&&a.onClick(b)});b.onDblClick&&b.onDblClick(function(b){a.onDblClick&&a.onDblClick(b)});\nb.onRightClick&&b.onRightClick(function(b){a.onRightClick&&a.onRightClick(b)});b.onMousemove&&b.onMousemove(function(b){a.onMousemove&&a.onMousemove(b)});this.options.canvas||b.getContainer().appendChild(this.canvas)}},{key:\"setOptions\",value:function(a){this.options=a}},{key:\"onInitialize\",value:function(a){a&&(this.transferOptions=a.bind(this)(this.gl)||{})}},{key:\"bindFramebuffer\",value:function(a){var b=this.gl;a?b.bindFramebuffer(b.FRAMEBUFFER,a.framebuffer):b.bindFramebuffer(b.FRAMEBUFFER,null)}},\n{key:\"saveFramebuffer\",value:function(){var a=this.gl;this.preFramebuffer=a.getParameter(a.FRAMEBUFFER_BINDING)}},{key:\"restoreFramebuffer\",value:function(){var a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,this.preFramebuffer)}},{key:\"onRender\",value:function(a){this.renderArr.push(a)}},{key:\"changeSize\",value:function(){var a=this.canvas;if(a){var b=a.style,c=this.map.getSize(),f=window.devicePixelRatio;a.width=c.width*f;a.height=c.height*f;b.cssText=\"position: absolute;left:0;top:0;width:\"+c.width+\n\"px;height:\"+c.height+\"px;z-index:2;\";c=this.options;\"cesium\"!==c.mapType||c.canvas||(b.pointerEvents=\"none\");this.gl.viewport(0,0,a.width,a.height)}}},{key:\"update\",value:function(){!1===this.options.autoUpdate||this.isAnimation||this.render()}},{key:\"render\",value:function(){if(this.map){var a=this.options,b=this.projectionMatrix,c=this.viewMatrix;if(\"three\"===a.mapType)c=this.map.map.camera,b=c.projectionMatrix.elements,c=c.matrixWorldInverse.elements;else if(\"cesium\"===a.mapType){c=this.map.map;\nvar f=c.camera.frustum.projectionMatrix;b=new Float32Array([f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15]]);f=c.camera.viewMatrix;c=new Float32Array([f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15]])}else\"B_EARTH_MAP\"===this.map.map.mapType?(b=this.map.map.getEarth().scene._camera.getProjectionMatrix(),c=this.map.map.getEarth().scene._camera.getModelViewMatrix()):(this.updateProjectionMatrix(),this.updateModelViewMatrix());\nf=C.multiply(this.matrix,b,c);T(this.transferOptions,{gl:this.gl,matrix:f,pointToPixelMatrix:this.pointToPixelMatrix,pixelToViewMatrix:this.pixelToViewMatrix,projectionMatrix:b,orthoMatrix:this.orthoMatrix,viewMatrix:c,stateManager:this.stateManager});\"three\"!==a.mapType&&\"cesium\"!==a.mapType&&!1!==a.autoUpdate&&this.clear();for(a=0;a<this.renderArr.length;a++)this.renderArr[a]&&this.renderArr[a].bind(this)(this.transferOptions)}}},{key:\"clear\",value:function(a){var b=this.gl,c=this.options.clearColor||\n[0,0,0,0];b.clearColor(c[0],c[1],c[2],c[3]);a&&(a instanceof Array||(a=fa(a).unitArray()),b.clearColor(a[0],a[1],a[2],a[3]));b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)}},{key:\"updateProjectionMatrix\",value:function(){var a=this.gl.canvas.width/this.gl.canvas.height,b=this.options.cameraNear||1,c=this.options.cameraFar||4E3;C.perspective(this.projectionMatrix,la(this.fovy),a,b,c);a=this.map.getSize();C.ortho(this.orthoMatrix,-a.width/2,a.width/2,-a.height/2,a.height/2,b,c)}},{key:\"updateModelViewMatrix\",\nvalue:function(){var a=this.map,b=this.viewMatrix,c=this.pointToPixelMatrix,f=this.pixelToViewMatrix;C.identity(b);C.identity(c);C.identity(f);var g=a.getSize();g=Math.round(-g.height/(2*Math.tan(la(this.fovy)/2)));C.translate(f,f,[0,0,g]);C.rotate(f,f,la(a.getTilt()),[-1,0,0]);C.rotate(f,f,la(a.getHeading()),[0,0,-1]);g=a.getCenter();var k=this.options.pointOffset||[0,0];a=a.getZoomUnits();C.translate(c,c,[(k[0]-g.lng)/a,(k[1]-g.lat)/a,0]);a=1/a;C.scale(c,c,[a,a,a]);C.multiply(b,f,c)}},{key:\"destroy\",\nvalue:function(){this.stopAnimation();this.map.getContainer().removeChild(this.canvas);this.canvas=null}},{key:\"animation\",value:function(){this.isAnimation&&(this.render(),window.requestAnimationFrame(this._animation))}},{key:\"startAnimation\",value:function(){this.isAnimation||(this.isAnimation=!0,window.requestAnimationFrame(this._animation))}},{key:\"stopAnimation\",value:function(){this.isAnimation=!1}}]);return c}(),Ef={circle:1,square:2},Jd=function(c){function a(b){H(this,a);b=Q(this,(a.__proto__||\nN(a)).call(this,b));b.bufferData=[];return b}R(a,c);L(a,[{key:\"getDefaultOptions\",value:function(){return{color:[.1,.1,.9,1],blend:\"normal\",shape:\"circle\",size:5}}},{key:\"initialize\",value:function(a){this.gl=a;var b=this.getOptions();this.program=new V(this.gl,{vertexShader:\"attribute vec3 aPos;attribute vec4 aColor;attribute float aSize;uniform mat4 uMatrix;varying vec4 vColor;uniform vec4 uSelectedColor;void main(void){if(aColor.w>=0.0&&aColor.w<=1.0){vColor=aColor;}else{vColor=vec4(aColor.xyz,1.0);}gl_Position=uMatrix*vec4(aPos.xyz,1.0);gl_PointSize=aSize;\\n#if defined(PICK)\\nif(mapvIsPicked()){vColor=uSelectedColor;}\\n#endif\\n}\",\nfragmentShader:\"varying vec4 vColor;uniform int uShape;void main(void){vec4 color=vColor;if(uShape==1){float d=distance(gl_PointCoord,vec2(0.5,0.5));if(d>0.5){discard;}float blur=1.0;blur=1.0-smoothstep(0.49,0.5,d);color.a*=blur;gl_FragColor=color;}else{gl_FragColor=color;}}\",defines:b.enablePicked?[\"PICK\"]:[]},this);this.buffer=new S({gl:a,target:\"ARRAY_BUFFER\",usage:\"STATIC_DRAW\"});b=[{stride:32,name:\"aPos\",buffer:this.buffer,size:3,type:\"FLOAT\",offset:0},{stride:32,name:\"aColor\",buffer:this.buffer,\nsize:4,type:\"FLOAT\",offset:12},{stride:32,name:\"aSize\",buffer:this.buffer,size:1,type:\"FLOAT\",offset:28}];b=b.concat(this.getCommonAttributes());this.vertexArray=new za({gl:a,program:this.program,attributes:b})}},{key:\"onChanged\",value:function(a,c){if(this.gl){for(var b=[],d=a.color,k=a.size,h=0;h<c.length;h++){var m=this.normizedPoint(c[h].geometry.coordinates),n=c[h].color||d;\"properties\"in c[h]&&\"color\"in c[h].properties&&(n=c[h].properties.color);\"[object Function]\"===Object.prototype.toString.call(n)&&\n(n=n(c[h]));n=this.normizedColor(n);var p=c[h].size||k;\"properties\"in c[h]&&\"size\"in c[h].properties&&(p=c[h].properties.size);p=\"[object Function]\"===Object.prototype.toString.call(p)?p(c[h]):Number(p);m=this.addMultipleCoords(m);for(var l=0;l<m.length;l++){var q=m[l];b.push(q[0],q[1],Number(q[2]||0));b.push(n[0],n[1],n[2],n[3]);b.push(p*window.devicePixelRatio)}}this.bufferData=b;this.buffer.updateData(new Float32Array(b));a.enablePicked&&this.parsePickData(c)}}},{key:\"parsePickData\",value:function(a){var b=\nthis.getOptions(),c=[];if(b.enablePicked)for(var g=0;g<a.length;g++){var k=this.indexToRgb(g);c.push(k[0]/255,k[1]/255,k[2]/255);b.repeat&&(c.push(k[0]/255,k[1]/255,k[2]/255),c.push(k[0]/255,k[1]/255,k[2]/255))}b.enablePicked&&this.pickBuffer.updateData(new Float32Array(c))}},{key:\"destroy\",value:function(){this.buffer=this.program=this.bufferData=null}},{key:\"render\",value:function(a){var b=a.gl,c=a.matrix,g=a.isPickRender;if(!(0>=this.bufferData.length)){this.getOptions();var k=this.program;k.use(b);\nthis.vertexArray.bind();var h=1;this.options.shape&&Ef[this.options.shape]&&(h=Ef[this.options.shape]);a=this.getCommonUniforms(a);a=T(a,{uShape:h,uMatrix:c});k.setUniforms(a);c=this.options.blend;g?b.disable(b.BLEND):(b.enable(b.BLEND),b.blendEquation(b.FUNC_ADD),c&&\"lighter\"===c?b.blendFunc(b.SRC_ALPHA,b.ONE):b.blendFunc(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA));b.drawArrays(b.POINTS,0,this.bufferData.length/8)}}}]);return a}(da),Bi=function(c){function a(b,c){H(this,a);b=Q(this,(a.__proto__||N(a)).call(this,\nb,c));b.bufferDataArr=[];b.indexDataArr=[];b.vertexBuffer=[];b.indexBuffer=[];b.position=[];b.opacity=1;b.currentScale=1;b.autoUpdate=!0;return b}R(a,c);L(a,[{key:\"getDefaultOptions\",value:function(){return{color:[.1,.1,.9,1],size:5,segs:32,scale:2,unit:\"m\",step:.1}}},{key:\"initialize\",value:function(a){this.gl=a;this.program=new V(this.gl,{vertexShader:\"uniform mat4 u_projectionMatrix;uniform mat4 u_modelViewMatrix;uniform mat4 u_modelMatrix;uniform float u_opacity;attribute vec4 aPos;attribute vec4 aColor;varying vec4 vColor;void main(){vColor=aColor;vColor.a=u_opacity;gl_Position=u_projectionMatrix*u_modelViewMatrix*u_modelMatrix*vec4(aPos.xyz,1.0);}\",\nfragmentShader:\"precision highp float;varying vec4 vColor;void main(){if(vColor.a==0.0){discard;}gl_FragColor=vColor;}\"})}},{key:\"onChanged\",value:function(a,c){var b=this.gl;if(b&&(this.currentScale=this.opacity=1,(this.data=c)&&c.length)){var d=a.color,k=a.segs;a=a.size;for(var h=360/k,m=0;m<c.length;m++){var n=[],p=[],l=this.normizedPoint(c[m].geometry.coordinates),q=c[m].color||d;\"properties\"in c[m]&&\"color\"in c[m].properties&&(q=c[m].properties.color);q=this.normizedColor(q);var r=\"[object Function]\"===\nObject.prototype.toString.call(a)?a(c[m]):Number(a);var u=l[0],w=l[1];n.push(0,0,-.5);n.push(q[0],q[1],q[2],0);for(var t=1,x=0;t<=k;t++,x+=h)n.push(l[0]-u+Math.cos(Math.PI/180*x)*r,l[1]-w+Math.sin(Math.PI/180*x)*r,-.5),n.push(q[0],q[1],q[2],this.opacity),t===k?p.push(0,0+t,1):p.push(0,0+t,0+t+1);q=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,q);b.bufferData(b.ARRAY_BUFFER,new Float32Array(n),b.STATIC_DRAW);this.vertexBuffer[m]=q;this.bufferDataArr[m]=n;b.bindBuffer(b.ARRAY_BUFFER,null);n=b.createBuffer();\nb.bindBuffer(b.ELEMENT_ARRAY_BUFFER,n);b.bufferData(b.ELEMENT_ARRAY_BUFFER,new Uint16Array(p),b.STATIC_DRAW);this.indexBuffer[m]=n;this.indexDataArr[m]=p;b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null);this.position[m]=[l[0],l[1]]}this.webglLayer&&this.webglLayer.render()}}},{key:\"render\",value:function(a){var b=a.gl,c=a.projectionMatrix,g=a.viewMatrix;a=this.program;b.useProgram(a.program);b.uniformMatrix4fv(a.uniforms.u_projectionMatrix,!1,c);b.uniformMatrix4fv(a.uniforms.u_modelViewMatrix,!1,g);c=this.opacity;\nvoid 0!==this.options.opacity&&(c=this.options.opacity);b.uniform1f(a.uniforms.u_opacity,c);b.enable(b.BLEND);b.blendFunc(b.SRC_ALPHA,b.DST_ALPHA);b.blendEquation(b.FUNC_ADD);b.enableVertexAttribArray(a.attributes.aPos);b.enableVertexAttribArray(a.attributes.aColor);for(c=0;c<this.bufferDataArr.length;c++)if(!(0>=this.bufferDataArr[c].length)){g=(new Float32Array(this.bufferDataArr[c])).BYTES_PER_ELEMENT;b.bindBuffer(b.ARRAY_BUFFER,this.vertexBuffer[c]);b.vertexAttribPointer(a.attributes.aColor,4,\nb.FLOAT,!1,7*g,3*g);b.vertexAttribPointer(a.attributes.aPos,3,b.FLOAT,!1,7*g,0);g=this.position[c];var k=C.create(),h=[this.currentScale,this.currentScale,this.currentScale];\"px\"===this.options.unit&&this.map&&(h=this.map.getZoomUnits(),h=[this.currentScale*h,this.currentScale*h,this.currentScale]);C.identity(k);C.translate(k,k,[g[0],g[1],0]);C.scale(k,k,h);b.uniformMatrix4fv(a.uniforms.u_modelMatrix,!1,k);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.indexBuffer[c]);b.drawElements(b.TRIANGLES,this.indexDataArr[c].length,\nb.UNSIGNED_SHORT,0);b.bindBuffer(b.ARRAY_BUFFER,null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null)}b.disable(b.BLEND);c=this.getOptions();a=c.scale;c=c.step;this.opacity-=c/10;this.currentScale+=a*c;0>this.opacity&&(this.currentScale=this.opacity=1);b.useProgram(null)}}]);return a}(da),Ci=function(c){function a(b){H(this,a);b=Q(this,(a.__proto__||N(a)).call(this,b));b.bufferData=[];b.date=new Date;b.autoUpdate=!0;return b}R(a,c);L(a,[{key:\"getDefaultOptions\",value:function(){return{color:[.1,.1,.9,1],\nblend:\"normal\",size:20,unit:\"px\",duration:2}}},{key:\"initialize\",value:function(a){this.gl=a;var b=this.getOptions();this.program=new V(this.gl,{vertexShader:\"attribute vec3 aPos;attribute vec4 aColor;attribute float aSize;uniform mat4 uMatrix;uniform vec4 uSelectedColor;uniform float uTime;uniform float duration;uniform float zoomUnits;varying vec4 vColor;void main(void){if(aColor.w>=0.0&&aColor.w<=1.0){vColor=aColor;}else{vColor=vec4(aColor.xyz,1.0);}float percent=mod(uTime,duration)/duration;vColor.a=1.-percent;gl_Position=uMatrix*vec4(aPos.xyz,1.0);gl_PointSize=aSize/zoomUnits*percent;\\n#if defined(PICK)\\nif(mapvIsPicked()){vColor=uSelectedColor;}\\n#endif\\n}\",\nfragmentShader:\"varying vec4 vColor;void main(void){vec4 color=vColor;float d=distance(gl_PointCoord,vec2(0.5,0.5));if(d>0.5){discard;}float blur=1.0;blur=1.0-smoothstep(0.49,0.5,d);color.a*=blur;gl_FragColor=color;}\",defines:b.enablePicked?[\"PICK\"]:[]},this);this.buffer=new S({gl:a,target:\"ARRAY_BUFFER\",usage:\"STATIC_DRAW\"});b=[{stride:32,name:\"aPos\",buffer:this.buffer,size:3,type:\"FLOAT\",offset:0},{stride:32,name:\"aColor\",buffer:this.buffer,size:4,type:\"FLOAT\",offset:12},{stride:32,name:\"aSize\",\nbuffer:this.buffer,size:1,type:\"FLOAT\",offset:28}];b=b.concat(this.getCommonAttributes());this.vertexArray=new za({gl:a,program:this.program,attributes:b})}},{key:\"onChanged\",value:function(a,c){if(this.gl){for(var b=[],d=a.color,k=a.size,h=0;h<c.length;h++){var m=c[h].geometry.coordinates,n=c[h].color||d;\"properties\"in c[h]&&\"color\"in c[h].properties&&(n=c[h].properties.color);\"[object Function]\"===Object.prototype.toString.call(n)&&(n=n(c[h]));n=this.normizedColor(n);m=this.normizedPoint(m);var p=\nc[h].size||k;\"properties\"in c[h]&&\"size\"in c[h].properties&&(p=c[h].properties.size);p=\"[object Function]\"===Object.prototype.toString.call(p)?p(c[h]):Number(p);b.push(m[0],m[1],Number(m[2]||0));b.push(n[0],n[1],n[2],n[3]);b.push(p*window.devicePixelRatio)}this.bufferData=b;this.buffer.updateData(new Float32Array(b));a.enablePicked&&this.parsePickData(c)}}},{key:\"parsePickData\",value:function(a){var b=this.getOptions(),c=[];if(b.enablePicked)for(var g=0;g<a.length;g++){var k=this.indexToRgb(g);c.push(k[0]/\n255,k[1]/255,k[2]/255)}b.enablePicked&&this.pickBuffer.updateData(new Float32Array(c))}},{key:\"destroy\",value:function(){this.buffer=this.program=this.bufferData=null}},{key:\"render\",value:function(a){var b=a.gl,c=a.matrix,g=a.isPickRender;if(!(0>=this.bufferData.length)){var k=this.getOptions(),h=this.program;h.use(b);this.vertexArray.bind();a=this.getCommonUniforms(a);var m=1;\"m\"===k.unit&&this.map&&(m=this.map.getZoomUnits());a=T(a,{zoomUnits:m,uTime:(new Date-this.date)/1E3,duration:k.duration,\nuMatrix:c});h.setUniforms(a);c=this.options.blend;g?b.disable(b.BLEND):(b.enable(b.BLEND),b.blendEquation(b.FUNC_ADD),c&&\"lighter\"===c?b.blendFunc(b.SRC_ALPHA,b.ONE):b.blendFunc(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA));b.drawArrays(b.POINTS,0,this.bufferData.length/8)}}}]);return a}(da),Di=function(c){function a(b,c){H(this,a);b=Q(this,(a.__proto__||N(a)).call(this,b,c));b.bufferData=[];b.startTime=Number(b.options.startTime)||0;b.endTime=Number(b.options.endTime);b.time=b.startTime;b.segs=Number(b.options.segs)||\n10;b.autoUpdate=!0;return b}R(a,c);L(a,[{key:\"getDefaultOptions\",value:function(){return{color:[.9,.1,.1,1],trailLength:3,height:100,step:.1,segs:10}}},{key:\"setTime\",value:function(a){this.time=a}},{key:\"initialize\",value:function(a){this.gl=a;this.program=new V(this.gl,{vertexShader:\"precision mediump float;attribute vec4 aPos;uniform mat4 u_matrix;uniform float currentTime;uniform float trailLength;varying float vTime;void main(){gl_Position=u_matrix*vec4(aPos.xyz,1.0);vTime=1.0-((currentTime-aPos.w)/trailLength);}\",\nfragmentShader:\"precision mediump float;uniform vec3 uFragColor;varying float vTime;void main(){if(vTime>1.0||vTime<0.0){discard;}gl_FragColor=vec4(uFragColor,1.0*vTime);}\"});this.buffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.buffer)}},{key:\"onChanged\",value:function(a,c){var b=this.gl;if(b){this.buffer=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,this.buffer);for(var d=[],k=a.height,h=0;h<c.length;h++){var m=c[h].geometry.coordinates;var n=\"[object Function]\"===Object.prototype.toString.call(k)?\nk(c[h]):Number(k);for(var p=0,l=0;l<this.segs;l++){var q=this.normizedPoint(m);d.push(q[0],q[1],p);void 0===m[2]?d.push(l):d.push(Number(m[2]));p+=n/this.segs;d.push(q[0],q[1],p);void 0===m[2]?d.push(l+1):d.push(Number(m[2]))}}void 0===a.endTime&&(this.endTime=this.segs);this.bufferData=d;b.bufferData(b.ARRAY_BUFFER,new Float32Array(d),b.STATIC_DRAW);this.webglLayer&&this.webglLayer.render()}}},{key:\"render\",value:function(a){var b=a.gl,c=a.matrix;a=this.program;b.useProgram(a.program);b.uniformMatrix4fv(a.uniforms.u_matrix,\n!1,c);b.bindBuffer(b.ARRAY_BUFFER,this.buffer);b.enableVertexAttribArray(a.attributes.aPos);b.vertexAttribPointer(a.attributes.aPos,4,b.FLOAT,!1,0,0);c=this.normizedColor(this.options.color);b.uniform3f(a.uniforms.uFragColor,c[0],c[1],c[2]);b.uniform1f(a.uniforms.currentTime,this.time);b.uniform1f(a.uniforms.trailLength,this.options.trailLength);b.enable(b.BLEND);b.polygonOffset(2,1);b.blendFunc(b.SRC_ALPHA,b.ONE);b.blendEquation(b.FUNC_ADD);b.drawArrays(b.LINES,0,this.bufferData.length/4);b.bindBuffer(b.ARRAY_BUFFER,\nnull);b.disable(b.BLEND);this.time+=Number(this.options.step);this.time>1.5*this.endTime&&(this.time=this.startTime);b.useProgram(null)}}]);return a}(da),Ei=function(c){function a(b){H(this,a);b=Q(this,(a.__proto__||N(a)).call(this,b));b.pointLayer=new Jd(b.options);b.textLayer=new Id(b.options.textOptions);b.children=[b.pointLayer,b.textLayer];return b}R(a,c);L(a,[{key:\"getDefaultOptions\",value:function(){return{minSize:25,maxSize:40,clusterRadius:200,showText:!0,maxZoom:19,minZoom:4,gradient:{0:\"rgb(50, 50, 256)\",\n\"0.1\":\"rgb(50, 250, 56)\",\"0.5\":\"rgb(250, 250, 56)\",1:\"rgb(250, 50, 56)\"},textOptions:{fontSize:12,color:\"white\"}}}},{key:\"onOptionsChanged\",value:function(a){this.textLayer.setOptions(a.textOptions)}},{key:\"setOptions\",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},c=this.options.textOptions;a.textOptions&&T(c,a.textOptions);var f=a.minZoom,g=a.maxZoom,k=a.clusterRadius;f=g&&g!==this.options.maxZoom||f&&f!==this.options.minZoom||k&&k!==this.options.clusterRadius;\nT(this.options,a,{textOptions:c});if(f)this.onChanged(this.options,this.data);else this.refreshCluster();this.onOptionsChanged(this.getOptions())}},{key:\"onChanged\",value:function(a,c){if(c&&c.length){var b=this.map.map;c.forEach(function(a){var c=db(a.geometry.coordinates,2),d=c[0];c=c[1];-180<=d&&180>=d&&-90<=c&&90>=c||(d=b.mercatorToLnglat(d,c),a.geometry.coordinates[0]=d[0],a.geometry.coordinates[1]=d[1])});this.supercluster=new Cf({maxZoom:a.maxZoom,minZoom:a.minZoom,radius:a.clusterRadius,extent:256});\nthis.supercluster.load(c);this.supercluster.trees.forEach(function(a){var b=0,c=Infinity;a.points.forEach(function(a){b=Math.max(a.numPoints||0,b);c=Math.min(a.numPoints||Infinity,c)});a.max=b;a.min=c});this.refreshCluster()}}},{key:\"refreshCluster\",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.options;if(this.supercluster){var c=this.getClusterData(a);c&&c.length&&(this.pointLayer.setData(c),this.textLayer.setData(a.showText?c:[]),a.enablePicked&&a.autoSelect&&\nthis.pick(-1,-1))}}},{key:\"getClusterData\",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.options,c=this.map.map,f=c.getBounds(),g=f.ne;f=f.sw;this.ne=g;this.sw=f;var k=g,h=k.lng;k=k.lat;-180<=h&&180>=h&&-90<=k&&90>=k?g=[f.lng,f.lat,g.lng,g.lat]:(g=c.mercatorToLnglat(this.ne.lng,this.ne.lat),f=c.mercatorToLnglat(this.sw.lng,this.sw.lat),g=f.concat(g));c=Math.floor(c.getZoom());g=this.supercluster.getClusters(g,c);this.zoom!==c&&0<g.length&&(this.zoom=c,h=this.supercluster.trees,\nf=h[c]&&h[c].max||this.max,c=h[c]&&h[c].min||this.min,f!==c&&(this.max=f,this.min=c));return this.processData(g,a)}},{key:\"processData\",value:function(a,c){var b=c.defaultColor,d=c.defaultSize,k=c.gradient,h=c.minSize,m=c.textOptions,n=new na({max:this.max,min:~~this.min||1,minSize:h||8,maxSize:c.maxSize||30,gradient:k});b=b||k[0]||\"black\";d=d||.5*h||5;var p=m&&m.format;p=\"function\"===typeof p?p:null;return a.map(function(a){var c=d,f=b,g=0;a.properties&&a.properties.point_count&&(g=a.properties.point_count,\nc=n.getSize(g)||c,f=n.getColor(g),g=p?p(g):g);return{geometry:a.geometry,properties:{text:g,size:c,color:f}}})}},{key:\"pick\",value:function(a,c){return this.pointLayer.pick(a,c)}},{key:\"shouldUpdate\",value:function(){if(!this.data||!this.supercluster)return!1;var a=this.map.map;if(this.zoom!==Math.floor(a.getZoom()))return!0;var c=a.getBounds();a=c.ne;c=c.sw;if(this.ne.lng!==a.lng||this.ne.lat!==a.lat||this.sw.lng!==c.lng||this.sw.lat!==c.lat)return!0}},{key:\"render\",value:function(b){this.shouldUpdate()?\nthis.refreshCluster():Wa(a.prototype.__proto__||N(a.prototype),\"render\",this).call(this,b)}}]);return a}(nb),Fi=function(c){function a(b,c){H(this,a);return Q(this,(a.__proto__||N(a)).call(this,b,c))}R(a,c);L(a,[{key:\"getDefaultOptions\",value:function(){return T(Wa(a.prototype.__proto__||N(a.prototype),\"getDefaultOptions\",this).call(this),{style:\"grid\",gridSize:500,gradient:{0:\"rgb(50, 50, 256)\",\"0.1\":\"rgb(50, 250, 56)\",\"0.5\":\"rgb(250, 250, 56)\",1:\"rgb(250, 50, 56)\"}})}},{key:\"onChanged\",value:function(b,\nc){this.gl&&(c=this.processData(c,b),Wa(a.prototype.__proto__||N(a.prototype),\"onChanged\",this).call(this,b,c))}},{key:\"generateGrid\",value:function(a,c){var b=c.gridSize,d=[],k={};c=a.length;for(var h=this.getPointOffset(),m=0;m<c;m++){var n=this.normizedPoint(a[m].geometry.coordinates);n=~~((n[0]+h[0])/b)+\"_\"+~~((n[1]+h[1])/b);void 0===k[n]&&(k[n]=0);var p=~~a[m].count||1;\"properties\"in a[m]&&\"count\"in a[m].properties&&(p=~~a[m].properties.count);k[n]+=p}Ea(k).forEach(function(a){var c=a.split(\"_\");\nd.push([c[0]*b+b/2,c[1]*b+b/2,k[a]])});return d}},{key:\"processData\",value:function(a,c){var b=[];if(\"normal\"===c.style)for(var d=this.getPointOffset(),k=0;k<a.length;k++){var h=this.normizedPoint(a[k].geometry.coordinates),m=h[0]+d[0];h=h[1]+d[1];var n=~~a[k].count||1;\"properties\"in a[k]&&\"count\"in a[k].properties&&(n=~~a[k].properties.count);b.push([m,h,n])}else b=this.generateGrid(a,c);d=a=0;if(void 0!==c.max&&void 0!==c.min)a=c.max,d=c.min;else{b[0]&&(a=b[0][2],d=b[0][2]);k=b.length;for(m=0;m<\nk;m++)h=b[m],a=Math.max(h[2],a),d=Math.min(h[2],d);a/=2}c=new na({max:~~a,min:d,gradient:c.gradient});a=[];for(d=0;d<b.length;d++)k=b[d],k[0]=k[0],k[1]=k[1],m=c.getImageData(k[2]),a.push({geometry:{type:\"Point\",coordinates:[k[0],k[1]]},color:[m[0]/255,m[1]/255,m[2]/255,m[3]/255]});return a}}]);return a}(Jd),Gi=function(c){function a(b,c){H(this,a);b=Q(this,(a.__proto__||N(a)).call(this,b,c));b.bufferData=[];return b}R(a,c);L(a,[{key:\"getDefaultOptions\",value:function(){return{color:[1,.05,.05,1]}}},\n{key:\"onChanged\",value:function(a,c){var b=this;if(a=this.gl){this.buffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.buffer);for(var d=[],k=function(a){var f=5*a;for(a=0;a<c.length;a++)c[a].geometry.coordinates.forEach(function(a){for(var c=0;c<a.length-1;c++){var g=b.normizedPoint(a[c]);d.push(g[0]);d.push(g[1]);d.push(Number(f));g=b.normizedPoint(a[c+1]);d.push(g[0]);d.push(g[1]);d.push(Number(f))}})},h=0;20>h;h++)k(h);a.bufferData(a.ARRAY_BUFFER,new Float32Array(d),a.STATIC_DRAW);this.bufferData=\nd;a.bindBuffer(a.ARRAY_BUFFER,null)}}},{key:\"initialize\",value:function(a){this.gl=a;this.program=new V(a,{vertexShader:\"uniform mat4 uMatrix;attribute vec3 aPos;void main(){gl_PointSize=10.0;gl_Position=uMatrix*vec4(aPos,1.0);}\",fragmentShader:\"precision mediump float;uniform vec4 uFragColor;void main(){gl_FragColor=uFragColor;}\"});this.buffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.buffer)}},{key:\"render\",value:function(a){var b=a.gl;a=a.matrix;var c=this.program;b.useProgram(c.program);\nvar g=this.normizedColor(this.options.color);b.uniform4f(c.uniforms.uFragColor,g[0],g[1],g[2],g[3]);b.uniformMatrix4fv(c.uniforms.uMatrix,!1,a);b.bindBuffer(b.ARRAY_BUFFER,this.buffer);b.enableVertexAttribArray(c.attributes.aPos);b.vertexAttribPointer(c.attributes.aPos,3,b.FLOAT,!1,0,0);b.enable(b.BLEND);b.blendEquation(b.FUNC_ADD);b.blendFunc(b.ONE,b.ONE);b.drawArrays(b.LINES,0,this.bufferData.length/3);b.bindBuffer(b.ARRAY_BUFFER,null)}}]);return a}(da),Ff={circle:1,square:2},Hi=function(c){function a(b,\nc){H(this,a);b=Q(this,(a.__proto__||N(a)).call(this,b,c));b.bufferData=[];b.startTime=b.options.startTime||0;b.endTime=b.options.endTime;b.time=b.startTime;b.autoUpdate=!0;return b}R(a,c);L(a,[{key:\"initialize\",value:function(a){this.gl=a;this.program=new V(this.gl,{vertexShader:\"attribute vec4 aPos;attribute vec4 aColor;attribute float aSize;uniform mat4 u_matrix;varying vec4 vColor;uniform float currentTime;uniform float trailLength;varying float vTime;void main(void){if(aColor.w>=0.0&&aColor.w<=1.0){vColor=aColor;}else{vColor=vec4(aColor.xyz,1.0);}gl_Position=u_matrix*vec4(aPos.xyz,1.0);gl_PointSize=aSize;vTime=1.0-((currentTime-aPos.w)/trailLength);}\",\nfragmentShader:\"precision highp float;varying vec4 vColor;uniform int uShape;varying float vTime;void main(void){if(vTime>1.0||vTime<0.0){discard;}if(uShape==1){float d=distance(gl_PointCoord,vec2(0.5,0.5));if(d<0.5){gl_FragColor=vColor;}else{discard;}}else{gl_FragColor=vec4(vColor.rgb,vColor.a*vTime);}}\"});this.f32BufferData=new Float32Array;this.buffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.buffer)}},{key:\"onChanged\",value:function(a,c){var b=this.gl;if(b){this.buffer=b.createBuffer();\nb.bindBuffer(b.ARRAY_BUFFER,this.buffer);for(var d=[],k=a.color||[.1,.1,.9,1],h=a.size||5,m=0;m<c.length;m++){var n=c[m].geometry.coordinates,p=c[m].color||k;\"[object Function]\"===Object.prototype.toString.call(p)&&(p=p(c[m]));\"properties\"in c[m]&&\"color\"in c[m].properties&&(p=c[m].properties.color);p=this.normizedColor(p);var l=this.normizedPoint(n),q=h;q=\"[object Function]\"===Object.prototype.toString.call(q)?q(c[m]):Number(q);var r=c[m].time||m;\"properties\"in c[m]&&\"time\"in c[m].properties&&(r=\nc[m].properties.time);d.push(l[0],l[1],Number(n[2]||0),r);d.push(p[0],p[1],p[2],p[3]);d.push(q*window.devicePixelRatio)}void 0===a.endTime&&(this.endTime=c.length);this.bufferData=d;this.f32BufferData=new Float32Array(d);b.bufferData(b.ARRAY_BUFFER,this.f32BufferData,b.STATIC_DRAW)}}},{key:\"render\",value:function(a){var b=a.gl,c=a.matrix;0>=this.bufferData.length||(a=this.program,b.useProgram(a.program),b.uniformMatrix4fv(a.uniforms.u_matrix,!1,c),b.bindBuffer(b.ARRAY_BUFFER,this.buffer),c=this.f32BufferData.BYTES_PER_ELEMENT,\nb.enableVertexAttribArray(a.attributes.aPos),b.vertexAttribPointer(a.attributes.aPos,4,b.FLOAT,!1,9*c,0),b.enableVertexAttribArray(a.attributes.aColor),b.vertexAttribPointer(a.attributes.aColor,4,b.FLOAT,!1,9*c,4*c),b.enableVertexAttribArray(a.attributes.aSize),b.vertexAttribPointer(a.attributes.aSize,1,b.FLOAT,!1,9*c,8*c),b.uniform1f(a.uniforms.currentTime,this.time),b.uniform1f(a.uniforms.trailLength,this.options.trailLength||3),c=1,this.options.shape&&Ff[this.options.shape]&&(c=Ff[this.options.shape]),\nb.uniform1i(a.uniforms.uShape,c),a=this.options.blend,b.enable(b.BLEND),b.blendEquation(b.FUNC_ADD),a&&\"lighter\"===a?b.blendFunc(b.SRC_ALPHA,b.ONE):b.blendFunc(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA),b.drawArrays(b.POINTS,0,this.bufferData.length/9),b.bindBuffer(b.ARRAY_BUFFER,null),b.disable(b.BLEND),b.useProgram(null),this.time+=this.options.step||.1,this.time>this.endTime&&(this.time=this.startTime))}}]);return a}(da),Ii=function(c){function a(b,c){H(this,a);b=Q(this,(a.__proto__||N(a)).call(this,b,\nc));b.bufferData=[];b.startTime=b.options.startTime||0;b.endTime=b.options.endTime;b.time=b.startTime;b.autoUpdate=!0;return b}R(a,c);L(a,[{key:\"getDefaultOptions\",value:function(){return{color:[1,.05,.05,1],trailLength:3,step:.1}}},{key:\"initialize\",value:function(a){this.gl=a;this.program=new V(this.gl,{vertexShader:\"precision highp float;attribute vec4 aPos;attribute vec4 aColor;uniform mat4 u_matrix;uniform float currentTime;uniform float trailLength;varying float vTime;varying vec4 vColor;void main(){gl_Position=u_matrix*vec4(aPos.xyz,1.0);vColor=aColor;vTime=1.0-((currentTime-aPos.w)/trailLength);}\",\nfragmentShader:\"precision highp float;uniform vec3 uFragColor;varying vec4 vColor;varying float vTime;void main(){if(vTime>1.0||vTime<0.0){discard;}gl_FragColor=vec4(vColor.rgb,1.0*vTime);}\"},this);this.buffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.buffer)}},{key:\"setTime\",value:function(a){this.time=a}},{key:\"onChanged\",value:function(a,c){var b=this.gl;if(b){this.buffer=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,this.buffer);for(var d=[],k=0,h=this.options.color,m=0;m<c.length;m++){var n=\nc[m].geometry.coordinates;c[m].color&&(h=c[m].color);\"properties\"in c[m]&&\"color\"in c[m].properties&&(h=c[m].properties.color);\"[object Function]\"===Object.prototype.toString.call(h)&&(h=h(c[m]));h=this.normizedColor(h);n.length>k&&(k=n.length);for(var p=0;p<n.length-1;p++){var l=this.normizedPoint(n[p]);d.push(l[0]);d.push(l[1]);d.push(l[2]);void 0===n[p][3]?d.push(p):d.push(Number(n[p][3]));d.push(h[0]);d.push(h[1]);d.push(h[2]);d.push(h[3]);l=this.normizedPoint(n[p+1]);d.push(l[0]);d.push(l[1]);\nd.push(l[2]);void 0===n[p+1][3]?d.push(p+1):d.push(Number(n[p+1][3]));d.push(h[0]);d.push(h[1]);d.push(h[2]);d.push(h[3])}}void 0===a.endTime&&(this.endTime=k);this.bufferData=d;this.f32BufferData=new Float32Array(d);b.bufferData(b.ARRAY_BUFFER,this.f32BufferData,b.STATIC_DRAW)}}},{key:\"render\",value:function(a){var b=a.gl,c=a.matrix;a=this.program;a.use(b);b.uniformMatrix4fv(a.uniforms.u_matrix,!1,c);b.bindBuffer(b.ARRAY_BUFFER,this.buffer);c=this.f32BufferData.BYTES_PER_ELEMENT;b.enableVertexAttribArray(a.attributes.aPos);\nb.vertexAttribPointer(a.attributes.aPos,4,b.FLOAT,!1,8*c,0);b.enableVertexAttribArray(a.attributes.aColor);b.vertexAttribPointer(a.attributes.aColor,4,b.FLOAT,!1,8*c,4*c);c=this.normizedColor(this.options.color);b.uniform3f(a.uniforms.uFragColor,c[0],c[1],c[2]);b.uniform1f(a.uniforms.currentTime,this.time);b.uniform1f(a.uniforms.trailLength,this.options.trailLength);b.enable(b.BLEND);b.polygonOffset(2,1);\"lighter\"===this.options.blend?b.blendFunc(b.ONE,b.ONE):b.blendFunc(b.SRC_ALPHA,b.ONE);b.blendEquation(b.FUNC_ADD);\nb.drawArrays(b.LINES,0,this.bufferData.length/8);b.bindBuffer(b.ARRAY_BUFFER,null);this.time+=this.options.step;this.time>this.endTime&&(this.time=this.startTime);b.useProgram(null)}}]);return a}(da),Gf=function(c){function a(b,c){H(this,a);b=Q(this,(a.__proto__||N(a)).call(this,b,c));b.initData();b.date=new Date;b.autoUpdate=!0;return b}R(a,c);L(a,[{key:\"getDefaultOptions\",value:function(){return{color:\"rgba(25, 25, 250, 1)\",blend:\"normal\",width:2,isFlat:!0,antialias:!1,lineJoin:\"miter\",lineCap:\"butt\",\ninterval:.1,duration:2,trailLength:.5,zoom:4}}},{key:\"initData\",value:function(){this.dataMgr={position:[],prev:[],next:[],direction:[],color:[],index:[],counter:[]}}},{key:\"initialize\",value:function(a){this.gl=a;var b=this.getOptions();this.program=new V(this.gl,{vertexShader:\"uniform mat4 u_matrix;uniform float thickness;uniform int miter;uniform vec4 uSelectedColor;attribute vec3 position;attribute vec3 next;attribute vec3 previous;attribute float direction;attribute vec4 aColor;attribute float aCounter;attribute vec2 uv;varying vec4 vColor;varying vec2 vNormal;varying float vCounter;vec2 project(vec4 coord){vec3 screen=coord.xyz/coord.w;vec2 clip=(screen.xy+1.0)/2.0;return clip*MAPV_resolution;}vec4 unproject(vec2 projected,float z,float w){vec2 clip=projected/MAPV_resolution;vec2 screen=clip*2.0-1.0;return vec4(screen*w,z,w);}void main(){vColor=aColor;vCounter=aCounter;\\n#if defined(PICK)\\nif(mapvIsPicked()){vColor=uSelectedColor;}\\n#endif\\nvec4 previousProjected=u_matrix*vec4(previous,1.0);vec4 currentProjected=u_matrix*vec4(position,1.0);vec4 nextProjected=u_matrix*vec4(next,1.0);vec2 currentScreen=project(currentProjected);vec2 previousScreen=project(previousProjected);vec2 nextScreen=project(nextProjected);float len=thickness;float orientation=direction;vec2 dir=vec2(0.0);if(currentScreen==previousScreen){dir=normalize(nextScreen-currentScreen);}else if(currentScreen==nextScreen){dir=normalize(currentScreen-previousScreen);}else{vec2 dirA=normalize((currentScreen-previousScreen));if(miter==1){vec2 dirB=normalize((nextScreen-currentScreen));vec2 tangent=normalize(dirA+dirB);vec2 perp=vec2(-dirA.y,dirA.x);vec2 miter=vec2(-tangent.y,tangent.x);dir=tangent;}else{dir=dirA;}}vec2 normal=vec2(-dir.y,dir.x);vNormal=normal*orientation;normal*=len/2.0;vec2 pos=currentScreen+normal*orientation;vec4 finalPos=unproject(pos,currentProjected.z,currentProjected.w);gl_Position=finalPos;}\",\nfragmentShader:\"precision highp float;uniform bool uAntialias;uniform bool uAnimate;uniform float uTime;uniform float duration;uniform float interval;uniform float trailLength;varying vec4 vColor;varying vec2 vNormal;varying float vCounter;void main(){vec4 color=vColor;if(uAntialias){float blur=1.0;blur=1.0-smoothstep(0.98,1.0,length(vNormal));color.a*=blur;}if(uAnimate){float alpha=1.0-fract(mod(1.0-vCounter,interval)*(1.0/interval)+uTime/duration);alpha=(alpha+trailLength-1.0)/trailLength;color.a*=alpha;}gl_FragColor=color;}\",\ndefines:b.enablePicked?[\"PICK\"]:[]},this);this.prevBuffer=new S({gl:a,target:\"ARRAY_BUFFER\",usage:\"STATIC_DRAW\"});this.currentBuffer=new S({gl:a,target:\"ARRAY_BUFFER\",usage:\"STATIC_DRAW\"});this.nextBuffer=new S({gl:a,target:\"ARRAY_BUFFER\",usage:\"STATIC_DRAW\"});this.directionBuffer=new S({gl:a,target:\"ARRAY_BUFFER\",usage:\"STATIC_DRAW\"});this.colorBuffer=new S({gl:a,target:\"ARRAY_BUFFER\",usage:\"STATIC_DRAW\"});this.counterBuffer=new S({gl:a,target:\"ARRAY_BUFFER\",usage:\"STATIC_DRAW\"});this.indexBuffer=\nnew S({gl:a,target:\"ELEMENT_ARRAY_BUFFER\",usage:\"STATIC_DRAW\"});b=[{stride:12,name:\"previous\",buffer:this.prevBuffer,size:3,type:\"FLOAT\",offset:0},{stride:12,name:\"position\",buffer:this.currentBuffer,size:3,type:\"FLOAT\",offset:0},{stride:12,name:\"next\",buffer:this.nextBuffer,size:3,type:\"FLOAT\",offset:0},{stride:4,name:\"direction\",buffer:this.directionBuffer,size:1,type:\"FLOAT\",offset:0},{stride:16,name:\"aColor\",buffer:this.colorBuffer,size:4,type:\"FLOAT\",offset:0},{stride:4,name:\"aCounter\",buffer:this.counterBuffer,\nsize:1,type:\"FLOAT\",offset:0}];b=b.concat(this.getCommonAttributes());this.vertexArray=new za({gl:a,program:this.program,attributes:b})}},{key:\"onChanged\",value:function(a,c){var b=this;if(this.gl){this.initData();for(var d=1,k=[],h=0;h<c.length;h++){var m=[],n=c[h].geometry.coordinates;n&&0<n.length&&(m=\"Polygon\"===c[h].geometry.type?n[0].map(function(a){return b.normizedPoint(a)}):n.map(function(a){return b.normizedPoint(a)}));m=ze(m);n=m.total;k[h]=m.arr;d=Math.max(n,d)}h=[];m=a.color;for(n=0;n<\nc.length;n++){var p=[],l=c[n].geometry.coordinates;l&&0<l.length&&(p=\"Polygon\"===c[n].geometry.type?l[0].map(function(a){return b.normizedPoint(a)}):l.map(function(a){return b.normizedPoint(a)}));l=c[n].color||m;\"properties\"in c[n]&&\"color\"in c[n].properties&&(l=c[n].properties.color);\"[object Function]\"===Object.prototype.toString.call(l)&&(l=l(c[n]));l=this.normizedColor(l);for(var q=this.addMultipleCoords(p),r=0;r<q.length;r++)this.processData(this.dataMgr,q[r],k[n],d,l);if(a.enablePicked)for(l=\nthis.indexToRgb(n),q=0;q<p.length;q++)h.push(l[0]/255,l[1]/255,l[2]/255),h.push(l[0]/255,l[1]/255,l[2]/255),a.repeat&&(h.push(l[0]/255,l[1]/255,l[2]/255),h.push(l[0]/255,l[1]/255,l[2]/255),h.push(l[0]/255,l[1]/255,l[2]/255),h.push(l[0]/255,l[1]/255,l[2]/255))}this.counterBuffer.updateData(new Float32Array(this.dataMgr.counter));this.currentBuffer.updateData(new Float32Array(this.dataMgr.position));this.prevBuffer.updateData(new Float32Array(this.dataMgr.prev));this.nextBuffer.updateData(new Float32Array(this.dataMgr.next));\nthis.directionBuffer.updateData(new Float32Array(this.dataMgr.direction));this.colorBuffer.updateData(new Float32Array(this.dataMgr.color));this.indexBuffer.updateData(new Uint32Array(this.dataMgr.index));a.enablePicked&&this.pickBuffer.updateData(new Float32Array(h))}}},{key:\"processData\",value:function(a,c,f,g,k){var b,d,n,p,l,q,r,u=c.length,w=a.position.length/6;f=Ba(f.map(function(a){return a/g}));var t=Ba(c.map(function(a){return 1}),!0),x=Ba(c),v=Ba(c.map(pc(-1))),y=Ba(c.map(pc(1)));c=Ba(c.map(function(a){return k}));\nu=ye(u,w);(b=a.counter).push.apply(b,ca(f));(d=a.position).push.apply(d,ca(Ma(x)));(n=a.prev).push.apply(n,ca(Ma(v)));(p=a.next).push.apply(p,ca(Ma(y)));(l=a.direction).push.apply(l,ca(t));(q=a.color).push.apply(q,ca(Ma(c)));(r=a.index).push.apply(r,ca(u))}},{key:\"render\",value:function(a){var b=a.gl,c=a.matrix,g=this.dataMgr;if(g&&!(0>=g.index.length)){var k=this.getOptions(),h=this.program;h.use(b);var m=this.map?this.map.getZoom()>=k.zoom&&this.autoUpdate?!0:!1:!0;h.setUniforms(T(this.getCommonUniforms(a),\n{u_matrix:c,miter:1,thickness:k.width,uAntialias:k.antialias,uTime:(new Date-this.date)/1E3,uAnimate:m,duration:k.duration,interval:k.interval,trailLength:k.trailLength}));b.enable(b.BLEND);b.blendEquation(b.FUNC_ADD);k.blend&&\"lighter\"===k.blend?b.blendFunc(b.SRC_ALPHA,b.ONE):b.blendFunc(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA);this.indexBuffer.bind();this.vertexArray.bind();b.drawElements(b.TRIANGLES,g.index.length,b.UNSIGNED_INT,0);b.bindBuffer(b.ARRAY_BUFFER,null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,\nnull);b.disable(b.BLEND)}}}]);return a}(da),Ji=function(c){function a(b,c){H(this,a);return Q(this,(a.__proto__||N(a)).call(this,b,c))}R(a,c);L(a,[{key:\"getDefaultOptions\",value:function(){return{}}},{key:\"initialize\",value:function(a){this.gl=a;var b=this.getOptions();this.texture=null;this.program=new V(this.gl,{vertexShader:\"precision highp float;attribute vec3 a_pos;attribute vec2 a_texture_coord;uniform sampler2D uTerrain;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;varying vec2 v_texture_coord;void main(){v_texture_coord=a_texture_coord;vec3 pos=a_pos.xyz;\\n#if defined(TERRAIN)\\nvec4 terrainColor=texture2D(uTerrain,vec2(v_texture_coord.s,v_texture_coord.t));vec3 rgb=terrainColor.rgb*256.0;pos.z=-10000.0+((rgb.r*256.0*256.0+rgb.g*256.0+rgb.b)*0.1);pos.z=pos.z-60.0;\\n#endif\\nvec4 position=u_proj_matrix*u_mv_matrix*vec4(pos,1.0);gl_Position=position;}\",\nfragmentShader:\"precision highp float;varying vec2 v_texture_coord;uniform sampler2D uTile;uniform bool uUseFilter;uniform vec4 uFilterColor;void main(){vec4 textureColor=texture2D(uTile,vec2(v_texture_coord.s,v_texture_coord.t));if(uUseFilter){textureColor=textureColor*uFilterColor;}gl_FragColor=textureColor;}\",defines:b.terrain?[\"TERRAIN\"]:\"\"},this);this.vertexBuffer=new S({gl:a,target:\"ARRAY_BUFFER\",usage:\"STATIC_DRAW\"});this.indexBuffer=new S({gl:a,target:\"ELEMENT_ARRAY_BUFFER\",usage:\"STATIC_DRAW\"});\nthis.vertexArray=new za({gl:a,program:this.program,attributes:[{name:\"a_pos\",buffer:this.vertexBuffer,stride:20,size:3,type:\"FLOAT\",offset:0},{name:\"a_texture_coord\",buffer:this.vertexBuffer,size:2,stride:20,type:\"FLOAT\",offset:12}]})}},{key:\"onChanged\",value:function(a,c){var b=this;this.gl&&(this.loadTextureTime&&clearTimeout(this.loadTextureTime),this.loadTextureTime=setTimeout(function(){b.loadTexture(function(){b.parseData(c);b.dataTime=new Date;b.webglLayer.render()})},0))}},{key:\"render\",value:function(a){var b=\na.gl,c=a.projectionMatrix;a=a.viewMatrix;var g=this.getOptions(),k=this.program,h=k.uniforms;k.use(b);this.texture&&(b.activeTexture(b.TEXTURE0),b.uniform1i(h.uTile,0),b.bindTexture(b.TEXTURE_2D,this.texture),b.activeTexture(b.TEXTURE1),b.uniform1i(h.uTerrain,1),b.bindTexture(b.TEXTURE_2D,this.terrainSampler),b.disable(b.CULL_FACE),k.setUniforms({u_proj_matrix:c,uUseFilter:!!g.filterColor,uFilterColor:this.normizedColor(g.filterColor||\"rgba(0, 0, 100, 1.0)\"),u_mv_matrix:a}),0<this.index.length&&(this.indexBuffer.bind(),\nthis.vertexArray.bind(),b.drawElements(b.TRIANGLES,this.index.length,b.UNSIGNED_INT,0)))}},{key:\"loadTexture\",value:function(a){var b=this,c=this.getOptions();c.tile?c.terrain?Ra(this.gl,c.terrain,function(d,f){b.terrainSampler=d;Ra(b.gl,c.tile,function(c,d){b.texture=c;a&&a();b.webglLayer.render()})},{TEXTURE_WRAP_S:\"MIRRORED_REPEAT\",TEXTURE_WRAP_T:\"MIRRORED_REPEAT\"}):Ra(this.gl,c.tile,function(c,d){b.texture=c;a&&a();b.webglLayer.render()}):(this.texture=null,a&&a())}},{key:\"parseData\",value:function(a){var b=\nthis,c=[],g=[];if(a&&a[0]){var k=a[0].geometry.coordinates[0];k=k.map(function(a){return b.normizedPoint(a)});a=k[0][0];var h=k[0][1],m=k[0][2],n=(k[2][0]-a)/16;k=(k[2][1]-h)/16;for(var p=0;16>=p;p++)for(var l=0;16>=l;l++)if(c.push(a+n*l,h+k*p,m),c.push(l/16,p/16),16>l&&16>p){var q=17*p+l,r=17*(p+1)+l;g.push(q,r+1,q+1);g.push(q,r,r+1)}}this.index=g;this.vertexBuffer.updateData(new Float32Array(c));this.indexBuffer.updateData(new Uint32Array(g))}}]);return a}(da),Jc=function(c,a,b,d){if(!(c instanceof\na)||void 0!==d&&d in c)throw TypeError(b+\": incorrect invocation!\");return c},pb=O(function(c){var a={},b={};c=c.exports=function(c,f,g,k,h){h=h?function(){return c}:yd(c);g=ka(g,k,f?2:1);k=0;var d,n;if(\"function\"!=typeof h)throw TypeError(c+\" is not iterable!\");if(void 0===h||Oa.Array!==h&&jf[hf]!==h)for(k=h.call(c);!(n=k.next()).done;){if(h=gf(k,g,n.value,f),h===a||h===b)return h}else for(d=sc(c.length);d>k;k++)if(h=f?g(qa(n=c[k])[0],n[1]):g(c[k]),h===a||h===b)return h};c.BREAK=a;c.RETURN=b}),Ki=\nia(\"species\"),Hf=function(c,a){c=qa(c).constructor;var b;return void 0===c||void 0==(b=qa(c)[Ki])?a:ib(b)},Li=function(c,a,b){var d=void 0===b;switch(a.length){case 0:return d?c():c.call(b);case 1:return d?c(a[0]):c.call(b,a[0]);case 2:return d?c(a[0],a[1]):c.call(b,a[0],a[1]);case 3:return d?c(a[0],a[1],a[2]):c.call(b,a[0],a[1],a[2]);case 4:return d?c(a[0],a[1],a[2],a[3]):c.call(b,a[0],a[1],a[2],a[3])}return c.apply(b,a)},If=K.process,Kd=K.setImmediate,Jf=K.clearImmediate,Kf=K.MessageChannel,Ld=\nK.Dispatch,Md=0,dc={},ec=function(){var c=+this;if(dc.hasOwnProperty(c)){var a=dc[c];delete dc[c];a()}},Lf=function(c){ec.call(c.data)};if(!Kd||!Jf)if(Kd=function(c){for(var a=[],b=1;arguments.length>b;)a.push(arguments[b++]);dc[++Md]=function(){Li(\"function\"==typeof c?c:Function(c),a)};fc(Md);return Md},Jf=function(c){delete dc[c]},\"process\"==jb(If))var fc=function(c){If.nextTick(ka(ec,c,1))};else if(Ld&&Ld.now)fc=function(c){Ld.now(ka(ec,c,1))};else if(Kf){var Mf=new Kf;var Nf=Mf.port2;Mf.port1.onmessage=\nLf;fc=ka(Nf.postMessage,Nf,1)}else K.addEventListener&&\"function\"==typeof postMessage&&!K.importScripts?(fc=function(c){K.postMessage(c+\"\",\"*\")},K.addEventListener(\"message\",Lf,!1)):fc=\"onreadystatechange\"in(vc?vb.createElement(\"script\"):{})?function(c){kd.appendChild(vc?vb.createElement(\"script\"):{}).onreadystatechange=function(){kd.removeChild(this);ec.call(c)}}:function(c){setTimeout(ka(ec,c,1),0)};var Nd=Kd,Of=K.MutationObserver||K.WebKitMutationObserver,Od=K.process,Pd=K.Promise,Pf=\"process\"==\njb(Od),Kc={f:function(c){return new Cg(c)}},Lc=function(c){try{return{e:!1,v:c()}}catch(a){return{e:!0,v:a}}},Qf=K.navigator,Mi=Qf&&Qf.userAgent||\"\",Qd=function(c,a){qa(c);if(oa(a)&&a.constructor===c)return a;c=Kc.f(c);var b=c.resolve;b(a);return c.promise},Rd=function(c,a,b){for(var d in a)b&&c[d]?c[d]=a[d]:Ta(c,d,a[d]);return c},Rf=ia(\"species\"),Sf=function(c){c=\"function\"==typeof W[c]?W[c]:K[c];Ca&&c&&!c[Rf]&&ya.f(c,Rf,{configurable:!0,get:function(){return this}})},Tf=function(){var c,a,b=function(){var b;\nfor(Pf&&(b=Od.domain)&&b.exit();c;){var f=c.fn;c=c.next;try{f()}catch(n){throw c?d():a=void 0,n;}}a=void 0;b&&b.enter()};if(Pf)var d=function(){Od.nextTick(b)};else if(!Of||K.navigator&&K.navigator.standalone)if(Pd&&Pd.resolve){var f=Pd.resolve(void 0);d=function(){f.then(b)}}else d=function(){Nd.call(K,b)};else{var g=!0,k=document.createTextNode(\"\");(new Of(b)).observe(k,{characterData:!0});d=function(){k.data=g=!g}}return function(b){b={fn:b,next:void 0};a&&(a.next=b);c||(c=b,d());a=b}}(),Uf=K.TypeError,\nDb=K.process,Vf=Db&&Db.versions,Ni=Vf&&Vf.v8||\"\",Pa=K.Promise,gc=\"process\"==Gc(Db),Mc=function(){},Wf,hc=Wf=Kc.f,Nc=!!function(){try{var c=Pa.resolve(1),a=(c.constructor={})[ia(\"species\")]=function(a){a(Mc,Mc)};return(gc||\"function\"==typeof PromiseRejectionEvent)&&c.then(Mc)instanceof a&&0!==Ni.indexOf(\"6.6\")&&-1===Mi.indexOf(\"Chrome/66\")}catch(b){}}(),Xf=function(c){var a;return oa(c)&&\"function\"==typeof(a=c.then)?a:!1},Sd=function(c,a){if(!c._n){c._n=!0;var b=c._c;Tf(function(){for(var d=c._v,f=\n1==c._s,g=0;b.length>g;){var k=void 0,h=void 0,m=void 0,n=b[g++],p=f?n.ok:n.fail,l=n.resolve,q=n.reject,r=n.domain;try{p?(f||(2==c._h&&Oi(c),c._h=1),!0===p?m=d:(r&&r.enter(),m=p(d),r&&(r.exit(),k=!0)),m===n.promise?q(Uf(\"Promise-chain cycle\")):(h=Xf(m))?h.call(m,l,q):l(m)):q(d)}catch(u){r&&!k&&r.exit(),q(u)}}c._c=[];c._n=!1;a&&!c._h&&Pi(c)})}},Pi=function(c){Nd.call(K,function(){var a=c._v,b=1!==c._h&&0===(c._a||c._c).length,d,f;if(b){var g=Lc(function(){gc?Db.emit(\"unhandledRejection\",a,c):(d=K.onunhandledrejection)?\nd({promise:c,reason:a}):(f=K.console)&&f.error&&f.error(\"Unhandled promise rejection\",a)});c._h=gc||1!==c._h&&0===(c._a||c._c).length?2:1}c._a=void 0;if(b&&g.e)throw g.v;})},Oi=function(c){Nd.call(K,function(){var a;gc?Db.emit(\"rejectionHandled\",c):(a=K.onrejectionhandled)&&a({promise:c,reason:c._v})})},Eb=function(c){var a=this;a._d||(a._d=!0,a=a._w||a,a._v=c,a._s=2,a._a||(a._a=a._c.slice()),Sd(a,!0))},Td=function(c){var a=this,b;if(!a._d){a._d=!0;a=a._w||a;try{if(a===c)throw Uf(\"Promise can't be resolved itself\");\n(b=Xf(c))?Tf(function(){var d={_w:a,_d:!1};try{b.call(c,ka(Td,d,1),ka(Eb,d,1))}catch(f){Eb.call(d,f)}}):(a._v=c,a._s=1,Sd(a,!1))}catch(d){Eb.call({_w:a,_d:!1},d)}}};if(!Nc){Pa=function(c){Jc(this,Pa,\"Promise\",\"_h\");ib(c);Ud.call(this);try{c(ka(Td,this,1),ka(Eb,this,1))}catch(a){Eb.call(this,a)}};var Ud=function(c){this._c=[];this._a=void 0;this._s=0;this._d=!1;this._v=void 0;this._h=0;this._n=!1};Ud.prototype=Rd(Pa.prototype,{then:function(c,a){var b=hc(Hf(this,Pa));b.ok=\"function\"==typeof c?c:!0;\nb.fail=\"function\"==typeof a&&a;b.domain=gc?Db.domain:void 0;this._c.push(b);this._a&&this._a.push(b);this._s&&Sd(this,!1);return b.promise},\"catch\":function(c){return this.then(void 0,c)}});var Qi=function(){var c=new Ud;this.promise=c;this.resolve=ka(Td,c,1);this.reject=ka(Eb,c,1)};Kc.f=hc=function(c){return c===Pa||c===Yf?new Qi(c):Wf(c)}}F(F.G+F.W+F.F*!Nc,{Promise:Pa});kb(Pa,\"Promise\");Sf(\"Promise\");var Yf=W.Promise;F(F.S+F.F*!Nc,\"Promise\",{reject:function(c){var a=hc(this),b=a.reject;b(c);return a.promise}});\nF(F.S+1*F.F,\"Promise\",{resolve:function(c){return Qd(this===Yf?Pa:this,c)}});F(F.S+F.F*!(Nc&&lf(function(c){Pa.all(c)[\"catch\"](Mc)})),\"Promise\",{all:function(c){var a=this,b=hc(a),d=b.resolve,f=b.reject,g=Lc(function(){var b=[],g=0,m=1;pb(c,!1,function(c){var h=g++,k=!1;b.push(void 0);m++;a.resolve(c).then(function(a){k||(k=!0,b[h]=a,--m||d(b))},f)});--m||d(b)});g.e&&f(g.v);return b.promise},race:function(c){var a=this,b=hc(a),d=b.reject,f=Lc(function(){pb(c,!1,function(c){a.resolve(c).then(b.resolve,\nd)})});f.e&&d(f.v);return b.promise}});F(F.P+F.R,\"Promise\",{\"finally\":function(c){var a=Hf(this,W.Promise||K.Promise),b=\"function\"==typeof c;return this.then(b?function(b){return Qd(a,c()).then(function(){return b})}:c,b?function(b){return Qd(a,c()).then(function(){throw b;})}:c)}});F(F.S,\"Promise\",{\"try\":function(c){var a=Kc.f(this);c=Lc(c);(c.e?a.reject:a.resolve)(c.v);return a.promise}});var Ri=W.Promise,Si=O(function(c){c.exports={\"default\":Ri,__esModule:!0}}),Zf=P(Si),eb=function(c,a){if(!oa(c)||\nc._t!==a)throw TypeError(\"Incompatible receiver, \"+a+\" required!\");return c},Ti=ya.f,$f=Bc.fastKey,ic=Ca?\"_s\":\"size\",Oc=function(c,a){var b=$f(a);if(\"F\"!==b)return c._i[b];for(c=c._f;c;c=c.n)if(c.k==a)return c},Vd={getConstructor:function(c,a,b,d){var f=c(function(c,k){Jc(c,f,a,\"_i\");c._t=a;c._i=bb(null);c._f=void 0;c._l=void 0;c[ic]=0;void 0!=k&&pb(k,b,c[d],c)});Rd(f.prototype,{clear:function(){for(var b=eb(this,a),c=b._i,d=b._f;d;d=d.n)d.r=!0,d.p&&(d.p=d.p.n=void 0),delete c[d.i];b._f=b._l=void 0;\nb[ic]=0},\"delete\":function(b){var c=eb(this,a);if(b=Oc(c,b)){var d=b.n,f=b.p;delete c._i[b.i];b.r=!0;f&&(f.n=d);d&&(d.p=f);c._f==b&&(c._f=d);c._l==b&&(c._l=f);c[ic]--}return!!b},forEach:function(b){eb(this,a);for(var c=ka(b,1<arguments.length?arguments[1]:void 0,3),d;d=d?d.n:this._f;)for(c(d.v,d.k,this);d&&d.r;)d=d.p},has:function(b){return!!Oc(eb(this,a),b)}});Ca&&Ti(f.prototype,\"size\",{get:function(){return eb(this,a)[ic]}});return f},def:function(c,a,b){var d=Oc(c,a),f;d?d.v=b:(c._l=d={i:f=$f(a,\n!0),k:a,v:b,p:a=c._l,n:void 0,r:!1},c._f||(c._f=d),a&&(a.n=d),c[ic]++,\"F\"!==f&&(c._i[f]=d));return c},getEntry:Oc,setStrong:function(c,a,b){od(c,a,function(b,c){this._t=eb(b,a);this._k=c;this._l=void 0},function(){for(var a=this._k,b=this._l;b&&b.r;)b=b.p;return this._t&&(this._l=b=b?b.n:this._t._f)?\"keys\"==a?cb(0,b.k):\"values\"==a?cb(0,b.v):cb(0,[b.k,b.v]):(this._t=void 0,cb(1))},b?\"entries\":\"values\",!b,!0);Sf(a)}},Ui=ia(\"species\"),Vi=function(c,a){if(td(c)){var b=c.constructor;\"function\"!=typeof b||\nb!==Array&&!td(b.prototype)||(b=void 0);oa(b)&&(b=b[Ui],null===b&&(b=void 0))}return new (void 0===b?Array:b)(a)},Wi=ya.f,Xi=function(c,a){var b=1==c,d=2==c,f=3==c,g=4==c,k=6==c,h=5==c||k,m=a||Vi;return function(a,p,l){var n=Object(Za(a)),r=gd(n);p=ka(p,l,3);l=sc(r.length);var u=0;a=b?m(a,l):d?m(a,0):void 0;for(var w,t;l>u;u++)if(h||u in r)if(w=r[u],t=p(w,u,n),c)if(b)a[u]=t;else if(t)switch(c){case 3:return!0;case 5:return w;case 6:return u;case 2:a.push(w)}else if(g)return!1;return k?-1:f||g?g:a}}(0);\n(function(c,a,b,d,f,g){var k=K[c],h=k,m=f?\"set\":\"add\",n=h&&h.prototype,p={};Ca&&\"function\"==typeof h&&(g||n.forEach&&!$a(function(){(new h).entries().next()}))?(h=a(function(a,b){Jc(a,h,c,\"_c\");a._c=new k;void 0!=b&&pb(b,f,a[m],a)}),Xi(\"add clear delete forEach get has set keys values entries toJSON\".split(\" \"),function(a){var b=\"add\"==a||\"set\"==a;a in n&&(!g||\"clear\"!=a)&&Ta(h.prototype,a,function(c,d){Jc(this,h,a);if(!b&&g&&!oa(c))return\"get\"==a?void 0:!1;c=this._c[a](0===c?0:c,d);return b?this:\nc})}),g||Wi(h.prototype,\"size\",{get:function(){return this._c.size}})):(h=d.getConstructor(a,c,f,m),Rd(h.prototype,b),Bc.NEED=!0);kb(h,c);p[c]=h;F(F.G+F.W+F.F,p);g||d.setStrong(h,c,f);return h})(\"Map\",function(c){return function(){return c(this,0<arguments.length?arguments[0]:void 0)}},{get:function(c){return(c=Vd.getEntry(eb(this,\"Map\"),c))&&c.v},set:function(c,a){return Vd.def(eb(this,\"Map\"),0===c?0:c,a)}},Vd,!0);F(F.P+F.R,\"Map\",{toJSON:function(c){return function(){if(Gc(this)!=c)throw TypeError(c+\n\"#toJSON isn't generic\");var a=[];pb(this,!1,a.push,a,void 0);return a}}(\"Map\")});(function(c){F(F.S,c,{of:function(){for(var a=arguments.length,b=Array(a);a--;)b[a]=arguments[a];return new this(b)}})})(\"Map\");(function(c){F(F.S,c,{from:function(a,b,c){var d;ib(this);(d=void 0!==b)&&ib(b);if(void 0==a)return new this;var g=[];if(d){var k=0;var h=ka(b,c,2);pb(a,!1,function(a){g.push(h(a,k++))})}else pb(a,!1,g.push,g);return new this(g)}})})(\"Map\");var Yi=W.Map,Zi=O(function(c){c.exports={\"default\":Yi,\n__esModule:!0}}),ag=P(Zi),$i=function(c){function a(b,c){H(this,a);b=Q(this,(a.__proto__||N(a)).call(this,b,c));b.index=[];c=b.canvas=document.createElement(\"canvas\");c=b.ctx=c.getContext(\"2d\");c.textAlign=\"start\";c.textBaseline=\"top\";return b}R(a,c);L(a,[{key:\"getDefaultOptions\",value:function(){return{padding:[0,0]}}},{key:\"initialize\",value:function(a){this.gl=a;var b=this.getOptions();this.texture=null;this.program=new V(this.gl,{vertexShader:\"precision highp float;attribute vec3 a_pos;attribute float a_corner;attribute vec2 a_size;attribute vec2 a_offset;attribute vec2 a_texture_coord;uniform mat4 u_matrix;uniform vec2 u_size;uniform vec2 u_offset;uniform float devicePixelRatio;varying vec2 v_texture_coord;vec3 transformCoord(vec3 coord,vec2 size,float corner){float x=coord.x;float y=coord.y;if(corner==1.0){x-=size[0];y+=size[1];}else if(corner==2.0){x+=size[0];y+=size[1];}else if(corner==3.0){x+=size[0];y-=size[1];}else{x-=size[0];y-=size[1];}return vec3(x,y,coord.z);}void main(){v_texture_coord=a_texture_coord;vec4 position=u_matrix*vec4(a_pos,1.0);vec3 screen=position.xyz/position.w;vec2 halfSize=a_size/MAPV_resolution*devicePixelRatio;vec3 current=transformCoord(screen,halfSize,a_corner);current.xy=current.xy-a_offset*2./MAPV_resolution*devicePixelRatio;gl_Position=vec4(current,1.0);}\",\nfragmentShader:\"precision highp float;varying vec2 v_texture_coord;uniform sampler2D u_icon;uniform vec4 uSelectedColor;void main(){vec4 textureColor=texture2D(u_icon,vec2(v_texture_coord.x,1.0-v_texture_coord.y));if(textureColor.a==0.0){discard;}gl_FragColor=textureColor;\\n#if defined(PICK)\\nif(mapvIsPicked()){gl_FragColor=vec4(uSelectedColor.rgb,gl_FragColor.a);}\\n#endif\\n}\",defines:b.enablePicked?[\"PICK\"]:[]},this);this.vertexBuffer=new S({gl:a,target:\"ARRAY_BUFFER\",usage:\"STATIC_DRAW\"});this.uvBuffer=\nnew S({gl:a,target:\"ARRAY_BUFFER\",usage:\"STATIC_DRAW\"});this.indexBuffer=new S({gl:a,target:\"ELEMENT_ARRAY_BUFFER\",usage:\"STATIC_DRAW\"});b=[{name:\"a_pos\",buffer:this.vertexBuffer,size:3,stride:32,type:\"FLOAT\",offset:0},{name:\"a_corner\",buffer:this.vertexBuffer,size:1,stride:32,type:\"FLOAT\",offset:12},{name:\"a_size\",buffer:this.vertexBuffer,size:2,stride:32,type:\"FLOAT\",offset:16},{name:\"a_offset\",buffer:this.vertexBuffer,size:2,stride:32,type:\"FLOAT\",offset:24},{name:\"a_texture_coord\",buffer:this.uvBuffer,\nsize:2,stride:8,type:\"FLOAT\",offset:0}];b=b.concat(this.getCommonAttributes());this.vertexArray=new za({gl:a,program:this.program,attributes:b})}},{key:\"onChanged\",value:function(a,c){var b=this;this.gl&&(this.loadTextureTime&&clearTimeout(this.loadTextureTime),this.loadTextureTime=setTimeout(function(){b.processCache(a,c)},0))}},{key:\"processCache\",value:function(a,c){var b=this;this.cachedData=[];this.iconHash=new ag;for(var d=a.icon,k=a.width,h=a.height,m=a.offset,n=0;n<c.length;n++){var p=this.normizedPoint(c[n].geometry.coordinates),\nl=c[n].icon||d;\"properties\"in c[n]&&\"icon\"in c[n].properties&&(l=c[n].properties.icon);var q=c[n].width||k;\"properties\"in c[n]&&\"width\"in c[n].properties&&(q=c[n].properties.width);var r=c[n].height||h;\"properties\"in c[n]&&\"height\"in c[n].properties&&(r=c[n].properties.height);var u=c[n].offset||m;\"properties\"in c[n]&&\"offset\"in c[n].properties&&(u=c[n].properties.offset);p&&l&&(this.cachedData.push({point:p,icon:l,width:q,height:r,offset:u}),p=new Image,this.iconHash.get(l)||this.iconHash.set(l,\np))}c=Nh(this.iconHash.keys()).map(function(a){return new Zf(function(c,d){b.url2canvas(a,function(d){b.iconHash.set(a,d);c()})})});Zf.all(c).then(function(c){b.buildSprite(a);b.webglLayer.render()})}},{key:\"buildSprite\",value:function(a){var b=a.padding,c=this.canvas,g=this.ctx,k=[],h=new ag,m=!0,n=!1,p=void 0;try{for(var l=ed(this.iconHash),q;!(m=(q=l.next()).done);m=!0){var r=db(q.value,2),u=r[1],w=u.width,t=u.height;k.push({w:w+b[0],h:t+b[0],width:w,height:t,key:r[0],icon:u})}}catch(x){n=!0,p=\nx}finally{try{!m&&l.return&&l.return()}finally{if(n)throw p;}}n=Ae(k);for(m=0;m<k.length;m++)p=k[m],h.get(p.key)||h.set(p.key,p);m=Ib(n.w);n=Ib(n.h);c.width=m;c.height=n;g.save();for(c=0;c<k.length;c++)p=k[c],g.drawImage(p.icon,p.x+b[0],p.y+b[1],p.width,p.height);g.restore();this.loadTexture();this.buildVertex(a,h,m,n)}},{key:\"buildVertex\",value:function(a,c,f,g){a=a.enablePicked;for(var b=[],d=[],m=[],n=[],p=0;p<this.cachedData.length;p++){var l=this.cachedData[p],q=l.point,r=l.width,u=l.height,\nw=l.offset;l=c.get(l.icon);r=r||l.icon.width;u=u||l.icon.height;w=w||[0,-u/2];var t=db(q,3);q=t[0];var x=t[1];t=t[2];for(var v=0;4>v;v++)b.push(q,x,t),b.push(v),b.push(r,u),b.push.apply(b,ca(w));r=l.x/f;u=(l.x+l.w)/f;w=(l.y+l.h)/g;l=l.y/g;d.push(r,w,r,l,u,l,u,w);l=4*p;m.push(l,l+2,l+1,l,l+3,l+2);a&&(l=this.indexToRgb(p),n.push(l[0]/255,l[1]/255,l[2]/255),n.push(l[0]/255,l[1]/255,l[2]/255),n.push(l[0]/255,l[1]/255,l[2]/255),n.push(l[0]/255,l[1]/255,l[2]/255))}this.index=m;this.vertexBuffer.updateData(new Float32Array(b));\nthis.uvBuffer.updateData(new Float32Array(d));this.indexBuffer.updateData(new Uint32Array(m));a&&this.pickBuffer.updateData(new Float32Array(n))}},{key:\"render\",value:function(a){if(this.cachedData&&this.cachedData.length&&this.iconHash&&this.texture){var b=a.gl,c=a.matrix,g=this.program;g.use(b);b.enable(b.BLEND);b.blendFunc(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA);g.setUniforms(T(this.getCommonUniforms(a),{u_icon:this.texture,u_matrix:c,devicePixelRatio:window.devicePixelRatio}));0<this.index.length&&\n(this.indexBuffer.bind(),this.vertexArray.bind(),b.drawElements(b.TRIANGLES,this.index.length,b.UNSIGNED_INT,0));b.useProgram(null)}}},{key:\"url2canvas\",value:function(a,c){if(\"object\"===(\"undefined\"===typeof a?\"undefined\":qb(a)))c(a);else{var b=new Image;b.crossOrigin=\"anonymous\";b.onload=function(){var a=b.width,d=b.height,f=document.createElement(\"canvas\");f.width=a;f.height=d;f.getContext(\"2d\").drawImage(b,0,0,a,d);c(f)};b.src=a}}},{key:\"loadTexture\",value:function(){var a=this;this.canvas?Ra(this.gl,\nthis.canvas,function(b){a.texture=b}):this.texture=null}}]);return a}(da),aj=function(c){function a(b){H(this,a);var c=Q(this,(a.__proto__||N(a)).call(this,b));b=c.getOptions();c.shapeLayer=new Ic({enablePicked:b.enablePicked});c.lineLayer=new Af;c.children=[c.shapeLayer,c.lineLayer];return c}R(a,c);L(a,[{key:\"pick\",value:function(a,c){return this.shapeLayer.pick(a,c)}},{key:\"onOptionsChanged\",value:function(a){this.shapeLayer.setOptions({onClick:function(b){a.onClick&&a.onClick(b)},selectedIndex:a.selectedIndex,\nselectedColor:a.selectedColor,height:0,autoSelect:a.autoSelect,color:a.fillColor,opacity:a.fillOpacity,topColor:a.fillColor,useLight:!1});this.lineLayer.setOptions({color:a.lineColor,width:a.lineWidth,lineJoin:a.lineJoin})}},{key:\"onDataChanged\",value:function(a){var b=a.map(function(a){return{geometry:{type:\"LineString\",coordinates:a.geometry.coordinates[0].map(function(a){return 3===a.length?a:[a[0],a[1],.1]})}}});this.shapeLayer.setData(a);this.lineLayer.setData(b)}},{key:\"getDefaultOptions\",value:function(){return{enablePicked:!1,\nselectedIndex:-1,selectedColor:\"#ff0000\",autoSelect:!0,lineColor:\"rgba(250, 250, 25, 1)\",lineWidth:2,lineJoin:\"miter\",fillColor:\"rgba(25, 25, 250, 1)\",fillOpacity:1}}}]);return a}(nb),Y=Y||{},bg=0,Ja=null,bj=Y.Scene=function(c,a){this.name=void 0!==a.name?a.name:null;this.nodes=Array(a.nodes.length);for(var b=0,d=a.nodes.length;b<d;b++)this.nodes[b]=c.nodes[a.nodes[b]];this.extensions=void 0!==a.extensions?a.extensions:null;this.extras=void 0!==a.extras?a.extras:null;this.boundingBox=null},Xa=Y.BoundingBox=\nfunction(c,a,b){c=c||I.fromValues(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);a=a||I.fromValues(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);void 0===b||!0===b?(this.min=I.clone(c),this.max=I.clone(a)):(this.min=c,this.max=a);this.transform=C.create()};Xa.prototype.updateBoundingBox=function(c){I.min(this.min,this.min,c.min);I.max(this.max,this.max,c.max)};Xa.prototype.calculateTransform=function(){this.transform[0]=this.max[0]-this.min[0];\nthis.transform[5]=this.max[1]-this.min[1];this.transform[10]=this.max[2]-this.min[2];this.transform[12]=this.min[0];this.transform[13]=this.min[1];this.transform[14]=this.min[2]};Xa.getAABBFromOBB=function(){var c=I.create(),a=I.create(),b=I.create(),d=I.create(),f=I.create();return function(g,k){I.set(c,k[0],k[1],k[2]);I.set(a,k[4],k[5],k[6]);I.set(b,k[8],k[9],k[10]);k=I.fromValues(k[12],k[13],k[14]);var h=I.clone(k);I.scale(d,c,g.min[0]);I.scale(f,c,g.max[0]);I.min(c,d,f);I.add(k,k,c);I.max(c,d,\nf);I.add(h,h,c);I.scale(d,a,g.min[1]);I.scale(f,a,g.max[1]);I.min(a,d,f);I.add(k,k,a);I.max(a,d,f);I.add(h,h,a);I.scale(d,b,g.min[2]);I.scale(f,b,g.max[2]);I.min(b,d,f);I.add(k,k,b);I.max(b,d,f);I.add(h,h,b);g=new Xa(k,h,!1);g.calculateTransform();return g}}();var cg=Y.Accessor=function(c,a){this.bufferView=a;this.componentType=c.componentType;this.byteOffset=void 0!==c.byteOffset?c.byteOffset:0;this.byteStride=a.byteStride;this.normalized=void 0!==c.normalized?c.normalized:!1;this.count=c.count;\nthis.type=c.type;this.size=fd[this.type];this.min=c.min;this.max=c.max;this.extensions=void 0!==c.extensions?c.extensions:null;this.extras=void 0!==c.extras?c.extras:null};cg.prototype.prepareVertexAttrib=function(c,a){a.vertexAttribPointer(c,this.size,this.componentType,this.normalized,this.byteStride,this.byteOffset);a.enableVertexAttribArray(c)};var Wd=Y.BufferView=function(c,a){this.byteLength=c.byteLength;this.byteOffset=void 0!==c.byteOffset?c.byteOffset:0;this.byteStride=void 0!==c.byteStride?\nc.byteStride:0;this.target=void 0!==c.target?c.target:null;this.data=a.slice(this.byteOffset,this.byteOffset+this.byteLength);this.extensions=void 0!==c.extensions?c.extensions:null;this.extras=void 0!==c.extras?c.extras:null;this.buffer=null};Wd.prototype.createBuffer=function(c){this.buffer=c.createBuffer()};Wd.prototype.bindData=function(c){return this.target?(c.bindBuffer(this.target,this.buffer),c.bufferData(this.target,this.data,c.STATIC_DRAW),c.bindBuffer(this.target,null),!0):!1};var cj=Y.Camera=\nfunction(c){this.name=void 0!==c.name?c.name:null;this.type=c.type;this.othographic=void 0===c.othographic?null:c.othographic;this.perspective=void 0===c.perspective?null:{yfov:c.perspective.yfov,znear:c.perspective.znear,zfar:void 0!==c.perspective.zfar?c.perspective.zfar:null,aspectRatio:void 0!==c.perspective.aspectRatio?c.perspective.aspectRatio:null};this.extensions=void 0!==c.extensions?c.extensions:null;this.extras=void 0!==c.extras?c.extras:null},Fb=Y.Node=function(c,a){this.name=void 0!==\nc.name?c.name:null;this.nodeID=a;this.camera=void 0!==c.camera?c.camera:null;this.matrix=C.create();if(c.hasOwnProperty(\"matrix\")){for(a=0;16>a;++a)this.matrix[a]=c.matrix[a];this.translation=I.create();C.getTranslation(this.translation,this.matrix);this.rotation=rc.create();C.getRotation(this.rotation,this.matrix);this.scale=I.create();C.getScaling(this.scale,this.matrix)}else this.getTransformMatrixFromTRS(c.translation,c.rotation,c.scale);this.children=c.children||[];this.mesh=void 0!==c.mesh?\nJa.glTF.meshes[c.mesh]:null;this.skin=void 0!==c.skin?c.skin:null;void 0!==c.extensions&&void 0!==c.extensions.gl_avatar&&!0===Ja.enableGLAvatar&&(this.skin=new dj(Ja.glTF,Ja.skeletonGltf.skins[Ja.skeletonGltf.json.extensions.gl_avatar.skins[c.extensions.gl_avatar.skin.name]],c.extensions.gl_avatar.skin.inverseBindMatrices));this.weights=void 0!==c.weights?c.weights:null;this.extensions=void 0!==c.extensions?c.extensions:null;this.extras=void 0!==c.extras?c.extras:null;this.aabb=null;this.bvh=new Xa};\nFb.prototype.traverse=function(c,a){a(this,c);c=0;for(var b=this.children.length;c<b;c++)this.children[c].traverse(this,a)};Fb.prototype.traversePostOrder=function(c,a){for(var b=0,d=this.children.length;b<d;b++)this.children[b].traversePostOrder(this,a);a(this,c)};Fb.prototype.traverseTwoExecFun=function(c,a,b){a(this,c);for(var d=0,f=this.children.length;d<f;d++)this.children[d].traverseTwoExecFun(this,a,b);b(this,c)};var dg=C.create();Fb.prototype.getTransformMatrixFromTRS=function(c,a,b){this.translation=\nvoid 0!==c?I.fromValues(c[0],c[1],c[2]):I.fromValues(0,0,0);this.rotation=void 0!==a?Fa.fromValues(a[0],a[1],a[2],a[3]):Fa.fromValues(0,0,0,1);this.scale=void 0!==b?I.fromValues(b[0],b[1],b[2]):I.fromValues(1,1,1);this.updateMatrixFromTRS()};Fb.prototype.updateMatrixFromTRS=function(){C.fromRotationTranslation(dg,this.rotation,this.translation);C.scale(this.matrix,dg,this.scale)};var fj=Y.Mesh=function(c,a){this.meshID=a;this.name=void 0!==c.name?c.name:null;this.primitives=[];this.boundingBox=null;\na=0;for(var b=c.primitives.length;a<b;++a){var d=c.primitives[a];d=new ej(Ja.glTF,d);this.primitives.push(d);d.boundingBox&&(this.boundingBox||(this.boundingBox=new Xa),this.boundingBox.updateBoundingBox(d.boundingBox))}this.boundingBox&&this.boundingBox.calculateTransform();this.weights=void 0!==c.weights?c.weights:null;this.extensions=void 0!==c.extensions?c.extensions:null;this.extras=void 0!==c.extras?c.extras:null},ej=Y.Primitive=function(c,a){this.attributes=a.attributes;this.indices=void 0!==\na.indices?a.indices:null;var b;if(void 0!==a.extensions&&void 0!==a.extensions.gl_avatar&&!0===Ja.enableGLAvatar&&a.extensions.gl_avatar.attributes)for(b in a.extensions.gl_avatar.attributes)this.attributes[b]=a.extensions.gl_avatar.attributes[b];null!==this.indices?(this.indicesComponentType=c.json.accessors[this.indices].componentType,this.indicesLength=c.json.accessors[this.indices].count,this.indicesOffset=c.json.accessors[this.indices].byteOffset||0):(this.drawArraysCount=c.json.accessors[this.attributes.POSITION].count,\nthis.drawArraysOffset=c.json.accessors[this.attributes.POSITION].byteOffset||0);for(b in this.attributes)this.attributes[b]=c.accessors[this.attributes[b]];this.material=void 0!==a.material?c.materials[a.material]:null;this.mode=void 0!==a.mode?a.mode:4;this.targets=a.targets;this.extensions=void 0!==a.extensions?a.extensions:null;this.extras=void 0!==a.extras?a.extras:null;this.boundingBox=this.shader=this.indexBuffer=this.vertexBuffer=this.vertexArray=null;void 0!==this.attributes.POSITION&&(c=\nthis.attributes.POSITION,c.max&&\"VEC3\"===c.type&&(this.boundingBox=new Xa(I.fromValues(c.min[0],c.min[1],c.min[2]),I.fromValues(c.max[0],c.max[1],c.max[2]),!1),this.boundingBox.calculateTransform()))},eg=Y.Texture=function(c){this.name=void 0!==c.name?c.name:null;this.sampler=void 0!==c.sampler?Ja.glTF.samplers[c.sampler]:null;this.source=void 0!==c.source?Ja.glTF.images[c.source]:null;this.extensions=void 0!==c.extensions?c.extensions:null;this.extras=void 0!==c.extras?c.extras:null;this.texture=\nnull};eg.prototype.createTexture=function(c){this.texture=c.createTexture();c.bindTexture(c.TEXTURE_2D,this.texture);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,this.source);c.generateMipmap(c.TEXTURE_2D);c.bindTexture(c.TEXTURE_2D,null)};var fg=Y.Sampler=function(c){this.name=void 0!==c.name?c.name:null;this.magFilter=void 0!==c.magFilter?c.magFilter:null;this.minFilter=void 0!==c.minFilter?c.minFilter:null;this.wrapS=void 0!==c.wrapS?c.wrapS:10497;this.wrapT=void 0!==c.wrapT?c.wrapT:\n10497;this.extensions=void 0!==c.extensions?c.extensions:null;this.extras=void 0!==c.extras?c.extras:null;this.sampler=null};fg.prototype.createSampler=function(c){this.sampler=c.createSampler();this.minFilter?c.samplerParameteri(this.sampler,c.TEXTURE_MIN_FILTER,this.minFilter):c.samplerParameteri(this.sampler,c.TEXTURE_MIN_FILTER,c.NEAREST_MIPMAP_LINEAR);this.magFilter?c.samplerParameteri(this.sampler,c.TEXTURE_MAG_FILTER,this.magFilter):c.samplerParameteri(this.sampler,c.TEXTURE_MAG_FILTER,c.LINEAR);\nc.samplerParameteri(this.sampler,c.TEXTURE_WRAP_S,this.wrapS);c.samplerParameteri(this.sampler,c.TEXTURE_WRAP_T,this.wrapT)};var Xd=Y.TextureInfo=function(c){this.index=c.index;this.texCoord=void 0!==c.texCoord?c.texCoord:0;this.extensions=void 0!==c.extensions?c.extensions:null;this.extras=void 0!==c.extras?c.extras:null},gg=Y.PbrMetallicRoughness=function(c){this.baseColorFactor=void 0!==c.baseColorFactor?c.baseColorFactor:[1,1,1,1];this.baseColorTexture=void 0!==c.baseColorTexture?new Xd(c.baseColorTexture):\nnull;this.metallicFactor=void 0!==c.metallicFactor?c.metallicFactor:1;this.roughnessFactor=void 0!==c.roughnessFactor?c.roughnessFactor:1;this.metallicRoughnessTexture=void 0!==c.metallicRoughnessTexture?new Xd(c.metallicRoughnessTexture):null;this.extensions=void 0!==c.extensions?c.extensions:null;this.extras=void 0!==c.extras?c.extras:null},gj=Y.NormalTextureInfo=function(c){this.index=c.index;this.texCoord=void 0!==c.texCoord?c.texCoord:0;this.scale=void 0!==c.scale?c.scale:1;this.extensions=void 0!==\nc.extensions?c.extensions:null;this.extras=void 0!==c.extras?c.extras:null},hj=Y.OcclusionTextureInfo=function(c){this.index=c.index;this.texCoord=void 0!==c.texCoord?c.texCoord:0;this.strength=void 0!==c.strength?c.strength:1;this.extensions=void 0!==c.extensions?c.extensions:null;this.extras=void 0!==c.extras?c.extras:null},ij=Y.Material=function(c){this.name=void 0!==c.name?c.name:null;this.pbrMetallicRoughness=void 0!==c.pbrMetallicRoughness?new gg(c.pbrMetallicRoughness):new gg({baseColorFactor:[1,\n1,1,1],metallicFactor:1,metallicRoughnessTexture:1});this.normalTexture=void 0!==c.normalTexture?new gj(c.normalTexture):null;this.occlusionTexture=void 0!==c.occlusionTexture?new hj(c.occlusionTexture):null;this.emissiveTexture=void 0!==c.emissiveTexture?new Xd(c.emissiveTexture):null;this.emissiveFactor=void 0!==c.emissiveFactor?c.emissiveFactor:[0,0,0];this.alphaMode=void 0!==c.alphaMode?c.alphaMode:\"OPAQUE\";this.alphaCutoff=void 0!==c.alphaCutoff?c.alphaCutoff:.5;this.doubleSided=c.doubleSided||\n!1;this.extensions=void 0!==c.extensions?c.extensions:null;this.extras=void 0!==c.extras?c.extras:null},jj=Y.Skin=function(c,a,b){this.name=void 0!==a.name?a.name:null;this.skinID=b;this.joints=Array(a.joints.length);var d;b=0;for(d=this.joints.length;b<d;b++)this.joints[b]=c.nodes[a.joints[b]];this.skeleton=void 0!==a.skeleton?c.nodes[a.skeleton]:null;this.inverseBindMatrices=void 0!==a.inverseBindMatrices?c.accessors[a.inverseBindMatrices]:null;this.extensions=void 0!==a.extensions?a.extensions:\nnull;this.extras=void 0!==a.extras?a.extras:null;this.uniformBlockID=bg++;if(this.inverseBindMatrices)for(this.inverseBindMatricesData=qc(this.inverseBindMatrices),this.inverseBindMatrix=[],this.jointMatrixUniformBuffer=null,this.jointMatrixUnidormBufferData=new Float32Array(1040),b=0,d=this.inverseBindMatricesData.length;b<d;b+=16)this.inverseBindMatrix.push(C.fromValues(this.inverseBindMatricesData[b],this.inverseBindMatricesData[b+1],this.inverseBindMatricesData[b+2],this.inverseBindMatricesData[b+\n3],this.inverseBindMatricesData[b+4],this.inverseBindMatricesData[b+5],this.inverseBindMatricesData[b+6],this.inverseBindMatricesData[b+7],this.inverseBindMatricesData[b+8],this.inverseBindMatricesData[b+9],this.inverseBindMatricesData[b+10],this.inverseBindMatricesData[b+11],this.inverseBindMatricesData[b+12],this.inverseBindMatricesData[b+13],this.inverseBindMatricesData[b+14],this.inverseBindMatricesData[b+15]))},dj=Y.SkinLink=function(c,a,b){this.isLink=!0;c.skins||(c.skins=[]);c.skins.push(this);\nthis.name=a.name;this.skinID=c.skins.length-1;this.joints=a.joints;this.skeleton=a.skeleton;this.inverseBindMatrices=void 0!==b?c.accessors[b]:null;this.uniformBlockID=bg++;if(this.inverseBindMatrices)for(this.inverseBindMatricesData=qc(this.inverseBindMatrices),this.inverseBindMatrix=[],this.jointMatrixUniformBuffer=null,this.jointMatrixUnidormBufferData=new Float32Array(1040),c=0,a=this.inverseBindMatricesData.length;c<a;c+=16)this.inverseBindMatrix.push(C.fromValues(this.inverseBindMatricesData[c],\nthis.inverseBindMatricesData[c+1],this.inverseBindMatricesData[c+2],this.inverseBindMatricesData[c+3],this.inverseBindMatricesData[c+4],this.inverseBindMatricesData[c+5],this.inverseBindMatricesData[c+6],this.inverseBindMatricesData[c+7],this.inverseBindMatricesData[c+8],this.inverseBindMatricesData[c+9],this.inverseBindMatricesData[c+10],this.inverseBindMatricesData[c+11],this.inverseBindMatricesData[c+12],this.inverseBindMatricesData[c+13],this.inverseBindMatricesData[c+14],this.inverseBindMatricesData[c+\n15]))},kj=Y.Target=function(c){this.nodeID=void 0!==c.node?c.node:null;this.path=c.path;this.extensions=void 0!==c.extensions?c.extensions:null;this.extras=void 0!==c.extras?c.extras:null},lj=Y.Channel=function(c,a){this.sampler=a.samplers[c.sampler];this.target=new kj(c.target);this.extensions=void 0!==c.extensions?c.extensions:null;this.extras=void 0!==c.extras?c.extras:null},hg=Y.AnimationSampler=function(c,a){this.input=c.accessors[a.input];this.output=c.accessors[a.output];this.inputTypedArray=\nqc(this.input);this.outputTypedArray=qc(this.output);this.interpolation=void 0!==a.interpolation?a.interpolation:\"LINEAR\";this.extensions=void 0!==a.extensions?a.extensions:null;this.extras=void 0!==a.extras?a.extras:null;this.curIdx=0;this.curValue=Fa.create();this.endT=this.inputTypedArray[this.inputTypedArray.length-1];this.inputMax=this.endT-this.inputTypedArray[0]},ig=Fa.create(),jg=Fa.create();hg.prototype.getValue=function(c){c>this.endT&&(c-=this.inputMax*Math.ceil((c-this.endT)/this.inputMax),\nthis.curIdx=0);for(var a=this.inputTypedArray.length;this.curIdx<=a-2&&c>=this.inputTypedArray[this.curIdx+1];)this.curIdx++;this.curIdx>=a-1&&(c-=this.inputMax,this.curIdx=0);a=fd[this.output.type];var b=4===a?rc.slerp:Fa.lerp,d=this.curIdx,f=d*a,g=f+a;c=Math.max(0,c-this.inputTypedArray[d])/(this.inputTypedArray[d+1]-this.inputTypedArray[d]);for(d=0;d<a;d++)ig[d]=this.outputTypedArray[f+d],jg[d]=this.outputTypedArray[g+d];switch(this.interpolation){case \"LINEAR\":b(this.curValue,ig,jg,c)}};var mj=\nY.Animation=function(c,a){this.name=void 0!==a.name?a.name:null;var b;this.samplers=[];var d=0;for(b=a.samplers.length;d<b;d++)this.samplers[d]=new hg(c,a.samplers[d]);this.channels=[];d=0;for(b=a.channels.length;d<b;d++)this.channels[d]=new lj(a.channels[d],this);this.extensions=void 0!==a.extensions?a.extensions:null;this.extras=void 0!==a.extras?a.extras:null},nj=Y.glTFModel=function(c){this.json=c;this.defaultScene=void 0!==c.scene?c.scene:0;this.version=Number(c.asset.version);c.accessors&&(this.accessors=\nArray(c.accessors.length));c.bufferViews&&(this.bufferViews=Array(c.bufferViews.length));c.scenes&&(this.scenes=Array(c.scenes.length));c.nodes&&(this.nodes=Array(c.nodes.length));c.meshes&&(this.meshes=Array(c.meshes.length));c.materials&&(this.materials=Array(c.materials.length));c.textures&&(this.textures=Array(c.textures.length));c.samplers&&(this.samplers=Array(c.samplers.length));c.images&&(this.images=Array(c.images.length));c.skins&&(this.skins=Array(c.skins.length));c.animations&&(this.animations=\nArray(c.animations.length));c.cameras&&(this.cameras=Array(c.cameras.length));this.extensions=void 0!==c.extensions?c.extensions:null;this.extras=void 0!==c.extras?c.extras:null},Gb=Y.glTFLoader=function(c){this._init();this.glTF=null;this.enableGLAvatar=!1;this.linkSkeletonGltf=null};Gb.prototype._init=function(){this._loadDone=!1;this._bufferLoaded=this._bufferRequested=0;this._buffers=[];this._bufferTasks={};this._finishedPendingTasks=this._pendingTasks=this._imageLoaded=this._imageRequested=this._shaderLoaded=\nthis._shaderRequested=0;this.onload=null;Ja=this};Gb.prototype._checkComplete=function(){this._bufferRequested==this._bufferLoaded&&this._imageRequested==this._imageLoaded&&(this._loadDone=!0);this._loadDone&&this._pendingTasks==this._finishedPendingTasks&&(this._postprocess(),this.onload(this.glTF))};Gb.prototype.loadGLTF_GL_Avatar_Skin=function(c,a,b){this.enableGLAvatar=!0;this.skeletonGltf=a;this.loadGLTF(c,b)};Gb.prototype.loadGLTF=function(c,a){this._init();this.onload=a||function(a){};this.baseUri=\nEg(c);var b=this;Fg(c,function(a){a=JSON.parse(a);b.glTF=new nj(a);var c,d=function(a){b._buffers[c]=a;b._bufferLoaded++;if(b._bufferTasks[c]){var d;var f=0;for(d=b._bufferTasks[c].length;f<d;++f)b._bufferTasks[c][f](a)}b._checkComplete()};if(a.buffers)for(c in a.buffers){b._bufferRequested++;var k=a.buffers[c].uri;-1===k.indexOf(\"base64\")&&(k=b.baseUri+k);Gg(k,d)}d=function(a,c){b._imageLoaded++;b.glTF.images[c]=a;b._checkComplete()};var h;if(a.images)for(h in a.images)b._imageRequested++,Hg(b.baseUri+\na.images[h].uri,h,d);b._checkComplete()})};Gb.prototype._postprocess=function(){function c(a,b){var c=m[a.nodeID];null!==b?C.mul(c,m[b.nodeID],a.matrix):C.copy(c,a.matrix)}function a(a,b){var c=m[a.nodeID];b=null!==b?b.bvh:n.boundingBox;a.mesh&&(f=a.mesh,f.boundingBox&&(a.aabb=Xa.getAABBFromOBB(f.boundingBox,c),0===a.children.length&&(I.copy(a.bvh.min,a.aabb.min),I.copy(a.bvh.max,a.aabb.max))));I.min(b.min,b.min,a.bvh.min);I.max(b.max,b.max,a.bvh.max)}Ja=this;var b,d,f;if(this.glTF.cameras){var g=\n0;for(b=this.glTF.cameras.length;g<b;g++)this.glTF.cameras[g]=new cj(this.glTF.json.cameras[g])}if(this.glTF.bufferViews)for(g=0,b=this.glTF.bufferViews.length;g<b;g++)this.glTF.bufferViews[g]=new Wd(this.glTF.json.bufferViews[g],this._buffers[this.glTF.json.bufferViews[g].buffer]);if(this.glTF.accessors)for(g=0,b=this.glTF.accessors.length;g<b;g++)this.glTF.accessors[g]=new cg(this.glTF.json.accessors[g],this.glTF.bufferViews[this.glTF.json.accessors[g].bufferView]);if(this.glTF.materials)for(g=\n0,b=this.glTF.materials.length;g<b;g++)this.glTF.materials[g]=new ij(this.glTF.json.materials[g]);if(this.glTF.samplers)for(g=0,b=this.glTF.samplers.length;g<b;g++)this.glTF.samplers[g]=new fg(this.glTF.json.samplers[g]);if(this.glTF.textures)for(g=0,b=this.glTF.textures.length;g<b;g++)this.glTF.textures[g]=new eg(this.glTF.json.textures[g]);g=0;for(b=this.glTF.meshes.length;g<b;g++)this.glTF.meshes[g]=new fj(this.glTF.json.meshes[g],g);g=0;for(b=this.glTF.nodes.length;g<b;g++)this.glTF.nodes[g]=\nnew Fb(this.glTF.json.nodes[g],g);g=0;for(b=this.glTF.nodes.length;g<b;g++){var k=this.glTF.nodes[g];var h=0;for(d=k.children.length;h<d;h++)k.children[h]=this.glTF.nodes[k.children[h]]}var m=Array(this.glTF.nodes.length);g=0;for(b=m.length;g<b;g++)m[g]=C.create();g=0;for(b=this.glTF.scenes.length;g<b;g++){var n=this.glTF.scenes[g]=new bj(this.glTF,this.glTF.json.scenes[g]);n.boundingBox=new Xa;h=0;for(d=n.nodes.length;h<d;h++)k=n.nodes[h],k.traverseTwoExecFun(null,c,a);n.boundingBox.calculateTransform()}h=\n0;for(d=this.glTF.nodes.length;h<d;h++)k=this.glTF.nodes[h],null!==k.bvh&&k.bvh.calculateTransform();if(this.glTF.animations)for(g=0,b=this.glTF.animations.length;g<b;g++)this.glTF.animations[g]=new mj(this.glTF,this.glTF.json.animations[g]);if(this.glTF.json.skins)for(g=0,b=this.glTF.skins.length;g<b;g++)for(this.glTF.skins[g]=new jj(this.glTF,this.glTF.json.skins[g],g),k=this.glTF.skins[g].joints,h=0,d=k.length;h<d;h++)k[h].jointID=h;g=0;for(b=this.glTF.nodes.length;g<b;g++)k=this.glTF.nodes[g],\nnull!==k.skin&&\"number\"==typeof k.skin&&(k.skin=this.glTF.skins[k.skin])};var fd={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},kg=function(c){function a(b,c){H(this,a);return Q(this,(a.__proto__||N(a)).call(this,b,c))}R(a,c);L(a,[{key:\"getDefaultOptions\",value:function(){return{scale:1}}},{key:\"initialize\",value:function(a){var b=this;this.gl=a;var c=this.getOptions();this.gltfObj=Ig({gl:a,options:c});(new Gb).loadGLTF(c.url,function(a){b.gltfObj.setupScene(a);b.webglLayer.render()})}},{key:\"onChanged\",\nvalue:function(a,c){}},{key:\"render\",value:function(a){var b=a.gl;a=a.matrix;var c=this.getData(),g=this.getOptions(),k=g.scale,h=[k,k,k];\"px\"===g.unit&&this.map&&(h=this.map.getZoomUnits(),h=[k*h,k*h,k*h]);for(k=0;k<c.length;k++){var m=c[k].geometry.coordinates;g=C.create();var n=C.create();m=this.normizedPoint(m);C.identity(g);C.translate(g,g,[m[0],m[1],0]);C.rotateX(g,g,Math.PI/2);C.rotateY(g,g,(c[k].angle||0)*Math.PI/180);C.scale(g,g,h);C.mul(n,a,g);this.gltfObj.render({gl:b,matrix:n})}}}]);return a}(da),\ntb=tb||{};(function(){function c(a,c,f){f=a.createShader(f);a.shaderSource(f,c);a.compileShader(f);return f}tb.getShaderSource=function(a){return document.getElementById(a).textContent.replace(/^\\s+|\\s+$/g,\"\")};tb.createProgram=function(a,d,f){var b=a.createProgram();d=c(a,d,a.VERTEX_SHADER);f=c(a,f,a.FRAGMENT_SHADER);a.attachShader(b,d);a.deleteShader(d);a.attachShader(b,f);a.deleteShader(f);a.linkProgram(b);a.getProgramInfoLog(b);a.getShaderInfoLog(d);a.getShaderInfoLog(f);return b};var a=tb.loadImage=\nfunction(a,c){var b=new Image;b.crossOrigin=\"Anonymous\";b.src=a;b.onload=c;return b};tb.loadImages=function(b,c){function d(){0>=--k&&c(g)}for(var g=[],k=b.length,h=0;h<k;++h)g.push(a(b[h],d))}})();var oj=function(c){function a(b){H(this,a);var c=Q(this,(a.__proto__||N(a)).call(this,b));b=c.getOptions();c.gltfLayer=new kg({url:b.url,scale:b.scale});c.children=[c.gltfLayer];c.autoUpdate=!0;c.index=0;c.isStarted=!1===b.autoPlay?!1:!0;return c}R(a,c);L(a,[{key:\"onOptionsChanged\",value:function(a){this.gltfLayer.setOptions({})}},\n{key:\"onDataChanged\",value:function(a){this.updatePoints()}},{key:\"lnglatToMercator\",value:function(a,c){c=c*Math.PI/180;c=3189068.5*Math.log((1+Math.sin(c))/(1-Math.sin(c)));return[parseFloat((a*Math.PI/180*6378137).toFixed(2)),parseFloat(c.toFixed(2))]}},{key:\"getDeg\",value:function(a,c){-180<a[0]&&180>a[0]&&(a=this.lnglatToMercator(a[0],a[1]),c=this.lnglatToMercator(c[0],c[1]));var b=180*Math.atan((c[1]-a[1])/(c[0]-a[0]))/Math.PI;c[0]>a[0]&&(b-=180);return b}},{key:\"getPoint\",value:function(a,\nc,f){return[a[0]+(c[0]-a[0])*f,a[1]+(c[1]-a[1])*f]}},{key:\"updatePoints\",value:function(){for(var a=this.getData(),c=[],f=0;f<a.length;f++){var g=a[f].geometry.coordinates;g=this._addPath(g);var k=Math.floor(this.index)%g.length,h=k+3;h>=g.length-1&&(h=--k);h=this.getDeg(g[k],g[h]);c.push({geometry:{type:\"Point\",coordinates:this.getPoint(g[k],g[k+1],this.index%1)},angle:h-90})}this.pointData=c;this.gltfLayer.setData(c,{autoRender:!1})}},{key:\"getCurrentPoint\",value:function(){return this.pointData}},\n{key:\"getDefaultOptions\",value:function(){return{step:.5}}},{key:\"getDistance\",value:function(a,c){var b=a[1]*Math.PI/180,d=c[1]*Math.PI/180;a=2*Math.asin(Math.sqrt(Math.pow(Math.sin((b-d)/2),2)+Math.cos(b)*Math.cos(d)*Math.pow(Math.sin((a[0]*Math.PI/180-c[0]*Math.PI/180)/2),2)));return a=Math.round(6378137E4*a)/1E4}},{key:\"_addPath\",value:function(a){for(var b=a.length,c=0,g=[],k=[],h=1;h<b;h++){var m=this.getDistance(a[h-1],a[h]);g.push(m);c+=m}m=[0];for(h=1;h<b;h++){var n=(g[h-1]/c).toFixed(2);\nm[h]=m[h-1]+parseFloat(n,10);k=k.concat(this._getPath(a[h-1],a[h],1E3*n))}this._pathPercents=m;return k}},{key:\"_getPath\",value:function(a,c,f){if(0===f)return[a];for(var b=[],d=0;d<=f;d++)b.push([(c[0]-a[0])/f*d+a[0],(c[1]-a[1])/f*d+a[1]]);return b}},{key:\"start\",value:function(){this.isStarted=!0}},{key:\"stop\",value:function(){this.isStarted=!1}},{key:\"render\",value:function(b){Wa(a.prototype.__proto__||N(a.prototype),\"render\",this).call(this,b);b=this.getOptions();this.isStarted&&(this.index+=\nb.step);this.updatePoints()}}]);return a}(nb);aa.prototype.parseColors=function(c){this.arrFeatureStyles=[[2,c[0]||\"rgba(79,210,125,1)\",2,2,0,[],0,0],[2,c[0]||\"rgba(79,210,125,1)\",3,2,0,[],0,0],[2,c[0]||\"rgba(79,210,125,1)\",3,2,0,[],0,0],[2,c[0]||\"rgba(79,210,125,1)\",5,2,0,[],0,0],[2,c[0]||\"rgba(79,210,125,1)\",6,2,0,[],0,0],[2,c[2]||\"rgba(255,208,69,1)\",2,2,0,[],0,0],[2,c[2]||\"rgba(255,208,69,1)\",3,2,0,[],0,0],[2,c[2]||\"rgba(255,208,69,1)\",3,2,0,[],0,0],[2,c[2]||\"rgba(255,208,69,1)\",5,2,0,[],0,0],\n[2,c[2]||\"rgba(255,208,69,1)\",6,2,0,[],0,0],[2,c[1]||\"rgba(232,14,14,1)\",2,2,0,[],0,0],[2,c[1]||\"rgba(232,14,14,1)\",3,2,0,[],0,0],[2,c[1]||\"rgba(232,14,14,1)\",3,2,0,[],0,0],[2,c[1]||\"rgba(232,14,14,1)\",5,2,0,[],0,0],[2,c[1]||\"rgba(232,14,14,1)\",6,2,0,[],0,0],[2,c[3]||\"rgba(181,0,0,1)\",2,2,0,[],0,0],[2,c[3]||\"rgba(181,0,0,1)\",3,2,0,[],0,0],[2,c[3]||\"rgba(181,0,0,1)\",3,2,0,[],0,0],[2,c[3]||\"rgba(181,0,0,1)\",5,2,0,[],0,0],[2,c[3]||\"rgba(181,0,0,1)\",6,2,0,[],0,0],[2,\"rgba(255,255,255,1)\",4,0,0,[],0,0],\n[2,\"rgba(255,255,255,1)\",5.5,0,0,[],0,0],[2,\"rgba(255,255,255,1)\",7,0,0,[],0,0],[2,\"rgba(255,255,255,1)\",8.5,0,0,[],0,0],[2,\"rgba(255,255,255,1)\",10,0,0,[],0,0]]};aa.prototype.setColors=function(c){this.parseColors(c)};aa.prototype.initialize=function(c){this._initialize||(this._initialize=!0)};aa.prototype.clearCache=function(c){this.cache={}};aa.prototype.setMap=function(c){c?(this.map=c,this._initialize?this.canvaslayer.show():this.initialize(c)):this.canvaslayer.hide()};aa.prototype.draw=function(c){c=\nc||{};c.clearCache&&this.clearCache();this.canvaslayer.draw()};aa.prototype.clear=function(){};aa.prototype.update=function(){var c=this.map,a=this.getDataZoom(),b=Math.pow(2,18-a),d=256*b,f=c.getCenter(),g=Math.ceil(f.lng/d),k=Math.ceil(f.lat/d),h=this.tileSize,m=a-Math.round(c.getZoom());0<m&&(h/=Math.pow(2,m));d=[g,k,(f.lng-g*d)/d*h,(f.lat-k*d)/d*h];g=c.getBounds();f=g.getNorthEast();g=g.getSouthWest();c.getSize();c.getSize();c=(f.lng-g.lng)/b;b=(f.lat-g.lat)/b;f=d[1]-Math.ceil((b/2-d[3])/h);g=\nd[0]+Math.ceil((c/2+d[2])/h);k=d[1]+Math.ceil((b/2+d[3])/h);b=[];for(h=d[0]-Math.ceil((c/2-d[2])/h);h<g;h++)for(d=f;d<k;d++)b.push([h,d,a]);this.tilesOrder=b;this._loadCount={};for(h=0;h<b.length;h++)d=b[h][0],c=b[h][1],this._loadCount[d+\"_\"+c+\"_\"+b[h][2]]=!1;for(h=0;h<b.length;h++)d=b[h][0],c=b[h][1],this.showTile(d,c,a)};aa.prototype.showTile=function(c,a,b){this._parseDataAndDraw(c,a,b)};aa.prototype.drawCurrentData=function(){this.clear();for(var c=[],a=0;a<this.tilesOrder.length;a++){var b=this.tilesOrder[a][0],\nd=this.tilesOrder[a][1],f=this.tilesOrder[a][2],g=this.cache[this.getCacheKey(b,d,f)];if(g)for(b=this._drawFeatures(g,b,d,f),d=0;d<b.length;d++)c.push(b[d])}this.lineLayer.setData(c)};aa.prototype.isAllLoaded=function(){var c=!0,a;for(a in this._loadCount)if(!this._loadCount[a]){c=!1;break}return c};aa.prototype.getCacheKey=function(c,a,b){return c+\"_\"+a+\"_\"+b};aa.prototype.getDataZoom=function(){var c=Math.round(this.map.getZoom());19<c&&(c=19);return c};aa.prototype._parseDataAndDraw=function(c,\na,b){var d=this,f=d.map,g=f.getCenter(),k=Math.round(f.getZoom()),h=this.getCacheKey(c,a,b),m=\"_cbk\"+(1E5*Math.random()).toFixed(0),n=this.getTileUrl(c,a,b,\"BMapGL.\"+m);BMapGL[m]=function(n){d._loadCount[c+\"_\"+a+\"_\"+b]=!0;var l=f.getCenter(),p=Math.round(f.getZoom());l.equals(g)&&p===k?(l=n.content&&n.content.tf,n.data&&(l=n.data),d.cache[h]=l?{traffic:l,precision:n.precision}:null,d.drawTogether&&d.isAllLoaded()&&d.drawCurrentData()):p!==k&&d.clear();delete BMapGL[m]};void 0!==d.cache[h]?(d._loadCount[c+\n\"_\"+a+\"_\"+b]=!0,d.drawTogether&&d.isAllLoaded()&&d.drawCurrentData()):this.request(n)};aa.prototype.getTileUrl=function(c,a,b,d){return\"https://sp3.baidu.com/7_AZsjOpB1gCo2Kml5_Y_DAcsMJiwa/traffic/?qt=vtraffic&x=\"+c+\"&y=\"+a+\"&z=\"+b+\"&fn=\"+d+\"&t=\"+(new Date).getTime()};aa.prototype._drawFeatures=function(c,a,b,d){var f=10;d=Math.pow(2,18-d);this.map.getCenter();var g=this.tileSize;a=[a*g*d,(b+1)*g*d];b=[];if(c&&c.traffic){f*=c.precision;c=c.traffic;g=0;for(var k=c.length;g<k;g++){var h=c[g],m=h[1];\nh=this.arrFeatureStyles[h[3]];var n=m[0]/f,p=-m[1]/f,l=[];l.push([a[0]+n*d,a[1]+p*d]);for(var q=2,r=m.length;q<r;q+=2)n+=m[q]/f,p-=m[q+1]/f,l.push([a[0]+n*d,a[1]+p*d,1]);b.push({color:h[1],geometry:{type:\"LineString\",coordinates:l}})}}return b};aa.prototype.request=function(c,a){if(a){var b=(1E5*Math.random()).toFixed(0);BMapGL._rd[\"_cbk\"+b]=function(c){a&&a(c);delete BMapGL._rd[\"_cbk\"+b]};c+=\"&callback=BMapGL._rd._cbk\"+b}var d=document.createElement(\"script\");d.type=\"text/javascript\";d.charset=\"utf-8\";\nd.src=c;d.addEventListener?d.addEventListener(\"load\",function(a){a=a.target;a.parentNode.removeChild(a)},!1):d.attachEvent&&d.attachEvent(\"onreadystatechange\",function(a){a=window.event.srcElement;!a||\"loaded\"!==a.readyState&&\"complete\"!==a.readyState||a.parentNode.removeChild(a)});setTimeout(function(){document.getElementsByTagName(\"head\")[0].appendChild(d);d=null},1)};aa.prototype.getRGBA=function(c){c>>>=0;return\"rgba(\"+(c>>24&255)+\",\"+(c>>16&255)+\",\"+(c>>8&255)+\",\"+(c&255)/256+\")\"};aa.prototype.getLineCap=\nfunction(c){return[\"butt\",\"square\",\"round\"][c]};aa.prototype.getLineJoin=function(c){return[\"miter\",\"bevel\",\"round\"][c]};var pj=function(c){function a(b){H(this,a);b=Q(this,(a.__proto__||N(a)).call(this,b));b.autoUpdate=!0;b.getOptions();var c=new Gf({color:\"rgba(257, 254, 47, 0.9)\",zoom:18,duration:.8,interval:.2,trailLength:.4}),f=new Bf({height:5,color:\"rgba(257, 254, 47, 0.9)\",trailLength:2,step:.02,startTime:0,endTime:4});b.lineLayer=c;b.wallTripLayer=f;b.children=[c,f];return b}R(a,c);L(a,[{key:\"initialize\",\nvalue:function(b){Wa(a.prototype.__proto__||N(a.prototype),\"initialize\",this).call(this,b);b=this.map.map;var c=new aa({});c.lineLayer=this.lineLayer;c.wallTripLayer=this.wallTripLayer;this.trafficTileManager=c;c.setMap(b);c.update();b.addEventListener(\"moveend\",function(){c.update()});b.addEventListener(\"zoomend\",function(){c.update()});b.addEventListener(\"ondraw\",function(){})}},{key:\"onOptionsChanged\",value:function(a){}},{key:\"onDataChanged\",value:function(a){}},{key:\"getDefaultOptions\",value:function(){return{}}}]);\nreturn a}(nb),qj=function(c){function a(b,c){H(this,a);b=Q(this,(a.__proto__||N(a)).call(this,b,c));b.bufferData=[];return b}R(a,c);L(a,[{key:\"getDefaultOptions\",value:function(){return{size:13,unit:\"px\",height:0,max:100,min:0}}},{key:\"initialize\",value:function(a){var b=this;this.gl=a;var c=this.getOptions();this.inverseMatrix=C.create(Float64Array);this.frameBuffer=new va(a);this.webglLayer.map.onResize(function(){b.frameBuffer=new va(a)});this.circle=Jg(64);this.circleTexture=rb(a,this.circle,\n{TEXTURE_MAG_FILTER:\"LINEAR\",TEXTURE_MIN_FILTER:\"LINEAR\",TEXTURE_WRAP_S:\"CLAMP_TO_EDGE\",TEXTURE_WRAP_T:\"CLAMP_TO_EDGE\"});this.intensity=new na({gradient:c.gradient});this.paletteTexture=rb(a,this.intensity.paletteCtx.canvas,{TEXTURE_MAG_FILTER:\"LINEAR\",TEXTURE_MIN_FILTER:\"LINEAR\",TEXTURE_WRAP_S:\"CLAMP_TO_EDGE\",TEXTURE_WRAP_T:\"CLAMP_TO_EDGE\"});this.offlineProgram=new V(this.gl,{vertexShader:\"uniform mat4 u_matrix;uniform mat4 pointToPixelMatrix;uniform mat4 pixelToViewMatrix;uniform mat4 projectionMatrix;uniform int unit;uniform float size;uniform float max;uniform float min;attribute vec3 aPos;attribute vec2 aOffset;attribute float aCount;varying vec2 vOffset;varying float vCount;varying vec3 vPosition;void main(){vOffset=aOffset;vCount=(aCount-min)/(max-min);if(unit==1){vec2 pos=(pointToPixelMatrix*vec4(aPos.xy,0.0,1.0)).xy+aOffset.xy*size/2.0;gl_Position=projectionMatrix*pixelToViewMatrix*vec4(pos,0.0,1.0);}else{vec2 pos=aPos.xy+aOffset.xy*size;gl_Position=u_matrix*vec4(pos,0.0,1.0);}vPosition=vec3(gl_Position.z/gl_Position.w);}\",\nfragmentShader:\"varying vec2 vOffset;varying float vCount;varying vec3 vPosition;uniform sampler2D uCircle;void main(){vec4 circle=texture2D(uCircle,(vOffset+1.0)/2.0);float intensity=circle.a*vCount;if(intensity<=0.0){discard;}gl_FragColor=vec4(vPosition,intensity);}\"},this);this.offlineBuffer=new S({gl:a,target:\"ARRAY_BUFFER\",usage:\"STATIC_DRAW\"});this.offlineIndexBuffer=new S({gl:a,target:\"ELEMENT_ARRAY_BUFFER\",usage:\"STATIC_DRAW\"});this.offlineVertexArray=new za({gl:a,program:this.offlineProgram,\nattributes:[{stride:24,name:\"aPos\",buffer:this.offlineBuffer,size:3,type:\"FLOAT\",offset:0},{stride:24,name:\"aOffset\",buffer:this.offlineBuffer,size:2,type:\"FLOAT\",offset:12},{stride:24,name:\"aCount\",buffer:this.offlineBuffer,size:1,type:\"FLOAT\",offset:20}]});this.indexBuffer=new S({gl:a,target:\"ELEMENT_ARRAY_BUFFER\",usage:\"STATIC_DRAW\"});this.program=new V(this.gl,{vertexShader:\"attribute vec2 aPos;varying vec2 vPos;uniform float uHeight;uniform mat4 pixelToViewMatrix;uniform mat4 projectionMatrix;uniform sampler2D u_sampler;uniform mat4 inverseMatrix;void main(){vPos=aPos;if(uHeight<=0.0){gl_Position=vec4(aPos,0.0,1.0);}else{vec4 gray=texture2D(u_sampler,(aPos+1.0)/2.0);vec4 m0=inverseMatrix*vec4(aPos.xy,0.0,1.0);vec4 m1=inverseMatrix*vec4(aPos.xy,1.0,1.0);m0/=m0.w;m1/=m1.w;vec4 pixel=m0+(-m0.z/(m1.z-m0.z))*(m1-m0);pixel.z=uHeight*gray.a;gl_Position=projectionMatrix*pixelToViewMatrix*vec4(pixel.xyz,1.0);}}\",\nfragmentShader:\"uniform sampler2D u_sampler;uniform sampler2D u_samplerPalette;uniform float uHeight;varying vec2 vPos;void main(){vec4 gray=texture2D(u_sampler,(vPos+1.0)/2.0);float grayAlpha=gray.a;if(grayAlpha<=0.0){discard;}vec4 color=texture2D(u_samplerPalette,vec2(grayAlpha,1.0));gl_FragColor=vec4(color.rgb,grayAlpha);}\"},this);this.buffer=new S({gl:a,target:\"ARRAY_BUFFER\",usage:\"STATIC_DRAW\"});this.vertexArray=new za({gl:a,program:this.program,attributes:[{stride:8,name:\"aPos\",buffer:this.buffer,\nsize:2,type:\"FLOAT\",offset:0}]});c=[];for(var g=[],k=Math.floor(a.canvas.width/4),h=Math.floor(a.canvas.height/4),m=k+1,n=0;n<=h;n++)for(var p=0;p<=k;p++)if(c.push(2*p/k-1,2*n/h-1),p<k&&n<h){var l=m*n+p,q=m*(n+1)+p;g.push(l,l+1,q+1);g.push(l,q+1,q)}this.bufferData=c;this.buffer.updateData(new Float32Array(c));this.indexData=g;this.indexBuffer.updateData(new Uint32Array(g))}},{key:\"onOptionsChanged\",value:function(a,c){var b=this.gl;b&&a.gradient!==c.gradient&&(this.intensity=new na({gradient:a.gradient}),\nthis.paletteTexture=rb(b,this.intensity.paletteCtx.canvas,{TEXTURE_MAG_FILTER:\"LINEAR\",TEXTURE_MIN_FILTER:\"LINEAR\",TEXTURE_WRAP_S:\"CLAMP_TO_EDGE\",TEXTURE_WRAP_T:\"CLAMP_TO_EDGE\"}))}},{key:\"onDataChanged\",value:function(a){if(this.gl){var b=[],c=[];this.getOptions();for(var g=0;g<a.length;g++){var k=a[g],h=this.normizedPoint(a[g].geometry.coordinates),m=void 0===k.count?1:k.count;\"properties\"in k&&\"count\"in k.properties&&(m=k.properties.count);b.push(h[0],h[1],h[2]);b.push(-1,-1);b.push(m);b.push(h[0],\nh[1],h[2]);b.push(-1,1);b.push(m);b.push(h[0],h[1],h[2]);b.push(1,1);b.push(m);b.push(h[0],h[1],h[2]);b.push(1,-1);b.push(m);k=4*g;c.push(k+0,k+2,k+1);c.push(k+0,k+3,k+2)}this.offlineBufferData=b;this.offlineIndexData=c;this.offlineBuffer.updateData(new Float32Array(b));this.offlineIndexBuffer.updateData(new Uint32Array(c))}}},{key:\"render\",value:function(a){var b=a.gl,c=a.matrix,g=a.pointToPixelMatrix,k=a.pixelToViewMatrix;a=a.projectionMatrix;if(this.offlineBufferData&&!(0>=this.offlineBufferData.length)){var h=\nthis.getOptions();b.enable(b.BLEND);b.disable(b.DEPTH_TEST);b.blendFunc(b.ONE,b.ONE);b.bindFramebuffer(b.FRAMEBUFFER,this.frameBuffer.framebuffer);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);this.offlineProgram.use(b);this.offlineProgram.setUniforms({u_matrix:c,uCircle:this.circleTexture,pointToPixelMatrix:g,pixelToViewMatrix:k,projectionMatrix:a,unit:\"px\"===h.unit?1:0,size:h.size,max:h.max,min:h.min});this.offlineVertexArray.bind();this.offlineIndexBuffer.bind();b.drawElements(b.TRIANGLES,\nthis.offlineIndexData.length,b.UNSIGNED_INT,0);b.bindFramebuffer(b.FRAMEBUFFER,null);this.program.use(b);this.vertexArray.bind();c=this.inverseMatrix;C.identity(c);C.multiply(c,a,k);C.invert(c,c);b.enable(b.DEPTH_TEST);b.disable(b.BLEND);this.program.setUniforms({u_sampler:this.frameBuffer.framebuffer.texture,u_samplerPalette:this.paletteTexture,uHeight:h.height,pixelToViewMatrix:k,inverseMatrix:c,projectionMatrix:a});this.indexBuffer.bind();b.drawElements(b.TRIANGLES,this.indexData.length,b.UNSIGNED_INT,\n0)}}}]);return a}(da),rj=function(){function c(a){H(this,c);this.layers=[];this.options=a;this.webglLayer=a.webglLayer}L(c,[{key:\"addLayer\",value:function(a){for(var b=!1,c=0;c<this.layers.length;c++)if(this.layers[c]===a){b=!0;break}b||(a.map=this.webglLayer.map,\"threeLayer\"===a.layerType?(a.setWebglLayer(this.webglLayer),b=a.getThreeLayer(),this.addLayer(b),a.initialize&&a.initialize(b)):(a.setWebglLayer(this.webglLayer),a.commonInitialize&&a.commonInitialize(this.webglLayer.gl),a.initialize&&a.initialize(this.webglLayer.gl),\na.onOptionsChanged(a.getOptions(),{}),a.onDataChanged(a.getData()),a.onChanged(a.getOptions(),a.getData())),this.layers.push(a));this.options.autoUpdate&&(this.isRequestAnimation()?this.webglLayer.startAnimation():this.webglLayer.stopAnimation());this.webglLayer.render()}},{key:\"removeLayer\",value:function(a){for(var b=0;b<this.layers.length;b++)this.layers[b]===a&&(a.destroy&&a.destroy(),this.layers.splice(b,1));this.options.autoUpdate&&(this.isRequestAnimation()?this.webglLayer.startAnimation():\nthis.webglLayer.stopAnimation());this.webglLayer.render()}},{key:\"removeAllLayers\",value:function(){for(var a=0;a<this.layers.length;a++){var b=this.layers[a];b.destroy&&b.destroy();this.layers.splice(a,1)}this.webglLayer.render()}},{key:\"getAllLayers\",value:function(){return this.layers}},{key:\"getAllThreeLayers\",value:function(){for(var a=[],b=0;b<this.layers.length;b++){var c=this.layers[b];\"ThreeLayer\"===c.layerType&&a.push(c)}return a}},{key:\"isRequestAnimation\",value:function(){for(var a=!1,\nb=0;b<this.layers.length;b++)if(this.layers[b].isRequestAnimation()){a=!0;break}return a}},{key:\"beforeRender\",value:function(a){a.gl&&this.webglLayer.stateManager.save()}},{key:\"afterRender\",value:function(a){a.gl&&this.webglLayer.stateManager.restore()}},{key:\"renderGLLayers\",value:function(a){this.webglLayer.stateManager.save();this.webglLayer.stateManager.setDefaultState();for(var b=0;b<this.layers.length;b++){var c=this.layers[b];\"threeLayer\"!==c.layerType&&\"ThreeLayer\"!==c.layerType&&(this.beforeRender(a),\na.gl.enable(a.gl.DEPTH_TEST),a.gl.depthFunc(a.gl.LEQUAL),a.gl.enable(a.gl.POLYGON_OFFSET_FILL),a.gl.polygonOffset(1,1),c.render(a),this.afterRender(a))}this.webglLayer.stateManager.restore()}},{key:\"renderThreeLayer\",value:function(a){for(var b=0;b<this.layers.length;b++){var c=this.layers[b];\"ThreeLayer\"===c.layerType&&c.render(a)}}},{key:\"renderThreeLayers\",value:function(a){for(var b=0;b<this.layers.length;b++){var c=this.layers[b];\"threeLayer\"===c.layerType&&(this.beforeRender(a),c.render(a),\nthis.afterRender(a))}}},{key:\"onClick\",value:function(a){for(var b=0;b<this.layers.length;b++){var c=this.layers[b];if(\"threeLayer\"!==c.layerType&&\"ThreeLayer\"!==c.layerType&&c.options.enablePicked&&c.options.onClick&&c.pick){var f=c.pick(a.x,a.y);c.options.onClick(f,a)}}}},{key:\"onDblClick\",value:function(a){for(var b=0;b<this.layers.length;b++){var c=this.layers[b];if(\"threeLayer\"!==c.layerType&&\"ThreeLayer\"!==c.layerType&&c.options.enablePicked&&c.options.onDblClick&&c.pick){var f=c.pick(a.x,a.y);\nc.options.onDblClick(f,a)}}}},{key:\"onRightClick\",value:function(a){for(var b=0;b<this.layers.length;b++){var c=this.layers[b];if(\"threeLayer\"!==c.layerType&&\"ThreeLayer\"!==c.layerType&&c.options.enablePicked&&c.options.onRightClick&&c.pick){var f=c.pick(a.x,a.y);c.options.onRightClick(f,a)}}}},{key:\"onMousemove\",value:function(a){for(var b=!1,c=0;c<this.layers.length;c++){var f=this.layers[c];if(\"threeLayer\"!==f.layerType&&\"ThreeLayer\"!==f.layerType&&f.options.enablePicked&&f.pick){var g=f.pick(a.x,\na.y);this.webglLayer.map.map.platform.style.cursor=-1===g.dataIndex?\"default\":\"pointer\";if(f.options.onMousemove)f.options.onMousemove(g,a);f.options.autoSelect&&(b=!0)}}b&&(this.webglLayer.isAnimation||this.webglLayer.render())}}]);return c}(),sj=function(){function c(a){var b=this;H(this,c);this.options={autoUpdate:!0};T(this.options,a);var d=a.pointOffset;this.webglLayer=a.webglLayer||new Df(a.map,this.options);this.layerManager=new rj({autoUpdate:this.options.autoUpdate,webglLayer:this.webglLayer});\nthis.effectManager=new of(this.webglLayer.gl);this.webglRender={render:function(){}};this.options.effects&&this.effectManager.setEffects([this.webglRender].concat(this.options.effects));this.webglLayer.onRender(function(a){b._render(a)});this.webglLayer.onClick=function(a){b.layerManager.onClick(a)};this.webglLayer.onDblClick=function(a){b.layerManager.onDblClick(a)};this.webglLayer.onRightClick=function(a){b.layerManager.onRightClick(a)};this.webglLayer.onMousemove=function(a){b.layerManager.onMousemove(a)};\nd||\"cesium\"===this.webglLayer.options.mapType||(d=this.webglLayer.map.getCenter(),this.webglLayer.options.pointOffset=[d.lng,d.lat]);this.webglLayer.map.onResize(function(){b.effectManager.onResize()});if(this.postProcessing=a.postProcessing)this.postProcessing.setWebglLayer(this.webglLayer),a=this.postProcessing.getThreeLayer(),this.addLayer(a),this.postProcessing.initialize(a),a.postProcessing=this.postProcessing}L(c,[{key:\"renderCanvas\",value:function(a){var b=this;this.postProcessing?(this.postProcessing.addRender(function(){b.renderGLLayers(a)}),\nthis.layerManager.renderThreeLayers(a),this.layerManager.renderThreeLayer(a)):(this.layerManager.renderThreeLayers(a),this.layerManager.renderThreeLayer(a),this.layerManager.renderGLLayers(a))}},{key:\"render\",value:function(){this.webglLayer.render()}},{key:\"_render\",value:function(a){var b=this,c=this.options.effects;c&&0<c.length?(this.webglRender.render=function(){b.renderCanvas(a)},this.effectManager.render()):(this.webglLayer.saveFramebuffer(),this.renderCanvas(a),this.webglLayer.restoreFramebuffer())}},\n{key:\"onRender\",value:function(a){this.webglLayer.onRender(a)}},{key:\"destroy\",value:function(){this.stopAnimation();this.layerManager.removeAllLayers();this.webglLayer.destroy()}},{key:\"isRequestAnimation\",value:function(){return this.layerManager.isRequestAnimation()}},{key:\"startAnimation\",value:function(){this.webglLayer.startAnimation()}},{key:\"stopAnimation\",value:function(){this.webglLayer.stopAnimation()}},{key:\"addLayer\",value:function(a){this.layerManager.addLayer(a)}},{key:\"removeLayer\",\nvalue:function(a){this.layerManager.removeLayer(a)}},{key:\"getAllLayers\",value:function(){return this.layerManager.getAllLayers()}},{key:\"getAllThreeLayers\",value:function(){return this.layerManager.getAllThreeLayers()}}]);return c}();window._hmt=window._hmt||[];(function(){var c=document.createElement(\"script\");c.src=\"https://hm.baidu.com/hm.js?e8002ef3d9e0d8274b5b74cc4a027d08\";var a=document.getElementsByTagName(\"script\")[0];a.parentNode.insertBefore(c,a)})();y.View=sj;y.GridLayer=xf;y.HeatGridLayer=\nhi;y.ShapeLayer=Ic;y.SimpleLineLayer=yf;y.LineLayer=Af;y.WallSpriteLayer=Bf;y.LinePointLayer=ob;y.WallLayer=qi;y.WallTripLayer=si;y.HeatLineLayer=ti;y.HoneycombLayer=vi;y.WebglLayer=Df;y.PointLayer=Jd;y.GroundRippleLayer=Bi;y.RippleLayer=Ci;y.SparkLayer=Di;y.ClusterLayer=Ei;y.HeatPointLayer=Fi;y.ShapeLineLayer=Gi;y.PointTripLayer=Hi;y.LineTripLayer=Ii;y.LineFlowLayer=Gf;y.TileLayer=Ji;y.IconLayer=$i;y.PolygonLayer=aj;y.CarLineLayer=oj;y.Layer=da;y.TextLayer=Id;y.TrafficLayer=pj;y.GltfLayer=kg;y.HeatmapLayer=\nqj;y.BlurEffect=Xh;y.BloomEffect=Yh;y.BrightEffect=Zh;y.DepthEffect=$h;y.EffectManager=of;y.getContext=be;y.createTexture=rb;y.loadTextureImage=Ra;y.FrameBufferObject=va;y.Program=V;y.StateManager=nf;y.Buffer=S;y.VertexArray=za;y.CommonLayer=Ad;y.MercatorProjection=ra;y.Canvas=Wc;y.Intensity=na;y.BezierCurve=Qa;y.GeodesicCurve=Ya;y.OdCurve=Vh;y.toRadian=la;y.toAngle=Sc;y.ceilPowerOfTwo=Ib;y.floorPowerOfTwo=Tc;y.approximatelyEqual=Uc;y.__moduleExports=Da;y.vec4=Fa;y.vec3=I;y.vec2=ai;y.quat2=bi;y.quat=\nrc;y.mat4=C;y.mat3=ci;y.mat2d=di;y.mat2=ei;y.glMatrix=fi;Object.defineProperty(y,\"__esModule\",{value:!0})});\n\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/mapvgl/dist/mapvgl.min.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/components/arc.js":
/*!*******************************************************!*\
  !*** ./node_modules/react-bmap/lib/components/arc.js ***!
  \*******************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(/*! react */ \"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _component = __webpack_require__(/*! ./component */ \"./node_modules/react-bmap/lib/components/component.js\");\n\nvar _component2 = _interopRequireDefault(_component);\n\nvar _mapv = __webpack_require__(/*! mapv */ \"./node_modules/mapv/build/mapv.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @file 迁徙组件，弧线\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @author kyle(hinikai@gmail.com)\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar Arc = function (_Component) {\n    _inherits(Arc, _Component);\n\n    function Arc(args) {\n        _classCallCheck(this, Arc);\n\n        var _this = _possibleConstructorReturn(this, (Arc.__proto__ || Object.getPrototypeOf(Arc)).call(this, args));\n\n        _this.state = {};\n        return _this;\n    }\n\n    /**\n     * 设置默认的props属性\n     */\n\n\n    _createClass(Arc, [{\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps) {\n            this.initialize();\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.initialize();\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            this.destroy();\n        }\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            this.lineLayer.destroy();\n            this.lineLayer = null;\n            this.pointLayer.destroy();\n            this.pointLayer = null;\n            this.textLayer.destroy();\n            this.textLayer = null;\n            if (this.animationLayer) {\n                this.animationLayer.destroy();\n                this.animationLayer = null;\n            }\n        }\n    }, {\n        key: 'createLayers',\n        value: function createLayers() {\n\n            this._createLayer = true;\n            var map = this.map;\n\n            var self = this;\n            this.lineDataSet = new _mapv.DataSet([]);\n            this.lineLayer = new _mapv.baiduMapLayer(map, this.lineDataSet, {});\n\n            this.pointDataSet = new _mapv.DataSet([]);\n            this.pointLayer = new _mapv.baiduMapLayer(map, this.pointDataSet, {});\n\n            this.textLayer = new _mapv.baiduMapLayer(map, this.pointDataSet, {});\n\n            if (this.props.enableAnimation) {\n                this.animationLayer = new _mapv.baiduMapAnimationLayer(map, this.lineDataSet, {});\n            }\n        }\n    }, {\n        key: 'initialize',\n        value: function initialize() {\n            var _this2 = this;\n\n            var map = this.map = this.props.map;\n            if (!map) {\n                return;\n            }\n\n            if (!this._createLayer) {\n                this.createLayers();\n            }\n\n            var lineData = [];\n            var pointData = [];\n\n            if (this.props.data) {\n                var points = [];\n                var projection = map.getMapType().getProjection();\n\n                this.props.data.forEach(function (item, index) {\n                    var fromCenter = item.from.point || _mapv.utilCityCenter.getCenterByCityName(item.from.city);\n                    var toCenter = item.to.point || _mapv.utilCityCenter.getCenterByCityName(item.to.city);\n                    var curve = _mapv.utilCurve.getPoints([fromCenter, toCenter]);\n\n                    if (_this2.props.coordType === 'bd09mc') {\n                        points.push(projection.pointToLngLat(new BMap.Pixel(fromCenter.lng, fromCenter.lat)));\n                        points.push(projection.pointToLngLat(new BMap.Pixel(toCenter.lng, toCenter.lat)));\n                    } else {\n                        points.push(fromCenter);\n                        points.push(toCenter);\n                    }\n\n                    lineData.push({\n                        strokeStyle: item.color,\n                        geometry: {\n                            type: 'LineString',\n                            coordinates: curve\n                        }\n                    });\n\n                    if (_this2.props.showToPoint !== false) {\n                        pointData.push({\n                            fillStyle: item.color,\n                            text: item.to.name || item.to.city,\n                            geometry: {\n                                type: 'Point',\n                                coordinates: [toCenter.lng, toCenter.lat]\n                            }\n                        });\n                    }\n\n                    if (_this2.props.showFromPoint !== false) {\n                        pointData.push({\n                            fillStyle: item.color,\n                            text: item.from.name || item.from.city,\n                            geometry: {\n                                type: 'Point',\n                                coordinates: [fromCenter.lng, fromCenter.lat]\n                            }\n                        });\n                    }\n\n                    if (points.length > 0) {\n                        if (_this2.props.autoViewport !== false) {\n                            map.setViewport(points, _this2.props.viewportOptions);\n                        }\n                    }\n                });\n            }\n\n            this.lineDataSet.set(lineData);\n            this.lineLayer.update({\n                options: this.props.lineOptions || {\n                    draw: 'simple',\n                    strokeStyle: '#5E87DB',\n                    lineWidth: 3\n                }\n            });\n\n            this.pointDataSet.set(pointData);\n            this.pointLayer.update({\n                options: this.props.pointOptions || {\n                    coordType: this.props.coordType,\n                    draw: 'simple',\n                    fillStyle: '#5E87DB',\n                    size: 5\n                }\n            });\n\n            this.textLayer.update({\n                options: this.props.textOptions || {\n                    coordType: this.props.coordType,\n                    draw: 'text',\n                    font: '18px Arial',\n                    offset: {\n                        x: 0,\n                        y: 12\n                    },\n                    fillStyle: '#333',\n                    size: 12\n                }\n            });\n\n            if (this.props.enableAnimation) {\n                this.animationLayer.update({\n                    options: this.props.animationOptions || {\n                        coordType: this.props.coordType,\n                        fillStyle: 'rgba(255, 250, 250, 0.9)',\n                        lineWidth: 0,\n                        size: 4,\n                        animateTime: 50,\n                        draw: 'simple'\n                    }\n                });\n            } else {\n                this.animationLayer && this.animationLayer.hide();\n            }\n        }\n    }], [{\n        key: 'defaultProps',\n        get: function get() {\n            return {};\n        }\n    }]);\n\n    return Arc;\n}(_component2.default);\n\nexports.default = Arc;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/components/arc.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/components/autocomplete.js":
/*!****************************************************************!*\
  !*** ./node_modules/react-bmap/lib/components/autocomplete.js ***!
  \****************************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(/*! react */ \"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _component = __webpack_require__(/*! ./component */ \"./node_modules/react-bmap/lib/components/component.js\");\n\nvar _component2 = _interopRequireDefault(_component);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Autocomplete = function (_Component) {\n  _inherits(Autocomplete, _Component);\n\n  function Autocomplete() {\n    _classCallCheck(this, Autocomplete);\n\n    return _possibleConstructorReturn(this, (Autocomplete.__proto__ || Object.getPrototypeOf(Autocomplete)).apply(this, arguments));\n  }\n\n  _createClass(Autocomplete, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var ac = new BMap.Autocomplete({\n        'input': 'suggestId'\n      });\n\n      ac.addEventListener('onconfirm', function (e) {\n        _this2.props.onConfirm && _this2.props.onConfirm(e);\n      });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return _react2.default.createElement(\n        'div',\n        null,\n        _react2.default.createElement('input', { style: this.props.style, id: 'suggestId' })\n      );\n    }\n  }]);\n\n  return Autocomplete;\n}(_component2.default);\n\nexports.default = Autocomplete;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/components/autocomplete.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/components/boundary.js":
/*!************************************************************!*\
  !*** ./node_modules/react-bmap/lib/components/boundary.js ***!
  \************************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _component = __webpack_require__(/*! ./component */ \"./node_modules/react-bmap/lib/components/component.js\");\n\nvar _component2 = _interopRequireDefault(_component);\n\nvar _mapv = __webpack_require__(/*! mapv */ \"./node_modules/mapv/build/mapv.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Boundary = function (_Component) {\n    _inherits(Boundary, _Component);\n\n    function Boundary(args) {\n        _classCallCheck(this, Boundary);\n\n        var _this = _possibleConstructorReturn(this, (Boundary.__proto__ || Object.getPrototypeOf(Boundary)).call(this, args));\n\n        _this.state = {};\n        return _this;\n    }\n\n    _createClass(Boundary, [{\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps) {\n            this.initialize();\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this._allRequest = {};\n            this._backData = {};\n            this.initialize();\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            if (this.mapvLayer) {\n                this.mapvLayer.destroy();\n                this.mapvLayer = null;\n            }\n        }\n    }, {\n        key: 'getPointArrayByDataSetData',\n        value: function getPointArrayByDataSetData(dataSetData) {\n            var points = [];\n            for (var i = 0; i < dataSetData.length; i++) {\n                var coordinates = dataSetData[i].geometry.coordinates[0];\n                coordinates.forEach(function (coordinate) {\n                    points.push(new BMap.Point(coordinate[0], coordinate[1]));\n                });\n            }\n            return points;\n        }\n    }, {\n        key: 'getBoundaryData',\n        value: function getBoundaryData() {\n            var sell = this;\n            var data = this.props.data;\n            var map = this.props.map;\n\n            if (!data) {\n                return;\n            }\n\n            this._request = {};\n            var self = this;\n            var bdary = new BMap.Boundary();\n            var dataSetData = [];\n\n            function isAllComplete() {\n                var flag = true;\n                for (var key in self._request) {\n                    if (!self._request[key]) {\n                        flag = false;\n                    }\n                }\n\n                if (flag) {\n                    self.dataSet.set(dataSetData);\n                    var points = self.getPointArrayByDataSetData(dataSetData);\n                    if (points.length > 0 && self.props.autoViewport !== false) {\n                        map.setViewport(points, self.props.viewportOptions);\n                    }\n                }\n            }\n\n            data.forEach(function (item, index) {\n                self._request[item.name] = false;\n                if (self._backData[item.name]) {\n                    dataSetData = dataSetData.concat(self._backData[item.name]);\n                    self._request[item.name] = true;\n                }\n            });\n\n            isAllComplete();\n\n            data.forEach(function (item, index) {\n                if (self._request[item.name]) {\n                    return;\n                }\n\n                if (self._allRequest[item.name]) {\n                    return;\n                } else {\n                    self._allRequest[item.name] = true;\n                }\n\n                bdary.get(item.name, function (rs) {\n                    //获取行政区域\n                    var tmpData = [];\n                    for (var i = 0; i < rs.boundaries.length; i++) {\n                        var coordinates = [];\n                        var path = rs.boundaries[i].split(';');\n                        for (var j = 0; j < path.length; j++) {\n                            coordinates.push(path[j].split(','));\n                        }\n\n                        tmpData.push({\n                            geometry: {\n                                type: 'Polygon',\n                                coordinates: [coordinates]\n                            },\n                            count: item.count\n                        });\n                    }\n                    self._backData[item.name] = tmpData;\n                    dataSetData = dataSetData.concat(tmpData);\n                    self._request[item.name] = true;\n                    isAllComplete();\n                });\n            });\n        }\n    }, {\n        key: 'initialize',\n        value: function initialize() {\n            var map = this.props.map;\n            if (!map) {\n                return;\n            }\n\n            if (!this.mapvLayer) {\n                this.dataSet = new _mapv.DataSet([]);\n\n                var options = this.props.layerOptions || {\n                    gradient: {\n                        0: 'yellow',\n                        1: 'red'\n                    },\n                    max: 100,\n                    globalAlpha: 0.8,\n                    draw: 'intensity'\n                };\n\n                this.mapvLayer = new _mapv.baiduMapLayer(map, this.dataSet, options);\n            }\n\n            this.getBoundaryData();\n        }\n    }]);\n\n    return Boundary;\n}(_component2.default);\n\nexports.default = Boundary;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/components/boundary.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/components/circle.js":
/*!**********************************************************!*\
  !*** ./node_modules/react-bmap/lib/components/circle.js ***!
  \**********************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _graphy = __webpack_require__(/*! ./graphy */ \"./node_modules/react-bmap/lib/components/graphy.js\");\n\nvar _graphy2 = _interopRequireDefault(_graphy);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @file 圆形覆盖物\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @author kyle(hinikai@gmail.com)\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar Circle = function (_Graphy) {\n    _inherits(Circle, _Graphy);\n\n    function Circle(args) {\n        _classCallCheck(this, Circle);\n\n        return _possibleConstructorReturn(this, (Circle.__proto__ || Object.getPrototypeOf(Circle)).call(this, args));\n    }\n\n    _createClass(Circle, [{\n        key: 'getOverlay',\n        value: function getOverlay() {\n            var center = this.props.center;\n            var radius = this.props.radius;\n            return new BMap.Circle(center, radius, this.getOptions(this.options));\n        }\n    }]);\n\n    return Circle;\n}(_graphy2.default);\n\nexports.default = Circle;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/components/circle.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/components/component.js":
/*!*************************************************************!*\
  !*** ./node_modules/react-bmap/lib/components/component.js ***!
  \*************************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(/*! react */ \"react\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @file 基础组件对象\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @author kyle(hinikai@gmail.com)\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n\nvar BaseComponent = function (_Component) {\n    _inherits(BaseComponent, _Component);\n\n    function BaseComponent(args) {\n        _classCallCheck(this, BaseComponent);\n\n        return _possibleConstructorReturn(this, (BaseComponent.__proto__ || Object.getPrototypeOf(BaseComponent)).call(this, args));\n    }\n\n    /**\n     * 给某个对象绑定对应需要的事件\n     * @param 需要绑定事件的对象\n     * @param 事件名数组\n     * @return null;\n     */\n\n\n    _createClass(BaseComponent, [{\n        key: 'bindEvent',\n        value: function bindEvent(obj, events) {\n            var self = this;\n            if (events) {\n                events.forEach(function (event) {\n                    obj.addEventListener(event, function () {\n                        self.props.events && self.props.events[event] && self.props.events[event].apply(self, arguments);\n                    });\n                });\n            }\n        }\n\n        /**\n         * 给某个对象绑定需要切换的属性对应的方法\n         * @param 需要绑定属性的对象\n         * @param 属性和对应的2个切换方法\n         * @return null;\n         */\n\n    }, {\n        key: 'bindToggleMeghods',\n        value: function bindToggleMeghods(obj, toggleMethods) {\n            for (var key in toggleMethods) {\n                if (this.props[key] !== undefined) {\n                    if (this.props[key]) {\n                        obj[toggleMethods[key][0]]();\n                    } else {\n                        obj[toggleMethods[key][1]]();\n                    }\n                }\n            }\n        }\n    }, {\n        key: 'getOptions',\n        value: function getOptions(options) {\n            var _this2 = this;\n\n            var result = {};\n            options.map(function (key) {\n                if (_this2.props[key] !== undefined) {\n                    result[key] = _this2.props[key];\n                }\n            });\n            return result;\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            return null;\n        }\n    }]);\n\n    return BaseComponent;\n}(_react.Component);\n\nexports.default = BaseComponent;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/components/component.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/components/control.js":
/*!***********************************************************!*\
  !*** ./node_modules/react-bmap/lib/components/control.js ***!
  \***********************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _component = __webpack_require__(/*! ./component */ \"./node_modules/react-bmap/lib/components/component.js\");\n\nvar _component2 = _interopRequireDefault(_component);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @file 控件基类\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @author kyle(hinikai@gmail.com)\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar Control = function (_Component) {\n    _inherits(Control, _Component);\n\n    function Control(args) {\n        _classCallCheck(this, Control);\n\n        var _this = _possibleConstructorReturn(this, (Control.__proto__ || Object.getPrototypeOf(Control)).call(this, args));\n\n        _this.state = {};\n        return _this;\n    }\n\n    _createClass(Control, [{\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps) {\n            this.initialize();\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.initialize();\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            this.destroy();\n        }\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            this.props.map.removeControl(this.control);\n            this.control = null;\n        }\n    }, {\n        key: 'initialize',\n        value: function initialize() {\n            var map = this.props.map;\n            if (!map) {\n                return;\n            }\n\n            this.destroy();\n            this.control = this.getControl();\n            map.addControl(this.control);\n        }\n    }, {\n        key: 'getControl',\n        value: function getControl() {\n            return null;\n        }\n    }]);\n\n    return Control;\n}(_component2.default);\n\nexports.default = Control;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/components/control.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/components/driving-route.js":
/*!*****************************************************************!*\
  !*** ./node_modules/react-bmap/lib/components/driving-route.js ***!
  \*****************************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _component = __webpack_require__(/*! ./component */ \"./node_modules/react-bmap/lib/components/component.js\");\n\nvar _component2 = _interopRequireDefault(_component);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @file 驾车组件\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @author kyle(hinikai@gmail.com)\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar DrivingRoute = function (_Component) {\n    _inherits(DrivingRoute, _Component);\n\n    function DrivingRoute(args) {\n        _classCallCheck(this, DrivingRoute);\n\n        var _this = _possibleConstructorReturn(this, (DrivingRoute.__proto__ || Object.getPrototypeOf(DrivingRoute)).call(this, args));\n\n        _this.state = {};\n        return _this;\n    }\n\n    /**\n     * 设置默认的props属性\n     */\n\n\n    _createClass(DrivingRoute, [{\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps) {\n            this.initialize();\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.initialize();\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            this.destroy();\n        }\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            this.driving && this.driving.clearResults();\n            this.driving = null;\n        }\n    }, {\n        key: 'initialize',\n        value: function initialize() {\n\n            var map = this.props.map;\n            if (!map) {\n                return;\n            }\n\n            this.destroy();\n\n            if (!this.driving) {\n                this.driving = new BMap.DrivingRoute(map, { renderOptions: {\n                        map: map,\n                        policy: this.props.policy || BMAP_DRIVING_POLICY_LEAST_TIME,\n                        autoViewport: this.props.autoViewport !== undefined ? this.props.autoViewport : true,\n                        viewportOptions: { zoomFactor: -1 }\n                    } });\n            }\n\n            var start = this.props.start;\n            var end = this.props.end;\n\n            if (start.lng && start.lat) {\n                start = new BMap.Point(start.lng, start.lat);\n            }\n\n            if (end.lng && end.lat) {\n                end = new BMap.Point(end.lng, end.lat);\n            }\n\n            this.driving.search(start, end);\n        }\n    }], [{\n        key: 'defaultProps',\n        get: function get() {\n            return {};\n        }\n    }]);\n\n    return DrivingRoute;\n}(_component2.default);\n\nexports.default = DrivingRoute;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/components/driving-route.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/components/graphy.js":
/*!**********************************************************!*\
  !*** ./node_modules/react-bmap/lib/components/graphy.js ***!
  \**********************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _component = __webpack_require__(/*! ./component */ \"./node_modules/react-bmap/lib/components/component.js\");\n\nvar _component2 = _interopRequireDefault(_component);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @file 图形基类\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @author kyle(hinikai@gmail.com)\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar Graphy = function (_Component) {\n    _inherits(Graphy, _Component);\n\n    function Graphy(args) {\n        _classCallCheck(this, Graphy);\n\n        return _possibleConstructorReturn(this, (Graphy.__proto__ || Object.getPrototypeOf(Graphy)).call(this, args));\n    }\n\n    _createClass(Graphy, [{\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps) {\n            this.initialize();\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.initialize();\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            this.destroy();\n        }\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            this.props.map.removeOverlay(this.overlay);\n            this.overlay = null;\n        }\n    }, {\n        key: 'initialize',\n        value: function initialize() {\n            var map = this.props.map;\n            if (!map) {\n                return;\n            }\n\n            this.destroy();\n\n            this.overlay = this.getOverlay();\n            this.bindEvent(this.overlay, this.events);\n            map.addOverlay(this.overlay);\n\n            var path = this.overlay.getPath();\n            if (path && path.length > 0 && this.props.autoViewport === true) {\n                map.setViewport(path, this.props.viewportOptions);\n            }\n        }\n    }, {\n        key: 'getOverlay',\n        value: function getOverlay() {\n            return null;\n        }\n    }, {\n        key: 'options',\n        get: function get() {\n            return ['strokeColor', 'fillColor', 'strokeWeight', 'strokeOpacity', 'fillOpacity', 'strokeStyle', 'enableMassClear', 'enableEditing', 'enableClicking'];\n        }\n\n        /**\n         * 获取可以绑定的事件名\n         */\n\n    }, {\n        key: 'events',\n        get: function get() {\n            return ['click', 'dblclick', 'mousedown', 'mouseup', 'mouseout', 'mouseover', 'remove', 'lineupdate'];\n        }\n    }]);\n\n    return Graphy;\n}(_component2.default);\n\nexports.default = Graphy;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/components/graphy.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/components/infowindow.js":
/*!**************************************************************!*\
  !*** ./node_modules/react-bmap/lib/components/infowindow.js ***!
  \**************************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _reactDom = __webpack_require__(/*! react-dom */ \"./node_modules/react-dom/index.js\");\n\nvar _component = __webpack_require__(/*! ./component */ \"./node_modules/react-bmap/lib/components/component.js\");\n\nvar _component2 = _interopRequireDefault(_component);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @file 信息窗口组件\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @author kyle(hinikai@gmail.com)\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar Infowindow = function (_Component) {\n    _inherits(Infowindow, _Component);\n\n    function Infowindow(args) {\n        _classCallCheck(this, Infowindow);\n\n        var _this = _possibleConstructorReturn(this, (Infowindow.__proto__ || Object.getPrototypeOf(Infowindow)).call(this, args));\n\n        _this.state = {};\n        return _this;\n    }\n\n    _createClass(Infowindow, [{\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps) {\n            this.initialize();\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.initialize();\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            this.destroy();\n        }\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            this.props.map.closeInfoWindow();\n            this.infoWindow = null;\n        }\n    }, {\n        key: 'initialize',\n        value: function initialize() {\n            var map = this.props.map;\n            if (!map) {\n                return;\n            }\n\n            this.destroy();\n\n            var opts = {};\n            this.infoWindow = new BMap.InfoWindow(this.props.text || '', this.getOptions(this.options)); // 创建信息窗口对象 \n            this.bindEvent(this.infoWindow, this.events);\n            map.openInfoWindow(this.infoWindow, new BMap.Point(this.props.position.lng, this.props.position.lat)); //开启信息窗口\n\n            if ('children' in this.props) {\n                // render children to InfoWindow\n                var content = document.createElement('div');\n                (0, _reactDom.render)(this.props.children, content);\n                this.infoWindow.setContent(content);\n            }\n        }\n    }, {\n        key: 'options',\n        get: function get() {\n            return ['width', 'height', 'maxWidth', 'offset', 'title', 'enableAutoPan', 'enableCloseOnClick', 'enableMessage', 'message'];\n        }\n    }, {\n        key: 'events',\n        get: function get() {\n            return ['close', 'open', 'maximize', 'restore', 'clickclose'];\n        }\n    }]);\n\n    return Infowindow;\n}(_component2.default);\n\nexports.default = Infowindow;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/components/infowindow.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/components/map-listener.js":
/*!****************************************************************!*\
  !*** ./node_modules/react-bmap/lib/components/map-listener.js ***!
  \****************************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(/*! react */ \"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @file 给地图添加监听事件\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @author hedongran\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n\n/**\n * 防抖函数\n * @param method 事件触发的操作\n * @param delay 多少毫秒内连续触发事件，不会执行\n * @returns {Function}\n */\nfunction debounce(method, delay) {\n    var timer = null;\n    return function () {\n        var self = this,\n            args = arguments;\n        timer && clearTimeout(timer);\n        timer = setTimeout(function () {\n            method.apply(self, args);\n        }, delay);\n    };\n}\n\n/**\n * 节流函数\n * @param method 事件触发的操作\n * @param mustRunDelay 间隔多少毫秒需要触发一次事件\n * @returns {Function}\n */\nfunction throttle(method, mustRunDelay) {\n    var timer = void 0,\n        args = arguments,\n        start = void 0;\n    return function loop() {\n        var self = this;\n        var now = Date.now();\n        if (!start) {\n            start = now;\n        }\n        if (timer) {\n            clearTimeout(timer);\n        }\n        if (now - start >= mustRunDelay) {\n            method.apply(self, args);\n            start = now;\n        } else {\n            timer = setTimeout(function () {\n                loop.apply(self, args);\n            }, 50);\n        }\n    };\n}\n\nvar MapListener = function (_React$Component) {\n    _inherits(MapListener, _React$Component);\n\n    function MapListener(props) {\n        _classCallCheck(this, MapListener);\n\n        var _this = _possibleConstructorReturn(this, (MapListener.__proto__ || Object.getPrototypeOf(MapListener)).call(this, props));\n\n        _this.map = _this.props.map;\n        return _this;\n    }\n\n    /**\n     * 设置默认的props属性\n     */\n\n\n    _createClass(MapListener, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            if (this.props.onZoomend) {\n                this._bindZoomendEvent();\n            }\n            if (this.props.onDragend) {\n                this._bindDragendEvent();\n            }\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            var map = this.map;\n            if (this.props.onZoomend) {\n                map.removeEventListener('zoomend', this.onZoomend);\n            }\n            if (this.props.onDragend) {\n                map.removeEventListener('dragend', this.onDragend);\n            }\n        }\n    }, {\n        key: '_bindZoomendEvent',\n        value: function _bindZoomendEvent() {\n            var map = this.map;\n            var _props = this.props,\n                fn = _props.onZoomend,\n                eventType = _props.eventType,\n                delay = _props.delay;\n\n            if (eventType === 'debounce') {\n                this.onZoomend = debounce(fn, delay);\n            } else if (eventType === 'throttle') {\n                this.onZoomend = throttle(fn, delay);\n            } else {\n                this.onZoomend = fn;\n            }\n            map.addEventListener('zoomend', this.onZoomend);\n        }\n    }, {\n        key: '_bindDragendEvent',\n        value: function _bindDragendEvent() {\n            var map = this.map;\n            var _props2 = this.props,\n                fn = _props2.onDragend,\n                eventType = _props2.eventType,\n                delay = _props2.delay;\n\n            if (eventType === 'debounce') {\n                this.onDragend = debounce(fn, delay);\n            } else if (eventType === 'throttle') {\n                this.onDragend = throttle(fn, delay);\n            } else {\n                this.onDragend = fn;\n            }\n            map.addEventListener('dragend', this.onDragend);\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            return null;\n        }\n    }], [{\n        key: 'defaultProps',\n        get: function get() {\n            return {\n                eventType: 'debounce', // debounce防抖, throttle节流, direct直接执行\n                delay: 500\n            };\n        }\n    }]);\n\n    return MapListener;\n}(_react2.default.Component);\n\nexports.default = MapListener;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/components/map-listener.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/components/map-type-control.js":
/*!********************************************************************!*\
  !*** ./node_modules/react-bmap/lib/components/map-type-control.js ***!
  \********************************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _control = __webpack_require__(/*! ./control */ \"./node_modules/react-bmap/lib/components/control.js\");\n\nvar _control2 = _interopRequireDefault(_control);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @file 负责切换地图类型的控件\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @author kyle(hinikai@gmail.com)\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar MapTypeControl = function (_Control) {\n    _inherits(MapTypeControl, _Control);\n\n    function MapTypeControl(args) {\n        _classCallCheck(this, MapTypeControl);\n\n        return _possibleConstructorReturn(this, (MapTypeControl.__proto__ || Object.getPrototypeOf(MapTypeControl)).call(this, args));\n    }\n\n    _createClass(MapTypeControl, [{\n        key: 'getControl',\n        value: function getControl() {\n            return new BMap.MapTypeControl(this.getOptions(this.options));\n        }\n    }, {\n        key: 'options',\n        get: function get() {\n            return ['anchor', 'offset', 'type', 'mapTypes'];\n        }\n    }]);\n\n    return MapTypeControl;\n}(_control2.default);\n\nexports.default = MapTypeControl;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/components/map-type-control.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/components/map.js":
/*!*******************************************************!*\
  !*** ./node_modules/react-bmap/lib/components/map.js ***!
  \*******************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(/*! react */ \"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _component = __webpack_require__(/*! ./component */ \"./node_modules/react-bmap/lib/components/component.js\");\n\nvar _component2 = _interopRequireDefault(_component);\n\nvar _common = __webpack_require__(/*! ../utils/common */ \"./node_modules/react-bmap/lib/utils/common.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @file 地图主文件\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @author kyle(hinikai@gmail.com)\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar Map = function (_Component) {\n    _inherits(Map, _Component);\n\n    function Map(args) {\n        _classCallCheck(this, Map);\n\n        return _possibleConstructorReturn(this, (Map.__proto__ || Object.getPrototypeOf(Map)).call(this, args));\n    }\n\n    /**\n     * 设置默认的props属性\n     */\n\n\n    _createClass(Map, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.initMap();\n            this.forceUpdate();\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps) {\n            var preCenter = prevProps.center;\n            var center = this.props.center;\n\n            if ((0, _common.isString)(center)) {\n                // 可以传入城市名\n                if (preCenter != center) {\n                    this.map.centerAndZoom(center);\n                }\n            } else {\n                var isCenterChanged = preCenter && center && (preCenter.lng != center.lng || preCenter.lat != center.lat || this.props.forceUpdate);\n                var isZoomChanged = prevProps.zoom !== this.props.zoom && (this.props.zoom || this.props.forceUpdate);\n                var center = new BMap.Point(center.lng, center.lat);\n                if (isCenterChanged && isZoomChanged) {\n                    this.map.centerAndZoom(center, this.props.zoom);\n                } else if (isCenterChanged) {\n                    this.map.setCenter(center);\n                } else if (isZoomChanged) {\n                    this.map.zoomTo(this.props.zoom);\n                }\n            }\n        }\n    }, {\n        key: 'initMap',\n        value: function initMap() {\n            var _this2 = this;\n\n            // 创建Map实例\n            var options = this.options;\n            options = this.getOptions(options);\n            if (this.props.enableMapClick !== true) {\n                options.enableMapClick = false;\n            }\n            var map = new BMap.Map(this.refs.map, options);\n\n            this.map = map;\n\n            var zoom = this.props.zoom;\n\n            // 在 centerAndZoom() 之前执行事件绑定否则load无法正常触发\n            this.bindEvent(map, this.events);\n\n            if ((0, _common.isString)(this.props.center)) {\n                // 可以传入城市名\n                map.centerAndZoom(this.props.center);\n            } else {\n                // 正常传入经纬度坐标\n                var center = new BMap.Point(this.props.center.lng, this.props.center.lat);\n                map.centerAndZoom(center, zoom); // 初始化地图,设置中心点坐标和地图级别\n            }\n\n            if (this.props.mapStyleV2) {\n                map.setMapStyleV2(this.props.mapStyleV2);\n            } else if (this.props.mapStyle) {\n                map.setMapStyle(this.props.mapStyle);\n            }\n\n            this.bindToggleMeghods(map, this.toggleMethods);\n\n            var lastZoom = zoom;\n            map.addEventListener('zoomend', function () {\n                var zoom = map.getZoom();\n                _this2.props.zoom_changed && _this2.props.zoom_changed(zoom, lastZoom);\n                lastZoom = zoom;\n            });\n        }\n    }, {\n        key: 'renderChildren',\n        value: function renderChildren() {\n            var _this3 = this;\n\n            var children = this.props.children;\n\n\n            if (!children || !this.map) return;\n\n            return _react2.default.Children.map(children, function (child) {\n\n                if (!child) {\n                    return;\n                }\n\n                if (typeof child.type === 'string') {\n                    return child;\n                } else {\n                    return _react2.default.cloneElement(child, {\n                        map: _this3.map\n                    });\n                }\n            });\n        }\n    }, {\n        key: 'onRender',\n        value: function onRender() {\n\n            if (!this.props.render || !this.map) {\n                return;\n            }\n\n            return this.props.render(this.map);\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var style = {\n                height: '100%',\n                position: 'relative'\n            };\n            for (var key in this.props.style) {\n                style[key] = this.props.style[key];\n            }\n            return _react2.default.createElement(\n                'div',\n                { style: style, key: this.props.keys },\n                _react2.default.createElement(\n                    'div',\n                    { ref: 'map', className: this.props.className, style: { height: '100%' } },\n                    '\\u52A0\\u8F7D\\u5730\\u56FE\\u4E2D...'\n                ),\n                this.renderChildren(),\n                this.onRender()\n            );\n        }\n    }, {\n        key: 'events',\n\n\n        /**\n         * 获取可以给地图绑定的事件名\n         */\n        get: function get() {\n            return ['click', 'dblclick', 'rightclick', 'rightdblclick', 'maptypechange', 'mousemove', 'mouseover', 'mouseout', 'movestart', 'moving', 'moveend', 'zoomstart', 'zoomend', 'addoverlay', 'addcontrol', 'removecontrol', 'removeoverlay', 'clearoverlays', 'dragstart', 'dragging', 'dragend', 'addtilelayer', 'removetilelayer', 'load', 'resize', 'hotspotclick', 'hotspotover', 'hotspotout', 'tilesloaded', 'touchstart', 'touchmove', 'touchend', 'longpress'];\n        }\n    }, {\n        key: 'toggleMethods',\n        get: function get() {\n            return {\n                enableScrollWheelZoom: ['enableScrollWheelZoom', 'disableScrollWheelZoom'],\n                enableDragging: ['enableDragging', 'disableDragging'],\n                enableDoubleClickZoom: ['enableDoubleClickZoom', 'disableDoubleClickZoom'],\n                enableKeyboard: ['enableKeyboard', 'disableKeyboard'],\n                enableInertialDragging: ['enableInertialDragging', 'disableInertialDragging'],\n                enableContinuousZoom: ['enableContinuousZoom', 'disableContinuousZoom'],\n                enablePinchToZoom: ['enablePinchToZoom', 'disablePinchToZoom'],\n                enableAutoResize: ['enableAutoResize', 'disableAutoResize']\n            };\n        }\n    }, {\n        key: 'options',\n        get: function get() {\n            return ['minZoom', 'maxZoom', 'mapType', 'enableMapClick'];\n        }\n    }], [{\n        key: 'defaultProps',\n        get: function get() {\n            return {\n                style: {\n                    height: '350px'\n                }\n                /*\n                center: {\n                    lng: 105.403119,\n                    lat: 38.028658\n                },\n                zoom: 5\n                */\n            };\n        }\n    }]);\n\n    return Map;\n}(_component2.default);\n\nexports.default = Map;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/components/map.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/components/mapv-layer.js":
/*!**************************************************************!*\
  !*** ./node_modules/react-bmap/lib/components/mapv-layer.js ***!
  \**************************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _component = __webpack_require__(/*! ./component */ \"./node_modules/react-bmap/lib/components/component.js\");\n\nvar _component2 = _interopRequireDefault(_component);\n\nvar _mapv = __webpack_require__(/*! mapv */ \"./node_modules/mapv/build/mapv.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar MapvLayer = function (_Component) {\n    _inherits(MapvLayer, _Component);\n\n    function MapvLayer(args) {\n        _classCallCheck(this, MapvLayer);\n\n        var _this = _possibleConstructorReturn(this, (MapvLayer.__proto__ || Object.getPrototypeOf(MapvLayer)).call(this, args));\n\n        _this.state = {};\n        return _this;\n    }\n\n    _createClass(MapvLayer, [{\n        key: 'handleClick',\n        value: function handleClick(id) {\n            this.props.onClick && this.props.onClick(id);\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps) {\n            var preData = JSON.stringify(prevProps.data);\n            var data = JSON.stringify(this.props.data);\n            var preOptions = JSON.stringify(prevProps.options);\n            var options = JSON.stringify(this.props.options);\n            if (preData != data || !this.map || preOptions != options) {\n                this.initialize();\n            }\n        }\n    }, {\n        key: 'initialize',\n        value: function initialize() {\n            var _this2 = this;\n\n            var self = this;\n            var map = this.props.map;\n            if (!map) {\n                return;\n            }\n            this.map = map;\n\n            if (!this._createLayer) {\n                this.createLayers();\n            }\n\n            if (this.props.options.autoViewport) {\n                var getPoint = function getPoint(coordinate) {\n                    if (_this2.props.options.coordType === 'bd09mc') {\n                        return projection.pointToLngLat(new BMap.Pixel(coordinate[0], coordinate[1]));\n                    } else {\n                        return new BMap.Point(coordinate[0], coordinate[1]);\n                    }\n                };\n\n                var projection = map.getMapType().getProjection();\n                var points = [];\n\n                this.props.data.map(function (item) {\n                    if (item.geometry.type === 'Point') {\n                        points.push(getPoint(item.geometry.coordinates));\n                    } else if (item.geometry.type === 'Polygon') {\n                        item.geometry.coordinates[0].map(function (item) {\n                            points.push(getPoint(item));\n                        });\n                    }\n                });\n\n                if (points.length > 0) {\n                    map.setViewport(points, this.props.options.viewportOptions);\n                }\n            }\n\n            this.dataSet.set(this.props.data);\n            this.layer.update({\n                options: this.props.options\n            });\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.initialize();\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            this.layer.destroy();\n            this.layer = null;\n        }\n    }, {\n        key: 'createLayers',\n        value: function createLayers() {\n            this._createLayer = true;\n            var map = this.map;\n\n            var self = this;\n            var dataSet = this.dataSet = new _mapv.DataSet([]);\n            this.layer = new _mapv.baiduMapLayer(map, dataSet, {\n                enableMassClear: false\n            });\n        }\n    }], [{\n        key: 'defaultProps',\n        get: function get() {\n            return {};\n        }\n    }]);\n\n    return MapvLayer;\n}(_component2.default);\n\nexports.default = MapvLayer;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/components/mapv-layer.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/components/mapv-marker-list.js":
/*!********************************************************************!*\
  !*** ./node_modules/react-bmap/lib/components/mapv-marker-list.js ***!
  \********************************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _component = __webpack_require__(/*! ./component */ \"./node_modules/react-bmap/lib/components/component.js\");\n\nvar _component2 = _interopRequireDefault(_component);\n\nvar _mapv = __webpack_require__(/*! mapv */ \"./node_modules/mapv/build/mapv.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar MapvMarkerList = function (_Component) {\n    _inherits(MapvMarkerList, _Component);\n\n    function MapvMarkerList(args) {\n        _classCallCheck(this, MapvMarkerList);\n\n        var _this = _possibleConstructorReturn(this, (MapvMarkerList.__proto__ || Object.getPrototypeOf(MapvMarkerList)).call(this, args));\n\n        _this.state = {};\n        return _this;\n    }\n\n    _createClass(MapvMarkerList, [{\n        key: 'handleClick',\n        value: function handleClick(id) {\n            this.props.onClick && this.props.onClick(id);\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps) {\n            var preData = JSON.stringify(prevProps.data);\n            var data = JSON.stringify(this.props.data);\n            if (preData != data || !this.map) {\n                this.initialize();\n            }\n        }\n    }, {\n        key: 'initialize',\n        value: function initialize() {\n\n            var self = this;\n            var map = this.props.map;\n            if (!map) {\n                return;\n            }\n            this.map = map;\n\n            if (!this._createLayer) {\n                this.createLayers();\n            }\n\n            this.showDatasets(this.props.data);\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.initialize();\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n\n            this.shadowSet = null;\n            this.circleSet = null;\n            this.textSet = null;\n            this.numSet = null;\n            this.otherSet = null;\n            this.otherShadowSet = null;\n\n            for (var i = 0; i < this.layers.length; i++) {\n                this.layers[i].destroy();\n                this.layers[i] = null;\n            }\n        }\n    }, {\n        key: 'showDatasets',\n        value: function showDatasets(list) {\n            var _this2 = this;\n\n            var shadowData = [];\n            var circleData = [];\n            var textData = [];\n            var otherData = [];\n            var otherShadowData = [];\n            var overViews = [];\n\n            if (list.length > 0) {\n\n                list.forEach(function (item, key) {\n                    var cityCenter = item['location'].split(',');\n                    var p = _this2.project.pointToLngLat(new BMap.Pixel(cityCenter[0], cityCenter[1]));\n                    overViews.push(p);\n                    if (key < 10) {\n                        shadowData.push({\n                            geometry: {\n                                type: 'Point',\n                                coordinates: [cityCenter[0], cityCenter[1]]\n                            },\n                            count: parseInt(item['count'])\n                        });\n                        circleData.push({\n                            geometry: {\n                                type: 'Point',\n                                coordinates: [cityCenter[0], cityCenter[1]]\n                            },\n                            id: key,\n                            count: parseInt(item['count']),\n                            text: parseInt(key) + 1\n                        });\n                        textData.push({\n                            geometry: {\n                                type: 'Point',\n                                coordinates: [cityCenter[0], cityCenter[1]]\n                            },\n                            count: parseInt(item['count']),\n                            text: item['text']\n                        });\n                    } else {\n                        otherData.push({\n                            geometry: {\n                                type: 'Point',\n                                coordinates: [cityCenter[0], cityCenter[1]]\n                            },\n                            id: key,\n                            count: parseInt(item['count'])\n                        });\n                        otherShadowData.push({\n                            geometry: {\n                                type: 'Point',\n                                coordinates: [cityCenter[0], cityCenter[1]]\n                            },\n                            count: parseInt(item['count'])\n                        });\n                    }\n                });\n                this.shadowSet.set(shadowData);\n                this.circleSet.set(circleData);\n                this.textSet.set(textData);\n                this.numSet.set(circleData);\n                this.otherSet.set(otherData);\n                this.otherShadowSet.set(otherShadowData);\n                if (overViews.length > 0 && this.props.autoViewport !== false) {\n                    map.setViewport(overViews, self.props.viewportOptions);\n                }\n            }\n        }\n    }, {\n        key: 'createLayers',\n        value: function createLayers() {\n            this._createLayer = true;\n            var map = this.map;\n            this.project = map.getMapType().getProjection();\n\n            var self = this;\n            var shadowSet = this.shadowSet = new _mapv.DataSet([]);\n            var circleSet = this.circleSet = new _mapv.DataSet([]);\n            var textSet = this.textSet = new _mapv.DataSet([]);\n            var numSet = this.numSet = new _mapv.DataSet([]);\n            var otherSet = this.otherSet = new _mapv.DataSet([]);\n            var otherShadowSet = this.otherShadowSet = new _mapv.DataSet([]);\n            this.layers = [];\n\n            var otherOptions = {\n                coordType: 'bd09mc',\n                splitList: {\n                    4: '#d53938',\n                    3: '#fe6261',\n                    2: '#ffb02d',\n                    other: '#80db69'\n                },\n                shadowBlur: 10,\n                size: 5,\n                max: 30,\n                methods: {\n                    click: function click(item) {\n                        if (item) {\n                            self.handleClick(item.id);\n                        }\n                    },\n                    mousemove: function mousemove(item) {\n                        otherSet.update(function (item) {\n                            item.fillStyle = null;\n                        });\n                        if (item) {\n                            self.isSmallPath = true;\n                            self.props.map.setDefaultCursor('pointer');\n                            otherSet.update(function (item) {\n                                item.fillStyle = '#1495ff';\n                            }, {\n                                id: item.id\n                            });\n                        } else {\n                            self.isSmallPath = false;\n                            if (!self.isSmallPath && !self.isBigPath) {\n                                self.props.map.setDefaultCursor('auto');\n                            }\n                        }\n                    }\n\n                },\n                draw: 'category'\n            };\n\n            var otherShadowOptions = {\n                splitList: {\n                    4: '#d53938',\n                    3: '#fe6261',\n                    2: '#ffb02d',\n                    1: '#80db69'\n                },\n                styleType: 'fill',\n                globalAlpha: 0.4,\n                coordType: 'bd09mc',\n                size: 8,\n                minSize: 5,\n                draw: 'category'\n            };\n            this.layers.push(new _mapv.baiduMapLayer(map, otherShadowSet, otherShadowOptions));\n\n            this.layers.push(new _mapv.baiduMapLayer(map, otherSet, otherOptions));\n\n            if (this.props.animation === true) {\n                var shadowOptions = {\n                    splitList: {\n                        4: '#d53938',\n                        3: '#fe6261',\n                        2: '#ffb02d',\n                        1: '#80db69'\n                    },\n                    styleType: 'stroke',\n                    globalAlpha: 0.4,\n                    coordType: 'bd09mc',\n                    size: 20,\n                    minSize: 10,\n                    draw: 'category'\n                };\n                this.layers.push(new _mapv.baiduMapAnimationLayer(map, shadowSet, shadowOptions));\n            }\n\n            var circleOptions = {\n                splitList: {\n                    1: '#80db69',\n                    4: '#d53938',\n                    3: '#fe6261',\n                    2: '#ffb02d'\n                },\n                fillStyle: 'red',\n                coordType: 'bd09mc',\n                size: 10,\n                draw: 'category',\n                methods: {\n                    click: function click(item) {\n                        if (item) {\n                            self.handleClick(item.id);\n                        }\n                    },\n                    mousemove: function mousemove(item) {\n                        circleSet.update(function (item) {\n                            item.fillStyle = null;\n                        });\n                        if (item) {\n                            self.isBigPath = true;\n                            self.map.setDefaultCursor('pointer');\n                            circleSet.update(function (item) {\n                                item.fillStyle = '#1495ff';\n                            }, {\n                                id: item.id\n                            });\n                        } else {\n                            self.isBigPath = false;\n                            if (!self.isBigPath && !self.isSmallPath) {\n                                self.map.setDefaultCursor('auto');\n                            }\n                        }\n                    }\n                }\n            };\n            this.layers.push(new _mapv.baiduMapLayer(map, circleSet, circleOptions));\n\n            var numOptions = {\n                coordType: 'bd09mc',\n                draw: 'text',\n                font: '13px Arial',\n                fillStyle: '#ffffff',\n                shadowColor: '#ffffff',\n                shadowBlur: 10\n            };\n            this.layers.push(new _mapv.baiduMapLayer(map, numSet, numOptions));\n\n            var textOptions = {\n                coordType: 'bd09mc',\n                font: '13px Arial',\n                fillStyle: '#666',\n                shadowColor: '#ffffff',\n                shadowBlur: 10,\n\n                draw: 'text',\n                avoid: true,\n                textAlign: 'left',\n                offset: {\n                    x: 10,\n                    y: 0\n                }\n            };\n            this.layers.push(new _mapv.baiduMapLayer(map, textSet, textOptions));\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            return null;\n        }\n    }], [{\n        key: 'defaultProps',\n        get: function get() {\n            return {\n                autoViewport: true\n            };\n        }\n    }]);\n\n    return MapvMarkerList;\n}(_component2.default);\n\nexports.default = MapvMarkerList;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/components/mapv-marker-list.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/components/mapvgl-layer.js":
/*!****************************************************************!*\
  !*** ./node_modules/react-bmap/lib/components/mapvgl-layer.js ***!
  \****************************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _component = __webpack_require__(/*! ./component */ \"./node_modules/react-bmap/lib/components/component.js\");\n\nvar _component2 = _interopRequireDefault(_component);\n\nvar _mapvgl = __webpack_require__(/*! mapvgl */ \"./node_modules/mapvgl/dist/mapvgl.min.js\");\n\nvar mapvgl = _interopRequireWildcard(_mapvgl);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @file mapvgl可视化图层\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @author hedongran\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @email hdr01@126.com\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n\nvar MapvglLayer = function (_Component) {\n    _inherits(MapvglLayer, _Component);\n\n    function MapvglLayer(props) {\n        _classCallCheck(this, MapvglLayer);\n\n        var _this = _possibleConstructorReturn(this, (MapvglLayer.__proto__ || Object.getPrototypeOf(MapvglLayer)).call(this, props));\n\n        _this.state = {};\n        return _this;\n    }\n\n    _createClass(MapvglLayer, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.initialize();\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            if (this.layer) {\n                this.props.view.removeLayer(this.layer);\n                this.layer.destroy();\n                this.layer = null;\n            }\n        }\n    }, {\n        key: 'handleClick',\n        value: function handleClick(id) {\n            this.props.onClick && this.props.onClick(id);\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps) {\n            var preData = JSON.stringify(prevProps.data);\n            var data = JSON.stringify(this.props.data);\n            var preOptions = JSON.stringify(prevProps.options);\n            var options = JSON.stringify(this.props.options);\n            if (!this.map || preData !== data || preOptions !== options) {\n                this.initialize();\n            }\n        }\n    }, {\n        key: 'initialize',\n        value: function initialize() {\n            var _this2 = this;\n\n            var map = this.props.map;\n            if (!map) {\n                return;\n            }\n            this.map = map;\n\n            if (!this._createLayer) {\n                this.createLayers();\n            }\n\n            if (this.props.options.autoViewport) {\n                var projection = map.getMapType().getProjection();\n                var getPoint = function getPoint(coordinate) {\n                    if (_this2.props.options.coordType === 'bd09mc') {\n                        return projection.pointToLngLat(new BMap.Pixel(coordinate[0], coordinate[1]));\n                    } else {\n                        return new BMap.Point(coordinate[0], coordinate[1]);\n                    }\n                };\n\n                var points = [];\n\n                this.props.data.map(function (item) {\n                    if (item.geometry.type === 'Point') {\n                        points.push(getPoint(item.geometry.coordinates));\n                    } else if (item.geometry.type === 'LineString') {\n                        item.geometry.coordinates.map(function (item) {\n                            points.push(getPoint(item));\n                        });\n                    } else if (item.geometry.type === 'Polygon') {\n                        item.geometry.coordinates[0].map(function (item) {\n                            points.push(getPoint(item));\n                        });\n                    }\n                });\n\n                if (points.length > 0) {\n                    map.setViewport(points, this.props.options.viewportOptions);\n                }\n            }\n\n            this.layer.setData(this.props.data);\n            this.layer.setOptions(this.props.options);\n        }\n    }, {\n        key: 'createLayers',\n        value: function createLayers() {\n            if (mapvgl[this.props.type]) {\n                this._createLayer = true;\n                this.layer = new mapvgl[this.props.type](this.props.options);\n                this.props.view.addLayer(this.layer);\n            } else {\n                console.error('mapvgl doesn\\'t have layer ' + this.props.type + '!');\n            }\n        }\n    }], [{\n        key: 'defaultProps',\n        get: function get() {\n            return {};\n        }\n    }]);\n\n    return MapvglLayer;\n}(_component2.default);\n\nexports.default = MapvglLayer;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/components/mapvgl-layer.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/components/mapvgl-view.js":
/*!***************************************************************!*\
  !*** ./node_modules/react-bmap/lib/components/mapvgl-view.js ***!
  \***************************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(/*! react */ \"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _component = __webpack_require__(/*! ./component */ \"./node_modules/react-bmap/lib/components/component.js\");\n\nvar _component2 = _interopRequireDefault(_component);\n\nvar _mapvgl = __webpack_require__(/*! mapvgl */ \"./node_modules/mapvgl/dist/mapvgl.min.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @file mapvgl的view图层管理类\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @author hedongran\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @email hdr01@126.com\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n\nvar MapvglView = function (_Component) {\n    _inherits(MapvglView, _Component);\n\n    function MapvglView() {\n        _classCallCheck(this, MapvglView);\n\n        return _possibleConstructorReturn(this, (MapvglView.__proto__ || Object.getPrototypeOf(MapvglView)).apply(this, arguments));\n    }\n\n    _createClass(MapvglView, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.initialize();\n            this.forceUpdate();\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            if (this.mapvglView) {\n                this.mapvglView.destroy();\n                this.mapvglView = null;\n            }\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps) {\n            if (!this.map || !this.mapvglView) {\n                this.initialize();\n            }\n        }\n    }, {\n        key: 'initialize',\n        value: function initialize() {\n            var map = this.props.map;\n            if (!map) {\n                return;\n            }\n            this.map = map;\n\n            if (!this.mapvglView) {\n                var effects = [];\n                var simpleEffects = this.props.effects;\n                if (simpleEffects && simpleEffects.length) {\n                    simpleEffects.forEach(function (name) {\n                        if (name === 'bloom') {\n                            effects.push(new _mapvgl.BloomEffect());\n                        } else if (name === 'bright') {\n                            effects.push(new _mapvgl.BrightEffect());\n                        } else if (name === 'blur') {\n                            effects.push(new _mapvgl.BlurEffect());\n                        }\n                    });\n                }\n                this.mapvglView = new _mapvgl.View({\n                    mapType: 'bmap',\n                    effects: effects,\n                    map: map\n                });\n            }\n        }\n\n        /**\n         * 在子元素props中附上view和map字段\n         * @return {string|Element} children with props\n         * @memberof MapvglView\n         */\n\n    }, {\n        key: 'renderChildren',\n        value: function renderChildren() {\n            var _this2 = this;\n\n            var children = this.props.children;\n\n            if (!children || !this.map || !this.mapvglView) {\n                return;\n            }\n\n            return _react2.default.Children.map(children, function (child) {\n                if (!child) {\n                    return;\n                }\n\n                if (typeof child.type === 'string') {\n                    return child;\n                } else {\n                    return _react2.default.cloneElement(child, {\n                        map: _this2.map,\n                        view: _this2.mapvglView\n                    });\n                }\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            return _react2.default.createElement(\n                'div',\n                { title: 'mapvgl view' },\n                this.renderChildren()\n            );\n        }\n    }]);\n\n    return MapvglView;\n}(_component2.default);\n\nexports.default = MapvglView;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/components/mapvgl-view.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/components/marker-list.js":
/*!***************************************************************!*\
  !*** ./node_modules/react-bmap/lib/components/marker-list.js ***!
  \***************************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _component = __webpack_require__(/*! ./component */ \"./node_modules/react-bmap/lib/components/component.js\");\n\nvar _component2 = _interopRequireDefault(_component);\n\nvar _mapv = __webpack_require__(/*! mapv */ \"./node_modules/mapv/build/mapv.js\");\n\nvar _NumberMarker = __webpack_require__(/*! ../overlay/NumberMarker */ \"./node_modules/react-bmap/lib/overlay/NumberMarker.js\");\n\nvar _NumberMarker2 = _interopRequireDefault(_NumberMarker);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar MarkerList = function (_Component) {\n    _inherits(MarkerList, _Component);\n\n    function MarkerList(args) {\n        _classCallCheck(this, MarkerList);\n\n        var _this = _possibleConstructorReturn(this, (MarkerList.__proto__ || Object.getPrototypeOf(MarkerList)).call(this, args));\n\n        _this.state = {};\n        return _this;\n    }\n\n    _createClass(MarkerList, [{\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps) {\n            var preData = JSON.stringify(prevProps.data);\n            var data = JSON.stringify(this.props.data);\n            if (preData != data || !this.map) {\n                this.initialize();\n            } else {\n                this.setViewport();\n            }\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.markers = [];\n            this.initialize();\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            this.clearMarkers();\n\n            if (this.textLayer) {\n                this.textLayer.destroy();\n                this.textLayer = null;\n            }\n\n            if (this.animationLayer) {\n                this.animationLayer.destroy();\n                this.animationLayer = null;\n            }\n        }\n    }, {\n        key: 'clearMarkers',\n        value: function clearMarkers() {\n            for (var i = 0; i < this.markers.length; i++) {\n                this.map.removeOverlay(this.markers[i]);\n                this.markers[i] = null;\n            }\n            this.markers.length = 0;\n        }\n    }, {\n        key: 'initialize',\n        value: function initialize() {\n            var self = this;\n            var map = this.props.map;\n            if (!map) {\n                return;\n            }\n\n            this.map = map;\n\n            this.clearMarkers();\n\n            if (!this.textLayer) {\n                this.dataSet = new _mapv.DataSet([]);\n\n                var options = this.props.textOptions || {\n                    fillStyle: '#666666',\n                    shadowBlur: 5,\n                    shadowColor: 'rgba(0, 0, 0, 0.1)',\n                    globalAlpha: '0.9',\n                    textAlign: 'left',\n                    offset: {\n                        x: this.props.mini ? 10 : 15,\n                        y: 0\n                    },\n                    coordType: this.props.coordType,\n                    avoid: true,\n                    size: 12,\n                    textKey: 'text',\n                    draw: 'text'\n                };\n\n                if (this.props.isShowText !== false) {\n                    this.textLayer = new _mapv.baiduMapLayer(map, this.dataSet, options);\n                }\n            }\n\n            if (!this.animationLayer && this.props.animation === true) {\n                var splitList = this.props.splitList || {};\n                splitList.other = this.props.fillStyle || 'rgba(50, 50, 255, 0.5)';\n                var animationOptions = {\n                    styleType: 'stroke',\n                    strokeStyle: this.props.fillStyle || 'rgba(20, 249, 255, 0.5)',\n                    coordType: this.props.coordType,\n                    splitList: splitList,\n                    globalAlpha: 0.4,\n                    size: this.props.multiple || this.props.mini ? 20 : 26,\n                    minSize: this.props.multiple || this.props.mini ? 10 : 13,\n                    draw: 'category'\n                };\n                this.animationLayer = new _mapv.baiduMapAnimationLayer(map, this.dataSet, animationOptions);\n            }\n\n            var projection = map.getMapType().getProjection();\n\n            var data = this.props.data;\n            var mapvData = [];\n            for (var i = 0; i < data.length; i++) {\n                if (this.props.showIndex !== undefined && this.props.showIndex != i) {\n                    continue;\n                }\n\n                if (data[i].location) {\n                    var location = data[i].location.split(',');\n                    if (this.props.coordType && this.props.coordType === 'bd09mc') {\n                        var point = projection.pointToLngLat(new BMap.Pixel(location[0], location[1]));\n                    } else {\n                        var point = new BMap.Point(location[0], location[1]);\n                    }\n                    var fillStyle = data[i].color || this.props.fillStyle || '#1495ff';\n                    if (this.props.splitList) {\n                        if (this.props.splitList[data[i].count]) {\n                            fillStyle = this.props.splitList[data[i].count];\n                        } else {\n                            fillStyle = this.props.splitList.other;\n                        }\n                    }\n\n                    var options = {\n                        point: point,\n                        fillStyle: fillStyle,\n                        isShowNumber: this.props.isShowNumber,\n                        size: 26,\n                        zIndex: data.length - i,\n                        number: i + 1\n                    };\n\n                    if (this.props.multiple || this.props.mini) {\n                        options.size = 20;\n                        options.lineWidth = 0;\n                        if (i >= 10 || this.props.mini) {\n                            options.isShowNumber = false;\n                            options.size = 10;\n                            options.strokeStyle = fillStyle;\n                            options.lineWidth = 3;\n                            options.strokeOpacity = 0.4;\n                        }\n                    }\n\n                    var marker = new _NumberMarker2.default(options);\n\n                    marker.addEventListener('click', function (e, number) {\n                        self.props.onClick && self.props.onClick(number - 1);\n                    });\n\n                    marker.addEventListener('mouseover', function (e, number) {\n                        self.props.onMouseOver && self.props.onMouseOver(number - 1);\n                    });\n\n                    marker.addEventListener('mouseout', function (e, number) {\n                        self.props.onMouseOut && self.props.onMouseOut(number - 1);\n                    });\n\n                    marker.index = i;\n                    this.markers.push(marker);\n                    mapvData.push({\n                        geometry: {\n                            type: 'Point',\n                            coordinates: [location[0], location[1]]\n                        },\n                        count: data[i].count,\n                        text: data[i].text\n                    });\n                }\n            }\n\n            var length = this.markers.length;\n            while (length--) {\n                map.addOverlay(this.markers[length]);\n            }\n\n            if (this.props.mini) {\n                this.dataSet.set(mapvData);\n            } else {\n                this.dataSet.set(mapvData.splice(0, 10));\n            }\n\n            this.setViewport();\n        }\n    }, {\n        key: 'setViewport',\n        value: function setViewport() {\n            var map = this.props.map;\n            if (!map) {\n                return;\n            }\n            var data = this.props.data;\n            var projection = map.getMapType().getProjection();\n            var points = [];\n            for (var i = 0; i < data.length; i++) {\n                if (data[i].location) {\n                    var location = data[i].location.split(',');\n                    if (this.props.coordType && this.props.coordType === 'bd09mc') {\n                        var point = projection.pointToLngLat(new BMap.Pixel(location[0], location[1]));\n                    } else {\n                        var point = new BMap.Point(location[0], location[1]);\n                    }\n                    points.push(point);\n                }\n            }\n\n            if (points.length > 0 && this.props.autoViewport !== false) {\n                map.setViewport(points, this.props.viewportOptions);\n            }\n        }\n    }], [{\n        key: 'defaultProps',\n        get: function get() {\n            return {\n                autoViewport: true\n            };\n        }\n    }]);\n\n    return MarkerList;\n}(_component2.default);\n\nexports.default = MarkerList;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/components/marker-list.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/components/marker-order-tip.js":
/*!********************************************************************!*\
  !*** ./node_modules/react-bmap/lib/components/marker-order-tip.js ***!
  \********************************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(/*! react */ \"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _marker = __webpack_require__(/*! ./marker */ \"./node_modules/react-bmap/lib/components/marker.js\");\n\nvar _marker2 = _interopRequireDefault(_marker);\n\nvar _kitsJs = __webpack_require__(/*! kits-js */ \"./node_modules/kits-js/lib/index.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar MarkerOrderTip = function (_React$Component) {\n    _inherits(MarkerOrderTip, _React$Component);\n\n    function MarkerOrderTip(args) {\n        _classCallCheck(this, MarkerOrderTip);\n\n        var _this = _possibleConstructorReturn(this, (MarkerOrderTip.__proto__ || Object.getPrototypeOf(MarkerOrderTip)).call(this, args));\n\n        _this.createMarker = _this.createMarker.bind(_this);\n        _this.state = {};\n        return _this;\n    }\n\n    _createClass(MarkerOrderTip, [{\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps) {\n            var preData = JSON.stringify(prevProps.data);\n            var data = JSON.stringify(this.props.data);\n            if (preData != data || !this.map) {}\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {}\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {}\n    }, {\n        key: 'createMarker',\n        value: function createMarker() {\n            var self = this;\n            var _props = this.props,\n                position = _props.position,\n                num = _props.num,\n                rate = _props.rate,\n                name = _props.name,\n                rightModule = _props.rightModule,\n                order = _props.order,\n                _props$visible = _props.visible,\n                visible = _props$visible === undefined ? true : _props$visible;\n\n            var point = _kitsJs.bmap.createPoint(position);\n            var up = true;\n            if (rate) {\n                if (rate.indexOf('-') > -1) {\n                    up = false;\n                    rate = rate.replace(/-/, '');\n                }\n                if (rate.indexOf('+') > -1) {\n                    up = true;\n                    rate = rate.replace('+', '');\n                }\n                if (rate.length == 0) {\n                    rate = '_';\n                }\n            }\n\n            var custom_overlay = {\n                'display': 'flex',\n                'justifyContent': 'space-between',\n                'background': '#FFFFFF',\n                'alignItems': 'stretch',\n                'boxShadow': '0 2px 2px 0 rgba(0, 0, 0, 0.22)',\n                'borderRadius': '3px 0 0 3px',\n                'minWidth': '155px',\n                'minHeight': '50px',\n                'marginTop': '-25px'\n            };\n\n            var order_style = {\n                minWidth: '30px',\n                background: '#999999',\n                color: 'white',\n                padding: 'auto 0',\n                display: 'flex',\n                'justifyContent': 'center',\n                'alignItems': 'center'\n            };\n\n            if (this.props.active) {\n                order_style.background = '#F5533D';\n            }\n            if (this.props.leftStyle) {\n                order_style = _kitsJs.obj.merge(order_style, this.props.leftStyle);\n            }\n            if (this.props.style) {\n                custom_overlay = _kitsJs.obj.merge(custom_overlay, this.props.style);\n            }\n\n            var right_style = {\n                flex: '1',\n                padding: '6px',\n                'justifyContent': 'center',\n                'alignItems': 'center',\n                'fontSize': '12px',\n                color: '#8D93A3',\n                'letterSpacing': '0.6px'\n            };\n\n            if (this.props.rightStyle) {\n                right_style = _kitsJs.obj.merge(right_style, this.props.rightStyle);\n            }\n\n            var eventKeys = Object.keys(self.props).filter(function (p) {\n                return p.indexOf('on') == 0;\n            });\n            var events = [];\n            eventKeys.map(function (key) {\n                events[key] = self.props[key];\n            });\n            if (visible) {\n                return _react2.default.createElement(\n                    _marker2.default,\n                    {\n                        key: JSON.stringify(point) + Math.random(),\n                        map: this.props.map,\n                        position: point,\n                        zIndex: self.props.zIndex\n                        // {...this.props}\n                        // offset={new BMap.Size(-75, -60)}\n                    },\n                    _react2.default.createElement(\n                        'div',\n                        _extends({\n                            key: JSON.stringify(point) + Math.random(),\n                            style: custom_overlay\n                        }, events),\n                        _react2.default.createElement(\n                            'div',\n                            { style: order_style },\n                            order\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { style: right_style },\n                            !rightModule && _react2.default.createElement(\n                                'div',\n                                null,\n                                '  ',\n                                num + '(' + rate,\n                                up ? _react2.default.createElement('img', {\n                                    style: {\n                                        width: '8px',\n                                        height: 'auto',\n                                        margin: '1px'\n                                    },\n                                    src: '//huiyan.baidu.com/cms/react-bmap/up.png'\n                                }) : _react2.default.createElement('img', {\n                                    style: {\n                                        width: '8px',\n                                        height: 'auto',\n                                        margin: '1px'\n                                    },\n                                    src: '//huiyan.baidu.com/cms/react-bmap/down.png'\n                                }),\n                                ')'\n                            ),\n                            rightModule ? rightModule : _react2.default.createElement(\n                                'div',\n                                null,\n                                '  ',\n                                name,\n                                ' '\n                            )\n                        )\n                    )\n                );\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var self = this;\n            var marker = this.createMarker();\n            return marker;\n        }\n    }], [{\n        key: 'defaultProps',\n        get: function get() {\n            return {\n                autoViewport: true\n            };\n        }\n    }]);\n\n    return MarkerOrderTip;\n}(_react2.default.Component);\n// MarkerOrderTip.defaultProps = {\n//     name: '无文字',\n//     rate: '_',\n//     order: 0,\n//     num: 0,\n//     visible: true,\n//     position:[89.430831,32.511366],\n//     rightModule:<dom/>,\n// }\n\n\nexports.default = MarkerOrderTip;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/components/marker-order-tip.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/components/marker.js":
/*!**********************************************************!*\
  !*** ./node_modules/react-bmap/lib/components/marker.js ***!
  \**********************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(/*! react */ \"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = __webpack_require__(/*! react-dom */ \"./node_modules/react-dom/index.js\");\n\nvar _component = __webpack_require__(/*! ./component */ \"./node_modules/react-bmap/lib/components/component.js\");\n\nvar _component2 = _interopRequireDefault(_component);\n\nvar _markerOrderTip = __webpack_require__(/*! ./marker-order-tip */ \"./node_modules/react-bmap/lib/components/marker-order-tip.js\");\n\nvar _markerOrderTip2 = _interopRequireDefault(_markerOrderTip);\n\nvar _CustomOverlay = __webpack_require__(/*! ../overlay/CustomOverlay */ \"./node_modules/react-bmap/lib/overlay/CustomOverlay.js\");\n\nvar _CustomOverlay2 = _interopRequireDefault(_CustomOverlay);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @file 地图标注组件\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @author kyle(hinikai@gmail.com)\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar defaultIconUrl = '//huiyan.baidu.com/cms/react-bmap/markers_new2x_fbb9e99.png';\n\nvar icons = {\n    'simple_red': new BMap.Icon(defaultIconUrl, new BMap.Size(42 / 2, 66 / 2), {\n        imageOffset: new BMap.Size(-454 / 2, -378 / 2),\n        anchor: new BMap.Size(42 / 2 / 2, 66 / 2),\n        imageSize: new BMap.Size(600 / 2, 600 / 2)\n    }),\n    'simple_blue': new BMap.Icon(defaultIconUrl, new BMap.Size(42 / 2, 66 / 2), {\n        imageOffset: new BMap.Size(-454 / 2, -450 / 2),\n        anchor: new BMap.Size(42 / 2 / 2, 66 / 2),\n        imageSize: new BMap.Size(600 / 2, 600 / 2)\n    }),\n    'loc_red': new BMap.Icon(defaultIconUrl, new BMap.Size(46 / 2, 70 / 2), {\n        imageOffset: new BMap.Size(-400 / 2, -378 / 2),\n        anchor: new BMap.Size(46 / 2 / 2, 70 / 2),\n        imageSize: new BMap.Size(600 / 2, 600 / 2)\n    }),\n    'loc_blue': new BMap.Icon(defaultIconUrl, new BMap.Size(46 / 2, 70 / 2), {\n        imageOffset: new BMap.Size(-400 / 2, -450 / 2),\n        anchor: new BMap.Size(46 / 2 / 2, 70 / 2),\n        imageSize: new BMap.Size(600 / 2, 600 / 2)\n    }),\n    'start': new BMap.Icon(defaultIconUrl, new BMap.Size(50 / 2, 80 / 2), {\n        imageOffset: new BMap.Size(-400 / 2, -278 / 2),\n        anchor: new BMap.Size(50 / 2 / 2, 80 / 2),\n        imageSize: new BMap.Size(600 / 2, 600 / 2)\n    }),\n    'end': new BMap.Icon(defaultIconUrl, new BMap.Size(50 / 2, 80 / 2), {\n        imageOffset: new BMap.Size(-450 / 2, -278 / 2),\n        anchor: new BMap.Size(50 / 2 / 2, 80 / 2),\n        imageSize: new BMap.Size(600 / 2, 600 / 2)\n    }),\n    'location': new BMap.Icon(defaultIconUrl, new BMap.Size(28 / 2, 40 / 2), {\n        imageOffset: new BMap.Size(-248 / 2, -466 / 2),\n        anchor: new BMap.Size(28 / 2 / 2, 40 / 2),\n        imageSize: new BMap.Size(600 / 2, 600 / 2)\n    })\n};\n\nfor (var i = 1; i <= 10; i++) {\n    icons['red' + i] = new BMap.Icon(defaultIconUrl, new BMap.Size(42 / 2, 66 / 2), {\n        imageOffset: new BMap.Size(0 - 42 / 2 * (i - 1), 0),\n        anchor: new BMap.Size(42 / 2 / 2, 66 / 2),\n        imageSize: new BMap.Size(600 / 2, 600 / 2)\n    });\n}\n\nfor (var i = 1; i <= 10; i++) {\n    icons['blue' + i] = new BMap.Icon(defaultIconUrl, new BMap.Size(42 / 2, 66 / 2), {\n        imageOffset: new BMap.Size(0 - 42 / 2 * (i - 1), -132 / 2),\n        anchor: new BMap.Size(42 / 2 / 2, 66 / 2),\n        imageSize: new BMap.Size(600 / 2, 600 / 2)\n    });\n}\n\nvar Marker = function (_Component) {\n    _inherits(Marker, _Component);\n\n    function Marker(args) {\n        _classCallCheck(this, Marker);\n\n        var _this = _possibleConstructorReturn(this, (Marker.__proto__ || Object.getPrototypeOf(Marker)).call(this, args));\n\n        _this.state = {};\n        return _this;\n    }\n\n    /**\n     * 设置默认的props属性\n     */\n\n\n    _createClass(Marker, [{\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps) {\n            this.initialize();\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.initialize();\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            this.destroy();\n        }\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            if (this.marker) {\n                this.props.map.removeOverlay(this.marker);\n                this.marker = null;\n            }\n        }\n    }, {\n        key: 'initialize',\n        value: function initialize() {\n\n            var map = this.props.map;\n            var type = this.props.type;\n            if (type == 'order_tip' || !map) {\n                return;\n            }\n\n            this.destroy();\n\n            var icon;\n            var propsIcon = this.props.icon;\n\n            if (propsIcon && propsIcon instanceof BMap.Icon) {\n                icon = propsIcon;\n            } else {\n                if (propsIcon && icons[propsIcon]) {\n                    icon = icons[propsIcon];\n                } else {\n                    icon = icons.simple_red;\n                }\n            }\n\n            if (this.props.coordType === 'bd09mc') {\n                var projection = map.getMapType().getProjection();\n                var position = projection.pointToLngLat(new BMap.Pixel(this.props.position.lng, this.props.position.lat));\n            } else {\n                var position = new BMap.Point(this.props.position.lng, this.props.position.lat);\n            }\n\n            if ('children' in this.props) {\n                this.contentDom = document.createElement('div');\n                var child = this.props.children;\n                (0, _reactDom.render)(_react2.default.createElement(\n                    'div',\n                    null,\n                    child\n                ), this.contentDom);\n                this.marker = new _CustomOverlay2.default(position, this.contentDom, {\n                    zIndex: this.props.zIndex,\n                    pane: this.props.pane,\n                    offset: this.props.offset\n                });\n                map.addOverlay(this.marker);\n            } else {\n                var options = this.getOptions(this.options);\n                options.icon = icon;\n                this.marker = new BMap.Marker(position, options);\n                if (this.props.isTop) {\n                    this.marker.setTop(true);\n                }\n                this.bindEvent(this.marker, this.events);\n\n                map.addOverlay(this.marker);\n                this.bindToggleMeghods(this.marker, this.toggleMethods);\n            }\n\n            if (this.props.autoViewport) {\n                map.setViewport([position], this.props.ViewportOptions);\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var type = this.props.type;\n            if (type == 'order_tip') {\n                return _react2.default.createElement(_markerOrderTip2.default, this.props);\n            } else {\n                return null;\n            }\n        }\n    }, {\n        key: 'events',\n\n\n        /**\n         * 获取可以给marker绑定的事件名\n         */\n        get: function get() {\n            return ['click', 'dblclick', 'mousedown', 'mouseup', 'mouseout', 'mouseover', 'remove', 'infowindowclose', 'infowindowopen', 'dragstart', 'dragging', 'dragend', 'rightclick'];\n        }\n    }, {\n        key: 'toggleMethods',\n        get: function get() {\n            return {\n                enableMassClear: ['enableMassClear', 'disableMassClear'],\n                enableDragging: ['enableDragging', 'disableDragging']\n            };\n        }\n    }, {\n        key: 'options',\n        get: function get() {\n            return ['offset', 'icon', 'enableMassClear', 'enableDragging', 'enableClicking', 'raiseOnDrag', 'draggingCursor', 'rotation', 'shadow', 'title'];\n        }\n    }], [{\n        key: 'defaultProps',\n        get: function get() {\n            return {};\n        }\n    }]);\n\n    return Marker;\n}(_component2.default);\n\nexports.default = Marker;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/components/marker.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/components/navigation-control.js":
/*!**********************************************************************!*\
  !*** ./node_modules/react-bmap/lib/components/navigation-control.js ***!
  \**********************************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _control = __webpack_require__(/*! ./control */ \"./node_modules/react-bmap/lib/components/control.js\");\n\nvar _control2 = _interopRequireDefault(_control);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @file 地图的平移缩放控件，可以对地图进行上下左右四个方向的平移和缩放操作\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @author kyle(hinikai@gmail.com)\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar NavigationControl = function (_Control) {\n    _inherits(NavigationControl, _Control);\n\n    function NavigationControl(args) {\n        _classCallCheck(this, NavigationControl);\n\n        return _possibleConstructorReturn(this, (NavigationControl.__proto__ || Object.getPrototypeOf(NavigationControl)).call(this, args));\n    }\n\n    _createClass(NavigationControl, [{\n        key: 'getControl',\n        value: function getControl() {\n            return new BMap.NavigationControl(this.getOptions(this.options));\n        }\n    }, {\n        key: 'options',\n        get: function get() {\n            return ['anchor', 'offset', 'type', 'showZoomInfo', 'enableGeolocation'];\n        }\n    }]);\n\n    return NavigationControl;\n}(_control2.default);\n\nexports.default = NavigationControl;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/components/navigation-control.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/components/overview-map-control.js":
/*!************************************************************************!*\
  !*** ./node_modules/react-bmap/lib/components/overview-map-control.js ***!
  \************************************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _control = __webpack_require__(/*! ./control */ \"./node_modules/react-bmap/lib/components/control.js\");\n\nvar _control2 = _interopRequireDefault(_control);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @file 缩略地图控件\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @author kyle(hinikai@gmail.com)\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar OverviewMapControl = function (_Control) {\n    _inherits(OverviewMapControl, _Control);\n\n    function OverviewMapControl(args) {\n        _classCallCheck(this, OverviewMapControl);\n\n        return _possibleConstructorReturn(this, (OverviewMapControl.__proto__ || Object.getPrototypeOf(OverviewMapControl)).call(this, args));\n    }\n\n    _createClass(OverviewMapControl, [{\n        key: 'getControl',\n        value: function getControl() {\n            return new BMap.OverviewMapControl(this.getOptions(this.options));\n        }\n    }, {\n        key: 'options',\n        get: function get() {\n            return ['anchor', 'offset', 'size', 'isOpen'];\n        }\n    }]);\n\n    return OverviewMapControl;\n}(_control2.default);\n\nexports.default = OverviewMapControl;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/components/overview-map-control.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/components/panorama-control.js":
/*!********************************************************************!*\
  !*** ./node_modules/react-bmap/lib/components/panorama-control.js ***!
  \********************************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _control = __webpack_require__(/*! ./control */ \"./node_modules/react-bmap/lib/components/control.js\");\n\nvar _control2 = _interopRequireDefault(_control);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @file 地图的全景图控件\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar PanoramaControl = function (_Control) {\n    _inherits(PanoramaControl, _Control);\n\n    function PanoramaControl(args) {\n        _classCallCheck(this, PanoramaControl);\n\n        return _possibleConstructorReturn(this, (PanoramaControl.__proto__ || Object.getPrototypeOf(PanoramaControl)).call(this, args));\n    }\n\n    _createClass(PanoramaControl, [{\n        key: 'getControl',\n        value: function getControl() {\n            return new BMap.PanoramaControl(this.getOptions(this.options));\n        }\n    }, {\n        key: 'options',\n        get: function get() {\n            return ['anchor', 'offset'];\n        }\n    }]);\n\n    return PanoramaControl;\n}(_control2.default);\n\nexports.default = PanoramaControl;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/components/panorama-control.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/components/point-label.js":
/*!***************************************************************!*\
  !*** ./node_modules/react-bmap/lib/components/point-label.js ***!
  \***************************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(/*! react */ \"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = __webpack_require__(/*! react-dom */ \"./node_modules/react-dom/index.js\");\n\nvar _component = __webpack_require__(/*! ./component */ \"./node_modules/react-bmap/lib/components/component.js\");\n\nvar _component2 = _interopRequireDefault(_component);\n\nvar _DraggingTip = __webpack_require__(/*! ../overlay/DraggingTip */ \"./node_modules/react-bmap/lib/overlay/DraggingTip.js\");\n\nvar _DraggingTip2 = _interopRequireDefault(_DraggingTip);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @file 文本标注组件\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @author kyle(hinikai@gmail.com)\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar PointLabel = function (_Component) {\n    _inherits(PointLabel, _Component);\n\n    function PointLabel(args) {\n        _classCallCheck(this, PointLabel);\n\n        var _this = _possibleConstructorReturn(this, (PointLabel.__proto__ || Object.getPrototypeOf(PointLabel)).call(this, args));\n\n        _this.state = {};\n        _this.tips = [];\n        return _this;\n    }\n\n    /**\n     * 设置默认的props属性\n     */\n\n\n    _createClass(PointLabel, [{\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps) {\n            this.initialize();\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.initialize();\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            this.destroy();\n        }\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            this.tips.forEach(function (tip) {\n                tip.hide();\n            });\n            this.tips = [];\n        }\n    }, {\n        key: 'initialize',\n        value: function initialize() {\n            var _this2 = this;\n\n            var map = this.props.map;\n            if (!map) {\n                return;\n            }\n\n            this.destroy();\n\n            if (this.props.data) {\n                var points = [];\n                this.props.data.forEach(function (item, index) {\n                    var tip = new _DraggingTip2.default({\n                        isShowTipArrow: true,\n                        changePosition: function changePosition(point) {\n                            _this2.props.changePosition && _this2.props.changePosition(point, index);\n                        },\n                        map: map,\n                        numberDirection: item.numberDirection,\n                        isShowNumber: item.isShowNumber,\n                        point: item.point,\n                        name: item.name,\n                        index: item.index !== undefined ? item.index : index + 1,\n                        color: item.color,\n                        change: function change() {}\n                    });\n                    points.push(item.point);\n                    tip.show();\n                    _this2.tips.push(tip);\n                });\n\n                if (this.props.autoViewport) {\n                    map.setViewport(points, this.props.viewportOptions);\n                }\n            }\n        }\n    }], [{\n        key: 'defaultProps',\n        get: function get() {\n            return {};\n        }\n    }]);\n\n    return PointLabel;\n}(_component2.default);\n\nexports.default = PointLabel;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/components/point-label.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/components/polygon.js":
/*!***********************************************************!*\
  !*** ./node_modules/react-bmap/lib/components/polygon.js ***!
  \***********************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _graphy = __webpack_require__(/*! ./graphy */ \"./node_modules/react-bmap/lib/components/graphy.js\");\n\nvar _graphy2 = _interopRequireDefault(_graphy);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @file 多边形覆盖物\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @author kyle(hinikai@gmail.com)\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar Polygon = function (_Graphy) {\n    _inherits(Polygon, _Graphy);\n\n    function Polygon(args) {\n        _classCallCheck(this, Polygon);\n\n        return _possibleConstructorReturn(this, (Polygon.__proto__ || Object.getPrototypeOf(Polygon)).call(this, args));\n    }\n\n    _createClass(Polygon, [{\n        key: 'getOverlay',\n        value: function getOverlay() {\n\n            var path = this.props.path;\n\n            path = path.map(function (item) {\n                return new BMap.Point(item.lng, item.lat);\n            });\n\n            return new BMap.Polygon(path, this.getOptions(this.options));\n        }\n    }]);\n\n    return Polygon;\n}(_graphy2.default);\n\nexports.default = Polygon;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/components/polygon.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/components/polyline.js":
/*!************************************************************!*\
  !*** ./node_modules/react-bmap/lib/components/polyline.js ***!
  \************************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _graphy = __webpack_require__(/*! ./graphy */ \"./node_modules/react-bmap/lib/components/graphy.js\");\n\nvar _graphy2 = _interopRequireDefault(_graphy);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @file 折线覆盖物\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @author kyle(hinikai@gmail.com)\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar Polyline = function (_Graphy) {\n    _inherits(Polyline, _Graphy);\n\n    function Polyline(args) {\n        _classCallCheck(this, Polyline);\n\n        return _possibleConstructorReturn(this, (Polyline.__proto__ || Object.getPrototypeOf(Polyline)).call(this, args));\n    }\n\n    _createClass(Polyline, [{\n        key: 'getOverlay',\n        value: function getOverlay() {\n\n            var path = this.props.path;\n\n            path = path.map(function (item) {\n                return new BMap.Point(item.lng, item.lat);\n            });\n\n            return new BMap.Polyline(path, this.getOptions(this.options));\n        }\n    }]);\n\n    return Polyline;\n}(_graphy2.default);\n\nexports.default = Polyline;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/components/polyline.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/components/road.js":
/*!********************************************************!*\
  !*** ./node_modules/react-bmap/lib/components/road.js ***!
  \********************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _component = __webpack_require__(/*! ./component */ \"./node_modules/react-bmap/lib/components/component.js\");\n\nvar _component2 = _interopRequireDefault(_component);\n\nvar _mapv = __webpack_require__(/*! mapv */ \"./node_modules/mapv/build/mapv.js\");\n\nvar _mapLine = __webpack_require__(/*! ../utils/map-line */ \"./node_modules/react-bmap/lib/utils/map-line.js\");\n\nvar _mapLine2 = _interopRequireDefault(_mapLine);\n\nvar _geoUtils = __webpack_require__(/*! ../utils/geo-utils */ \"./node_modules/react-bmap/lib/utils/geo-utils.js\");\n\nvar _geoUtils2 = _interopRequireDefault(_geoUtils);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @file 道路组件\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * nikai@baidu.com\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar Road = function (_Component) {\n    _inherits(Road, _Component);\n\n    function Road(args) {\n        _classCallCheck(this, Road);\n\n        var _this = _possibleConstructorReturn(this, (Road.__proto__ || Object.getPrototypeOf(Road)).call(this, args));\n\n        _this.state = {};\n        return _this;\n    }\n\n    _createClass(Road, [{\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps) {\n            this.initialize();\n        }\n    }, {\n        key: 'getRoadPoints',\n        value: function getRoadPoints(roadPath) {\n            var projection = this.props.map.getMapType().getProjection();\n            var points = [];\n            for (var i = 0; i < roadPath.length; i++) {\n                var tmp = roadPath[i].split(',');\n                for (var j = 0; j < tmp.length; j += 2) {\n                    if (this.props.coordType === 'bd09mc') {\n                        points.push(projection.pointToLngLat(new BMap.Pixel(tmp[j], tmp[j + 1])));\n                    } else {\n                        points.push(new BMap.Point(tmp[j], tmp[j + 1]));\n                    }\n                }\n            }\n            return points;\n        }\n    }, {\n        key: 'updateViewport',\n        value: function updateViewport() {\n            var _this2 = this;\n\n            var roadPath = this.props.roadPath;\n            var points = [];\n\n            if (this.props.roadPaths) {\n                this.props.roadPaths.forEach(function (roadPath) {\n                    points = points.concat(_this2.getRoadPoints(roadPath));\n                });\n            } else if (this.props.roadPath) {\n                points = points.concat(this.getRoadPoints(this.props.roadPath));\n            }\n\n            if (points.length > 0 && this.props.autoViewport !== false) {\n                this.props.map.setViewport(points, this.props.viewportOptions);\n            }\n        }\n    }, {\n        key: 'getRoadGroup',\n        value: function getRoadGroup(roadPath, category, splitList) {\n            var roadPath = roadPath;\n            var category = category;\n            var splitList = splitList;\n            var data = {};\n            var allPath = [];\n            if (category) {\n                for (var i = 0; i < category.length; i++) {\n                    if (!data[category[i]]) {\n                        data[category[i]] = {\n                            roadPath: [],\n                            color: splitList[category[i]]\n                        };\n                    }\n                    allPath.push(roadPath[i]);\n                    data[category[i]].roadPath.push(roadPath[i]);\n                }\n            } else {\n                data[0] = {\n                    roadPath: roadPath,\n                    color: this.props.color || '#1495ff'\n                };\n            }\n            return {\n                group: data,\n                allPath: _geoUtils2.default.mergeRoadPath(roadPath)\n            };\n        }\n    }, {\n        key: 'isClick',\n        value: function isClick(map, pixel, roadPath) {\n            var ctx = this.canvasLayer.canvas.getContext('2d');\n            var roadGroup = this.getRoadGroup(roadPath);\n            ctx.beginPath();\n            var lineWidth = this.props.lineWidth || 10;\n            _mapLine2.default.drawRoads(map, ctx, roadGroup.allPath, {\n                color: this.props.bgColor || '#fff',\n                lineWidth: lineWidth + 4,\n                lineCap: 'butt',\n                arrow: false,\n                line: false\n            });\n            ctx.lineWidth = lineWidth + 6;\n            var isPointInStroke = ctx.isPointInStroke(pixel.x * window.devicePixelRatio, pixel.y * window.devicePixelRatio);\n            return isPointInStroke;\n        }\n    }, {\n        key: 'initialize',\n        value: function initialize() {\n            var _this3 = this;\n\n            var map = this.props.map;\n            if (!map) {\n                return;\n            }\n\n            var _update = this.canvasLayerUpdate.bind(this);\n            if (this.canvasLayer) {\n                this.canvasLayer.draw();\n            } else {\n                this.canvasLayer = new _mapv.baiduMapCanvasLayer({\n                    zIndex: this.props.zIndex,\n                    map: map,\n                    update: function update() {\n                        _update(this);\n                    }\n                });\n                if (this.props.onClick) {\n                    map.addEventListener('click', function (e) {\n\n                        var isClick = false;\n                        if (_this3.props.roadPaths) {\n                            for (var i = 0; i < _this3.props.roadPaths.length; i++) {\n                                var roadPath = _this3.props.roadPaths[i];\n                                isClick = _this3.isClick(map, e.pixel, roadPath);\n                                if (isClick) {\n                                    _this3.props.onClick(i);\n                                }\n                            };\n                        } else if (_this3.props.roadPath) {\n                            isClick = _this3.isClick(map, e.pixel, _this3.props.roadPath);\n                            if (isClick) {\n                                _this3.props.onClick();\n                            }\n                        }\n                    });\n                }\n            }\n\n            this.updateViewport();\n        }\n    }, {\n        key: 'canvasLayerUpdate',\n        value: function canvasLayerUpdate(canvasLayer) {\n            var _this4 = this;\n\n            var ctx = canvasLayer.canvas.getContext('2d');\n            if (!ctx) {\n                return false;\n            }\n            ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n\n            var roadPath = this.props.roadPath;\n            var roadPaths = this.props.roadPaths;\n\n            var lineWidth = this.props.lineWidth || 10;\n\n            if (roadPaths) {\n                roadPaths.forEach(function (roadPath, index) {\n                    if (_this4.props.lineWidths) {\n                        lineWidth = _this4.props.lineWidths[index];\n                    }\n                    _this4.drawRoad(ctx, roadPath, _this4.props.category, _this4.props.splitList, lineWidth);\n                });\n            } else if (roadPath) {\n                this.drawRoad(ctx, this.props.roadPath, this.props.category, this.props.splitList, lineWidth);\n            }\n        }\n    }, {\n        key: 'drawRoad',\n        value: function drawRoad(ctx, roadPath, category, splitList, lineWidth) {\n            var roadGroup = this.getRoadGroup(roadPath, category, splitList);\n            var data = roadGroup.group;\n\n            _mapLine2.default.drawRoads(this.props.map, ctx, roadGroup.allPath, {\n                color: this.props.bgColor || '#fff',\n                coordType: this.props.coordType,\n                lineWidth: lineWidth + 4,\n                lineCap: 'butt',\n                arrow: false,\n                line: true\n            });\n\n            for (var key in data) {\n                var item = data[key];\n                var roadPath = _geoUtils2.default.mergeRoadPath(item.roadPath);\n                _mapLine2.default.drawRoads(this.props.map, ctx, roadPath, {\n                    color: item.color,\n                    coordType: this.props.coordType,\n                    line: true,\n                    lineWidth: lineWidth,\n                    lineCap: 'butt',\n                    arrow: false\n                });\n            };\n\n            _mapLine2.default.drawRoads(this.props.map, ctx, roadGroup.allPath, {\n                color: item.color,\n                coordType: this.props.coordType,\n                lineWidth: lineWidth,\n                border: {},\n                lineCap: 'butt',\n                arrow: this.props.isShowArrow !== false ? {\n                    width: 5,\n                    height: 3,\n                    color: this.props.arrowColor\n                } : false\n            });\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.initialize();\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            this.canvasLayer.hide();\n        }\n    }]);\n\n    return Road;\n}(_component2.default);\n\nexports.default = Road;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/components/road.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/components/scale-control.js":
/*!*****************************************************************!*\
  !*** ./node_modules/react-bmap/lib/components/scale-control.js ***!
  \*****************************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _control = __webpack_require__(/*! ./control */ \"./node_modules/react-bmap/lib/components/control.js\");\n\nvar _control2 = _interopRequireDefault(_control);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @file 比例尺控件\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @author kyle(hinikai@gmail.com)\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar ScaleControl = function (_Control) {\n    _inherits(ScaleControl, _Control);\n\n    function ScaleControl(args) {\n        _classCallCheck(this, ScaleControl);\n\n        return _possibleConstructorReturn(this, (ScaleControl.__proto__ || Object.getPrototypeOf(ScaleControl)).call(this, args));\n    }\n\n    _createClass(ScaleControl, [{\n        key: 'getControl',\n        value: function getControl() {\n            return new BMap.ScaleControl(this.getOptions(this.options));\n        }\n    }, {\n        key: 'options',\n        get: function get() {\n            return ['anchor', 'offset'];\n        }\n    }]);\n\n    return ScaleControl;\n}(_control2.default);\n\nexports.default = ScaleControl;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/components/scale-control.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/components/thick-ray.js":
/*!*************************************************************!*\
  !*** ./node_modules/react-bmap/lib/components/thick-ray.js ***!
  \*************************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(/*! react */ \"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _component = __webpack_require__(/*! ./component */ \"./node_modules/react-bmap/lib/components/component.js\");\n\nvar _component2 = _interopRequireDefault(_component);\n\nvar _mapv = __webpack_require__(/*! mapv */ \"./node_modules/mapv/build/mapv.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @file 迁徙组件，粗细射线\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @author junior2ran\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n\nvar ThickRay = function (_Component) {\n    _inherits(ThickRay, _Component);\n\n    function ThickRay(args) {\n        _classCallCheck(this, ThickRay);\n\n        var _this = _possibleConstructorReturn(this, (ThickRay.__proto__ || Object.getPrototypeOf(ThickRay)).call(this, args));\n\n        _this.state = {};\n        return _this;\n    }\n\n    /**\n     * 设置默认的props属性\n     */\n\n\n    _createClass(ThickRay, [{\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps) {\n            this.initialize();\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.initialize();\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            this.destroy();\n        }\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            this.lineLayer.destroy();\n            this.lineLayer = null;\n            this.pointLayer.destroy();\n            this.pointLayer = null;\n            this.textLayer.destroy();\n            this.textLayer = null;\n        }\n    }, {\n        key: 'createLayers',\n        value: function createLayers() {\n\n            this._createLayer = true;\n            var map = this.map;\n\n            var self = this;\n            this.lineDataSet = new _mapv.DataSet([]);\n            this.lineLayer = new _mapv.baiduMapLayer(map, this.lineDataSet, {});\n\n            this.pointDataSet = new _mapv.DataSet([]);\n            this.pointLayer = new _mapv.baiduMapLayer(map, this.pointDataSet, {});\n\n            this.textLayer = new _mapv.baiduMapLayer(map, this.pointDataSet, {});\n        }\n    }, {\n        key: 'initialize',\n        value: function initialize() {\n            var _this2 = this;\n\n            var map = this.map = this.props.map;\n            if (!map) {\n                return;\n            }\n\n            if (!this._createLayer) {\n                this.createLayers();\n            }\n\n            var lineData = [];\n            var pointData = [];\n\n            var isCurve = Boolean(this.props.type === 'curve');\n\n            if (this.props.data) {\n                var points = [];\n                var projection = map.getMapType().getProjection();\n\n                this.props.data.forEach(function (item, index) {\n                    var fromCenter = item.from.point || _mapv.utilCityCenter.getCenterByCityName(item.from.city);\n                    var toCenter = item.to.point || _mapv.utilCityCenter.getCenterByCityName(item.to.city);\n                    var curve = _mapv.utilCurve.getPoints([fromCenter, toCenter]);\n\n                    if (_this2.props.coordType === 'bd09mc') {\n                        points.push(projection.pointToLngLat(new BMap.Pixel(fromCenter.lng, fromCenter.lat)));\n                        points.push(projection.pointToLngLat(new BMap.Pixel(toCenter.lng, toCenter.lat)));\n                    } else {\n                        points.push(fromCenter);\n                        points.push(toCenter);\n                    }\n\n                    var intensity = new _mapv.utilDataRangeIntensity({\n                        maxSize: 10,\n                        minSize: 1,\n                        min: _this2.props.min || 0,\n                        max: _this2.props.max || 1000\n                    });\n                    var lineWidth = intensity.getSize(item.count);\n\n                    lineData.push({\n                        strokeStyle: item.color,\n                        geometry: {\n                            type: 'LineString',\n                            coordinates: isCurve ? curve : [[fromCenter.lng, fromCenter.lat], [toCenter.lng, toCenter.lat]]\n                        },\n                        count: item.count,\n                        lineWidth: lineWidth\n                    });\n\n                    if (_this2.props.showToPoint !== false) {\n                        pointData.push({\n                            fillStyle: item.color,\n                            text: item.to.name || item.to.city,\n                            geometry: {\n                                type: 'Point',\n                                coordinates: [toCenter.lng, toCenter.lat]\n                            }\n                        });\n                    }\n\n                    if (_this2.props.showFromPoint !== false) {\n                        pointData.push({\n                            fillStyle: item.color,\n                            text: item.from.name || item.from.city,\n                            geometry: {\n                                type: 'Point',\n                                coordinates: [fromCenter.lng, fromCenter.lat]\n                            }\n                        });\n                    }\n\n                    if (points.length > 0) {\n                        if (_this2.props.autoViewport !== false) {\n                            map.setViewport(points, _this2.props.viewportOptions);\n                        }\n                    }\n                });\n            }\n\n            this.lineDataSet.set(lineData);\n            this.lineLayer.update({\n                options: this.props.lineOptions || {\n                    coordType: this.props.coordType,\n                    draw: 'simple',\n                    strokeStyle: '#5E87DB',\n                    globalCompositeOperation: 'lighter',\n                    shadowColor: 'rgba(255, 255, 255, 0.5)',\n                    shadowBlur: 60,\n                    lineWidth: 2\n                }\n            });\n\n            this.pointDataSet.set(pointData);\n            this.pointLayer.update({\n                options: this.props.pointOptions || {\n                    coordType: this.props.coordType,\n                    draw: 'simple',\n                    fillStyle: '#5E87DB',\n                    size: 5,\n                    shadowColor: '#5E87DB',\n                    shadowBlur: 20\n                }\n            });\n\n            this.textLayer.update({\n                options: this.props.textOptions || {\n                    coordType: this.props.coordType,\n                    draw: 'text',\n                    font: '18px Arial',\n                    offset: {\n                        x: 0,\n                        y: 12\n                    },\n                    fillStyle: '#333',\n                    size: 12\n                }\n            });\n        }\n    }], [{\n        key: 'defaultProps',\n        get: function get() {\n            return {};\n        }\n    }]);\n\n    return ThickRay;\n}(_component2.default);\n\nexports.default = ThickRay;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/components/thick-ray.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/components/traffic-layer.js":
/*!*****************************************************************!*\
  !*** ./node_modules/react-bmap/lib/components/traffic-layer.js ***!
  \*****************************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _component = __webpack_require__(/*! ./component */ \"./node_modules/react-bmap/lib/components/component.js\");\n\nvar _component2 = _interopRequireDefault(_component);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @file 交通路况图层组件\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @author kyle(hinikai@gmail.com)\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar TrafficLayer = function (_Component) {\n    _inherits(TrafficLayer, _Component);\n\n    function TrafficLayer(args) {\n        _classCallCheck(this, TrafficLayer);\n\n        var _this = _possibleConstructorReturn(this, (TrafficLayer.__proto__ || Object.getPrototypeOf(TrafficLayer)).call(this, args));\n\n        _this.state = {};\n        return _this;\n    }\n\n    _createClass(TrafficLayer, [{\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps) {\n            this.initialize();\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.initialize();\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            var map = this.props.map;\n            if (map && map.removeTileLayer && map.removeTileLayer instanceof Function && this.tileLayer) {\n                map.removeTileLayer(this.tileLayer);\n                this.tileLayer = null;\n            }\n        }\n    }, {\n        key: 'initialize',\n        value: function initialize() {\n            var map = this.props.map;\n            var defaultTilesUrl = 'http://its.map.baidu.com:8002/traffic/TrafficTileService';\n            var tilesUrl = this.props.tilesUrl ? this.props.tilesUrl : defaultTilesUrl;\n\n            if (!map) {\n                return;\n            }\n\n            if (!this.tileLayer) {\n                this.tileLayer = new BMap.TileLayer({\n                    isTransparentPng: true\n                });\n                var scaler = Math.round(window.devicePixelRatio || 1);\n                scaler = Math.min(2, scaler);\n                scaler = Math.max(1, scaler);\n                this.tileLayer.getTilesUrl = function (tileCoord, zoom) {\n                    var x = tileCoord.x;\n                    var y = tileCoord.y;\n                    var time = new Date().getTime();\n                    return tilesUrl + '?level=' + zoom + '&x=' + x + '&y=' + y + '&time=' + time + '&v=081&scaler=' + scaler; // 根据当前坐标，选取合适的瓦片图\n                };\n            }\n            map.addTileLayer(this.tileLayer);\n        }\n    }]);\n\n    return TrafficLayer;\n}(_component2.default);\n\nexports.default = TrafficLayer;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/components/traffic-layer.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/index.js":
/*!**********************************************!*\
  !*** ./node_modules/react-bmap/lib/index.js ***!
  \**********************************************/
/*! flagged exports */
/*! export Arc [provided] [no usage info] [missing usage info prevents renaming] */
/*! export Autocomplete [provided] [no usage info] [missing usage info prevents renaming] */
/*! export Boundary [provided] [no usage info] [missing usage info prevents renaming] */
/*! export Circle [provided] [no usage info] [missing usage info prevents renaming] */
/*! export DrivingRoute [provided] [no usage info] [missing usage info prevents renaming] */
/*! export InfoWindow [provided] [no usage info] [missing usage info prevents renaming] */
/*! export Map [provided] [no usage info] [missing usage info prevents renaming] */
/*! export MapListener [provided] [no usage info] [missing usage info prevents renaming] */
/*! export MapTypeControl [provided] [no usage info] [missing usage info prevents renaming] */
/*! export MapvLayer [provided] [no usage info] [missing usage info prevents renaming] */
/*! export MapvMarkerList [provided] [no usage info] [missing usage info prevents renaming] */
/*! export MapvglLayer [provided] [no usage info] [missing usage info prevents renaming] */
/*! export MapvglView [provided] [no usage info] [missing usage info prevents renaming] */
/*! export Marker [provided] [no usage info] [missing usage info prevents renaming] */
/*! export MarkerList [provided] [no usage info] [missing usage info prevents renaming] */
/*! export MarkerOrderTip [provided] [no usage info] [missing usage info prevents renaming] */
/*! export Merge [provided] [no usage info] [missing usage info prevents renaming] */
/*! export NavigationControl [provided] [no usage info] [missing usage info prevents renaming] */
/*! export OverviewMapControl [provided] [no usage info] [missing usage info prevents renaming] */
/*! export PanoramaControl [provided] [no usage info] [missing usage info prevents renaming] */
/*! export PointLabel [provided] [no usage info] [missing usage info prevents renaming] */
/*! export Polygon [provided] [no usage info] [missing usage info prevents renaming] */
/*! export Polyline [provided] [no usage info] [missing usage info prevents renaming] */
/*! export Road [provided] [no usage info] [missing usage info prevents renaming] */
/*! export ScaleControl [provided] [no usage info] [missing usage info prevents renaming] */
/*! export ThickRay [provided] [no usage info] [missing usage info prevents renaming] */
/*! export TrafficLayer [provided] [no usage info] [missing usage info prevents renaming] */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\n\nvar _map = __webpack_require__(/*! ./components/map */ \"./node_modules/react-bmap/lib/components/map.js\");\n\nObject.defineProperty(exports, \"Map\", ({\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_map).default;\n  }\n}));\n\nvar _marker = __webpack_require__(/*! ./components/marker */ \"./node_modules/react-bmap/lib/components/marker.js\");\n\nObject.defineProperty(exports, \"Marker\", ({\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_marker).default;\n  }\n}));\n\nvar _markerOrderTip = __webpack_require__(/*! ./components/marker-order-tip */ \"./node_modules/react-bmap/lib/components/marker-order-tip.js\");\n\nObject.defineProperty(exports, \"MarkerOrderTip\", ({\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_markerOrderTip).default;\n  }\n}));\n\nvar _infowindow = __webpack_require__(/*! ./components/infowindow */ \"./node_modules/react-bmap/lib/components/infowindow.js\");\n\nObject.defineProperty(exports, \"InfoWindow\", ({\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_infowindow).default;\n  }\n}));\n\nvar _navigationControl = __webpack_require__(/*! ./components/navigation-control */ \"./node_modules/react-bmap/lib/components/navigation-control.js\");\n\nObject.defineProperty(exports, \"NavigationControl\", ({\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_navigationControl).default;\n  }\n}));\n\nvar _overviewMapControl = __webpack_require__(/*! ./components/overview-map-control */ \"./node_modules/react-bmap/lib/components/overview-map-control.js\");\n\nObject.defineProperty(exports, \"OverviewMapControl\", ({\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_overviewMapControl).default;\n  }\n}));\n\nvar _scaleControl = __webpack_require__(/*! ./components/scale-control */ \"./node_modules/react-bmap/lib/components/scale-control.js\");\n\nObject.defineProperty(exports, \"ScaleControl\", ({\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_scaleControl).default;\n  }\n}));\n\nvar _mapTypeControl = __webpack_require__(/*! ./components/map-type-control */ \"./node_modules/react-bmap/lib/components/map-type-control.js\");\n\nObject.defineProperty(exports, \"MapTypeControl\", ({\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_mapTypeControl).default;\n  }\n}));\n\nvar _panoramaControl = __webpack_require__(/*! ./components/panorama-control */ \"./node_modules/react-bmap/lib/components/panorama-control.js\");\n\nObject.defineProperty(exports, \"PanoramaControl\", ({\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_panoramaControl).default;\n  }\n}));\n\nvar _circle = __webpack_require__(/*! ./components/circle */ \"./node_modules/react-bmap/lib/components/circle.js\");\n\nObject.defineProperty(exports, \"Circle\", ({\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_circle).default;\n  }\n}));\n\nvar _polyline = __webpack_require__(/*! ./components/polyline */ \"./node_modules/react-bmap/lib/components/polyline.js\");\n\nObject.defineProperty(exports, \"Polyline\", ({\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_polyline).default;\n  }\n}));\n\nvar _polygon = __webpack_require__(/*! ./components/polygon */ \"./node_modules/react-bmap/lib/components/polygon.js\");\n\nObject.defineProperty(exports, \"Polygon\", ({\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_polygon).default;\n  }\n}));\n\nvar _road = __webpack_require__(/*! ./components/road */ \"./node_modules/react-bmap/lib/components/road.js\");\n\nObject.defineProperty(exports, \"Road\", ({\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_road).default;\n  }\n}));\n\nvar _boundary = __webpack_require__(/*! ./components/boundary */ \"./node_modules/react-bmap/lib/components/boundary.js\");\n\nObject.defineProperty(exports, \"Boundary\", ({\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_boundary).default;\n  }\n}));\n\nvar _markerList = __webpack_require__(/*! ./components/marker-list */ \"./node_modules/react-bmap/lib/components/marker-list.js\");\n\nObject.defineProperty(exports, \"MarkerList\", ({\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_markerList).default;\n  }\n}));\n\nvar _mapvMarkerList = __webpack_require__(/*! ./components/mapv-marker-list */ \"./node_modules/react-bmap/lib/components/mapv-marker-list.js\");\n\nObject.defineProperty(exports, \"MapvMarkerList\", ({\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_mapvMarkerList).default;\n  }\n}));\n\nvar _trafficLayer = __webpack_require__(/*! ./components/traffic-layer */ \"./node_modules/react-bmap/lib/components/traffic-layer.js\");\n\nObject.defineProperty(exports, \"TrafficLayer\", ({\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_trafficLayer).default;\n  }\n}));\n\nvar _merge = __webpack_require__(/*! ./utils/merge */ \"./node_modules/react-bmap/lib/utils/merge.js\");\n\nObject.defineProperty(exports, \"Merge\", ({\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_merge).default;\n  }\n}));\n\nvar _mapvLayer = __webpack_require__(/*! ./components/mapv-layer */ \"./node_modules/react-bmap/lib/components/mapv-layer.js\");\n\nObject.defineProperty(exports, \"MapvLayer\", ({\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_mapvLayer).default;\n  }\n}));\n\nvar _mapvglLayer = __webpack_require__(/*! ./components/mapvgl-layer */ \"./node_modules/react-bmap/lib/components/mapvgl-layer.js\");\n\nObject.defineProperty(exports, \"MapvglLayer\", ({\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_mapvglLayer).default;\n  }\n}));\n\nvar _mapvglView = __webpack_require__(/*! ./components/mapvgl-view */ \"./node_modules/react-bmap/lib/components/mapvgl-view.js\");\n\nObject.defineProperty(exports, \"MapvglView\", ({\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_mapvglView).default;\n  }\n}));\n\nvar _drivingRoute = __webpack_require__(/*! ./components/driving-route */ \"./node_modules/react-bmap/lib/components/driving-route.js\");\n\nObject.defineProperty(exports, \"DrivingRoute\", ({\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_drivingRoute).default;\n  }\n}));\n\nvar _pointLabel = __webpack_require__(/*! ./components/point-label */ \"./node_modules/react-bmap/lib/components/point-label.js\");\n\nObject.defineProperty(exports, \"PointLabel\", ({\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_pointLabel).default;\n  }\n}));\n\nvar _arc = __webpack_require__(/*! ./components/arc */ \"./node_modules/react-bmap/lib/components/arc.js\");\n\nObject.defineProperty(exports, \"Arc\", ({\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_arc).default;\n  }\n}));\n\nvar _thickRay = __webpack_require__(/*! ./components/thick-ray */ \"./node_modules/react-bmap/lib/components/thick-ray.js\");\n\nObject.defineProperty(exports, \"ThickRay\", ({\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_thickRay).default;\n  }\n}));\n\nvar _mapListener = __webpack_require__(/*! ./components/map-listener */ \"./node_modules/react-bmap/lib/components/map-listener.js\");\n\nObject.defineProperty(exports, \"MapListener\", ({\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_mapListener).default;\n  }\n}));\n\nvar _autocomplete = __webpack_require__(/*! ./components/autocomplete */ \"./node_modules/react-bmap/lib/components/autocomplete.js\");\n\nObject.defineProperty(exports, \"Autocomplete\", ({\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_autocomplete).default;\n  }\n}));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/index.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/overlay/CustomOverlay.js":
/*!**************************************************************!*\
  !*** ./node_modules/react-bmap/lib/overlay/CustomOverlay.js ***!
  \**************************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__ */
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n// 自定义覆盖物\nfunction CustomOverlay(point, content, options) {\n    this.options = options || {};\n    this._point = point;\n    this.content = content;\n}\n\nCustomOverlay.prototype = new BMap.Overlay();\n\nCustomOverlay.prototype.initialize = function (map) {\n    this._map = map;\n    var div = this._div = document.createElement(\"div\");\n    div.setAttribute('tag', 'customoverlay');\n    div.style.position = \"absolute\";\n    var zIndex = this.options.zIndex || BMap.Overlay.getZIndex(this._point.lat);\n    div.style.zIndex = zIndex;\n    div.addEventListener('touchstart', function (e) {\n        e.stopPropagation();\n        console.log('touchstart');\n    });\n    /*\n    div.addEventListener('touchmove', function (e) {\n        e.stopPropagation();\n        console.log('touchmove');\n    });\n    */\n    div.addEventListener('touchend', function (e) {\n        e.stopPropagation();\n        console.log('touchend');\n    });\n    if (Object.prototype.toString.call(this.content) == \"[object String]\") {\n        div.innerHTML = this.content;\n    } else {\n        div.appendChild(this.content);\n    }\n    var pane = this.options.pane || 'labelPane';\n    map.getPanes()[pane].appendChild(div);\n    return div;\n};\n\nCustomOverlay.prototype.draw = function () {\n    var map = this._map;\n    var pixel = map.pointToOverlayPixel(this._point);\n    var offset = this.options.offset || new BMap.Size(0, 0);\n    this._div.style.left = pixel.x + offset.width + \"px\";\n    this._div.style.top = pixel.y + offset.height + \"px\";\n};\n\nexports.default = CustomOverlay;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/overlay/CustomOverlay.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/overlay/DraggingTip.js":
/*!************************************************************!*\
  !*** ./node_modules/react-bmap/lib/overlay/DraggingTip.js ***!
  \************************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar _Tip = __webpack_require__(/*! ./Tip.js */ \"./node_modules/react-bmap/lib/overlay/Tip.js\");\n\nvar _Tip2 = _interopRequireDefault(_Tip);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction DraggingTip(options) {\n    this.options = options;\n    var map = options.map;\n    var point = options.point;\n    this.point = point;\n    var name = options.name;\n\n    this.map = map;\n    var tip = this.tip = new _Tip2.default(options);\n    var icon = new BMap.Icon(\"//huiyan.baidu.com/github/tools/gis-drawing/static/images/drag.png\", new BMap.Size(25, 25), {\n        imageSize: new BMap.Size(25, 25)\n    });\n    var marker = this.marker = new BMap.Marker(this.point);\n    marker.setIcon(icon);\n    marker.setShadow(icon);\n    var self = this;\n    marker.addEventListener('dragging', function () {\n        self.point = marker.point;\n        tip.setPosition(marker.point);\n        options.change && options.change();\n    });\n    marker.addEventListener('dragend', function () {\n        options.changePosition && options.changePosition(self.point);\n    });\n    marker.enableDragging();\n}\n\nDraggingTip.prototype.show = function () {\n    this.map.addOverlay(this.marker);\n    this.map.addOverlay(this.tip);\n    if (this.options.isShowTipArrow === false) {\n        this.tip.hideArrow();\n    }\n};\n\nDraggingTip.prototype.hide = function () {\n    this.map.removeOverlay(this.marker);\n    this.map.removeOverlay(this.tip);\n};\n\nDraggingTip.prototype.setNumberLeft = function () {\n    this.tip.setNumberLeft();\n};\n\nDraggingTip.prototype.setNumberRight = function () {\n    this.tip.setNumberRight();\n};\n\nDraggingTip.prototype.hideNumber = function () {\n    this.tip.hideNumber();\n};\n\nexports.default = DraggingTip;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/overlay/DraggingTip.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/overlay/NumberMarker.js":
/*!*************************************************************!*\
  !*** ./node_modules/react-bmap/lib/overlay/NumberMarker.js ***!
  \*************************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__ */
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nfunction Overlay(options) {\n    this.options = options || {};\n    this._point = options.point;\n    this._fillColor = options.fillStyle || '#1495ff';\n    this._size = options.size || 30;\n    this._lineWidth = options.lineWidth === undefined ? 2 : options.lineWidth;\n    this._strokeStyle = options.strokeStyle || '#ffffff';\n    if (options.strokeOpacity) {\n        this._strokeStyle = colorRgb(this._strokeStyle, 0.4);\n    }\n}\n\nOverlay.prototype = new BMap.Overlay();\n\nOverlay.prototype.initialize = function (map) {\n    this._map = map;\n    var div = this._div = document.createElement(\"div\");\n    var style = div.style;\n    style.position = \"absolute\";\n    style.backgroundClip = 'padding-box';\n    style.zIndex = this.options.zIndex || BMap.Overlay.getZIndex(this._point.lat);\n    style.backgroundColor = this._fillColor;\n    if (this.options.isShowShadow !== false) {\n        style.boxShadow = '0 0 5px rgba(0, 0, 0, 0.5)';\n    }\n    style.border = this._lineWidth + \"px solid \" + this._strokeStyle;\n    style.color = \"white\";\n    style.textShadow = \"0px 0px 5px #fff\";\n    style.width = this._size + \"px\";\n    style.boxSizing = \"content-box\";\n    style.borderRadius = \"30px\";\n    style.height = this._size + \"px\";\n    style.lineHeight = this._size + \"px\";\n    style.fontSize = \"12px\";\n    style.cursor = \"pointer\";\n    style.textAlign = \"center\";\n    style.MozUserSelect = \"none\";\n    if (this.options.number && this.options.isShowNumber !== false) {\n        div.innerHTML = this.options.number;\n    }\n\n    var self = this;\n    div.addEventListener('mouseover', function () {\n        self.dispatchEvent('mouseover', self.options.number);\n        style.backgroundColor = '#1495ff';\n    });\n\n    div.addEventListener('mouseout', function () {\n        self.dispatchEvent('mouseout', self.options.number);\n        style.backgroundColor = self._fillColor;\n    });\n\n    div.addEventListener('click', function () {\n        self.dispatchEvent('click', self.options.number);\n    });\n\n    div.addEventListener('touchstart', function (e) {\n        e.stopPropagation();\n    });\n\n    div.addEventListener('touchmove', function (e) {\n        e.stopPropagation();\n    });\n\n    div.addEventListener('touchend', function (e) {\n        e.stopPropagation();\n    });\n\n    map.getPanes().markerPane.appendChild(div);\n\n    return div;\n};\n\nOverlay.prototype.draw = function () {\n    var map = this._map;\n    var pixel = map.pointToOverlayPixel(this._point);\n    this._div.style.left = pixel.x - (this._size + this._lineWidth) / 2 - 1 + \"px\";\n    this._div.style.top = pixel.y - (this._size + this._lineWidth) / 2 - 2 + \"px\";\n};\n\n/*16进制颜色转为RGB格式*/\nfunction colorRgb(color, opacity) {\n    var reg = /^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;\n    var sColor = color.toLowerCase();\n    if (sColor && reg.test(sColor)) {\n        if (sColor.length === 4) {\n            var sColorNew = \"#\";\n            for (var i = 1; i < 4; i += 1) {\n                sColorNew += sColor.slice(i, i + 1).concat(sColor.slice(i, i + 1));\n            }\n            sColor = sColorNew;\n        }\n        //处理六位的颜色值  \n        var sColorChange = [];\n        for (var i = 1; i < 7; i += 2) {\n            sColorChange.push(parseInt(\"0x\" + sColor.slice(i, i + 2)));\n        }\n        if (opacity) {\n            sColorChange.push(opacity);\n            return \"rgba(\" + sColorChange.join(\",\") + \")\";\n        } else {\n            return \"rgb(\" + sColorChange.join(\",\") + \")\";\n        }\n    } else {\n        return sColor;\n    }\n};\n\nexports.default = Overlay;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/overlay/NumberMarker.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/overlay/Tip.js":
/*!****************************************************!*\
  !*** ./node_modules/react-bmap/lib/overlay/Tip.js ***!
  \****************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__ */
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nvar positions = {\n    '#ee5d5b': '0 0',\n    '#ff9625': '0 -10px',\n    '#6caeca': '0 -20px'\n};\nvar borderColors = {\n    '#ee5d5b': '#BC3B3A',\n    '#ff9625': '#c57f1d',\n    '#6caeca': '#5188a5'\n};\n\nfunction Tip(options) {\n    options = options || {};\n    this._point = options.point;\n    this._text = options.name;\n    this._index = options.index;\n    this._numberDirection = options.numberDirection || 'left';\n    this._isShowNumber = options.isShowNumber !== undefined ? options.isShowNumber : true;\n    this.color = options.color || '#ee5d5b';\n}\n\nTip.prototype = new BMap.Overlay();\n\nTip.prototype.changeColor = function (color) {\n\n    if (this._div) {\n        this._div.style.backgroundColor = color;\n        this._div.style.borderColor = borderColors[color];\n        this._arrow.style.backgroundPosition = positions[color];\n    }\n};\n\nTip.prototype.initialize = function (map) {\n    this._map = map;\n    var div = this._div = document.createElement(\"div\");\n    div.style.position = \"absolute\";\n    div.style.zIndex = BMap.Overlay.getZIndex(this._point.lat);\n    div.style.backgroundColor = this.color;\n    div.style.border = \"1px solid \" + borderColors[this.color];\n    div.style.color = \"white\";\n    div.style.height = \"38px\";\n    div.style.boxSizing = 'border-box';\n    div.style.padding = \"5px\";\n    div.style.whiteSpace = \"nowrap\";\n    div.style.MozUserSelect = \"none\";\n    div.style.fontSize = \"18px\";\n\n    div.style.border = \"1px solid #a67972\";\n    div.style.color = \"#494947\";\n    div.style.background = \"#fff\";\n    div.style.borderRadius = '25px';\n    div.style.paddingLeft = '30px';\n\n    var span = this._span = document.createElement(\"span\");\n    div.appendChild(span);\n    span.appendChild(document.createTextNode(this._text));\n    var that = this;\n\n    var arrow = this._arrow = document.createElement(\"div\");\n    arrow.style.backgroundPosition = positions[this.color];\n    arrow.style.position = \"absolute\";\n    arrow.style.width = \"11px\";\n    arrow.style.height = \"10px\";\n    arrow.style.top = \"26px\";\n    arrow.style.left = \"10px\";\n    arrow.style.overflow = \"hidden\";\n    div.appendChild(arrow);\n\n    var number = this._number = document.createElement(\"div\");\n    number.style.background = this.color || \"#f15e5c\";\n    number.style.color = \"#fff\";\n    number.style.position = \"absolute\";\n    number.style.top = \"3px\";\n    number.style.position = \"absolute\";\n    number.style.textAlign = \"center\";\n    number.style.height = \"30px\";\n    number.style.width = \"30px\";\n    number.style.lineHeight = \"30px\";\n    number.style.borderRadius = \"30px\";\n\n    if (this._isShowNumber === false) {\n        number.style.display = 'none';\n    }\n\n    this.renderDirection();\n\n    number.innerHTML = this._index;\n    div.appendChild(number);\n\n    map.getPanes().labelPane.appendChild(div);\n\n    return div;\n};\n\nTip.prototype.setNumberLeft = function () {\n    this._numberDirection = 'left';\n    this.renderDirection();\n};\n\nTip.prototype.setNumberRight = function () {\n    this._numberDirection = 'right';\n    this.renderDirection();\n};\n\nTip.prototype.renderDirection = function () {\n    if (this._numberDirection == 'left') {\n        if (this._isShowNumber) {\n            this._div.style.paddingLeft = '38px';\n        } else {\n            this._div.style.paddingLeft = '8px';\n        }\n        this._div.style.paddingRight = '8px';\n        this._number.style.left = \"5px\";\n        this._number.style.right = \"initial\";\n    } else {\n        this._div.style.paddingLeft = '8px';\n        if (this._isShowNumber) {\n            this._div.style.paddingRight = '38px';\n        } else {\n            this._div.style.paddingRight = '8px';\n        }\n        this._number.style.left = \"initial\";\n        this._number.style.right = \"5px\";\n    }\n};\n\nTip.prototype.hideNumber = function () {\n    this._isShowNumber = false;\n    this._number.style.display = \"none\";\n    this.renderDirection();\n};\n\nTip.prototype.setPosition = function (point) {\n    this._point = point;\n    this.draw();\n};\n\nTip.prototype.hideArrow = function () {\n    this._arrow.style.display = 'none';\n};\n\nTip.prototype.draw = function () {\n    var map = this._map;\n    this._span.innerHTML = this._text;\n    var pixel = map.pointToOverlayPixel(this._point);\n    this._div.style.left = pixel.x + 5 + \"px\";\n    this._div.style.top = pixel.y - 20 + \"px\";\n};\n\nexports.default = Tip;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/overlay/Tip.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/utils/common.js":
/*!*****************************************************!*\
  !*** ./node_modules/react-bmap/lib/utils/common.js ***!
  \*****************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export isString [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__ */
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\n\n/**\n * 判断是否为字符串\n * @param {String} 判断对象\n * @return {Boolean}\n */\nvar isString = exports.isString = function isString(str) {\n  return Object.prototype.toString.call(str) === \"[object String]\";\n};\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/utils/common.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/utils/geo-utils.js":
/*!********************************************************!*\
  !*** ./node_modules/react-bmap/lib/utils/geo-utils.js ***!
  \********************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__ */
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar App = {\n    mergeRoadPath: function mergeRoadPath(roadPath, options) {\n        var newRoadPath = [];\n        for (var i = 0; i < roadPath.length; i++) {\n            if (newRoadPath.length == 0) {\n                newRoadPath.push(roadPath[i]);\n            } else {\n                var item = roadPath[i].split(',');\n                var last = newRoadPath[newRoadPath.length - 1].split(',');\n                if (item[0] === last[last.length - 2] && item[1] === last[last.length - 1]) {\n                    var add = item.slice(2);\n                    newRoadPath[newRoadPath.length - 1] += ',' + add.join(',');\n                } else {\n                    newRoadPath.push(roadPath[i]);\n                }\n            }\n        }\n\n        // 点去重、性能有问题、先临时去掉\n        // newRoadPath = this.uniqueRoadPath(newRoadPath);\n\n        return newRoadPath;\n    },\n    uniqueRoadPath: function uniqueRoadPath(roadPath) {\n        var newRoadPath = [];\n        for (var i = 0; i < roadPath.length - 1; i++) {\n            if (!roadPath[i]) {\n                continue;\n            }\n            var ref = roadPath[i].split(',');\n            for (var j = i + 1; j < roadPath.length; j++) {\n                if (roadPath[j]) {\n                    var line = roadPath[j].split(',');\n                    var flag = true;\n                    for (var z = 0; z < line.length; z += 2) {\n                        var tmp = this.isPointOnPolyline({\n                            lng: line[z],\n                            lat: line[z + 1]\n                        }, ref);\n                        if (tmp == false) {\n                            flag = false;\n                        } else {}\n                    }\n                    if (flag) {\n                        delete roadPath[j];\n                    }\n                }\n            }\n        }\n        return roadPath;\n    },\n\n\n    /**\n     * 判断点是否在折线上\n     * @param {Point} point 点对象\n     * @param {Polyline} polyline 折线对象\n     * @returns {Boolean} 点在折线上返回true,否则返回false\n     */\n    isPointOnPolyline: function isPointOnPolyline(point, polyline) {\n\n        //todo首先判断点是否在线的外包矩形内，如果在，则进一步判断，否则返回false\n\n        //判断点是否在线段上，设点为Q，线段为P1P2 ，\n        //判断点Q在该线段上的依据是：( Q - P1 ) × ( P2 - P1 ) = 0，且 Q 在以 P1，P2为对角顶点的矩形内\n        var pts = polyline;\n        for (var i = 0; i < pts.length - 2; i++) {\n\n            var curPt = {\n                lng: pts[i],\n                lat: pts[i + 1]\n            };\n\n            var nextPt = {\n                lng: pts[i + 2],\n                lat: pts[i + 3]\n\n                //首先判断point是否在curPt和nextPt之间，即：此判断该点是否在该线段的外包矩形内\n            };if (point.lng >= Math.min(curPt.lng, nextPt.lng) && point.lng <= Math.max(curPt.lng, nextPt.lng) && point.lat >= Math.min(curPt.lat, nextPt.lat) && point.lat <= Math.max(curPt.lat, nextPt.lat)) {\n                //判断点是否在直线上公式\n                var precision = (curPt.lng - point.lng) * (nextPt.lat - point.lat) - (nextPt.lng - point.lng) * (curPt.lat - point.lat);\n                var diff = 2e-10;\n                diff = 2e-9;\n                if (precision < diff && precision > -diff) {\n                    //实质判断是否接近0\n                    return true;\n                }\n            }\n        }\n\n        return false;\n    }\n};\n\nexports.default = App;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/utils/geo-utils.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/utils/map-line.js":
/*!*******************************************************!*\
  !*** ./node_modules/react-bmap/lib/utils/map-line.js ***!
  \*******************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__ */
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n/**\n * @file\n */\n\n/* global map BMap */\n\nvar roadColor = {\n    0: '#fff',\n    1: '#00dc35',\n    2: '#f3e032',\n    3: '#ff6c6c',\n    4: '#900000'\n};\n\nvar mapLine = {\n    /**\n     * roads [\"116,40,117,59\",\"116,40,117,59\",...]\n     */\n    drawRoads: function drawRoads(map, ctx, roads) {\n        var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n        var zoom = map.getZoom();\n        var lineWidth = options.lineWidth || 5;\n        var level = options.level === undefined ? 1 : options.level;\n        var pointTem = null;\n        var dep = 0;\n        var lineTotalDepth = 0;\n\n        // arrow info\n        var points = [];\n        var allPoints = [];\n        var arrowPoint = [];\n        var arrpwTotalDepth = 0;\n        var totalDepth = 0;\n        //\n\n        ctx.beginPath();\n        var pixel;\n\n        var zoomUnit = Math.pow(2, 18 - map.getZoom());\n        var projection = map.getMapType().getProjection();\n        var mcCenter = projection.lngLatToPoint(map.getCenter());\n        var nwMc = new BMap.Pixel(mcCenter.x - map.getSize().width / 2 * zoomUnit, mcCenter.y + map.getSize().height / 2 * zoomUnit); //左上角墨卡托坐标\n\n        roads.forEach(function (item, index) {\n            var startPos = null;\n            pointTem = null;\n            var path = item.split(',');\n            for (var k = 0; k < path.length; k += 2) {\n                var point = new BMap.Point(path[k], path[k + 1]);\n                allPoints.push(point);\n                if (options.coordType === 'bd09mc') {\n                    pixel = {\n                        x: (point.lng - nwMc.x) / zoomUnit,\n                        y: (nwMc.y - point.lat) / zoomUnit\n                    };\n                } else {\n                    pixel = map.pointToPixel(point);\n                }\n                var arrowInfo = void 0;\n                if (pointTem) {\n                    var deltaX = pixel.x - pointTem.x;\n                    var deltaY = pixel.y - pointTem.y;\n                    dep = Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n                    lineTotalDepth += dep;\n                    // arrow\n                    if (options.arrow) {\n                        arrpwTotalDepth += dep;\n                        totalDepth += dep;\n                        arrowInfo = {\n                            start: pointTem,\n                            end: pixel,\n                            offset: 50 - (arrpwTotalDepth - dep),\n                            depth: dep,\n                            totalDepth: totalDepth\n                        };\n                        points.push(arrowInfo);\n                        if (arrpwTotalDepth >= 50) {\n                            arrowPoint.push(arrowInfo);\n                            arrpwTotalDepth %= 50;\n                        }\n                    }\n                    //\n                }\n\n                pointTem = pixel;\n                // console.log(pixel, k)\n                if (k === 0) {\n                    startPos = startPos || pixel;\n                    ctx.moveTo(pixel.x, pixel.y);\n                } else if (lineTotalDepth > 15 || k >= path.length - 2) {\n                    lineTotalDepth = 0;\n                    ctx.lineTo(pixel.x, pixel.y);\n                }\n            }\n\n            // for arrow\n            // if the line is too short\n            if (options.arrow) {\n                if (index === item.length - 1 && totalDepth < 100) {\n                    var center = points[Math.ceil(points.length / 2)];\n                    for (var i in points) {\n                        if (points[i].totalDepth >= totalDepth / 2) {\n                            center = points[i + 1] ? points[i + 1] : points[i];\n                            break;\n                        }\n                    }\n                    var end = points[points.length - 1];\n                    center.end = end.end;\n                    arrowPoint = [];\n                    arrowPoint.push(center);\n                }\n            }\n        });\n\n        if (options.line) {\n            ctx.lineCap = options.lineCap || 'round';\n            ctx.lineJoin = 'round';\n            if (options.border) {\n                ctx.strokeStyle = options.border.color || 'white';\n                ctx.lineWidth = (zoom <= 13 ? lineWidth - 2 : lineWidth) + (options.border.lineWidth * 2 || 4);\n                ctx.stroke();\n            }\n\n            ctx.strokeStyle = options.color || roadColor[level] || '#fc2c2b';\n            ctx.lineWidth = zoom <= 13 ? lineWidth - 2 : lineWidth;\n            // console.log(ctx);\n            ctx.stroke();\n        }\n\n        //\n        if (options.arrow) {\n            //if (zoom > 13) {\n            this.drawArrow(ctx, arrowPoint, options);\n            //}\n        }\n        return allPoints;\n    },\n    drawArrow: function drawArrow(ctx, arrowPoint, options) {\n        // draw active arrow\n        ctx.beginPath();\n        arrowPoint.forEach(function (item) {\n            var startX = item.start.x;\n            var startY = item.start.y;\n            var endX = item.end.x;\n            var endY = item.end.y;\n            var depthX = endX - startX;\n            var depthY = endY - startY;\n\n            var vOrigin = [0, -1];\n            var vItem = [item.end.x - item.start.x, item.end.y - item.start.y];\n            var angleVar1 = vOrigin[0] * vItem[0] + vOrigin[1] * vItem[1];\n            var angleVar2 = Math.sqrt(vOrigin[0] * vOrigin[0] + vOrigin[1] * vOrigin[1]);\n            var angleVar3 = Math.sqrt(vItem[0] * vItem[0] + vItem[1] * vItem[1]);\n            var angle = Math.acos(angleVar1 / (angleVar2 * angleVar3));\n\n            if (vItem[0] < 0) {\n                angle = Math.PI * 2 - angle;\n            }\n\n            var width = options.arrow.width / 2 || 2;\n            var height = options.arrow.height || width;\n            var loop = 0;\n            while (item.offset + 50 * loop <= item.depth) {\n                var offset = item.offset + 50 * loop;\n                var offsetPresent = offset / item.depth;\n                ctx.save();\n                ctx.translate(startX + depthX * offsetPresent, startY + depthY * offsetPresent);\n                ctx.rotate(angle);\n                ctx.moveTo(-width * 1.618, height);\n                ctx.lineTo(0, 0);\n                ctx.lineTo(width * 1.618, height);\n                ctx.restore();\n                loop += 1;\n            }\n            if (arrowPoint.length === 1 && item.offset > item.depth) {\n                ctx.save();\n                ctx.translate(startX, startY);\n                ctx.rotate(angle);\n                ctx.moveTo(-width * 1.618, height);\n                ctx.lineTo(0, 0);\n                ctx.lineTo(width * 1.618, height);\n                ctx.restore();\n            }\n        });\n        ctx.strokeStyle = options.arrow.color || '#fff';\n        ctx.lineWidth = 3;\n        ctx.stroke();\n    }\n};\n\nexports.default = mapLine;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/utils/map-line.js?");

/***/ }),

/***/ "./node_modules/react-bmap/lib/utils/merge.js":
/*!****************************************************!*\
  !*** ./node_modules/react-bmap/lib/utils/merge.js ***!
  \****************************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__ */
/***/ ((__unused_webpack_module, exports) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar App = {\n    mergeRoadPath: function mergeRoadPath(roadPath, options) {\n        if (!roadPath) {\n            return;\n        }\n        var newRoadPath = [];\n        for (var i = 0; i < roadPath.length; i++) {\n            if (newRoadPath.length == 0) {\n                newRoadPath.push(roadPath[i]);\n            } else {\n                var item = roadPath[i].split(',');\n                var isAdd = false;\n                for (var j = 0; j < newRoadPath.length; j++) {\n                    var last = newRoadPath[j].split(',');\n                    if (item[0] === last[last.length - 2] && item[1] === last[last.length - 1]) {\n                        var add = item.slice(2);\n                        newRoadPath[j] += ',' + add.join(',');\n                        isAdd = true;\n                    }\n\n                    if (item[item.length - 2] === last[0] && item[item.length - 1] === last[1]) {\n                        var add = item.slice(0, item.length - 2);\n                        newRoadPath[j] = add.join(',') + ',' + newRoadPath[j];\n                        isAdd = true;\n                    }\n                }\n                if (isAdd === false) {\n                    newRoadPath.push(roadPath[i]);\n                }\n            }\n        }\n\n        newRoadPath = this.uniqueRoadPath(newRoadPath);\n\n        return newRoadPath;\n    },\n    uniqueRoadPath: function uniqueRoadPath(roadPath) {\n        var tmpRoadPath = roadPath.map(function (line) {\n            return new Polyline(line.split(','));\n        });\n\n        for (var i = 0; i < tmpRoadPath.length - 1; i++) {\n            if (!tmpRoadPath[i]) {\n                continue;\n            }\n            var ref = tmpRoadPath[i];\n            for (var j = i + 1; j < tmpRoadPath.length; j++) {\n                if (tmpRoadPath[j]) {\n                    var line = tmpRoadPath[j];\n                    if (line.isInclude(ref)) {\n                        delete tmpRoadPath[j];\n                    }\n                }\n            }\n        }\n\n        var newRoadPath = [];\n        tmpRoadPath.map(function (line) {\n            if (line) {\n                newRoadPath.push(line.getPoints().join(','));\n            }\n        });\n\n        return newRoadPath;\n    }\n};\n\nfunction Polyline(pts) {\n    this.polyline = pts;\n\n    var minX = pts[0];\n    var maxX = pts[0];\n    var minY = pts[1];\n    var maxY = pts[1];\n\n    for (var i = 2; i < pts.length; i += 2) {\n        minX = Math.min(minX, pts[i]);\n        maxX = Math.max(maxX, pts[i]);\n        minY = Math.min(minY, pts[i + 1]);\n        maxY = Math.max(maxY, pts[i + 1]);\n    }\n\n    this.minX = minX;\n    this.maxX = maxX;\n    this.minY = minY;\n    this.maxY = maxY;\n}\n\nPolyline.prototype.getPoints = function () {\n    return this.polyline;\n};\n\nPolyline.prototype.isInBound = function (point) {\n    if (point.lng > this.minX && point.lat > this.minY && point.lng < this.maxX && point.lat < this.maxY) {\n        return true;\n    } else {\n        return false;\n    }\n};\n\nPolyline.prototype.isInclude = function (polyline) {\n    if (!(polyline.minX > this.minX && polyline.minY > this.minY && polyline.maxX < this.maxX && polyline.maxY < this.maxY)) {\n        return false;\n    }\n\n    var line = this.getPoints();\n\n    var flag = true;\n    for (var z = 0; z < line.length; z += 2) {\n        var tmp = this.isPointOnPolyline({\n            lng: line[z],\n            lat: line[z + 1]\n        }, polyline);\n\n        if (tmp == false) {\n            flag = false;\n        }\n    }\n\n    return flag;\n};\n\n/**\n * 判断点是否在折线上\n * @param {Point} point 点对象\n * @param {Polyline} polyline 折线对象\n * @returns {Boolean} 点在折线上返回true,否则返回false\n */\nPolyline.prototype.isPointOnPolyline = function (point, polyline) {\n    var pts = polyline.getPoints();\n\n    if (!polyline.isInBound(point)) {\n        return false;\n    }\n\n    //判断点是否在线段上，设点为Q，线段为P1P2 ，\n    //判断点Q在该线段上的依据是：( Q - P1 ) × ( P2 - P1 ) = 0，且 Q 在以 P1，P2为对角顶点的矩形内\n    for (var i = 0; i < pts.length - 2; i++) {\n\n        var curPt = {\n            lng: pts[i],\n            lat: pts[i + 1]\n        };\n\n        var nextPt = {\n            lng: pts[i + 2],\n            lat: pts[i + 3]\n\n            //首先判断point是否在curPt和nextPt之间，即：此判断该点是否在该线段的外包矩形内\n        };if (point.lng >= Math.min(curPt.lng, nextPt.lng) && point.lng <= Math.max(curPt.lng, nextPt.lng) && point.lat >= Math.min(curPt.lat, nextPt.lat) && point.lat <= Math.max(curPt.lat, nextPt.lat)) {\n            //判断点是否在直线上公式\n            var precision = (curPt.lng - point.lng) * (nextPt.lat - point.lat) - (nextPt.lng - point.lng) * (curPt.lat - point.lat);\n            var diff = 2e-10;\n            diff = 2e-9;\n            if (precision < diff && precision > -diff) {\n                //实质判断是否接近0\n                return true;\n            }\n        }\n    }\n\n    return false;\n};\n\nexports.default = App;\n\n//# sourceURL=webpack://yd-react-generator/./node_modules/react-bmap/lib/utils/merge.js?");

/***/ })

}]);